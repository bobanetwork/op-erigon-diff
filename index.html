<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>Boba Network op-erigon</title>

    <link rel="icon" type="image/x-icon" href="">

    <style>
        .line-stat {
            width: 14rem;
            float: right;
        }
        .line-stat div {
            width: 50%;
        }
    </style>

    
<style>
    .term-container {
        background: #171717;
        border-radius: 5px;
        color: white;
        word-break: break-word;
        overflow-wrap: break-word;
        font-family: "SFMono-Regular", Monaco, Menlo, Consolas, "Liberation Mono", Courier, monospace;
        font-size: 12px;
        line-height: 20px;
        padding: 14px 18px;
        white-space: pre-wrap;
    }

    .term-container img { max-width: 100%; }

    .term a { color: inherit; text-decoration: underline; text-decoration-style: dashed; }
    .term a:hover { color: #2882F9 }

    @keyframes blink-animation {
        to {
            visibility: hidden;
        }
    }

    .term-fg1 { } /* don't bold beccause it looks weird */
    .term-fg2 { color: #838887; } /* faint (decreased intensity) - same as gray really */
    .term-fg3 { font-style: italic; } /* italic */
    .term-fg4 { text-decoration: underline; } /* underline */
    .term-fg5 { animation: blink-animation 1s steps(3, start) infinite; } /* blink */
    .term-fg9 { text-decoration: line-through; } /* crossed-out */

    .term-fg30 { color: #666666; } /* black (but we can't use black, so a diff color) */
    .term-fg31 { color: #ff7070; } /* red */
    .term-fg32 { color: #b0f986; } /* green */
    .term-fg33 { color: #c6c502; } /* yellow */
    .term-fg34 { color: #8db7e0; } /* blue */
    .term-fg35 { color: #f271fb; } /* magenta */
    .term-fg36 { color: #6bf7ff; } /* cyan */

    /* high intense colors */
    .term-fgi1 { color: #5ef765; }
    .term-fgi90 { color: #838887; } /* grey */
    .term-fgi91 { color: #ff3333; } /* red */
    .term-fgi92 { color: #00FF00; } /* green */
    .term-fgi93 { color: #fffc67; } /* yellow */
    .term-fgi94 { color: #6871ff; } /* blue */
    .term-fgi95 { color: #ff76ff; } /* magenta */
    .term-fgi96 { color: #60fcff; } /* cyan */

    /* background colors */
    .term-bg40 { background: #676767; } /* grey */
    .term-bg41 { background: #ff4343; } /* red */
    .term-bg42 { background: #99ff5f; } /* green */

    /* custom foreground/background combos for readability */
    .term-fg31.term-bg40 { color: #F8A39F; }

    /* xterm colors */
    .term-fgx16 { color: #000000; }
    .term-fgx17 { color: #00005f; }
    .term-fgx18 { color: #000087; }
    .term-fgx19 { color: #0000af; }
    .term-fgx20 { color: #0000d7; }
    .term-fgx21 { color: #0000ff; }
    .term-fgx22 { color: #005f00; }
    .term-fgx23 { color: #005f5f; }
    .term-fgx24 { color: #005f87; }
    .term-fgx25 { color: #005faf; }
    .term-fgx26 { color: #005fd7; }
    .term-fgx27 { color: #005fff; }
    .term-fgx28 { color: #008700; }
    .term-fgx29 { color: #00875f; }
    .term-fgx30 { color: #008787; }
    .term-fgx31 { color: #0087af; }
    .term-fgx32 { color: #0087d7; }
    .term-fgx33 { color: #0087ff; }
    .term-fgx34 { color: #00af00; }
    .term-fgx35 { color: #00af5f; }
    .term-fgx36 { color: #00af87; }
    .term-fgx37 { color: #00afaf; }
    .term-fgx38 { color: #00afd7; }
    .term-fgx39 { color: #00afff; }
    .term-fgx40 { color: #00d700; }
    .term-fgx41 { color: #00d75f; }
    .term-fgx42 { color: #00d787; }
    .term-fgx43 { color: #00d7af; }
    .term-fgx44 { color: #00d7d7; }
    .term-fgx45 { color: #00d7ff; }
    .term-fgx46 { color: #00ff00; }
    .term-fgx47 { color: #00ff5f; }
    .term-fgx48 { color: #00ff87; }
    .term-fgx49 { color: #00ffaf; }
    .term-fgx50 { color: #00ffd7; }
    .term-fgx51 { color: #00ffff; }
    .term-fgx52 { color: #5f0000; }
    .term-fgx53 { color: #5f005f; }
    .term-fgx54 { color: #5f0087; }
    .term-fgx55 { color: #5f00af; }
    .term-fgx56 { color: #5f00d7; }
    .term-fgx57 { color: #5f00ff; }
    .term-fgx58 { color: #5f5f00; }
    .term-fgx59 { color: #5f5f5f; }
    .term-fgx60 { color: #5f5f87; }
    .term-fgx61 { color: #5f5faf; }
    .term-fgx62 { color: #5f5fd7; }
    .term-fgx63 { color: #5f5fff; }
    .term-fgx64 { color: #5f8700; }
    .term-fgx65 { color: #5f875f; }
    .term-fgx66 { color: #5f8787; }
    .term-fgx67 { color: #5f87af; }
    .term-fgx68 { color: #5f87d7; }
    .term-fgx69 { color: #5f87ff; }
    .term-fgx70 { color: #5faf00; }
    .term-fgx71 { color: #5faf5f; }
    .term-fgx72 { color: #5faf87; }
    .term-fgx73 { color: #5fafaf; }
    .term-fgx74 { color: #5fafd7; }
    .term-fgx75 { color: #5fafff; }
    .term-fgx76 { color: #5fd700; }
    .term-fgx77 { color: #5fd75f; }
    .term-fgx78 { color: #5fd787; }
    .term-fgx79 { color: #5fd7af; }
    .term-fgx80 { color: #5fd7d7; }
    .term-fgx81 { color: #5fd7ff; }
    .term-fgx82 { color: #5fff00; }
    .term-fgx83 { color: #5fff5f; }
    .term-fgx84 { color: #5fff87; }
    .term-fgx85 { color: #5fffaf; }
    .term-fgx86 { color: #5fffd7; }
    .term-fgx87 { color: #5fffff; }
    .term-fgx88 { color: #870000; }
    .term-fgx89 { color: #87005f; }
    .term-fgx90 { color: #870087; }
    .term-fgx91 { color: #8700af; }
    .term-fgx92 { color: #8700d7; }
    .term-fgx93 { color: #8700ff; }
    .term-fgx94 { color: #875f00; }
    .term-fgx95 { color: #875f5f; }
    .term-fgx96 { color: #875f87; }
    .term-fgx97 { color: #875faf; }
    .term-fgx98 { color: #875fd7; }
    .term-fgx99 { color: #875fff; }
    .term-fgx100 { color: #878700; }
    .term-fgx101 { color: #87875f; }
    .term-fgx102 { color: #878787; }
    .term-fgx103 { color: #8787af; }
    .term-fgx104 { color: #8787d7; }
    .term-fgx105 { color: #8787ff; }
    .term-fgx106 { color: #87af00; }
    .term-fgx107 { color: #87af5f; }
    .term-fgx108 { color: #87af87; }
    .term-fgx109 { color: #87afaf; }
    .term-fgx110 { color: #87afd7; }
    .term-fgx111 { color: #87afff; }
    .term-fgx112 { color: #87d700; }
    .term-fgx113 { color: #87d75f; }
    .term-fgx114 { color: #87d787; }
    .term-fgx115 { color: #87d7af; }
    .term-fgx116 { color: #87d7d7; }
    .term-fgx117 { color: #87d7ff; }
    .term-fgx118 { color: #87ff00; }
    .term-fgx119 { color: #87ff5f; }
    .term-fgx120 { color: #87ff87; }
    .term-fgx121 { color: #87ffaf; }
    .term-fgx122 { color: #87ffd7; }
    .term-fgx123 { color: #87ffff; }
    .term-fgx124 { color: #af0000; }
    .term-fgx125 { color: #af005f; }
    .term-fgx126 { color: #af0087; }
    .term-fgx127 { color: #af00af; }
    .term-fgx128 { color: #af00d7; }
    .term-fgx129 { color: #af00ff; }
    .term-fgx130 { color: #af5f00; }
    .term-fgx131 { color: #af5f5f; }
    .term-fgx132 { color: #af5f87; }
    .term-fgx133 { color: #af5faf; }
    .term-fgx134 { color: #af5fd7; }
    .term-fgx135 { color: #af5fff; }
    .term-fgx136 { color: #af8700; }
    .term-fgx137 { color: #af875f; }
    .term-fgx138 { color: #af8787; }
    .term-fgx139 { color: #af87af; }
    .term-fgx140 { color: #af87d7; }
    .term-fgx141 { color: #af87ff; }
    .term-fgx142 { color: #afaf00; }
    .term-fgx143 { color: #afaf5f; }
    .term-fgx144 { color: #afaf87; }
    .term-fgx145 { color: #afafaf; }
    .term-fgx146 { color: #afafd7; }
    .term-fgx147 { color: #afafff; }
    .term-fgx148 { color: #afd700; }
    .term-fgx149 { color: #afd75f; }
    .term-fgx150 { color: #afd787; }
    .term-fgx151 { color: #afd7af; }
    .term-fgx152 { color: #afd7d7; }
    .term-fgx153 { color: #afd7ff; }
    .term-fgx154 { color: #afff00; }
    .term-fgx155 { color: #afff5f; }
    .term-fgx156 { color: #afff87; }
    .term-fgx157 { color: #afffaf; }
    .term-fgx158 { color: #afffd7; }
    .term-fgx159 { color: #afffff; }
    .term-fgx160 { color: #d70000; }
    .term-fgx161 { color: #d7005f; }
    .term-fgx162 { color: #d70087; }
    .term-fgx163 { color: #d700af; }
    .term-fgx164 { color: #d700d7; }
    .term-fgx165 { color: #d700ff; }
    .term-fgx166 { color: #d75f00; }
    .term-fgx167 { color: #d75f5f; }
    .term-fgx168 { color: #d75f87; }
    .term-fgx169 { color: #d75faf; }
    .term-fgx170 { color: #d75fd7; }
    .term-fgx171 { color: #d75fff; }
    .term-fgx172 { color: #d78700; }
    .term-fgx173 { color: #d7875f; }
    .term-fgx174 { color: #d78787; }
    .term-fgx175 { color: #d787af; }
    .term-fgx176 { color: #d787d7; }
    .term-fgx177 { color: #d787ff; }
    .term-fgx178 { color: #d7af00; }
    .term-fgx179 { color: #d7af5f; }
    .term-fgx180 { color: #d7af87; }
    .term-fgx181 { color: #d7afaf; }
    .term-fgx182 { color: #d7afd7; }
    .term-fgx183 { color: #d7afff; }
    .term-fgx184 { color: #d7d700; }
    .term-fgx185 { color: #d7d75f; }
    .term-fgx186 { color: #d7d787; }
    .term-fgx187 { color: #d7d7af; }
    .term-fgx188 { color: #d7d7d7; }
    .term-fgx189 { color: #d7d7ff; }
    .term-fgx190 { color: #d7ff00; }
    .term-fgx191 { color: #d7ff5f; }
    .term-fgx192 { color: #d7ff87; }
    .term-fgx193 { color: #d7ffaf; }
    .term-fgx194 { color: #d7ffd7; }
    .term-fgx195 { color: #d7ffff; }
    .term-fgx196 { color: #ff0000; }
    .term-fgx197 { color: #ff005f; }
    .term-fgx198 { color: #ff0087; }
    .term-fgx199 { color: #ff00af; }
    .term-fgx200 { color: #ff00d7; }
    .term-fgx201 { color: #ff00ff; }
    .term-fgx202 { color: #ff5f00; }
    .term-fgx203 { color: #ff5f5f; }
    .term-fgx204 { color: #ff5f87; }
    .term-fgx205 { color: #ff5faf; }
    .term-fgx206 { color: #ff5fd7; }
    .term-fgx207 { color: #ff5fff; }
    .term-fgx208 { color: #ff8700; }
    .term-fgx209 { color: #ff875f; }
    .term-fgx210 { color: #ff8787; }
    .term-fgx211 { color: #ff87af; }
    .term-fgx212 { color: #ff87d7; }
    .term-fgx213 { color: #ff87ff; }
    .term-fgx214 { color: #ffaf00; }
    .term-fgx215 { color: #ffaf5f; }
    .term-fgx216 { color: #ffaf87; }
    .term-fgx217 { color: #ffafaf; }
    .term-fgx218 { color: #ffafd7; }
    .term-fgx219 { color: #ffafff; }
    .term-fgx220 { color: #ffd700; }
    .term-fgx221 { color: #ffd75f; }
    .term-fgx222 { color: #ffd787; }
    .term-fgx223 { color: #ffd7af; }
    .term-fgx224 { color: #ffd7d7; }
    .term-fgx225 { color: #ffd7ff; }
    .term-fgx226 { color: #ffff00; }
    .term-fgx227 { color: #ffff5f; }
    .term-fgx228 { color: #ffff87; }
    .term-fgx229 { color: #ffffaf; }
    .term-fgx230 { color: #ffffd7; }
    .term-fgx231 { color: #ffffff; }
    .term-fgx232 { color: #080808; }
    .term-fgx233 { color: #121212; }
    .term-fgx234 { color: #1c1c1c; }
    .term-fgx235 { color: #262626; }
    .term-fgx236 { color: #303030; }
    .term-fgx237 { color: #3a3a3a; }
    .term-fgx238 { color: #444444; }
    .term-fgx239 { color: #4e4e4e; }
    .term-fgx240 { color: #585858; }
    .term-fgx241 { color: #626262; }
    .term-fgx242 { color: #6c6c6c; }
    .term-fgx243 { color: #767676; }
    .term-fgx244 { color: #808080; }
    .term-fgx245 { color: #8a8a8a; }
    .term-fgx246 { color: #949494; }
    .term-fgx247 { color: #9e9e9e; }
    .term-fgx248 { color: #a8a8a8; }
    .term-fgx249 { color: #b2b2b2; }
    .term-fgx250 { color: #bcbcbc; }
    .term-fgx251 { color: #c6c6c6; }
    .term-fgx252 { color: #d0d0d0; }
    .term-fgx253 { color: #dadada; }
    .term-fgx254 { color: #e4e4e4; }
    .term-fgx255 { color: #eeeeee; }
</style>

</head>
<body>
    <div class="col-xl-10 col-xxl-8 mx-auto px-3 py-1 py-md-3">
        <main class="container-fluid">
            <div class="row">
                <div>
                    <div class="float-end">
                        <div class="form-check form-switch">
                            <i class="bi bi-brightness-low" id="dark-mode-icon"></i>
                            <input class="form-check-input" type="checkbox" role="switch" id="dark-mode-toggle" data-bs-toggle="tooltip"
                                   data-bs-placement="bottom" data-bs-title="Toggle Dark Mode"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"role="button" aria-expanded="true" aria-controls="id-7902c3fcf88ca17a47ff6f9e">
        
            <div class="col-12 col-sm-9 text-start"><h1>op-erigon</h1></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+4798</span></div>
                <div class="text-start"><span class="text-danger">-1210</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse show border-1 ps-3 my-3" id="id-7902c3fcf88ca17a47ff6f9e">
        <div><p>This is an overview of the changes in <a href="https://github.com/bobanetwork/v3-erigon">op-erigon</a>, a fork of <a href="https://github.com/ledgerwatch/erigon">erigon</a>, part of the Boba Network OP Stack.</p>

<p>There is one more fork of erigon dependencies:</p>

<ul>
<li><a href="./erigon-interfaces.html">op-erigon-interfaces</a></li>
</ul>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-5ad64a4418ec64eb60b0f743"role="button" aria-expanded="false" aria-controls="id-5ad64a4418ec64eb60b0f743">
        
            <div class="col-12 col-sm-9 text-start"><h2>Core modifications</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+978</span></div>
                <div class="text-start"><span class="text-danger">-77</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-5ad64a4418ec64eb60b0f743">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-eff4f8d57c5ab4b8d8811b35"role="button" aria-expanded="false" aria-controls="id-eff4f8d57c5ab4b8d8811b35">
        
            <div class="col-12 col-sm-9 text-start"><h3>State-transition modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+904</span></div>
                <div class="text-start"><span class="text-danger">-72</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-eff4f8d57c5ab4b8d8811b35">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-621c632943b75b754ade6dbb"role="button" aria-expanded="false" aria-controls="id-621c632943b75b754ade6dbb">
        
            <div class="col-12 col-sm-9 text-start"><h4>Deposit transaction type</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+476</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-621c632943b75b754ade6dbb">
        <div><p>The Bedrock upgrade introduces a Deposit transaction-type (0x7E) to enable both users and the rollup system itself to change the L2 state based on L1 events and system rules as <a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/deposits.md">specified</a>.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-253819877858022acd2c4928" role="button"
                   aria-expanded="false" aria-controls="id-253819877858022acd2c4928">
                    <code>core/types/deposit_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/deposit_tx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+385</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-253819877858022acd2c4928"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;deposit_tx.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;deposit_tx.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..07c27c84786cd60e1ebb9a691da0b656f2ca10da</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;deposit_tx.go</span>
<span class="term-fg36">@@ -0,0 +1,385 @@</span>
<span class="term-fg32">+&#47;&#47; Portions copyright 2022-2023 mmontour@enya.ai based on legacy_tx.go (original copyright below)</span>
<span class="term-fg32">+&#47;&#47; This file adds support for the Optimistic Rollup deposit transaction type</span>
<span class="term-fg32">+&#47;&#47; as specified at https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;deposits.md</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Copyright 2020 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;io&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	types2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DepositTransaction is the transaction data of an Optimism Deposit Transaction</span>
<span class="term-fg32">+type DepositTransaction struct {</span>
<span class="term-fg32">+	TransactionMisc</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	SourceHash *libcommon.Hash</span>
<span class="term-fg32">+	From       *libcommon.Address</span>
<span class="term-fg32">+	To         *libcommon.Address</span>
<span class="term-fg32">+	Mint       *uint256.Int</span>
<span class="term-fg32">+	Value      *uint256.Int</span>
<span class="term-fg32">+	GasLimit   uint64</span>
<span class="term-fg32">+	IsSystemTx bool</span>
<span class="term-fg32">+	Data       []byte</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) GetBlobGas() uint64      { return 0 } &#47;&#47; FIXME - do we need this?</span>
<span class="term-fg32">+func (tx DepositTransaction) GetGas() uint64          { return tx.GasLimit }</span>
<span class="term-fg32">+func (tx DepositTransaction) GetPrice() *uint256.Int  { return uint256.NewInt(0) }</span>
<span class="term-fg32">+func (tx DepositTransaction) GetTip() *uint256.Int    { return uint256.NewInt(0) }</span>
<span class="term-fg32">+func (tx DepositTransaction) GetFeeCap() *uint256.Int { return uint256.NewInt(0) }</span>
<span class="term-fg32">+func (tx DepositTransaction) GetNonce() uint64        { return 0 }</span>
<span class="term-fg32">+func (tx DepositTransaction) GetEffectiveGasTip(baseFee *uint256.Int) *uint256.Int {</span>
<span class="term-fg32">+	return uint256.NewInt(0)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx *DepositTransaction) Unwrap() Transaction { return tx }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) Cost() *uint256.Int {</span>
<span class="term-fg32">+	log.Error(&quot;Cost() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	total := new(uint256.Int)</span>
<span class="term-fg32">+	return total</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) GetAccessList() types2.AccessList {</span>
<span class="term-fg32">+	return types2.AccessList{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx DepositTransaction) GetData() []byte {</span>
<span class="term-fg32">+	return tx.Data</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx DepositTransaction) GetBlobHashes() []libcommon.Hash {</span>
<span class="term-fg32">+	&#47;&#47; Only blob txs have data hashes</span>
<span class="term-fg32">+	return []libcommon.Hash{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) Protected() bool {</span>
<span class="term-fg32">+	return true</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) EncodingSize() int {</span>
<span class="term-fg32">+	payloadSize := tx.payloadSize()</span>
<span class="term-fg32">+	envelopeSize := payloadSize</span>
<span class="term-fg32">+	&#47;&#47; Add envelope size and type size</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	envelopeSize += 2</span>
<span class="term-fg32">+	return envelopeSize</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; copy creates a deep copy of the transaction data and initializes all fields.</span>
<span class="term-fg32">+func (tx DepositTransaction) copy() *DepositTransaction {</span>
<span class="term-fg32">+	cpy := &amp;DepositTransaction{</span>
<span class="term-fg32">+		SourceHash: tx.SourceHash,</span>
<span class="term-fg32">+		From:       tx.From,</span>
<span class="term-fg32">+		To:         tx.To,</span>
<span class="term-fg32">+		Mint:       tx.Mint,</span>
<span class="term-fg32">+		Value:      tx.Value,</span>
<span class="term-fg32">+		GasLimit:   tx.GasLimit,</span>
<span class="term-fg32">+		IsSystemTx: tx.IsSystemTx,</span>
<span class="term-fg32">+		Data:       common.CopyBytes(tx.Data),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return cpy</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MarshalBinary returns the canonical encoding of the transaction.</span>
<span class="term-fg32">+func (tx DepositTransaction) MarshalBinary(w io.Writer) error {</span>
<span class="term-fg32">+	return tx.EncodeRLP(w)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; EncodeRLP implements rlp.Encoder</span>
<span class="term-fg32">+func (tx DepositTransaction) EncodeRLP(w io.Writer) error {</span>
<span class="term-fg32">+	var b [33]byte</span>
<span class="term-fg32">+	rlp.EncodeInt(DepositTxType, w, b[:])</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	payloadSize := tx.payloadSize()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; prefix</span>
<span class="term-fg32">+	if err := EncodeStructSizePrefix(payloadSize, w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := rlp.EncodeString(tx.SourceHash[:], w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := rlp.EncodeString(tx.From[:], w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if tx.To == nil {</span>
<span class="term-fg32">+		b[0] = 128</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		b[0] = 128 + 20</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if _, err := w.Write(b[:1]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if tx.To != nil {</span>
<span class="term-fg32">+		if _, err := w.Write(tx.To.Bytes()); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := tx.Mint.EncodeRLP(w); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := tx.Value.EncodeRLP(w); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := rlp.EncodeInt(tx.GasLimit, w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	boolVal := uint64(0)</span>
<span class="term-fg32">+	if tx.IsSystemTx {</span>
<span class="term-fg32">+		boolVal = 1</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := rlp.EncodeInt(boolVal, w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := rlp.EncodeString(tx.Data, w, b[:]); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) payloadSize() int {</span>
<span class="term-fg32">+	&#47;&#47; SourceHash</span>
<span class="term-fg32">+	payloadSize := 1</span>
<span class="term-fg32">+	payloadSize += len(tx.SourceHash)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; From</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	payloadSize += len(tx.From)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; To</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	if tx.To != nil {</span>
<span class="term-fg32">+		payloadSize += len(tx.To)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Mint</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	payloadSize += rlp.Uint256LenExcludingHead(tx.Mint)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Value</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	payloadSize += rlp.Uint256LenExcludingHead(tx.Value)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; GasLimit</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	payloadSize += rlp.IntLenExcludingHead(tx.GasLimit)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; IsSystemTx</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; size of Data</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	switch len(tx.Data) {</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+	case 1:</span>
<span class="term-fg32">+		if tx.Data[0] &gt;= 128 {</span>
<span class="term-fg32">+			payloadSize++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		if len(tx.Data) &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(len(tx.Data))))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += len(tx.Data)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return payloadSize</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DecodeRLP decodes DepositTransaction but with the list token already consumed and encodingSize being presented</span>
<span class="term-fg32">+func (tx *DepositTransaction) DecodeRLP(s *rlp.Stream) error {</span>
<span class="term-fg32">+	var err error</span>
<span class="term-fg32">+	var b []byte</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if _, err := s.List(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;list header: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if b, err = s.Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read SourceHash: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.SourceHash = new(libcommon.Hash)</span>
<span class="term-fg32">+	tx.SourceHash.SetBytes(b)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if b, err = s.Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read From: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(b) != 20 {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;wrong size for From: %d&quot;, len(b))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.From = &amp;libcommon.Address{}</span>
<span class="term-fg32">+	copy((*tx.From)[:], b)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if b, err = s.Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read To: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	switch len(b) {</span>
<span class="term-fg32">+	case 20:</span>
<span class="term-fg32">+		tx.To = &amp;libcommon.Address{}</span>
<span class="term-fg32">+		copy((*tx.To)[:], b)</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+		&#47;&#47; contract creation</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;wrong size for To: %d&quot;, len(b))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if b, err = s.Uint256Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read Mint: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.Mint = new(uint256.Int).SetBytes(b)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if b, err = s.Uint256Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read Value: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.Value = new(uint256.Int).SetBytes(b)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if tx.GasLimit, err = s.Uint(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read GasLimit: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if tx.IsSystemTx, err = s.Bool(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read IsSystemTx: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if tx.Data, err = s.Bytes(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;read Data: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err = s.ListEnd(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;close tx struct: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; AsMessage returns the transaction as a core.Message.</span>
<span class="term-fg32">+func (tx DepositTransaction) AsMessage(s Signer, _ *big.Int, rules *chain.Rules) (Message, error) {</span>
<span class="term-fg32">+	msg := Message{</span>
<span class="term-fg32">+		txType:        DepositTxType,</span>
<span class="term-fg32">+		sourceHash:    tx.SourceHash,</span>
<span class="term-fg32">+		from:          *tx.From,</span>
<span class="term-fg32">+		gasLimit:      tx.GasLimit,</span>
<span class="term-fg32">+		to:            tx.To,</span>
<span class="term-fg32">+		mint:          *tx.Mint,</span>
<span class="term-fg32">+		amount:        *tx.Value,</span>
<span class="term-fg32">+		isSystemTx:    tx.IsSystemTx,</span>
<span class="term-fg32">+		data:          tx.Data,</span>
<span class="term-fg32">+		accessList:    nil,</span>
<span class="term-fg32">+		checkNonce:    true,</span>
<span class="term-fg32">+		rollupDataGas: RollupDataGas(tx, rules),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return msg, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTransaction) WithSignature(signer Signer, sig []byte) (Transaction, error) {</span>
<span class="term-fg32">+	log.Error(&quot;WithSignature() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	cpy := tx.copy()</span>
<span class="term-fg32">+	return cpy, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTransaction) FakeSign(address libcommon.Address) (Transaction, error) {</span>
<span class="term-fg32">+	log.Error(&quot;FakeSign() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	cpy := tx.copy()</span>
<span class="term-fg32">+	return cpy, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Hash computes the hash (but not for signatures!)</span>
<span class="term-fg32">+func (tx *DepositTransaction) Hash() libcommon.Hash {</span>
<span class="term-fg32">+	if hash := tx.hash.Load(); hash != nil {</span>
<span class="term-fg32">+		return *hash.(*libcommon.Hash)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	hash := prefixedRlpHash(</span>
<span class="term-fg32">+		DepositTxType,</span>
<span class="term-fg32">+		[]interface{}{</span>
<span class="term-fg32">+			tx.SourceHash,</span>
<span class="term-fg32">+			tx.From,</span>
<span class="term-fg32">+			tx.To,</span>
<span class="term-fg32">+			tx.Mint,</span>
<span class="term-fg32">+			tx.Value,</span>
<span class="term-fg32">+			tx.GasLimit,</span>
<span class="term-fg32">+			tx.IsSystemTx,</span>
<span class="term-fg32">+			tx.Data,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	tx.hash.Store(&amp;hash)</span>
<span class="term-fg32">+	return hash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) SigningHash(chainID *big.Int) libcommon.Hash {</span>
<span class="term-fg32">+	log.Error(&quot;SigningHash() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	return libcommon.Hash{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) Type() byte { return DepositTxType }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) RawSignatureValues() (*uint256.Int, *uint256.Int, *uint256.Int) {</span>
<span class="term-fg32">+	log.Error(&quot;SigningHash() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	return uint256.NewInt(0), uint256.NewInt(0), uint256.NewInt(0)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) GetChainID() *uint256.Int {</span>
<span class="term-fg32">+	log.Error(&quot;GetChainID() called for a Deposit transaction&quot;)</span>
<span class="term-fg32">+	return new(uint256.Int)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx DepositTransaction) GetSender() (libcommon.Address, bool) {</span>
<span class="term-fg32">+	return *tx.From, true</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx DepositTransaction) GetTo() *libcommon.Address {</span>
<span class="term-fg32">+	return tx.To</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) GetValue() *uint256.Int {</span>
<span class="term-fg32">+	return tx.Value</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) IsContractDeploy() bool {</span>
<span class="term-fg32">+	return tx.GetTo() == nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) IsDepositTx() bool {</span>
<span class="term-fg32">+	return true</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx DepositTransaction) IsStarkNet() bool {</span>
<span class="term-fg32">+	return false</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTransaction) Sender(signer Signer) (libcommon.Address, error) {</span>
<span class="term-fg32">+	return *tx.From, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (tx *DepositTransaction) SetSender(addr libcommon.Address) {</span>
<span class="term-fg32">+	if tx.From != nil &amp;&amp; *tx.From != addr {</span>
<span class="term-fg32">+		log.Error(&quot;SetSender() address confict for Deposit transaction&quot;, &quot;old&quot;, tx.From, &quot;new&quot;, addr)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; otherwise a NOP</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-92ee29bc4c275f2f215fa979" role="button"
                   aria-expanded="false" aria-controls="id-92ee29bc4c275f2f215fa979">
                    <code>core/types/transaction_marshalling.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/transaction_marshalling.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/transaction_marshalling.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+85</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-92ee29bc4c275f2f215fa979"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction_marshalling.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg1">index c2d460a6643ab098ba1a89b588fa1e52fe8f99d4..52a22370fd58a09348d420bcdf5c8cfca58191d9 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg36">@@ -32,6 +32,12 @@</span> 	R        *hexutil.Big       `json:&quot;r&quot;`
 	S        *hexutil.Big       `json:&quot;s&quot;`
 	To       *libcommon.Address `json:&quot;to&quot;`
&nbsp;
<span class="term-fg32">+	&#47;&#47; Deposit transaction fields</span>
<span class="term-fg32">+	SourceHash *libcommon.Hash    `json:&quot;sourceHash,omitempty&quot;`</span>
<span class="term-fg32">+	From       *libcommon.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+	Mint       *hexutil.Big       `json:&quot;mint,omitempty&quot;`</span>
<span class="term-fg32">+	IsSystemTx *bool              `json:&quot;isSystemTx,omitempty&quot;`</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Access list transaction fields:
 	ChainID    *hexutil.Big       `json:&quot;chainId,omitempty&quot;`
 	AccessList *types2.AccessList `json:&quot;accessList,omitempty&quot;`
<span class="term-fg36">@@ -107,6 +113,26 @@</span> 	enc.S = (*hexutil.Big)(tx.S.ToBig())
 	return json.Marshal(&amp;enc)
 }
&nbsp;
<span class="term-fg32">+func (tx DepositTransaction) MarshalJSON() ([]byte, error) {</span>
<span class="term-fg32">+	var enc txJSON</span>
<span class="term-fg32">+	&#47;&#47; These are set for all tx types.</span>
<span class="term-fg32">+	enc.Hash = tx.Hash()</span>
<span class="term-fg32">+	enc.Type = hexutil.Uint64(tx.Type())</span>
<span class="term-fg32">+	enc.ChainID = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+	enc.Gas = (*hexutil.Uint64)(&amp;tx.GasLimit)</span>
<span class="term-fg32">+	enc.Value = (*hexutil.Big)(tx.Value.ToBig())</span>
<span class="term-fg32">+	enc.Data = (*hexutility.Bytes)(&amp;tx.Data)</span>
<span class="term-fg32">+	enc.To = tx.To</span>
<span class="term-fg32">+	enc.SourceHash = tx.SourceHash</span>
<span class="term-fg32">+	enc.From = tx.From</span>
<span class="term-fg32">+	if tx.Mint != nil {</span>
<span class="term-fg32">+		enc.Mint = (*hexutil.Big)(tx.Mint.ToBig())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	enc.IsSystemTx = &amp;tx.IsSystemTx</span>
<span class="term-fg32">+	&#47;&#47; other fields will show up as null.</span>
<span class="term-fg32">+	return json.Marshal(&amp;enc)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func toBlobTxJSON(tx *BlobTx) *txJSON {
 	var enc txJSON
 	&#47;&#47; These are set for all tx types.
<span class="term-fg36">@@ -172,6 +198,12 @@</span> 		}
 		return tx, nil
 	case DynamicFeeTxType:
 		tx := &amp;DynamicFeeTransaction{}
<span class="term-fg32">+		if err = tx.UnmarshalJSON(input); err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return tx, nil</span>
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		tx := &amp;DepositTransaction{}</span>
 		if err = tx.UnmarshalJSON(input); err != nil {
 			return nil, err
 		}
<span class="term-fg36">@@ -411,6 +443,59 @@</span> 		if err := sanityCheckSignature(&amp;tx.V, &amp;tx.R, &amp;tx.S, false); err != nil {
 			return err
 		}
 	}
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTransaction) UnmarshalJSON(input []byte) error {</span>
<span class="term-fg32">+	var dec txJSON</span>
<span class="term-fg32">+	if err := json.Unmarshal(input, &amp;dec); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.AccessList != nil || dec.FeeCap != nil || dec.Tip != nil {</span>
<span class="term-fg32">+		return errors.New(&quot;unexpected field(s) in deposit transaction&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.GasPrice != nil &amp;&amp; dec.GasPrice.ToInt().Cmp(libcommon.Big0) != 0 {</span>
<span class="term-fg32">+		return errors.New(&quot;deposit transaction GasPrice must be 0&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if (dec.V != nil &amp;&amp; dec.V.ToInt().Cmp(libcommon.Big0) != 0) ||</span>
<span class="term-fg32">+		(dec.R != nil &amp;&amp; dec.R.ToInt().Cmp(libcommon.Big0) != 0) ||</span>
<span class="term-fg32">+		(dec.S != nil &amp;&amp; dec.S.ToInt().Cmp(libcommon.Big0) != 0) {</span>
<span class="term-fg32">+		return errors.New(&quot;deposit transaction signature must be 0 or unset&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.To != nil {</span>
<span class="term-fg32">+		tx.To = dec.To</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.GasLimit = uint64(*dec.Gas)</span>
<span class="term-fg32">+	if dec.Value == nil {</span>
<span class="term-fg32">+		return errors.New(&quot;missing required field &#39;value&#39; in transaction&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var overflow bool</span>
<span class="term-fg32">+	tx.Value, overflow = uint256.FromBig(dec.Value.ToInt())</span>
<span class="term-fg32">+	if overflow {</span>
<span class="term-fg32">+		return errors.New(&quot;&#39;value&#39; in transaction does not fit in 256 bits&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; mint may be omitted or nil if there is nothing to mint.</span>
<span class="term-fg32">+	tx.Mint, overflow = uint256.FromBig(dec.Mint.ToInt())</span>
<span class="term-fg32">+	if overflow {</span>
<span class="term-fg32">+		return errors.New(&quot;&#39;mint&#39; in transaction does not fit in 256 bits&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Data == nil {</span>
<span class="term-fg32">+		return errors.New(&quot;missing required field &#39;input&#39; in transaction&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.Data = *dec.Data</span>
<span class="term-fg32">+	if dec.From == nil {</span>
<span class="term-fg32">+		return errors.New(&quot;missing required field &#39;from&#39; in transaction&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.From = dec.From</span>
<span class="term-fg32">+	if dec.SourceHash == nil {</span>
<span class="term-fg32">+		return errors.New(&quot;missing required field &#39;sourceHash&#39; in transaction&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.SourceHash = dec.SourceHash</span>
<span class="term-fg32">+	&#47;&#47; IsSystemTx may be omitted. Defaults to false.</span>
<span class="term-fg32">+	if dec.IsSystemTx != nil {</span>
<span class="term-fg32">+		tx.IsSystemTx = *dec.IsSystemTx</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; nonce is not checked becaues depositTx has no nonce field.</span>
 	return nil
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e35f206fb3fd1579fb49109c" role="button"
                   aria-expanded="false" aria-controls="id-e35f206fb3fd1579fb49109c">
                    <code>core/types/transaction_signing.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/transaction_signing.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/transaction_signing.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e35f206fb3fd1579fb49109c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction_signing.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg1">index 19695c6c93dd2c9cca884d81ede5c5c856e2440b..d264b06783e09d5acde1ebf1d6c18e2e63dce3f4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg36">@@ -268,6 +268,10 @@</span> 		&#47;&#47; ACL, DynamicFee, and blob txs are defined to use 0 and 1 as their recovery
 		&#47;&#47; id, add 27 to become equivalent to unprotected Homestead signatures.
 		V.Add(&amp;t.V, u256.Num27)
 		R, S = &amp;t.R, &amp;t.S
<span class="term-fg32">+	case *DepositTransaction:</span>
<span class="term-fg32">+		&#47;&#47; This type contains an explicit From: field</span>
<span class="term-fg32">+		sender, _ := tx.GetSender()</span>
<span class="term-fg32">+		return sender, nil</span>
 	default:
 		return libcommon.Address{}, ErrTxTypeNotSupported
 	}
<span class="term-fg36">@@ -307,6 +311,8 @@</span> 		if t.ChainID != nil &amp;&amp; !t.ChainID.IsZero() &amp;&amp; !t.ChainID.Eq(&amp;sg.chainID) {
 			return nil, nil, nil, ErrInvalidChainId
 		}
 		R, S, V = decodeSignature(sig)
<span class="term-fg32">+	case *DepositTransaction:</span>
<span class="term-fg32">+		return nil, nil, nil, fmt.Errorf(&quot;deposits do not have a signature&quot;)</span>
 	default:
 		return nil, nil, nil, ErrTxTypeNotSupported
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-491201f0da9e0fae333028f5"role="button" aria-expanded="false" aria-controls="id-491201f0da9e0fae333028f5">
        
            <div class="col-12 col-sm-9 text-start"><h4>Transaction properties</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+127</span></div>
                <div class="text-start"><span class="text-danger">-46</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-491201f0da9e0fae333028f5">
        <div><p>The Transaction type now exposes the deposit-transaction and L1-cost properties required for the rollup.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e60e527fc294b0fc76e10977" role="button"
                   aria-expanded="false" aria-controls="id-e60e527fc294b0fc76e10977">
                    <code>core/types/access_list_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/access_list_tx.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/access_list_tx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+55</span></div>
                        <div class="text-start"><span class="text-danger">-18</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e60e527fc294b0fc76e10977"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;access_list_tx.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;access_list_tx.go</span>
<span class="term-fg1">index 611e371d042ada90a230ea674e289d0a4f06f998..61f86b219b0a760a58901a66251d6b91fa723cbf 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;access_list_tx.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;access_list_tx.go</span>
<span class="term-fg36">@@ -28,7 +28,6 @@</span> 	&quot;github.com&#47;holiman&#47;uint256&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
 	types2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
<span class="term-fg36">@@ -94,8 +93,13 @@</span>
 &#47;&#47; EncodingSize returns the RLP encoding size of the whole transaction envelope
 func (tx AccessListTx) EncodingSize() int {
 	payloadSize, _, _, _ := tx.payloadSize()
<span class="term-fg32">+	envelopeSize := payloadSize</span>
 	&#47;&#47; Add envelope size and type size
<span class="term-fg31">-	return 1 + rlp2.ListPrefixLen(payloadSize) + payloadSize</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	envelopeSize += 2</span>
<span class="term-fg32">+	return envelopeSize</span>
 }
&nbsp;
 &#47;&#47; payloadSize calculates the RLP encoding size of transaction, without TxType and envelope
<span class="term-fg36">@@ -123,10 +127,26 @@</span> 	&#47;&#47; size of Value
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(tx.Value)
 	&#47;&#47; size of Data
<span class="term-fg31">-	payloadSize += rlp2.StringLen(tx.Data)</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	switch len(tx.Data) {</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+	case 1:</span>
<span class="term-fg32">+		if tx.Data[0] &gt;= 128 {</span>
<span class="term-fg32">+			payloadSize++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		if len(tx.Data) &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(len(tx.Data))))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += len(tx.Data)</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of AccessList
<span class="term-fg32">+	payloadSize++</span>
 	accessListLen = accessListSize(tx.AccessList)
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(accessListLen) + accessListLen</span>
<span class="term-fg32">+	if accessListLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(accessListLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += accessListLen</span>
 	&#47;&#47; size of V
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(&amp;tx.V)
<span class="term-fg36">@@ -144,10 +164,18 @@</span> 	var accessListLen int
 	for _, tuple := range al {
 		tupleLen := 21 &#47;&#47; For the address
 		&#47;&#47; size of StorageKeys
<span class="term-fg32">+		tupleLen++</span>
 		&#47;&#47; Each storage key takes 33 bytes
 		storageLen := 33 * len(tuple.StorageKeys)
<span class="term-fg31">-		tupleLen += rlp2.ListPrefixLen(storageLen) + storageLen</span>
<span class="term-fg31">-		accessListLen += rlp2.ListPrefixLen(tupleLen) + tupleLen</span>
<span class="term-fg32">+		if storageLen &gt;= 56 {</span>
<span class="term-fg32">+			tupleLen += libcommon.BitLenToByteLen(bits.Len(uint(storageLen))) &#47;&#47; BE encoding of the length of the storage keys</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		tupleLen += storageLen</span>
<span class="term-fg32">+		accessListLen++</span>
<span class="term-fg32">+		if tupleLen &gt;= 56 {</span>
<span class="term-fg32">+			accessListLen += libcommon.BitLenToByteLen(bits.Len(uint(tupleLen))) &#47;&#47; BE encoding of the length of the storage keys</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		accessListLen += tupleLen</span>
 	}
 	return accessListLen
 }
<span class="term-fg36">@@ -155,9 +183,13 @@</span>
 func encodeAccessList(al types2.AccessList, w io.Writer, b []byte) error {
 	for _, tuple := range al {
 		tupleLen := 21
<span class="term-fg32">+		tupleLen++</span>
 		&#47;&#47; Each storage key takes 33 bytes
 		storageLen := 33 * len(tuple.StorageKeys)
<span class="term-fg31">-		tupleLen += rlp2.ListPrefixLen(storageLen) + storageLen</span>
<span class="term-fg32">+		if storageLen &gt;= 56 {</span>
<span class="term-fg32">+			tupleLen += libcommon.BitLenToByteLen(bits.Len(uint(storageLen))) &#47;&#47; BE encoding of the length of the storage keys</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		tupleLen += storageLen</span>
 		if err := EncodeStructSizePrefix(tupleLen, w, b); err != nil {
 			return err
 		}
<span class="term-fg36">@@ -288,8 +320,12 @@</span>
 &#47;&#47; EncodeRLP implements rlp.Encoder
 func (tx AccessListTx) EncodeRLP(w io.Writer) error {
 	payloadSize, nonceLen, gasLen, accessListLen := tx.payloadSize()
<span class="term-fg32">+	envelopeSize := payloadSize</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of struct prefix and TxType
<span class="term-fg31">-	envelopeSize := 1 + rlp2.ListPrefixLen(payloadSize) + payloadSize</span>
<span class="term-fg32">+	envelopeSize += 2</span>
 	var b [33]byte
 	&#47;&#47; envelope
 	if err := rlp.EncodeStringSizePrefix(envelopeSize, w, b[:]); err != nil {
<span class="term-fg36">@@ -420,16 +456,17 @@</span>
 &#47;&#47; AsMessage returns the transaction as a core.Message.
 func (tx AccessListTx) AsMessage(s Signer, _ *big.Int, rules *chain.Rules) (Message, error) {
 	msg := Message{
<span class="term-fg31">-		nonce:      tx.Nonce,</span>
<span class="term-fg31">-		gasLimit:   tx.Gas,</span>
<span class="term-fg31">-		gasPrice:   *tx.GasPrice,</span>
<span class="term-fg31">-		tip:        *tx.GasPrice,</span>
<span class="term-fg31">-		feeCap:     *tx.GasPrice,</span>
<span class="term-fg31">-		to:         tx.To,</span>
<span class="term-fg31">-		amount:     *tx.Value,</span>
<span class="term-fg31">-		data:       tx.Data,</span>
<span class="term-fg31">-		accessList: tx.AccessList,</span>
<span class="term-fg31">-		checkNonce: true,</span>
<span class="term-fg32">+		nonce:         tx.Nonce,</span>
<span class="term-fg32">+		gasLimit:      tx.Gas,</span>
<span class="term-fg32">+		gasPrice:      *tx.GasPrice,</span>
<span class="term-fg32">+		tip:           *tx.GasPrice,</span>
<span class="term-fg32">+		feeCap:        *tx.GasPrice,</span>
<span class="term-fg32">+		to:            tx.To,</span>
<span class="term-fg32">+		amount:        *tx.Value,</span>
<span class="term-fg32">+		data:          tx.Data,</span>
<span class="term-fg32">+		accessList:    tx.AccessList,</span>
<span class="term-fg32">+		checkNonce:    true,</span>
<span class="term-fg32">+		rollupDataGas: RollupDataGas(tx, rules),</span>
 	}
&nbsp;
 	if !rules.IsBerlin {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7a850573921c4b2079cb6438" role="button"
                   aria-expanded="false" aria-controls="id-7a850573921c4b2079cb6438">
                    <code>core/types/dynamic_fee_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/dynamic_fee_tx.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/dynamic_fee_tx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+41</span></div>
                        <div class="text-start"><span class="text-danger">-15</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a850573921c4b2079cb6438"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;dynamic_fee_tx.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;dynamic_fee_tx.go</span>
<span class="term-fg1">index 2c943ec11fae6a8fd1c5d1527221d12ea89036c4..3956711e425d07b5be7d1d65ef7ff20f699950ca 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;dynamic_fee_tx.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;dynamic_fee_tx.go</span>
<span class="term-fg36">@@ -21,12 +21,12 @@</span> 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
 	types2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
<span class="term-fg36">@@ -117,8 +117,13 @@</span> }
&nbsp;
 func (tx DynamicFeeTransaction) EncodingSize() int {
 	payloadSize, _, _, _ := tx.payloadSize()
<span class="term-fg32">+	envelopeSize := payloadSize</span>
 	&#47;&#47; Add envelope size and type size
<span class="term-fg31">-	return 1 + rlp2.ListPrefixLen(payloadSize) + payloadSize</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	envelopeSize += 2</span>
<span class="term-fg32">+	return envelopeSize</span>
 }
&nbsp;
 func (tx DynamicFeeTransaction) payloadSize() (payloadSize int, nonceLen, gasLen, accessListLen int) {
<span class="term-fg36">@@ -148,10 +153,26 @@</span> 	&#47;&#47; size of Value
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(tx.Value)
 	&#47;&#47; size of Data
<span class="term-fg31">-	payloadSize += rlp2.StringLen(tx.Data)</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	switch len(tx.Data) {</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+	case 1:</span>
<span class="term-fg32">+		if tx.Data[0] &gt;= 128 {</span>
<span class="term-fg32">+			payloadSize++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		if len(tx.Data) &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(len(tx.Data))))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += len(tx.Data)</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of AccessList
<span class="term-fg32">+	payloadSize++</span>
 	accessListLen = accessListSize(tx.AccessList)
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(accessListLen) + accessListLen</span>
<span class="term-fg32">+	if accessListLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(accessListLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += accessListLen</span>
 	&#47;&#47; size of V
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(&amp;tx.V)
<span class="term-fg36">@@ -275,8 +296,12 @@</span> }
&nbsp;
 func (tx DynamicFeeTransaction) EncodeRLP(w io.Writer) error {
 	payloadSize, nonceLen, gasLen, accessListLen := tx.payloadSize()
<span class="term-fg32">+	envelopeSize := payloadSize</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of struct prefix and TxType
<span class="term-fg31">-	envelopeSize := 1 + rlp2.ListPrefixLen(payloadSize) + payloadSize</span>
<span class="term-fg32">+	envelopeSize += 2</span>
 	var b [33]byte
 	&#47;&#47; envelope
 	if err := rlp.EncodeStringSizePrefix(envelopeSize, w, b[:]); err != nil {
<span class="term-fg36">@@ -358,16 +383,17 @@</span>
 &#47;&#47; AsMessage returns the transaction as a core.Message.
 func (tx DynamicFeeTransaction) AsMessage(s Signer, baseFee *big.Int, rules *chain.Rules) (Message, error) {
 	msg := Message{
<span class="term-fg31">-		nonce:      tx.Nonce,</span>
<span class="term-fg31">-		gasLimit:   tx.Gas,</span>
<span class="term-fg31">-		gasPrice:   *tx.FeeCap,</span>
<span class="term-fg31">-		tip:        *tx.Tip,</span>
<span class="term-fg31">-		feeCap:     *tx.FeeCap,</span>
<span class="term-fg31">-		to:         tx.To,</span>
<span class="term-fg31">-		amount:     *tx.Value,</span>
<span class="term-fg31">-		data:       tx.Data,</span>
<span class="term-fg31">-		accessList: tx.AccessList,</span>
<span class="term-fg31">-		checkNonce: true,</span>
<span class="term-fg32">+		nonce:         tx.Nonce,</span>
<span class="term-fg32">+		gasLimit:      tx.Gas,</span>
<span class="term-fg32">+		gasPrice:      *tx.FeeCap,</span>
<span class="term-fg32">+		tip:           *tx.Tip,</span>
<span class="term-fg32">+		feeCap:        *tx.FeeCap,</span>
<span class="term-fg32">+		to:            tx.To,</span>
<span class="term-fg32">+		amount:        *tx.Value,</span>
<span class="term-fg32">+		data:          tx.Data,</span>
<span class="term-fg32">+		accessList:    tx.AccessList,</span>
<span class="term-fg32">+		checkNonce:    true,</span>
<span class="term-fg32">+		rollupDataGas: RollupDataGas(tx, rules),</span>
 	}
 	if !rules.IsLondon {
 		return msg, errors.New(&quot;eip-1559 transactions require London&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1c37829c8afdae5ee8095b1a" role="button"
                   aria-expanded="false" aria-controls="id-1c37829c8afdae5ee8095b1a">
                    <code>core/types/legacy_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/legacy_tx.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/legacy_tx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+31</span></div>
                        <div class="text-start"><span class="text-danger">-13</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1c37829c8afdae5ee8095b1a"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;legacy_tx.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;legacy_tx.go</span>
<span class="term-fg1">index 6de40769463868a42b4ad90b470cda6585d41f7d..b8af49955b95db68373ff759b13db7783f84da6e 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;legacy_tx.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;legacy_tx.go</span>
<span class="term-fg36">@@ -21,11 +21,11 @@</span> 	&quot;encoding&#47;binary&quot;
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
 	types2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
<span class="term-fg36">@@ -85,6 +85,11 @@</span> }
&nbsp;
 func (ct CommonTx) IsContractDeploy() bool {
 	return ct.GetTo() == nil
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsDepositTx returns true if the transaction is a deposit tx type.</span>
<span class="term-fg32">+func (ct CommonTx) IsDepositTx() bool {</span>
<span class="term-fg32">+	return false</span>
 }
&nbsp;
 func (ct *CommonTx) GetBlobHashes() []libcommon.Hash {
<span class="term-fg36">@@ -215,7 +220,19 @@</span> 	}
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(tx.Value)
 	&#47;&#47; size of Data
<span class="term-fg31">-	payloadSize += rlp2.StringLen(tx.Data)</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+	switch len(tx.Data) {</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+	case 1:</span>
<span class="term-fg32">+		if tx.Data[0] &gt;= 128 {</span>
<span class="term-fg32">+			payloadSize++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		if len(tx.Data) &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(len(tx.Data))))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += len(tx.Data)</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of V
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(&amp;tx.V)
<span class="term-fg36">@@ -350,18 +367,19 @@</span> 	return nil
 }
&nbsp;
 &#47;&#47; AsMessage returns the transaction as a core.Message.
<span class="term-fg31">-func (tx LegacyTx) AsMessage(s Signer, _ *big.Int, _ *chain.Rules) (Message, error) {</span>
<span class="term-fg32">+func (tx LegacyTx) AsMessage(s Signer, _ *big.Int, rules *chain.Rules) (Message, error) {</span>
 	msg := Message{
<span class="term-fg31">-		nonce:      tx.Nonce,</span>
<span class="term-fg31">-		gasLimit:   tx.Gas,</span>
<span class="term-fg31">-		gasPrice:   *tx.GasPrice,</span>
<span class="term-fg31">-		tip:        *tx.GasPrice,</span>
<span class="term-fg31">-		feeCap:     *tx.GasPrice,</span>
<span class="term-fg31">-		to:         tx.To,</span>
<span class="term-fg31">-		amount:     *tx.Value,</span>
<span class="term-fg31">-		data:       tx.Data,</span>
<span class="term-fg31">-		accessList: nil,</span>
<span class="term-fg31">-		checkNonce: true,</span>
<span class="term-fg32">+		nonce:         tx.Nonce,</span>
<span class="term-fg32">+		gasLimit:      tx.Gas,</span>
<span class="term-fg32">+		gasPrice:      *tx.GasPrice,</span>
<span class="term-fg32">+		tip:           *tx.GasPrice,</span>
<span class="term-fg32">+		feeCap:        *tx.GasPrice,</span>
<span class="term-fg32">+		to:            tx.To,</span>
<span class="term-fg32">+		amount:        *tx.Value,</span>
<span class="term-fg32">+		data:          tx.Data,</span>
<span class="term-fg32">+		accessList:    nil,</span>
<span class="term-fg32">+		checkNonce:    true,</span>
<span class="term-fg32">+		rollupDataGas: RollupDataGas(tx, rules),</span>
 	}
&nbsp;
 	var err error</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-56d855b649992021873d2320"role="button" aria-expanded="false" aria-controls="id-56d855b649992021873d2320">
        
            <div class="col-12 col-sm-9 text-start"><h4>L1 cost computation</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+154</span></div>
                <div class="text-start"><span class="text-danger">-15</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-56d855b649992021873d2320">
        <div><p>Transactions must pay an additional L1 cost based on the amount of rollup-data-gas they consume, estimated based on gas-price-oracle information and encoded tx size.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e4a61167376d26c8a9fe1e9" role="button"
                   aria-expanded="false" aria-controls="id-5e4a61167376d26c8a9fe1e9">
                    <code>core/types/rollup_l1_cost.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/rollup_l1_cost.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+79</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e4a61167376d26c8a9fe1e9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;rollup_l1_cost.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;rollup_l1_cost.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6503dcaebc3e51348699e2469f3fa39b351641fa</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;rollup_l1_cost.go</span>
<span class="term-fg36">@@ -0,0 +1,79 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type RollupMessage interface {</span>
<span class="term-fg32">+	RollupDataGas() uint64</span>
<span class="term-fg32">+	IsDepositTx() bool</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type StateGetter interface {</span>
<span class="term-fg32">+	GetState(libcommon.Address, *libcommon.Hash, *uint256.Int)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; L1CostFunc is used in the state transition to determine the cost of a rollup message.</span>
<span class="term-fg32">+&#47;&#47; Returns nil if there is no cost.</span>
<span class="term-fg32">+type L1CostFunc func(blockNum uint64, msg RollupMessage) *uint256.Int</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	L1BaseFeeSlot = libcommon.BigToHash(big.NewInt(1))</span>
<span class="term-fg32">+	OverheadSlot  = libcommon.BigToHash(big.NewInt(5))</span>
<span class="term-fg32">+	ScalarSlot    = libcommon.BigToHash(big.NewInt(6))</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var L1BlockAddr = libcommon.HexToAddress(&quot;0x4200000000000000000000000000000000000015&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Bedrock</span>
<span class="term-fg32">+&#47;&#47; NewL1CostFunc returns a function used for calculating L1 fee cost.</span>
<span class="term-fg32">+&#47;&#47; This depends on the oracles because gas costs can change over time.</span>
<span class="term-fg32">+&#47;&#47; It returns nil if there is no applicable cost function.</span>
<span class="term-fg32">+func NewL1CostFunc(config *chain.Config, statedb StateGetter) L1CostFunc {</span>
<span class="term-fg32">+	cacheBlockNum := ^uint64(0)</span>
<span class="term-fg32">+	var l1BaseFee, overhead, scalar *uint256.Int</span>
<span class="term-fg32">+	return func(blockNum uint64, msg RollupMessage) *uint256.Int {</span>
<span class="term-fg32">+		rollupDataGas := msg.RollupDataGas() &#47;&#47; Only fake txs for RPC view-calls are 0.</span>
<span class="term-fg32">+		if config.Optimism == nil || msg.IsDepositTx() || rollupDataGas == 0 {</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if blockNum != cacheBlockNum {</span>
<span class="term-fg32">+			l1BaseFee, overhead, scalar = &amp;uint256.Int{}, &amp;uint256.Int{}, &amp;uint256.Int{}</span>
<span class="term-fg32">+			statedb.GetState(L1BlockAddr, &amp;L1BaseFeeSlot, l1BaseFee)</span>
<span class="term-fg32">+			statedb.GetState(L1BlockAddr, &amp;OverheadSlot, overhead)</span>
<span class="term-fg32">+			statedb.GetState(L1BlockAddr, &amp;ScalarSlot, scalar)</span>
<span class="term-fg32">+			cacheBlockNum = blockNum</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Debug(&quot;L1CostFunc calculation&quot;, &quot;blockNum&quot;, blockNum, &quot;rollupDataGas&quot;, rollupDataGas, &quot;l1BaseFee&quot;, l1BaseFee, &quot;overhead&quot;, overhead, &quot;scalar&quot;, scalar)</span>
<span class="term-fg32">+		return L1Cost(rollupDataGas, l1BaseFee, overhead, scalar)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func L1Cost(rollupDataGas uint64, l1BaseFee, overhead, scalar *uint256.Int) *uint256.Int {</span>
<span class="term-fg32">+	l1GasUsed := new(uint256.Int).SetUint64(rollupDataGas)</span>
<span class="term-fg32">+	l1GasUsed = l1GasUsed.Add(l1GasUsed, overhead)</span>
<span class="term-fg32">+	l1Cost := l1GasUsed.Mul(l1GasUsed, l1BaseFee)</span>
<span class="term-fg32">+	l1Cost = l1Cost.Mul(l1Cost, scalar)</span>
<span class="term-fg32">+	return l1Cost.Div(l1Cost, uint256.NewInt(1_000_000))</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8e8b22dd00271737c812fb7f" role="button"
                   aria-expanded="false" aria-controls="id-8e8b22dd00271737c812fb7f">
                    <code>core/types/transaction.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/transaction.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/transaction.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+63</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8e8b22dd00271737c812fb7f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg1">index 71f6f729aa96370a8f5ccd25ea023611609f9904..43cc73468bf4f29de69685e13ca2f3f9469feae4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg36">@@ -38,6 +38,7 @@</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;math&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 )
&nbsp;
<span class="term-fg36">@@ -54,6 +55,7 @@</span> 	LegacyTxType = iota
 	AccessListTxType
 	DynamicFeeTxType
 	BlobTxType
<span class="term-fg32">+	DepositTxType = 0x7e</span>
 )
&nbsp;
 &#47;&#47; Transaction is an Ethereum transaction.
<span class="term-fg36">@@ -96,6 +98,7 @@</span> 	GetSender() (libcommon.Address, bool)
 	SetSender(libcommon.Address)
 	IsContractDeploy() bool
 	Unwrap() Transaction &#47;&#47; If this is a network wrapper, returns the unwrapped tx. Otherwise returns itself.
<span class="term-fg32">+	IsDepositTx() bool</span>
 }
&nbsp;
 &#47;&#47; TransactionMisc is collection of miscelaneous fields for transaction that is supposed to be embedded into concrete
<span class="term-fg36">@@ -127,6 +130,38 @@</span> func (tm TransactionMisc) From() *atomic.Value {
 	return &amp;tm.from
 }
&nbsp;
<span class="term-fg32">+func RollupDataGas(tx binMarshalable, rules *chain.Rules) uint64 {</span>
<span class="term-fg32">+	var buf bytes.Buffer</span>
<span class="term-fg32">+	if err := tx.MarshalBinary(&amp;buf); err != nil {</span>
<span class="term-fg32">+		&#47;&#47; Silent error, invalid txs will not be marshalled&#47;unmarshalled for batch submission anyway.</span>
<span class="term-fg32">+		log.Error(&quot;failed to encode tx for L1 cost computation&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		return 0</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var zeroes uint64</span>
<span class="term-fg32">+	var ones uint64</span>
<span class="term-fg32">+	for _, byt := range buf.Bytes() {</span>
<span class="term-fg32">+		if byt == 0 {</span>
<span class="term-fg32">+			zeroes++</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			ones++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	zeroesGas := zeroes * params.TxDataZeroGas</span>
<span class="term-fg32">+	var onesGas uint64</span>
<span class="term-fg32">+	if rules.IsOptimismRegolith {</span>
<span class="term-fg32">+		onesGas = ones * params.TxDataNonZeroGasEIP2028</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		onesGas = (ones + 68) * params.TxDataNonZeroGasEIP2028</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	total := zeroesGas + onesGas</span>
<span class="term-fg32">+	log.Debug(&quot;Computed rollupDataGas&quot;, &quot;total&quot;, total, &quot;tx&quot;, tx)</span>
<span class="term-fg32">+	return total</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type binMarshalable interface {</span>
<span class="term-fg32">+	MarshalBinary(io.Writer) error</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func DecodeRLPTransaction(s *rlp.Stream) (Transaction, error) {
 	kind, size, err := s.Kind()
 	if err != nil {
<span class="term-fg36">@@ -203,6 +238,13 @@</span> 		return t, nil
 	case BlobTxType:
 		s := rlp.NewStream(bytes.NewReader(data[1:]), uint64(len(data)-1))
 		t := &amp;BlobTx{}
<span class="term-fg32">+		if err := t.DecodeRLP(s); err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return t, nil</span>
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		s := rlp.NewStream(bytes.NewReader(data[1:]), uint64(len(data)-1))</span>
<span class="term-fg32">+		t := &amp;DepositTransaction{}</span>
 		if err := t.DecodeRLP(s); err != nil {
 			return nil, err
 		}
<span class="term-fg36">@@ -514,9 +556,12 @@</span> }
&nbsp;
 &#47;&#47; Message is a fully derived transaction and implements core.Message
 type Message struct {
<span class="term-fg32">+	txType           byte</span>
<span class="term-fg32">+	sourceHash       *libcommon.Hash &#47;&#47; TODO(jky) Why is this here?</span>
 	to               *libcommon.Address
 	from             libcommon.Address
 	nonce            uint64
<span class="term-fg32">+	mint             uint256.Int</span>
 	amount           uint256.Int
 	gasLimit         uint64
 	gasPrice         uint256.Int
<span class="term-fg36">@@ -528,22 +573,25 @@</span> 	accessList       types2.AccessList
 	checkNonce       bool
 	isFree           bool
 	blobHashes       []libcommon.Hash
<span class="term-fg32">+	isSystemTx       bool</span>
<span class="term-fg32">+	rollupDataGas    uint64</span>
 }
&nbsp;
 func NewMessage(from libcommon.Address, to *libcommon.Address, nonce uint64, amount *uint256.Int, gasLimit uint64,
 	gasPrice *uint256.Int, feeCap, tip *uint256.Int, data []byte, accessList types2.AccessList, checkNonce bool,
<span class="term-fg31">-	isFree bool, maxFeePerBlobGas *uint256.Int,</span>
<span class="term-fg32">+	isFree bool, maxFeePerBlobGas *uint256.Int, rollupDataGas uint64,</span>
 ) Message {
 	m := Message{
<span class="term-fg31">-		from:       from,</span>
<span class="term-fg31">-		to:         to,</span>
<span class="term-fg31">-		nonce:      nonce,</span>
<span class="term-fg31">-		amount:     *amount,</span>
<span class="term-fg31">-		gasLimit:   gasLimit,</span>
<span class="term-fg31">-		data:       data,</span>
<span class="term-fg31">-		accessList: accessList,</span>
<span class="term-fg31">-		checkNonce: checkNonce,</span>
<span class="term-fg31">-		isFree:     isFree,</span>
<span class="term-fg32">+		from:          from,</span>
<span class="term-fg32">+		to:            to,</span>
<span class="term-fg32">+		nonce:         nonce,</span>
<span class="term-fg32">+		amount:        *amount,</span>
<span class="term-fg32">+		gasLimit:      gasLimit,</span>
<span class="term-fg32">+		data:          data,</span>
<span class="term-fg32">+		accessList:    accessList,</span>
<span class="term-fg32">+		checkNonce:    checkNonce,</span>
<span class="term-fg32">+		isFree:        isFree,</span>
<span class="term-fg32">+		rollupDataGas: rollupDataGas,</span>
 	}
 	if gasPrice != nil {
 		m.gasPrice.Set(gasPrice)
<span class="term-fg36">@@ -566,6 +614,9 @@</span> func (m Message) GasPrice() *uint256.Int        { return &amp;m.gasPrice }
 func (m Message) FeeCap() *uint256.Int          { return &amp;m.feeCap }
 func (m Message) Tip() *uint256.Int             { return &amp;m.tip }
 func (m Message) Value() *uint256.Int           { return &amp;m.amount }
<span class="term-fg32">+func (m Message) Mint() *uint256.Int            { return &amp;m.mint }</span>
<span class="term-fg32">+func (m Message) IsDepositTx() bool             { return m.txType == DepositTxType }</span>
<span class="term-fg32">+func (m Message) RollupDataGas() uint64         { return m.rollupDataGas }</span>
 func (m Message) Gas() uint64                   { return m.gasLimit }
 func (m Message) Nonce() uint64                 { return m.nonce }
 func (m Message) Data() []byte                  { return m.data }
<span class="term-fg36">@@ -600,6 +651,8 @@</span>
 func (m Message) MaxFeePerBlobGas() *uint256.Int {
 	return &amp;m.maxFeePerBlobGas
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m Message) IsSystemTx() bool { return m.isSystemTx }</span>
&nbsp;
 func (m Message) BlobHashes() []libcommon.Hash { return m.blobHashes }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fb8b7ae7b75a91dff6e22a71" role="button"
                   aria-expanded="false" aria-controls="id-fb8b7ae7b75a91dff6e22a71">
                    <code>core/vm/evmtypes/evmtypes.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/vm/evmtypes/evmtypes.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/vm/evmtypes/evmtypes.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fb8b7ae7b75a91dff6e22a71"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;vm&#47;evmtypes&#47;evmtypes.go bobanetwork&#47;v3-erigon&#47;core&#47;vm&#47;evmtypes&#47;evmtypes.go</span>
<span class="term-fg1">index 4b919f6b3e369e38f3e891580cee94243e642359..43ec5930a7583bf31ad0026fd2e7007463bb67b8 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;vm&#47;evmtypes&#47;evmtypes.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;vm&#47;evmtypes&#47;evmtypes.go</span>
<span class="term-fg36">@@ -22,6 +22,9 @@</span> 	&#47;&#47; Transfer transfers ether from one account to the other
 	Transfer TransferFunc
 	&#47;&#47; GetHash returns the hash corresponding to n
 	GetHash GetHashFunc
<span class="term-fg32">+	&#47;&#47; L1CostFunc returns the cost of of a rollup message, returning nil if no</span>
<span class="term-fg32">+	&#47;&#47; cost</span>
<span class="term-fg32">+	L1CostFunc types.L1CostFunc</span>
&nbsp;
 	&#47;&#47; Block information
 	Coinbase      common.Address &#47;&#47; Provides information for COINBASE</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eaf205ebfe93d6500b5df9c4" role="button"
                   aria-expanded="false" aria-controls="id-eaf205ebfe93d6500b5df9c4">
                    <code>turbo/transactions/call.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/transactions/call.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/transactions/call.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eaf205ebfe93d6500b5df9c4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;transactions&#47;call.go bobanetwork&#47;v3-erigon&#47;turbo&#47;transactions&#47;call.go</span>
<span class="term-fg1">index 822f7505e4b65e3d41c9cf9d9f2978801369bbff..49a75bb52bad405c66f8bb9cfe8da358cca77b2e 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;transactions&#47;call.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;transactions&#47;call.go</span>
<span class="term-fg36">@@ -80,7 +80,9 @@</span> 	msg, err := args.ToMessage(gasCap, baseFee)
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg31">-	blockCtx := NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, headerReader)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, state)</span>
<span class="term-fg32">+	blockCtx := NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, headerReader, l1CostFunc)</span>
 	txCtx := core.NewEVMTxContext(msg)
&nbsp;
 	evm := vm.NewEVM(blockCtx, txCtx, state, chainConfig, vm.Config{NoBaseFee: true})
<span class="term-fg36">@@ -105,8 +107,8 @@</span> 	}
 	return result, nil
 }
&nbsp;
<span class="term-fg31">-func NewEVMBlockContext(engine consensus.EngineReader, header *types.Header, requireCanonical bool, tx kv.Tx, headerReader services.HeaderReader) evmtypes.BlockContext {</span>
<span class="term-fg31">-	return core.NewEVMBlockContext(header, MakeHeaderGetter(requireCanonical, tx, headerReader), engine, nil &#47;* author *&#47;)</span>
<span class="term-fg32">+func NewEVMBlockContext(engine consensus.EngineReader, header *types.Header, requireCanonical bool, tx kv.Tx, headerReader services.HeaderReader, l1CostFunc types.L1CostFunc) evmtypes.BlockContext {</span>
<span class="term-fg32">+	return core.NewEVMBlockContext(header, MakeHeaderGetter(requireCanonical, tx, headerReader), engine, nil &#47;* author *&#47;, l1CostFunc)</span>
 }
&nbsp;
 func MakeHeaderGetter(requireCanonical bool, tx kv.Tx, headerReader services.HeaderReader) func(uint64) libcommon.Hash {
<span class="term-fg36">@@ -212,7 +214,8 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg31">-	blockCtx := NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, headerReader)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+	blockCtx := NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, headerReader, l1CostFunc)</span>
 	txCtx := core.NewEVMTxContext(msg)
&nbsp;
 	evm := vm.NewEVM(blockCtx, txCtx, ibs, chainConfig, vm.Config{NoBaseFee: true})</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0e70d50649cf3fbb1bb4b6dc" role="button"
                   aria-expanded="false" aria-controls="id-0e70d50649cf3fbb1bb4b6dc">
                    <code>turbo/transactions/tracing.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/transactions/tracing.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/transactions/tracing.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0e70d50649cf3fbb1bb4b6dc"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;transactions&#47;tracing.go bobanetwork&#47;v3-erigon&#47;turbo&#47;transactions&#47;tracing.go</span>
<span class="term-fg1">index 31c85f9c23d41e3bf3c244200129240900b01986..060a823dd83936bae19976ff9f9e0c87e6cc9089 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;transactions&#47;tracing.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;transactions&#47;tracing.go</span>
<span class="term-fg36">@@ -57,7 +57,8 @@</span> 		return h
 	}
 	header := block.HeaderNoCopy()
&nbsp;
<span class="term-fg31">-	blockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(cfg, statedb)</span>
<span class="term-fg32">+	blockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil, l1CostFunc)</span>
&nbsp;
 	&#47;&#47; Recompute transactions up to the target index.
 	signer := types.MakeSigner(cfg, block.NumberU64(), block.Time())</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-68b4c9bf2ecef3cb962c757a"role="button" aria-expanded="false" aria-controls="id-68b4c9bf2ecef3cb962c757a">
        
            <div class="col-12 col-sm-9 text-start"><h4>Transaction processing</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+114</span></div>
                <div class="text-start"><span class="text-danger">-1</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-68b4c9bf2ecef3cb962c757a">
        <div><p>Deposit transactions have special processing rules: gas is pre-paid on L1, and deposits with EVM-failure are included with rolled back changes (except mint). For regular transactions, at the end of the transition, the 1559 burn and L1 cost are routed to vaults.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6b2d63d265b4f0eed8ff6a22" role="button"
                   aria-expanded="false" aria-controls="id-6b2d63d265b4f0eed8ff6a22">
                    <code>core/state_transition.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/state_transition.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/state_transition.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+114</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6b2d63d265b4f0eed8ff6a22"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;state_transition.go bobanetwork&#47;v3-erigon&#47;core&#47;state_transition.go</span>
<span class="term-fg1">index 21748b485df0ca34a2e3717e699e7c2dfdbf834f..2642763917ab3f54a1a1db23c11efd120f8ece0f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;state_transition.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;state_transition.go</span>
<span class="term-fg36">@@ -32,6 +32,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;vm&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;vm&#47;evmtypes&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
 )
&nbsp;
 var emptyCodeHash = crypto.Keccak256Hash(nil)
<span class="term-fg36">@@ -95,6 +96,10 @@</span> 	AccessList() types2.AccessList
 	BlobHashes() []libcommon.Hash
&nbsp;
 	IsFree() bool
<span class="term-fg32">+	IsSystemTx() bool</span>
<span class="term-fg32">+	IsDepositTx() bool</span>
<span class="term-fg32">+	RollupDataGas() uint64</span>
<span class="term-fg32">+	Mint() *uint256.Int</span>
 }
&nbsp;
 &#47;&#47; ExecutionResult includes all output after executing given evm
<span class="term-fg36">@@ -200,6 +205,15 @@</span> 	gasVal, overflow := gasVal.MulOverflow(gasVal, st.gasPrice)
 	if overflow {
 		return fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFunds, st.msg.From().Hex())
 	}
<span class="term-fg32">+	var l1Cost *uint256.Int</span>
<span class="term-fg32">+	if st.evm.ChainRules().IsBedrock {</span>
<span class="term-fg32">+		l1Cost = st.evm.Context().L1CostFunc(st.evm.Context().BlockNumber, st.msg)</span>
<span class="term-fg32">+		if l1Cost != nil {</span>
<span class="term-fg32">+			if _, overflow = gasVal.AddOverflow(gasVal, l1Cost); overflow {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFunds, st.msg.From().Hex())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	&#47;&#47; compute blob fee for eip-4844 data blobs if any
 	blobGasVal := new(uint256.Int)
<span class="term-fg36">@@ -231,6 +245,12 @@</span> 		balanceCheck, overflow = balanceCheck.AddOverflow(balanceCheck, st.value)
 		if overflow {
 			return fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFunds, st.msg.From().Hex())
 		}
<span class="term-fg32">+		if l1Cost != nil {</span>
<span class="term-fg32">+			balanceCheck, overflow = balanceCheck.AddOverflow(balanceCheck, l1Cost) &#47;&#47; FIXME - combine with dgval below</span>
<span class="term-fg32">+			if overflow {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFunds, st.msg.From().Hex())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
 		balanceCheck, overflow = balanceCheck.AddOverflow(balanceCheck, blobGasVal)
 		if overflow {
 			return fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFunds, st.msg.From().Hex())
<span class="term-fg36">@@ -273,6 +293,26 @@</span> }
&nbsp;
 &#47;&#47; DESCRIBED: docs&#47;programmers_guide&#47;guide.md#nonce
 func (st *StateTransition) preCheck(gasBailout bool) error {
<span class="term-fg32">+	if st.msg.IsDepositTx() {</span>
<span class="term-fg32">+		log.Debug(&quot;preCheck for Deposit txn&quot;, &quot;from&quot;, st.msg.From(), &quot;to&quot;, st.msg.To(), &quot;mint&quot;, st.msg.Mint(), &quot;value&quot;, st.msg.Mint())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Following section copied from Optimism patchset</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; No fee fields to check, no nonce to check, and no need to check if EOA (L1 already verified it for us)</span>
<span class="term-fg32">+		&#47;&#47; Gas is free, but no refunds!</span>
<span class="term-fg32">+		st.initialGas = st.msg.Gas()</span>
<span class="term-fg32">+		st.gas += st.msg.Gas() &#47;&#47; Add gas here in order to be able to execute calls.</span>
<span class="term-fg32">+		&#47;&#47; Don&#39;t touch the gas pool for system transactions</span>
<span class="term-fg32">+		if st.msg.IsSystemTx() {</span>
<span class="term-fg32">+			if st.evm.ChainRules().IsOptimismRegolith {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;%w: address %v&quot;, ErrSystemTxNotSupported,</span>
<span class="term-fg32">+					st.msg.From().Hex())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return st.gp.SubGas(st.msg.Gas()) &#47;&#47; gas used by deposits may not be used by other txs</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Make sure this transaction&#39;s nonce is correct.
 	if st.msg.CheckNonce() {
 		stNonce := st.state.GetNonce(st.msg.From())
<span class="term-fg36">@@ -325,6 +365,38 @@</span>
 	return st.buyGas(gasBailout)
 }
&nbsp;
<span class="term-fg32">+func (st *StateTransition) TransitionDb(refunds bool, gasBailout bool) (*ExecutionResult, error) {</span>
<span class="term-fg32">+	if mint := st.msg.Mint(); mint != nil {</span>
<span class="term-fg32">+		st.state.AddBalance(st.msg.From(), mint)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var snap int</span>
<span class="term-fg32">+	if st.msg.IsDepositTx() {</span>
<span class="term-fg32">+		snap = st.state.Snapshot()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	result, err := st.innerTransitionDb(refunds, gasBailout)</span>
<span class="term-fg32">+	&#47;&#47; Failed deposits must still be included. Unless we cannot produce the block at all due to the gas limit.</span>
<span class="term-fg32">+	&#47;&#47; On deposit failure, we rewind any state changes from after the minting, and increment the nonce.</span>
<span class="term-fg32">+	if err != nil &amp;&amp; err != ErrGasLimitReached &amp;&amp; st.msg.IsDepositTx() {</span>
<span class="term-fg32">+		st.state.RevertToSnapshot(snap)</span>
<span class="term-fg32">+		&#47;&#47; Even though we revert the state changes, always increment the nonce for the next deposit transaction</span>
<span class="term-fg32">+		st.state.SetNonce(st.msg.From(), st.state.GetNonce(st.msg.From())+1)</span>
<span class="term-fg32">+		&#47;&#47; Record deposits as using all their gas (matches the gas pool)</span>
<span class="term-fg32">+		&#47;&#47; System Transactions are special &amp; are not recorded as using any gas (anywhere)</span>
<span class="term-fg32">+		gasUsed := st.msg.Gas()</span>
<span class="term-fg32">+		if st.msg.IsSystemTx() &amp;&amp; !st.evm.ChainConfig().IsOptimismRegolith(st.evm.Context().Time) {</span>
<span class="term-fg32">+			gasUsed = 0</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		result = &amp;ExecutionResult{</span>
<span class="term-fg32">+			UsedGas:    gasUsed,</span>
<span class="term-fg32">+			Err:        fmt.Errorf(&quot;failed deposit: %w&quot;, err),</span>
<span class="term-fg32">+			ReturnData: nil,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		err = nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return result, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; TransitionDb will transition the state by applying the current message and
 &#47;&#47; returning the evm execution result with following fields.
 &#47;&#47;
<span class="term-fg36">@@ -338,7 +410,7 @@</span> &#47;&#47;     e.g. ErrOutOfGas, ErrExecutionReverted
 &#47;&#47;
 &#47;&#47; However if any consensus issue encountered, return the error directly with
 &#47;&#47; nil evm execution result.
<span class="term-fg31">-func (st *StateTransition) TransitionDb(refunds bool, gasBailout bool) (*ExecutionResult, error) {</span>
<span class="term-fg32">+func (st *StateTransition) innerTransitionDb(refunds bool, gasBailout bool) (*ExecutionResult, error) {</span>
 	coinbase := st.evm.Context().Coinbase
&nbsp;
 	var input1 *uint256.Int
<span class="term-fg36">@@ -420,12 +492,40 @@</span> 		st.state.SetNonce(msg.From(), st.state.GetNonce(sender.Address())+1)
 		ret, st.gas, vmerr = st.evm.Call(sender, st.to(), st.data, st.gas, st.value, bailout)
 	}
 	if refunds {
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; if deposit: skip refunds, skip tipping coinbase</span>
<span class="term-fg32">+		&#47;&#47; Regolith changes this behaviour to report the actual gasUsed instead of always reporting all gas used.</span>
<span class="term-fg32">+		if st.msg.IsDepositTx() &amp;&amp; !rules.IsOptimismRegolith {</span>
<span class="term-fg32">+			&#47;&#47; Record deposits as using all their gas (matches the gas pool)</span>
<span class="term-fg32">+			&#47;&#47; System Transactions are special &amp; are not recorded as using any gas (anywhere)</span>
<span class="term-fg32">+			gasUsed := st.msg.Gas()</span>
<span class="term-fg32">+			if st.msg.IsSystemTx() {</span>
<span class="term-fg32">+				gasUsed = 0</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;ExecutionResult{</span>
<span class="term-fg32">+				UsedGas:    gasUsed,</span>
<span class="term-fg32">+				Err:        vmerr,</span>
<span class="term-fg32">+				ReturnData: ret,</span>
<span class="term-fg32">+			}, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Note for deposit tx there is no ETH refunded for unused gas, but that&#39;s taken care of by the fact that gasPrice</span>
<span class="term-fg32">+		&#47;&#47; is always 0 for deposit tx. So calling refundGas will ensure the gasUsed accounting is correct without actually</span>
<span class="term-fg32">+		&#47;&#47; changing the sender&#39;s balance</span>
 		if rules.IsLondon {
 			&#47;&#47; After EIP-3529: refunds are capped to gasUsed &#47; 5
 			st.refundGas(params.RefundQuotientEIP3529)
 		} else {
 			&#47;&#47; Before EIP-3529: refunds were capped to gasUsed &#47; 2
 			st.refundGas(params.RefundQuotient)
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		if st.msg.IsDepositTx() &amp;&amp; rules.IsOptimismRegolith {</span>
<span class="term-fg32">+			&#47;&#47; Skip coinbase payments for deposit tx in Regolith</span>
<span class="term-fg32">+			return &amp;ExecutionResult{</span>
<span class="term-fg32">+				UsedGas:    st.gasUsed(),</span>
<span class="term-fg32">+				Err:        vmerr,</span>
<span class="term-fg32">+				ReturnData: ret,</span>
<span class="term-fg32">+			}, nil</span>
 		}
 	}
 	effectiveTip := st.gasPrice
<span class="term-fg36">@@ -461,6 +561,19 @@</span> 			input2,
 			output1.Sub(output1, amount),
 			output2.Add(output2, amount),
 		)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check that we are post bedrock to be able to create pseudo pre-bedrock blocks (these are pre-bedrock, but don&#39;t follow l2 geth rules)</span>
<span class="term-fg32">+	if rules.IsBedrock {</span>
<span class="term-fg32">+		st.state.AddBalance(params.OptimismBaseFeeRecipient, new(uint256.Int).Mul(uint256.NewInt(st.gasUsed()), st.evm.Context().BaseFee))</span>
<span class="term-fg32">+		if st.evm.Context().L1CostFunc == nil {</span>
<span class="term-fg32">+			log.Error(&quot;Expected L1CostFunc to be set, but it is not&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		cost := st.evm.Context().L1CostFunc(st.evm.Context().BlockNumber, st.msg)</span>
<span class="term-fg32">+		log.Info(&quot;Calculated Optimism fees&quot;, &quot;gasUsed&quot;, st.gasUsed, &quot;baseFee&quot;, st.evm.Context().BaseFee, &quot;L1Cost&quot;, cost)</span>
<span class="term-fg32">+		if cost != nil {</span>
<span class="term-fg32">+			st.state.AddBalance(params.OptimismL1FeeRecipient, cost)</span>
<span class="term-fg32">+		}</span>
 	}
&nbsp;
 	return &amp;ExecutionResult{</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-4c705a612d2b07795e9bd9c0"role="button" aria-expanded="false" aria-controls="id-4c705a612d2b07795e9bd9c0">
        
            <div class="col-12 col-sm-9 text-start"><h4>Gaslimit</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+16</span></div>
                <div class="text-start"><span class="text-danger">-8</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-4c705a612d2b07795e9bd9c0">
        <div><p>Deposit transactions have special processing rules: gas is pre-paid on L1, and deposits with EVM-failure are included with rolled back changes (except mint). For regular transactions, at the end of the transition, the 1559 burn and L1 cost are routed to vaults.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6434f09a6ad10704d16ae44a" role="button"
                   aria-expanded="false" aria-controls="id-6434f09a6ad10704d16ae44a">
                    <code>consensus/misc/eip1559.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/consensus/misc/eip1559.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/consensus/misc/eip1559.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+16</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6434f09a6ad10704d16ae44a"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;consensus&#47;misc&#47;eip1559.go bobanetwork&#47;v3-erigon&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg1">index 8cd278b253bcd881954186fbd928e2747050b697..93607945a3109c159abfb86bae0f61910eaed712 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg36">@@ -36,10 +36,13 @@</span> 	if !skipGasLimit {
 		&#47;&#47; Verify that the gas limit remains within allowed bounds
 		parentGasLimit := parent.GasLimit
 		if !config.IsLondon(parent.Number.Uint64()) {
<span class="term-fg31">-			parentGasLimit = parent.GasLimit * params.ElasticityMultiplier</span>
<span class="term-fg32">+			parentGasLimit = parent.GasLimit * config.ElasticityMultiplier(params.ElasticityMultiplier)</span>
 		}
<span class="term-fg31">-		if err := VerifyGaslimit(parentGasLimit, header.GasLimit); err != nil {</span>
<span class="term-fg31">-			return err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		if config.Optimism == nil {</span>
<span class="term-fg32">+			if err := VerifyGaslimit(parentGasLimit, header.GasLimit); err != nil {</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			}</span>
 		}
 	}
 	&#47;&#47; Verify the header is not malformed
<span class="term-fg36">@@ -57,15 +60,20 @@</span> }
&nbsp;
 &#47;&#47; CalcBaseFee calculates the basefee of the header.
 func CalcBaseFee(config *chain.Config, parent *types.Header) *big.Int {
<span class="term-fg32">+	&#47;&#47; If the current block is pre bedrock, return 0.</span>
<span class="term-fg32">+	if config.IsOptimismPreBedrock(parent.Number.Uint64()) {</span>
<span class="term-fg32">+		return common.Big0</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; If the current block is the first EIP-1559 block, return the InitialBaseFee.
 	if !config.IsLondon(parent.Number.Uint64()) {
 		return new(big.Int).SetUint64(params.InitialBaseFee)
 	}
&nbsp;
 	var (
<span class="term-fg31">-		parentGasTarget          = parent.GasLimit &#47; params.ElasticityMultiplier</span>
<span class="term-fg32">+		parentGasTarget          = parent.GasLimit &#47; config.ElasticityMultiplier(params.ElasticityMultiplier)</span>
 		parentGasTargetBig       = new(big.Int).SetUint64(parentGasTarget)
<span class="term-fg31">-		baseFeeChangeDenominator = new(big.Int).SetUint64(getBaseFeeChangeDenominator(config.Bor, parent.Number.Uint64()))</span>
<span class="term-fg32">+		baseFeeChangeDenominator = new(big.Int).SetUint64(getBaseFeeChangeDenominator(config, parent.Number.Uint64()))</span>
 	)
 	&#47;&#47; If the parent gasUsed is the same as the target, the baseFee remains unchanged.
 	if parent.GasUsed == parentGasTarget {
<span class="term-fg36">@@ -96,12 +104,12 @@</span> 		)
 	}
 }
&nbsp;
<span class="term-fg31">-func getBaseFeeChangeDenominator(borConfig *chain.BorConfig, number uint64) uint64 {</span>
<span class="term-fg32">+func getBaseFeeChangeDenominator(config *chain.Config, number uint64) uint64 {</span>
 	&#47;&#47; If we&#39;re running bor based chain post delhi hardfork, return the new value
<span class="term-fg31">-	if borConfig != nil &amp;&amp; borConfig.IsDelhi(number) {</span>
<span class="term-fg32">+	if config.Bor != nil &amp;&amp; config.Bor.IsDelhi(number) {</span>
 		return params.BaseFeeChangeDenominatorPostDelhi
 	}
&nbsp;
 	&#47;&#47; Return the original once for other chains and pre-fork cases
<span class="term-fg31">-	return params.BaseFeeChangeDenominator</span>
<span class="term-fg32">+	return config.BaseFeeChangeDenominator(params.BaseFeeChangeDenominator)</span>
 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-49bd53ebd9633e67fcff0d43"role="button" aria-expanded="false" aria-controls="id-49bd53ebd9633e67fcff0d43">
        
            <div class="col-12 col-sm-9 text-start"><h4>Regolith upgrade</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+17</span></div>
                <div class="text-start"><span class="text-danger">-2</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-49bd53ebd9633e67fcff0d43">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a99679914e958f08a152d45d" role="button"
                   aria-expanded="false" aria-controls="id-a99679914e958f08a152d45d">
                    <code>core/state_processor.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/state_processor.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/state_processor.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+17</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a99679914e958f08a152d45d"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;state_processor.go bobanetwork&#47;v3-erigon&#47;core&#47;state_processor.go</span>
<span class="term-fg1">index be097186fa600e0b678cf89364a5c93273131c65..ab37c2bd4823b33a47b3f61cb38c5b652a2d30a1 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;state_processor.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;state_processor.go</span>
<span class="term-fg36">@@ -19,6 +19,7 @@</span>
 import (
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;consensus&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;state&quot;
<span class="term-fg36">@@ -58,6 +59,11 @@</span>
 	&#47;&#47; Update the evm with the new transaction context.
 	evm.Reset(txContext, ibs)
&nbsp;
<span class="term-fg32">+	nonce := tx.GetNonce()</span>
<span class="term-fg32">+	if msg.IsDepositTx() &amp;&amp; config.IsOptimismRegolith(evm.Context().Time) {</span>
<span class="term-fg32">+		nonce = ibs.GetNonce(msg.From())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	result, err := ApplyMessage(evm, msg, gp, true &#47;* refunds *&#47;, false &#47;* gasBailout *&#47;)
 	if err != nil {
 		return nil, nil, err
<span class="term-fg36">@@ -84,9 +90,16 @@</span> 			receipt.Status = types.ReceiptStatusSuccessful
 		}
 		receipt.TxHash = tx.Hash()
 		receipt.GasUsed = result.UsedGas
<span class="term-fg32">+</span>
<span class="term-fg32">+		if msg.IsDepositTx() &amp;&amp; config.IsOptimismRegolith(evm.Context().Time) {</span>
<span class="term-fg32">+			&#47;&#47; The actual nonce for deposit transactions is only recorded from Regolith onwards.</span>
<span class="term-fg32">+			&#47;&#47; Before the Regolith fork the DepositNonce must remain nil</span>
<span class="term-fg32">+			receipt.DepositNonce = &amp;nonce</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
 		&#47;&#47; if the transaction created a contract, store the creation address in the receipt.
 		if msg.To() == nil {
<span class="term-fg31">-			receipt.ContractAddress = crypto.CreateAddress(evm.TxContext().Origin, tx.GetNonce())</span>
<span class="term-fg32">+			receipt.ContractAddress = crypto.CreateAddress(evm.TxContext().Origin, nonce)</span>
 		}
 		&#47;&#47; Set the receipt logs and create a bloom for filtering
 		receipt.Logs = ibs.GetLogs(tx.Hash())
<span class="term-fg36">@@ -106,13 +119,15 @@</span> func ApplyTransaction(config *chain.Config, blockHashFunc func(n uint64) libcommon.Hash, engine consensus.EngineReader,
 	author *libcommon.Address, gp *GasPool, ibs *state.IntraBlockState, stateWriter state.StateWriter,
 	header *types.Header, tx types.Transaction, usedGas, usedBlobGas *uint64, cfg vm.Config,
 ) (*types.Receipt, []byte, error) {
<span class="term-fg32">+	log.Debug(&quot;ApplyTransaction called for&quot;, &quot;txhash&quot;, tx.Hash(), &quot;blockNum&quot;, header.Number.Uint64())</span>
 	&#47;&#47; Create a new context to be used in the EVM environment
&nbsp;
 	&#47;&#47; Add addresses to access list if applicable
 	&#47;&#47; about the transaction and calling mechanisms.
 	cfg.SkipAnalysis = SkipAnalysis(config, header.Number.Uint64())
&nbsp;
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, blockHashFunc, engine, author)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(config, ibs)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, blockHashFunc, engine, author, l1CostFunc)</span>
 	vmenv := vm.NewEVM(blockContext, evmtypes.TxContext{}, ibs, config, cfg)
&nbsp;
 	return applyTransaction(config, engine, gp, ibs, stateWriter, header, tx, usedGas, usedBlobGas, vmenv, cfg)</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-7ae2761a7a7fa894081f6d7d"role="button" aria-expanded="false" aria-controls="id-7ae2761a7a7fa894081f6d7d">
        
            <div class="col-12 col-sm-9 text-start"><h3>Chain config</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+7</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-7ae2761a7a7fa894081f6d7d">
        <div><p>The rollup functionality is enabled with the optimism field in the chain config. The EIP-1559 parameters are configurable to adjust for faster more frequent and smaller blocks. The parameters can be overriden for testing.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5940c3268a8a6e1a8de10e01" role="button"
                   aria-expanded="false" aria-controls="id-5940c3268a8a6e1a8de10e01">
                    <code>params/protocol_params.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/params/protocol_params.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/protocol_params.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5940c3268a8a6e1a8de10e01"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;protocol_params.go bobanetwork&#47;v3-erigon&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">index 33ffda9a94c75456f872f85290248fe473d1d7b1..7a3f6621635fcf6cabf76a102ee62c1f74d345e7 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;protocol_params.go</span>
<span class="term-fg36">@@ -22,6 +22,13 @@</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 )
&nbsp;
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; The base fee portion of the transaction fee accumulates at this predeploy</span>
<span class="term-fg32">+	OptimismBaseFeeRecipient = common.HexToAddress(&quot;0x4200000000000000000000000000000000000019&quot;)</span>
<span class="term-fg32">+	&#47;&#47; The L1 portion of the transaction fee accumulates at this predeploy</span>
<span class="term-fg32">+	OptimismL1FeeRecipient = common.HexToAddress(&quot;0x420000000000000000000000000000000000001A&quot;)</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
 const (
 	GasLimitBoundDivisor uint64 = 1024               &#47;&#47; The bound divisor of the gas limit, used in update calculations.
 	MinGasLimit          uint64 = 5000               &#47;&#47; Minimum the gas limit may ever be.</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-e5a59e31112d9e6cbb91bbf8"role="button" aria-expanded="false" aria-controls="id-e5a59e31112d9e6cbb91bbf8">
        
            <div class="col-12 col-sm-9 text-start"><h3>Engine API modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+1</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-e5a59e31112d9e6cbb91bbf8">
        <div><p>The Engine API is extended to insert transactions into the block and optionally exclude the tx-pool, to reproduce the exact block of the sequencer from just the inputs, as derived from L1 by the rollup-node. See <a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/exec-engine.md">L2 execution engine specs</a>.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e3ce92ccaf79c00c56ab0fa" role="button"
                   aria-expanded="false" aria-controls="id-5e3ce92ccaf79c00c56ab0fa">
                    <code>ethdb/privateapi/ethbackend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/ethdb/privateapi/ethbackend.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/ethdb/privateapi/ethbackend.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e3ce92ccaf79c00c56ab0fa"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;ethdb&#47;privateapi&#47;ethbackend.go bobanetwork&#47;v3-erigon&#47;ethdb&#47;privateapi&#47;ethbackend.go</span>
<span class="term-fg1">index 1e0bb3bc1f55e584e9f3e18e38aa4902fca100e4..66fdf15c77268de6531ed42e13cd7fb714acb494 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;ethdb&#47;privateapi&#47;ethbackend.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;ethdb&#47;privateapi&#47;ethbackend.go</span>
<span class="term-fg36">@@ -111,6 +111,7 @@</span> 			return nil, err
 		}
 	}
&nbsp;
<span class="term-fg32">+	&#47;&#47; TODO(jky) this seems to return a bad encoding now</span>
 	blockRlp, err := rlp.EncodeToBytes(pendingBlock)
 	if err != nil {
 		return nil, err</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-ca7b449997cebd4007fa970f"role="button" aria-expanded="false" aria-controls="id-ca7b449997cebd4007fa970f">
        
            <div class="col-12 col-sm-9 text-start"><h3>Block-building modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+62</span></div>
                <div class="text-start"><span class="text-danger">-5</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-ca7b449997cebd4007fa970f">
        <div><p>The block-building code (in the “mining” stages because of Proof-Of-Work legacy of ethereum) implements the changes to support the transaction-inclusion, tx-pool toggle and gaslimit parameters of the Engine API.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d134380478c62a600e7d6a6d" role="button"
                   aria-expanded="false" aria-controls="id-d134380478c62a600e7d6a6d">
                    <code>eth/stagedsync/stage_mining_create_block.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/stage_mining_create_block.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/stage_mining_create_block.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d134380478c62a600e7d6a6d"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_mining_create_block.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_mining_create_block.go</span>
<span class="term-fg1">index 5016d4afa0290a1b1aeb2895abaff46cc603ef9d..e270f22c3ae84d39b194f6c94ed967c748833b32 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_mining_create_block.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_mining_create_block.go</span>
<span class="term-fg36">@@ -31,6 +31,9 @@</span> 	Txs         types.Transactions
 	Receipts    types.Receipts
 	Withdrawals []*types.Withdrawal
 	PreparedTxs types.TransactionsStream
<span class="term-fg32">+</span>
<span class="term-fg32">+	Deposits [][]byte</span>
<span class="term-fg32">+	NoTxPool bool</span>
 }
&nbsp;
 type MiningState struct {
<span class="term-fg36">@@ -91,7 +94,7 @@</span> &#47;&#47; TODO:
 &#47;&#47; - resubmitAdjustCh - variable is not implemented
 func SpawnMiningCreateBlockStage(s *StageState, tx kv.RwTx, cfg MiningCreateBlockCfg, quit &lt;-chan struct{}, logger log.Logger) (err error) {
 	current := cfg.miner.MiningBlock
<span class="term-fg31">-	txPoolLocals := []libcommon.Address{} &#47;&#47;txPoolV2 has no concept of local addresses (yet?)</span>
<span class="term-fg32">+	txPoolLocals := []libcommon.Address{} &#47;&#47; txPoolV2 has no concept of local addresses (yet?)</span>
 	coinbase := cfg.miner.MiningConfig.Etherbase
&nbsp;
 	const (
<span class="term-fg36">@@ -170,7 +173,11 @@</span> 		family:    mapset.NewSet[libcommon.Hash](),
 		uncles:    mapset.NewSet[libcommon.Hash](),
 	}
&nbsp;
<span class="term-fg31">-	header := core.MakeEmptyHeader(parent, &amp;cfg.chainConfig, timestamp, &amp;cfg.miner.MiningConfig.GasLimit)</span>
<span class="term-fg32">+	targetGasLimit := &amp;cfg.miner.MiningConfig.GasLimit</span>
<span class="term-fg32">+	if cfg.chainConfig.IsOptimism() &amp;&amp; cfg.blockBuilderParameters != nil &amp;&amp; cfg.blockBuilderParameters.GasLimit != nil {</span>
<span class="term-fg32">+		targetGasLimit = cfg.blockBuilderParameters.GasLimit</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	header := core.MakeEmptyHeader(parent, &amp;cfg.chainConfig, timestamp, targetGasLimit)</span>
 	header.Coinbase = coinbase
 	header.Extra = cfg.miner.MiningConfig.ExtraData
&nbsp;
<span class="term-fg36">@@ -191,6 +198,7 @@</span> 			&quot;callers&quot;, debug.Callers(10))
 		return err
 	}
&nbsp;
<span class="term-fg32">+	log.Info(&quot;cfg.blockBuilderParamters&quot;, &quot;params&quot;, cfg.blockBuilderParameters)</span>
 	if cfg.blockBuilderParameters != nil {
 		header.MixDigest = cfg.blockBuilderParameters.PrevRandao
 		header.ParentBeaconBlockRoot = cfg.blockBuilderParameters.ParentBeaconBlockRoot
<span class="term-fg36">@@ -198,6 +206,9 @@</span>
 		current.Header = header
 		current.Uncles = nil
 		current.Withdrawals = cfg.blockBuilderParameters.Withdrawals
<span class="term-fg32">+</span>
<span class="term-fg32">+		current.Deposits = cfg.blockBuilderParameters.Deposits</span>
<span class="term-fg32">+		current.NoTxPool = cfg.blockBuilderParameters.NoTxPool</span>
 		return nil
 	}
&nbsp;
<span class="term-fg36">@@ -294,7 +305,6 @@</span> 			localUncles[u.Hash()] = u
 		} else {
 			remoteUncles[u.Hash()] = u
 		}
<span class="term-fg31">-</span>
 	}
 	return
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ea3bd5dc3bd07b9979c5bfbf" role="button"
                   aria-expanded="false" aria-controls="id-ea3bd5dc3bd07b9979c5bfbf">
                    <code>eth/stagedsync/stage_mining_exec.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/stage_mining_exec.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/stage_mining_exec.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+38</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ea3bd5dc3bd07b9979c5bfbf"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_mining_exec.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_mining_exec.go</span>
<span class="term-fg1">index d2ad47f6fb012058c2857e2758abbbeac9c71aaa..db2445a7c44263cae11fe3a74e96c412dc24e2e8 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_mining_exec.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_mining_exec.go</span>
<span class="term-fg36">@@ -105,8 +105,33 @@</span> 	&#47;&#47; Short circuit if there is no available pending transactions.
 	&#47;&#47; But if we disable empty precommit already, ignore it. Since
 	&#47;&#47; empty block is necessary to keep the liveness of the network.
 	if noempty {
<span class="term-fg32">+		log.Debug(&quot;Starting SpawnMiningExecStage&quot;, &quot;txs&quot;, txs, &quot;numDeposits&quot;, len(current.Deposits), &quot;NoTxPool&quot;, current.NoTxPool)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		if len(current.Deposits) &gt; 0 {</span>
<span class="term-fg32">+			var txs []types.Transaction</span>
<span class="term-fg32">+			for i := range current.Deposits {</span>
<span class="term-fg32">+				transaction, err := types.UnmarshalTransactionFromBinary(current.Deposits[i])</span>
<span class="term-fg32">+				log.Debug(&quot;Decoded Deposit transaction&quot;, &quot;i&quot;, i, &quot;err&quot;, err, &quot;tx&quot;, transaction)</span>
<span class="term-fg32">+				if err == io.EOF {</span>
<span class="term-fg32">+					continue</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				txs = append(txs, transaction)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			depTS := types.NewTransactionsFixedOrder(txs)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			logs, _, err := addTransactionsToMiningBlock(logPrefix, current, cfg.chainConfig, cfg.vmConfig, getHeader, cfg.engine, depTS, cfg.miningState.MiningConfig.Etherbase, ibs, quit, cfg.interrupt, cfg.payloadId, logger)</span>
<span class="term-fg32">+			log.Debug(&quot;addTransactionsToMiningBlock (deposit) result&quot;, &quot;err&quot;, err, &quot;logs&quot;, logs)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
 		if txs != nil &amp;&amp; !txs.Empty() {
 			logs, _, err := addTransactionsToMiningBlock(logPrefix, current, cfg.chainConfig, cfg.vmConfig, getHeader, cfg.engine, txs, cfg.miningState.MiningConfig.Etherbase, ibs, quit, cfg.interrupt, cfg.payloadId, logger)
<span class="term-fg32">+			log.Debug(&quot;addTransactionsToMiningBlock (txs) result&quot;, &quot;err&quot;, err, &quot;logs&quot;, logs)</span>
 			if err != nil {
 				return err
 			}
<span class="term-fg36">@@ -125,6 +150,11 @@</span> 				return err
 			}
&nbsp;
 			for {
<span class="term-fg32">+				if current.NoTxPool {</span>
<span class="term-fg32">+					&#47;&#47; Only allow the Deposit transactions from op-node</span>
<span class="term-fg32">+					log.Debug(&quot;Not adding transactions because NoTxPool is set&quot;)</span>
<span class="term-fg32">+					break</span>
<span class="term-fg32">+				}</span>
 				txs, y, err := getNextTransactions(cfg, chainID, current.Header, 50, executionAt, simulationTx, yielded, logger)
 				if err != nil {
 					return err
<span class="term-fg36">@@ -132,6 +162,7 @@</span> 				}
&nbsp;
 				if !txs.Empty() {
 					logs, stop, err := addTransactionsToMiningBlock(logPrefix, current, cfg.chainConfig, cfg.vmConfig, getHeader, cfg.engine, txs, cfg.miningState.MiningConfig.Etherbase, ibs, quit, cfg.interrupt, cfg.payloadId, logger)
<span class="term-fg32">+					log.Debug(&quot;addTransactionsToMiningBlock (regular)&quot;, &quot;err&quot;, err, &quot;logs&quot;, logs, &quot;stop&quot;, stop)</span>
 					if err != nil {
 						return err
 					}
<span class="term-fg36">@@ -268,6 +299,13 @@</span> 		}
 		if !ok {
 			transactions = transactions[1:]
 			noAccountCnt++
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if int(transaction.Type()) == types.DepositTxType {</span>
<span class="term-fg32">+			&#47;&#47; FIXME - may need to include some of the later checks</span>
<span class="term-fg32">+			log.Debug(&quot;Bypassing filterBadTransactions for Deposit tx&quot;, &quot;transaction&quot;, transaction)</span>
<span class="term-fg32">+			filtered = append(filtered, transaction)</span>
<span class="term-fg32">+			transactions = transactions[1:]</span>
 			continue
 		}
 		&#47;&#47; Check transaction nonce</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-11dcad24f1c8dc7d52b03f42" role="button"
                   aria-expanded="false" aria-controls="id-11dcad24f1c8dc7d52b03f42">
                    <code>core/block_builder_parameters.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/block_builder_parameters.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/block_builder_parameters.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-11dcad24f1c8dc7d52b03f42"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;block_builder_parameters.go bobanetwork&#47;v3-erigon&#47;core&#47;block_builder_parameters.go</span>
<span class="term-fg1">index 936724c2624ce23b4f17b90017cdfb4acee7dae2..71b6b2ddd7be14c151d9cb6ccf097ae66f516255 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;block_builder_parameters.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;block_builder_parameters.go</span>
<span class="term-fg36">@@ -16,4 +16,9 @@</span> 	PrevRandao            libcommon.Hash
 	SuggestedFeeRecipient libcommon.Address
 	Withdrawals           []*types.Withdrawal &#47;&#47; added in Shapella (EIP-4895)
 	ParentBeaconBlockRoot *libcommon.Hash     &#47;&#47; added in Dencun (EIP-4788)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Optimism additions</span>
<span class="term-fg32">+	Deposits [][]byte</span>
<span class="term-fg32">+	NoTxPool bool</span>
<span class="term-fg32">+	GasLimit *uint64</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d99acd93efaa1ad1d7be5141" role="button"
                   aria-expanded="false" aria-controls="id-d99acd93efaa1ad1d7be5141">
                    <code>core/chain_makers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/chain_makers.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/chain_makers.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d99acd93efaa1ad1d7be5141"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;chain_makers.go bobanetwork&#47;v3-erigon&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">index beeb5ae50ba4ad88cd053200b8892211cbc05239..807292879368742cb2ec8fbca3641814da4279d6 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;chain_makers.go</span>
<span class="term-fg36">@@ -592,11 +592,15 @@</span> 	&#47;&#47; Set baseFee and GasLimit if we are on an EIP-1559 chain
 	if chainConfig.IsLondon(header.Number.Uint64()) {
 		header.BaseFee = misc.CalcBaseFee(chainConfig, parent)
 		if !chainConfig.IsLondon(parent.Number.Uint64()) {
<span class="term-fg31">-			parentGasLimit = parent.GasLimit * params.ElasticityMultiplier</span>
<span class="term-fg32">+			parentGasLimit = parent.GasLimit * chainConfig.ElasticityMultiplier(params.ElasticityMultiplier)</span>
 		}
 	}
 	if targetGasLimit != nil {
<span class="term-fg31">-		header.GasLimit = CalcGasLimit(parentGasLimit, *targetGasLimit)</span>
<span class="term-fg32">+		if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+			header.GasLimit = *targetGasLimit</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			header.GasLimit = CalcGasLimit(parentGasLimit, *targetGasLimit)</span>
<span class="term-fg32">+		}</span>
 	} else {
 		header.GasLimit = parentGasLimit
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-354a493a270297548b99d4b1"role="button" aria-expanded="false" aria-controls="id-354a493a270297548b99d4b1">
        
            <div class="col-12 col-sm-9 text-start"><h3>Tx-pool tx cost updates</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+4</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-354a493a270297548b99d4b1">
        <div><p>Transaction queueing and inclusion needs to account for the L1 cost component.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-571636ffc524294bb6b8a4b6" role="button"
                   aria-expanded="false" aria-controls="id-571636ffc524294bb6b8a4b6">
                    <code>cmd/txpool/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/txpool/main.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/txpool/main.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-571636ffc524294bb6b8a4b6"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;txpool&#47;main.go bobanetwork&#47;v3-erigon&#47;cmd&#47;txpool&#47;main.go</span>
<span class="term-fg1">index 1dc3d7541fb785526fdb86f81c072602ce2e378f..3c5d1a844b133a9f305afe23042de1cce9249f7a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;txpool&#47;main.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;txpool&#47;main.go</span>
<span class="term-fg36">@@ -55,6 +55,8 @@</span> 	blobSlots     uint64
 	priceBump     uint64
 	blobPriceBump uint64
&nbsp;
<span class="term-fg32">+	noTxGossip bool</span>
<span class="term-fg32">+</span>
 	commitEvery time.Duration
 )
&nbsp;
<span class="term-fg36">@@ -80,6 +82,7 @@</span> 	rootCmd.PersistentFlags().Uint64Var(&amp;blobSlots, &quot;txpool.blobslots&quot;, txpoolcfg.DefaultConfig.BlobSlots, &quot;Max allowed total number of blobs (within type-3 txs) per account&quot;)
 	rootCmd.PersistentFlags().Uint64Var(&amp;priceBump, &quot;txpool.pricebump&quot;, txpoolcfg.DefaultConfig.PriceBump, &quot;Price bump percentage to replace an already existing transaction&quot;)
 	rootCmd.PersistentFlags().Uint64Var(&amp;blobPriceBump, &quot;txpool.blobpricebump&quot;, txpoolcfg.DefaultConfig.BlobPriceBump, &quot;Price bump percentage to replace an existing blob (type-3) transaction&quot;)
 	rootCmd.PersistentFlags().DurationVar(&amp;commitEvery, utils.TxPoolCommitEveryFlag.Name, utils.TxPoolCommitEveryFlag.Value, utils.TxPoolCommitEveryFlag.Usage)
<span class="term-fg32">+	rootCmd.PersistentFlags().BoolVar(&amp;noTxGossip, &quot;txpool.disabletxpoolgossip&quot;, txpoolcfg.DefaultConfig.NoTxGossip, &quot;Disable transaction pool gossip&quot;)</span>
 	rootCmd.Flags().StringSliceVar(&amp;traceSenders, utils.TxPoolTraceSendersFlag.Name, []string{}, utils.TxPoolTraceSendersFlag.Usage)
 }
&nbsp;
<span class="term-fg36">@@ -146,6 +149,7 @@</span> 	cfg.AccountSlots = accountSlots
 	cfg.BlobSlots = blobSlots
 	cfg.PriceBump = priceBump
 	cfg.BlobPriceBump = blobPriceBump
<span class="term-fg32">+	cfg.NoTxGossip = noTxGossip</span>
&nbsp;
 	cacheConfig := kvcache.DefaultCoherentConfig
 	cacheConfig.MetricsLabel = &quot;txpool&quot;</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-c34af3199d195736d1388d7f"role="button" aria-expanded="false" aria-controls="id-c34af3199d195736d1388d7f">
        
            <div class="col-12 col-sm-9 text-start"><h2>Node modifications</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+188</span></div>
                <div class="text-start"><span class="text-danger">-26</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-c34af3199d195736d1388d7f">
        <div><p>Changes to the node configuration and services.</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8267d9a709458725b10a9772"role="button" aria-expanded="false" aria-controls="id-8267d9a709458725b10a9772">
        
            <div class="col-12 col-sm-9 text-start"><h3>CLI</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+78</span></div>
                <div class="text-start"><span class="text-danger">-12</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8267d9a709458725b10a9772">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-571b3e8611cede29a5606ebd"role="button" aria-expanded="false" aria-controls="id-571b3e8611cede29a5606ebd">
        
            <div class="col-12 col-sm-9 text-start"><h4>Flags</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+40</span></div>
                <div class="text-start"><span class="text-danger">-11</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-571b3e8611cede29a5606ebd">
        <div><p>Flag changes: - Transactions can be forwarded to an RPC for sequencing. - Historical calls can be forwarded to a legacy node. - The tx pool propagation can be enabled/disabled. - The Optimism bedrock fork activation can be changed for testing.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b0ba1f58c31b4b7f1e85d029" role="button"
                   aria-expanded="false" aria-controls="id-b0ba1f58c31b4b7f1e85d029">
                    <code>cmd/utils/flags.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/utils/flags.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/utils/flags.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+36</span></div>
                        <div class="text-start"><span class="text-danger">-11</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b0ba1f58c31b4b7f1e85d029"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;utils&#47;flags.go bobanetwork&#47;v3-erigon&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">index 9c44087e38bc1fa09c7e6c0284ac42bd0d1f5474..d101256896058429552b90bf9e598f253934fb0a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg36">@@ -27,8 +27,6 @@</span> 	&quot;strconv&quot;
 	&quot;strings&quot;
&nbsp;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;cmp&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
<span class="term-fg36">@@ -58,6 +56,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;p2p&#47;enode&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;p2p&#47;nat&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;p2p&#47;netutil&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47; These are all the command line flags we support.
<span class="term-fg36">@@ -388,7 +387,7 @@</span> 	}
 	DBReadConcurrencyFlag = cli.IntFlag{
 		Name:  &quot;db.read.concurrency&quot;,
 		Usage: &quot;Does limit amount of parallel db reads. Default: equal to GOMAXPROCS (or number of CPU)&quot;,
<span class="term-fg31">-		Value: cmp.Min(cmp.Max(10, runtime.GOMAXPROCS(-1)*16), 9_000),</span>
<span class="term-fg32">+		Value: cmp.Max(10, runtime.GOMAXPROCS(-1)*8),</span>
 	}
 	RpcAccessListFlag = cli.StringFlag{
 		Name:  &quot;rpc.accessList&quot;,
<span class="term-fg36">@@ -808,7 +807,6 @@</span> 		Name:  &quot;sentinel.port&quot;,
 		Usage: &quot;Port for sentinel&quot;,
 		Value: 7777,
 	}
<span class="term-fg31">-</span>
 	OtsSearchMaxCapFlag = cli.Uint64Flag{
 		Name:  &quot;ots.search.max.pagesize&quot;,
 		Usage: &quot;Max allowed page size for search methods&quot;,
<span class="term-fg36">@@ -829,12 +827,32 @@</span> 	DiagnosticsSessionsFlag = cli.StringSliceFlag{
 		Name:  &quot;diagnostics.ids&quot;,
 		Usage: &quot;Comma separated list of support session ids to connect to&quot;,
 	}
<span class="term-fg31">-</span>
 	SilkwormPathFlag = cli.StringFlag{
 		Name:  &quot;silkworm.path&quot;,
 		Usage: &quot;Path to the silkworm_api library (enables embedded Silkworm execution)&quot;,
 		Value: &quot;&quot;,
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Rollup Flags</span>
<span class="term-fg32">+	RollupSequencerHTTPFlag = cli.StringFlag{</span>
<span class="term-fg32">+		Name:    &quot;rollup.sequencerhttp&quot;,</span>
<span class="term-fg32">+		Usage:   &quot;HTTP endpoint for the sequencer mempool&quot;,</span>
<span class="term-fg32">+		EnvVars: []string{&quot;ROLLUP_SEQUENCER_HTTP_ENDPOINT&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	RollupHistoricalRPCFlag = cli.StringFlag{</span>
<span class="term-fg32">+		Name:    &quot;rollup.historicalrpc&quot;,</span>
<span class="term-fg32">+		Usage:   &quot;RPC endpoint for historical data.&quot;,</span>
<span class="term-fg32">+		EnvVars: []string{&quot;ROLLUP_HISTORICAL_RPC_ENDPOINT&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	RollupHistoricalRPCTimeoutFlag = cli.StringFlag{</span>
<span class="term-fg32">+		Name:  &quot;rollup.historicalrpctimeout&quot;,</span>
<span class="term-fg32">+		Usage: &quot;Timeout for historical RPC requests.&quot;,</span>
<span class="term-fg32">+		Value: &quot;5s&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	RollupDisableTxPoolGossipFlag = cli.BoolFlag{</span>
<span class="term-fg32">+		Name:  &quot;rollup.disabletxpoolgossip&quot;,</span>
<span class="term-fg32">+		Usage: &quot;Disable transaction pool gossip.&quot;,</span>
<span class="term-fg32">+	}</span>
 )
&nbsp;
 var MetricFlags = []cli.Flag{&amp;MetricsEnabledFlag, &amp;MetricsHTTPFlag, &amp;MetricsPortFlag}
<span class="term-fg36">@@ -1537,12 +1555,7 @@</span> 			panic(err)
 		}
 		logger.Info(&quot;torrent verbosity&quot;, &quot;level&quot;, lvl.LogString())
 		version := &quot;erigon: &quot; + params.VersionWithCommit(params.GitCommit)
<span class="term-fg31">-		chain := ctx.String(ChainFlag.Name)</span>
<span class="term-fg31">-		webseedsList := libcommon.CliString2Array(ctx.String(WebSeedsFlag.Name))</span>
<span class="term-fg31">-		if known, ok := snapcfg.KnownWebseeds[chain]; ok {</span>
<span class="term-fg31">-			webseedsList = append(webseedsList, known...)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		cfg.Downloader, err = downloadercfg2.New(cfg.Dirs, version, lvl, downloadRate, uploadRate, ctx.Int(TorrentPortFlag.Name), ctx.Int(TorrentConnsPerFileFlag.Name), ctx.Int(TorrentDownloadSlotsFlag.Name), ctx.StringSlice(TorrentDownloadSlotsFlag.Name), webseedsList, chain)</span>
<span class="term-fg32">+		cfg.Downloader, err = downloadercfg2.New(cfg.Dirs, version, lvl, downloadRate, uploadRate, ctx.Int(TorrentPortFlag.Name), ctx.Int(TorrentConnsPerFileFlag.Name), ctx.Int(TorrentDownloadSlotsFlag.Name), ctx.StringSlice(TorrentDownloadSlotsFlag.Name), ctx.String(WebSeedsFlag.Name))</span>
 		if err != nil {
 			panic(err)
 		}
<span class="term-fg36">@@ -1649,6 +1662,18 @@</span>
 	if ctx.IsSet(TrustedSetupFile.Name) {
 		libkzg.SetTrustedSetupFilePath(ctx.String(TrustedSetupFile.Name))
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Rollup params</span>
<span class="term-fg32">+	if ctx.IsSet(RollupSequencerHTTPFlag.Name) &amp;&amp; !ctx.IsSet(MiningEnabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupSequencerHTTP = ctx.String(RollupSequencerHTTPFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(RollupHistoricalRPCFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupHistoricalRPC = ctx.String(RollupHistoricalRPCFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(RollupDisableTxPoolGossipFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupDisableTxPoolGossip = ctx.Bool(RollupDisableTxPoolGossipFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	cfg.RollupHistoricalRPCTimeout = ctx.Duration(RollupHistoricalRPCTimeoutFlag.Name)</span>
 }
&nbsp;
 &#47;&#47; SetDNSDiscoveryDefaults configures DNS discovery with the given URL if</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-26f4d7b82c18d0d414867555" role="button"
                   aria-expanded="false" aria-controls="id-26f4d7b82c18d0d414867555">
                    <code>turbo/cli/default_flags.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/cli/default_flags.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/cli/default_flags.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-26f4d7b82c18d0d414867555"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;cli&#47;default_flags.go bobanetwork&#47;v3-erigon&#47;turbo&#47;cli&#47;default_flags.go</span>
<span class="term-fg1">index 40fad68e151aed2e344d42caee669f8c2f704bba..6d7f012896169d1e7f266f481cc91ebad81a8255 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;cli&#47;default_flags.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;cli&#47;default_flags.go</span>
<span class="term-fg36">@@ -152,6 +152,10 @@</span> 	&amp;utils.BorBlockSizeFlag,
 	&amp;utils.WithHeimdallMilestones,
 	&amp;utils.EthStatsURLFlag,
 	&amp;utils.OverrideCancunFlag,
<span class="term-fg32">+	&amp;utils.RollupSequencerHTTPFlag,</span>
<span class="term-fg32">+	&amp;utils.RollupHistoricalRPCFlag,</span>
<span class="term-fg32">+	&amp;utils.RollupHistoricalRPCTimeoutFlag,</span>
<span class="term-fg32">+	&amp;utils.RollupDisableTxPoolGossipFlag,</span>
&nbsp;
 	&amp;utils.ConfigFlag,
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-87a3439e9bfae63df0504609"role="button" aria-expanded="false" aria-controls="id-87a3439e9bfae63df0504609">
        
            <div class="col-12 col-sm-9 text-start"><h4>Versioning</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+38</span></div>
                <div class="text-start"><span class="text-danger">-1</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-87a3439e9bfae63df0504609">
        <div><p>List the op-geth and upstream go-ethereum versions.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-40a41632cd71a897cea8dfd2" role="button"
                   aria-expanded="false" aria-controls="id-40a41632cd71a897cea8dfd2">
                    <code>params/version.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/params/version.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/version.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+38</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-40a41632cd71a897cea8dfd2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;version.go bobanetwork&#47;v3-erigon&#47;params&#47;version.go</span>
<span class="term-fg1">index b8041f72db73710018086358100f721daced816a..8590d88c4ddae8717323d3815d26fa0956e2d7d3 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;params&#47;version.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;version.go</span>
<span class="term-fg36">@@ -39,14 +39,51 @@</span> 	VersionKeyCreated  = &quot;ErigonVersionCreated&quot;
 	VersionKeyFinished = &quot;ErigonVersionFinished&quot;
 )
&nbsp;
<span class="term-fg32">+&#47;&#47; OPVersion is the version of op-geth</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	OPVersionMajor    = 0          &#47;&#47; Major version component of the current release</span>
<span class="term-fg32">+	OPVersionMinor    = 1          &#47;&#47; Minor version component of the current release</span>
<span class="term-fg32">+	OPVersionMicro    = 1          &#47;&#47; Patch version component of the current release</span>
<span class="term-fg32">+	OPVersionModifier = &quot;unstable&quot; &#47;&#47; Version metadata to append to the version string</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func withModifier(vsn string) string {</span>
<span class="term-fg32">+	if !isStable() {</span>
<span class="term-fg32">+		vsn += &quot;-&quot; + OPVersionModifier</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return vsn</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func isStable() bool {</span>
<span class="term-fg32">+	return OPVersionModifier == &quot;stable&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func isRelease() bool {</span>
<span class="term-fg32">+	return isStable() || OPVersionModifier == &quot;alpha&quot; || OPVersionModifier == &quot;beta&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Version holds the textual version string.
 var Version = func() string {
<span class="term-fg31">-	return fmt.Sprintf(&quot;%d.%02d.%d&quot;, VersionMajor, VersionMinor, VersionMicro)</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;%d.%02d.%d&quot;, OPVersionMajor, OPVersionMinor, OPVersionMicro)</span>
 }()
&nbsp;
 &#47;&#47; VersionWithMeta holds the textual version string including the metadata.
 var VersionWithMeta = func() string {
 	v := Version
<span class="term-fg32">+	if OPVersionModifier != &quot;&quot; {</span>
<span class="term-fg32">+		v += &quot;-&quot; + OPVersionModifier</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return v</span>
<span class="term-fg32">+}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ErigonVersion holds the textual erigon version string.</span>
<span class="term-fg32">+var ErigonVersion = func() string {</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;%d.%d.%d&quot;, VersionMajor, VersionMinor, VersionMicro)</span>
<span class="term-fg32">+}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ErigonVersionWithMeta holds the textual erigon version string including the metadata.</span>
<span class="term-fg32">+var ErigonVersionWithMeta = func() string {</span>
<span class="term-fg32">+	v := ErigonVersion</span>
 	if VersionModifier != &quot;&quot; {
 		v += &quot;-&quot; + VersionModifier
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-dc320444409e73eb5fa21060"role="button" aria-expanded="false" aria-controls="id-dc320444409e73eb5fa21060">
        
            <div class="col-12 col-sm-9 text-start"><h3>Node config</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+6</span></div>
                <div class="text-start"><span class="text-danger">-2</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-dc320444409e73eb5fa21060">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eca4ed0e5a77fc721f4eaac4" role="button"
                   aria-expanded="false" aria-controls="id-eca4ed0e5a77fc721f4eaac4">
                    <code>eth/ethconfig/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/ethconfig/config.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/ethconfig/config.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eca4ed0e5a77fc721f4eaac4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&#47;config.go bobanetwork&#47;v3-erigon&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">index 83ea6a406caa367e8681e8237e70e7fe39226082..fc39f26bde0ba98f9ee79b02c7775b908d0f2004 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg36">@@ -28,7 +28,6 @@</span> 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&#47;downloadercfg&quot;
<span class="term-fg36">@@ -40,6 +39,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&#47;estimate&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;gasprice&#47;gaspricecfg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;ethdb&#47;prune&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47; AggregationStep number of transactions in smallest static file
<span class="term-fg36">@@ -249,12 +249,16 @@</span> 	SentinelAddr                string
 	SentinelPort                uint64
&nbsp;
 	OverrideCancunTime *big.Int `toml:&quot;,omitempty&quot;`
<span class="term-fg31">-</span>
 	ForcePartialCommit bool
&nbsp;
 	&#47;&#47; Embedded Silkworm support
 	SilkwormEnabled bool
 	SilkwormPath    string
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupSequencerHTTP        string</span>
<span class="term-fg32">+	RollupHistoricalRPC        string</span>
<span class="term-fg32">+	RollupHistoricalRPCTimeout time.Duration</span>
<span class="term-fg32">+	RollupDisableTxPoolGossip  bool</span>
 }
&nbsp;
 type Sync struct {</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-efdbf30252738eed42801929"role="button" aria-expanded="false" aria-controls="id-efdbf30252738eed42801929">
        
            <div class="col-12 col-sm-9 text-start"><h3>Tx gossip disable option</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-efdbf30252738eed42801929">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-96de8dddfdfa20ae91636fd4"role="button" aria-expanded="false" aria-controls="id-96de8dddfdfa20ae91636fd4">
        
            <div class="col-12 col-sm-9 text-start"><h3>Goerli testnet configs</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+104</span></div>
                <div class="text-start"><span class="text-danger">-12</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-96de8dddfdfa20ae91636fd4">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ca9fc7400750726779b45ddf" role="button"
                   aria-expanded="false" aria-controls="id-ca9fc7400750726779b45ddf">
                    <code>params/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/params/config.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/config.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+48</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ca9fc7400750726779b45ddf"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;config.go bobanetwork&#47;v3-erigon&#47;params&#47;config.go</span>
<span class="term-fg1">index 4d001b7eccd72188596407e8976a66f37e3898b6..874ec8963560c0c1e3dc14a30bf9af648bd94471 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;params&#47;config.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;config.go</span>
<span class="term-fg36">@@ -24,10 +24,10 @@</span> 	&quot;math&#47;big&quot;
 	&quot;path&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;paths&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47;go:embed chainspecs
<span class="term-fg36">@@ -50,20 +50,24 @@</span> }
&nbsp;
 &#47;&#47; Genesis hashes to enforce below configs on.
 var (
<span class="term-fg31">-	MainnetGenesisHash    = libcommon.HexToHash(&quot;0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3&quot;)</span>
<span class="term-fg31">-	HoleskyGenesisHash    = libcommon.HexToHash(&quot;0xb5f7f912443c940f21fd611f12828d75b534364ed9e95ca4e307729a4661bde4&quot;)</span>
<span class="term-fg31">-	SepoliaGenesisHash    = libcommon.HexToHash(&quot;0x25a5cc106eea7138acab33231d7160d69cb777ee0c2c553fcddf5138993e6dd9&quot;)</span>
<span class="term-fg31">-	GoerliGenesisHash     = libcommon.HexToHash(&quot;0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a&quot;)</span>
<span class="term-fg31">-	MumbaiGenesisHash     = libcommon.HexToHash(&quot;0x7b66506a9ebdbf30d32b43c5f15a3b1216269a1ec3a75aa3182b86176a2b1ca7&quot;)</span>
<span class="term-fg31">-	BorMainnetGenesisHash = libcommon.HexToHash(&quot;0xa9c28ce2141b56c474f1dc504bee9b01eb1bd7d1a507580d5519d4437a97de1b&quot;)</span>
<span class="term-fg31">-	BorDevnetGenesisHash  = libcommon.HexToHash(&quot;0x5a06b25b0c6530708ea0b98a3409290e39dce6be7f558493aeb6e4b99a172a87&quot;)</span>
<span class="term-fg31">-	GnosisGenesisHash     = libcommon.HexToHash(&quot;0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756&quot;)</span>
<span class="term-fg31">-	ChiadoGenesisHash     = libcommon.HexToHash(&quot;0xada44fd8d2ecab8b08f256af07ad3e777f17fb434f8f8e678b312f576212ba9a&quot;)</span>
<span class="term-fg32">+	MainnetGenesisHash         = libcommon.HexToHash(&quot;0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3&quot;)</span>
<span class="term-fg32">+	HoleskyGenesisHash         = libcommon.HexToHash(&quot;0xb5f7f912443c940f21fd611f12828d75b534364ed9e95ca4e307729a4661bde4&quot;)</span>
<span class="term-fg32">+	SepoliaGenesisHash         = libcommon.HexToHash(&quot;0x25a5cc106eea7138acab33231d7160d69cb777ee0c2c553fcddf5138993e6dd9&quot;)</span>
<span class="term-fg32">+	GoerliGenesisHash          = libcommon.HexToHash(&quot;0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a&quot;)</span>
<span class="term-fg32">+	MumbaiGenesisHash          = libcommon.HexToHash(&quot;0x7b66506a9ebdbf30d32b43c5f15a3b1216269a1ec3a75aa3182b86176a2b1ca7&quot;)</span>
<span class="term-fg32">+	BorMainnetGenesisHash      = libcommon.HexToHash(&quot;0xa9c28ce2141b56c474f1dc504bee9b01eb1bd7d1a507580d5519d4437a97de1b&quot;)</span>
<span class="term-fg32">+	BorDevnetGenesisHash       = libcommon.HexToHash(&quot;0x5a06b25b0c6530708ea0b98a3409290e39dce6be7f558493aeb6e4b99a172a87&quot;)</span>
<span class="term-fg32">+	GnosisGenesisHash          = libcommon.HexToHash(&quot;0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756&quot;)</span>
<span class="term-fg32">+	ChiadoGenesisHash          = libcommon.HexToHash(&quot;0xada44fd8d2ecab8b08f256af07ad3e777f17fb434f8f8e678b312f576212ba9a&quot;)</span>
<span class="term-fg32">+	OptimismMainnetGenesisHash = libcommon.HexToHash(&quot;0x7ca38a1916c42007829c55e69d3e9a73265554b586a499015373241b8a3fa48b&quot;)</span>
<span class="term-fg32">+	OptimismGoerliGenesisHash  = libcommon.HexToHash(&quot;0xc1fc15cd51159b1f1e5cbc4b82e85c1447ddfa33c52cf1d98d14fba0d6354be1&quot;)</span>
 )
&nbsp;
 var (
<span class="term-fg31">-	GnosisGenesisStateRoot = libcommon.HexToHash(&quot;0x40cf4430ecaa733787d1a65154a3b9efb560c95d9e324a23b97f0609b539133b&quot;)</span>
<span class="term-fg31">-	ChiadoGenesisStateRoot = libcommon.HexToHash(&quot;0x9ec3eaf4e6188dfbdd6ade76eaa88289b57c63c9a2cde8d35291d5a29e143d31&quot;)</span>
<span class="term-fg32">+	GnosisGenesisStateRoot   = libcommon.HexToHash(&quot;0x40cf4430ecaa733787d1a65154a3b9efb560c95d9e324a23b97f0609b539133b&quot;)</span>
<span class="term-fg32">+	ChiadoGenesisStateRoot   = libcommon.HexToHash(&quot;0x9ec3eaf4e6188dfbdd6ade76eaa88289b57c63c9a2cde8d35291d5a29e143d31&quot;)</span>
<span class="term-fg32">+	OptimismMainnetStateRoot = libcommon.HexToHash(&quot;0xeddb4c1786789419153a27c4c80ff44a2226b6eda04f7e22ce5bae892ea568eb&quot;)</span>
<span class="term-fg32">+	OptimismGoerliStateRoot  = libcommon.HexToHash(&quot;0x9e6b478a1cd331a979c39e4bddf42c676bcf5a63382f898dc441fe3fe5eb0837&quot;)</span>
 )
&nbsp;
 var (
<span class="term-fg36">@@ -133,6 +137,10 @@</span> 	ChiadoChainConfig = readChainSpec(&quot;chainspecs&#47;chiado.json&quot;)
&nbsp;
 	CliqueSnapshot = NewSnapshotConfig(10, 1024, 16384, true, &quot;&quot;)
&nbsp;
<span class="term-fg32">+	OptimismMainnetChainConfig = readChainSpec(&quot;chainspecs&#47;optimism-mainnet.json&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	OptimismGoerliChainConfig = readChainSpec(&quot;chainspecs&#47;optimism-goerli.json&quot;)</span>
<span class="term-fg32">+</span>
 	TestChainConfig = &amp;chain.Config{
 		ChainID:               big.NewInt(1337),
 		Consensus:             chain.EtHashConsensus,
<span class="term-fg36">@@ -164,6 +172,26 @@</span> 		LondonBlock:           big.NewInt(0),
 		Aura:                  &amp;chain.AuRaConfig{},
 	}
&nbsp;
<span class="term-fg32">+	TestOptimismChainConfig = &amp;chain.Config{</span>
<span class="term-fg32">+		ChainID:               big.NewInt(1337),</span>
<span class="term-fg32">+		Consensus:             chain.EtHashConsensus,</span>
<span class="term-fg32">+		HomesteadBlock:        big.NewInt(0),</span>
<span class="term-fg32">+		TangerineWhistleBlock: big.NewInt(0),</span>
<span class="term-fg32">+		SpuriousDragonBlock:   big.NewInt(0),</span>
<span class="term-fg32">+		ByzantiumBlock:        big.NewInt(0),</span>
<span class="term-fg32">+		ConstantinopleBlock:   big.NewInt(0),</span>
<span class="term-fg32">+		PetersburgBlock:       big.NewInt(0),</span>
<span class="term-fg32">+		IstanbulBlock:         big.NewInt(0),</span>
<span class="term-fg32">+		MuirGlacierBlock:      big.NewInt(0),</span>
<span class="term-fg32">+		BerlinBlock:           big.NewInt(0),</span>
<span class="term-fg32">+		Ethash:                new(chain.EthashConfig),</span>
<span class="term-fg32">+		Optimism: &amp;chain.OptimismConfig{</span>
<span class="term-fg32">+			EIP1559Elasticity:  8,</span>
<span class="term-fg32">+			EIP1559Denominator: 1,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		BedrockBlock: big.NewInt(1000000000000000000),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	TestRules = TestChainConfig.Rules(0, 0)
 )
&nbsp;
<span class="term-fg36">@@ -211,6 +239,10 @@</span> 	case networkname.GnosisChainName:
 		return GnosisChainConfig
 	case networkname.ChiadoChainName:
 		return ChiadoChainConfig
<span class="term-fg32">+	case networkname.OptimismMainnetChainName:</span>
<span class="term-fg32">+		return OptimismMainnetChainConfig</span>
<span class="term-fg32">+	case networkname.OptimismGoerliChainName:</span>
<span class="term-fg32">+		return OptimismGoerliChainConfig</span>
 	default:
 		return nil
 	}
<span class="term-fg36">@@ -236,6 +268,10 @@</span> 	case networkname.GnosisChainName:
 		return &amp;GnosisGenesisHash
 	case networkname.ChiadoChainName:
 		return &amp;ChiadoGenesisHash
<span class="term-fg32">+	case networkname.OptimismMainnetChainName:</span>
<span class="term-fg32">+		return &amp;OptimismMainnetGenesisHash</span>
<span class="term-fg32">+	case networkname.OptimismGoerliChainName:</span>
<span class="term-fg32">+		return &amp;OptimismGoerliGenesisHash</span>
 	default:
 		return nil
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b51545377a30099f9f7a69a6" role="button"
                   aria-expanded="false" aria-controls="id-b51545377a30099f9f7a69a6">
                    <code>params/networkname/network_name.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/networkname/network_name.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+31</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b51545377a30099f9f7a69a6"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;networkname&#47;network_name.go bobanetwork&#47;v3-erigon&#47;params&#47;networkname&#47;network_name.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0e7a57a2cef5323347d58b2e343ca432ca812a1f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;networkname&#47;network_name.go</span>
<span class="term-fg36">@@ -0,0 +1,31 @@</span>
<span class="term-fg32">+package networkname</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	MainnetChainName         = &quot;mainnet&quot;</span>
<span class="term-fg32">+	HoleskyChainName         = &quot;holesky&quot;</span>
<span class="term-fg32">+	SepoliaChainName         = &quot;sepolia&quot;</span>
<span class="term-fg32">+	GoerliChainName          = &quot;goerli&quot;</span>
<span class="term-fg32">+	DevChainName             = &quot;dev&quot;</span>
<span class="term-fg32">+	MumbaiChainName          = &quot;mumbai&quot;</span>
<span class="term-fg32">+	BorMainnetChainName      = &quot;bor-mainnet&quot;</span>
<span class="term-fg32">+	BorDevnetChainName       = &quot;bor-devnet&quot;</span>
<span class="term-fg32">+	GnosisChainName          = &quot;gnosis&quot;</span>
<span class="term-fg32">+	BorE2ETestChain2ValName  = &quot;bor-e2e-test-2Val&quot;</span>
<span class="term-fg32">+	ChiadoChainName          = &quot;chiado&quot;</span>
<span class="term-fg32">+	OptimismMainnetChainName = &quot;optimism-mainnet&quot;</span>
<span class="term-fg32">+	OptimismGoerliChainName  = &quot;optimism-goerli&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var All = []string{</span>
<span class="term-fg32">+	MainnetChainName,</span>
<span class="term-fg32">+	HoleskyChainName,</span>
<span class="term-fg32">+	SepoliaChainName,</span>
<span class="term-fg32">+	GoerliChainName,</span>
<span class="term-fg32">+	MumbaiChainName,</span>
<span class="term-fg32">+	BorMainnetChainName,</span>
<span class="term-fg32">+	BorDevnetChainName,</span>
<span class="term-fg32">+	GnosisChainName,</span>
<span class="term-fg32">+	ChiadoChainName,</span>
<span class="term-fg32">+	OptimismMainnetChainName,</span>
<span class="term-fg32">+	OptimismGoerliChainName,</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0e5f55e2eabd4a422c408c51" role="button"
                   aria-expanded="false" aria-controls="id-0e5f55e2eabd4a422c408c51">
                    <code>params/chainspecs/optimism-goerli.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/chainspecs/optimism-goerli.json" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+25</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0e5f55e2eabd4a422c408c51"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;chainspecs&#47;optimism-goerli.json bobanetwork&#47;v3-erigon&#47;params&#47;chainspecs&#47;optimism-goerli.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f56d236ecb5f6315b522e76c23fef6bb2d9d5951</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;chainspecs&#47;optimism-goerli.json</span>
<span class="term-fg36">@@ -0,0 +1,26 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;ChainName&quot;: &quot;optimism-goerli&quot;,</span>
<span class="term-fg32">+  &quot;chainId&quot;: 420,</span>
<span class="term-fg32">+  &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;muirGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;berlinBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;londonBlock&quot;: 4061224,</span>
<span class="term-fg32">+  &quot;arrowGlacierBlock&quot;: 4061224,</span>
<span class="term-fg32">+  &quot;grayGlacierBlock&quot;: 4061224,</span>
<span class="term-fg32">+  &quot;mergeNetsplitBlock&quot;: 4061224,</span>
<span class="term-fg32">+  &quot;bedrockBlock&quot;: 4061224,</span>
<span class="term-fg32">+  &quot;terminalTotalDifficulty&quot;: 0,</span>
<span class="term-fg32">+  &quot;terminalTotalDifficultyPassed&quot;: true,</span>
<span class="term-fg32">+  &quot;optimism&quot;: {</span>
<span class="term-fg32">+      &quot;eip1559Elasticity&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip1559Denominator&quot;: 50</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;regolithTime&quot;: 1679079600</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-5c7eaf496528f2b5a65432b3"role="button" aria-expanded="false" aria-controls="id-5c7eaf496528f2b5a65432b3">
        
            <div class="col-12 col-sm-9 text-start"><h2>User API enhancements</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+475</span></div>
                <div class="text-start"><span class="text-danger">-73</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-5c7eaf496528f2b5a65432b3">
        <div><p>Encode the Deposit Tx properties, the L1 costs, and daisy-chain RPC-calls for pre-Bedrock historical data</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-79c974f0d2ac2e35e3a37050"role="button" aria-expanded="false" aria-controls="id-79c974f0d2ac2e35e3a37050">
        
            <div class="col-12 col-sm-9 text-start"><h3>Receipts metadata</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+348</span></div>
                <div class="text-start"><span class="text-danger">-15</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-79c974f0d2ac2e35e3a37050">
        <div><p>Pre-Bedrock L1-cost receipt data is loaded from the database if available, and post-Bedrock the L1-cost metadata is hydrated on-the-fly based on the L1 fee information in the corresponding block.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b5d62cf4b1fa188be6746207" role="button"
                   aria-expanded="false" aria-controls="id-b5d62cf4b1fa188be6746207">
                    <code>core/types/receipt.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/receipt.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/receipt.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+100</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b5d62cf4b1fa188be6746207"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg1">index bc3a4d9a7ba9b74e73579a49d2154fadc2ebf693..985e1ad147ad68448e03b7e38b28c266cc31053b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg36">@@ -23,6 +23,8 @@</span> 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
&nbsp;
<span class="term-fg36">@@ -31,7 +33,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 )
&nbsp;
<span class="term-fg31">-&#47;&#47; go:generate gencodec -type Receipt -field-override receiptMarshaling -out gen_receipt_json.go</span>
<span class="term-fg32">+&#47;&#47;go:generate gencodec -type Receipt -field-override receiptMarshaling -out gen_receipt_json.go</span>
 &#47;&#47;go:generate codecgen -o receipt_codecgen_gen.go -r &quot;^Receipts$|^Receipt$|^Logs$|^Log$&quot; -st &quot;codec&quot; -j=false -nx=true -ta=true -oe=false -d 2 receipt.go log.go
&nbsp;
 var (
<span class="term-fg36">@@ -64,11 +66,21 @@</span> 	TxHash          libcommon.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`
 	ContractAddress libcommon.Address `json:&quot;contractAddress&quot; codec:&quot;-&quot;`
 	GasUsed         uint64            `json:&quot;gasUsed&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`
&nbsp;
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions</span>
<span class="term-fg32">+	&#47;&#47; The state transition process ensures this is only set for Regolith deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `json:&quot;depositNonce,omitempty&quot;`</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Inclusion information: These fields provide information about the inclusion of the
 	&#47;&#47; transaction corresponding to this receipt.
 	BlockHash        libcommon.Hash `json:&quot;blockHash,omitempty&quot; codec:&quot;-&quot;`
 	BlockNumber      *big.Int       `json:&quot;blockNumber,omitempty&quot; codec:&quot;-&quot;`
 	TransactionIndex uint           `json:&quot;transactionIndex&quot; codec:&quot;-&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; OVM legacy: extend receipts with their L1 price (if a rollup tx)</span>
<span class="term-fg32">+	L1GasPrice *big.Int   `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+	L1GasUsed  *big.Int   `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+	L1Fee      *big.Int   `json:&quot;l1Fee,omitempty&quot;` &#47;&#47; FIXME, should these be uint256?</span>
<span class="term-fg32">+	FeeScalar  *big.Float `json:&quot;l1FeeScalar,omitempty&quot;`</span>
 }
&nbsp;
 type receiptMarshaling struct {
<span class="term-fg36">@@ -79,6 +91,9 @@</span> 	CumulativeGasUsed hexutil.Uint64
 	GasUsed           hexutil.Uint64
 	BlockNumber       *hexutil.Big
 	TransactionIndex  hexutil.Uint
<span class="term-fg32">+	L1Fee             *hexutil.Big</span>
<span class="term-fg32">+	L1GasUsed         *hexutil.Big</span>
<span class="term-fg32">+	L1GasPrice        *hexutil.Big</span>
 }
&nbsp;
 &#47;&#47; receiptRLP is the consensus encoding of a receipt.
<span class="term-fg36">@@ -87,6 +102,16 @@</span> 	PostStateOrStatus []byte
 	CumulativeGasUsed uint64
 	Bloom             Bloom
 	Logs              []*Log
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type depositReceiptRlp struct {</span>
<span class="term-fg32">+	PostStateOrStatus []byte</span>
<span class="term-fg32">+	CumulativeGasUsed uint64</span>
<span class="term-fg32">+	Bloom             Bloom</span>
<span class="term-fg32">+	Logs              []*Log</span>
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions.</span>
<span class="term-fg32">+	&#47;&#47; Must be nil for any transactions prior to Regolith or that aren&#39;t deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `rlp:&quot;optional&quot;`</span>
 }
&nbsp;
 &#47;&#47; storedReceiptRLP is the storage encoding of a receipt.
<span class="term-fg36">@@ -94,6 +119,9 @@</span> type storedReceiptRLP struct {
 	PostStateOrStatus []byte
 	CumulativeGasUsed uint64
 	Logs              []*LogForStorage
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions.</span>
<span class="term-fg32">+	&#47;&#47; Must be nil for any transactions prior to Regolith or that aren&#39;t deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `rlp:&quot;optional&quot;`</span>
 }
&nbsp;
 &#47;&#47; v4StoredReceiptRLP is the storage encoding of a receipt used in database version 4.
<span class="term-fg36">@@ -141,12 +169,30 @@</span> 		return rlp.Encode(w, data)
 	}
 	buf := new(bytes.Buffer)
 	buf.WriteByte(r.Type)
<span class="term-fg31">-	if err := rlp.Encode(buf, data); err != nil {</span>
<span class="term-fg31">-		return err</span>
<span class="term-fg32">+	if r.Type == DepositTxType {</span>
<span class="term-fg32">+		withNonce := &amp;depositReceiptRlp{r.statusEncoding(), r.CumulativeGasUsed, r.Bloom, r.Logs, r.DepositNonce}</span>
<span class="term-fg32">+		if err := rlp.Encode(buf, withNonce); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if err := rlp.Encode(buf, data); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
 	}
 	return rlp.Encode(w, buf.Bytes())
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; encodeTyped writes the canonical encoding of a typed receipt to w.</span>
<span class="term-fg32">+func (r *Receipt) encodeTyped(data *receiptRLP, w *bytes.Buffer) error {</span>
<span class="term-fg32">+	w.WriteByte(r.Type)</span>
<span class="term-fg32">+	switch r.Type {</span>
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		withNonce := depositReceiptRlp{data.PostStateOrStatus, data.CumulativeGasUsed, data.Bloom, data.Logs, r.DepositNonce}</span>
<span class="term-fg32">+		return rlp.Encode(w, withNonce)</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return rlp.Encode(w, data)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
 func (r *Receipt) decodePayload(s *rlp.Stream) error {
 	_, err := s.List()
 	if err != nil {
<span class="term-fg36">@@ -215,6 +261,17 @@</span> 	}
 	if err = s.ListEnd(); err != nil {
 		return fmt.Errorf(&quot;close Logs: %w&quot;, err)
 	}
<span class="term-fg32">+	if r.Type == DepositTxType {</span>
<span class="term-fg32">+		depositNonce, err := s.Uint()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			if !errors.Is(err, rlp.EOL) {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;read DepositNonce: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			r.DepositNonce = &amp;depositNonce</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	if err := s.ListEnd(); err != nil {
 		return fmt.Errorf(&quot;close receipt payload: %w&quot;, err)
 	}
<span class="term-fg36">@@ -247,7 +304,7 @@</span> 			return fmt.Errorf(&quot;%w, got %d bytes&quot;, rlp.ErrWrongTxTypePrefix, len(b))
 		}
 		r.Type = b[0]
 		switch r.Type {
<span class="term-fg31">-		case AccessListTxType, DynamicFeeTxType, BlobTxType:</span>
<span class="term-fg32">+		case AccessListTxType, DynamicFeeTxType, DepositTxType, BlobTxType:</span>
 			if err := r.decodePayload(s); err != nil {
 				return err
 			}
<span class="term-fg36">@@ -317,6 +374,7 @@</span> 		GasUsed:           r.GasUsed,
 		BlockHash:         blockHash,
 		BlockNumber:       blockNumber,
 		TransactionIndex:  r.TransactionIndex,
<span class="term-fg32">+		DepositNonce:      r.DepositNonce,</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -333,6 +391,7 @@</span> 	enc := &amp;storedReceiptRLP{
 		PostStateOrStatus: (*Receipt)(r).statusEncoding(),
 		CumulativeGasUsed: r.CumulativeGasUsed,
 		Logs:              make([]*LogForStorage, len(r.Logs)),
<span class="term-fg32">+		DepositNonce:      r.DepositNonce,</span>
 	}
 	for i, log := range r.Logs {
 		enc.Logs[i] = (*LogForStorage)(log)
<span class="term-fg36">@@ -374,6 +433,9 @@</span> 	for i, log := range stored.Logs {
 		r.Logs[i] = (*Log)(log)
 	}
 	&#47;&#47;r.Bloom = CreateBloom(Receipts{(*Receipt)(r)})
<span class="term-fg32">+	if stored.DepositNonce != nil {</span>
<span class="term-fg32">+		r.DepositNonce = stored.DepositNonce</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	return nil
 }
<span class="term-fg36">@@ -448,6 +510,11 @@</span> 		w.WriteByte(BlobTxType)
 		if err := rlp.Encode(w, data); err != nil {
 			panic(err)
 		}
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		w.WriteByte(DepositTxType)</span>
<span class="term-fg32">+		if err := rlp.Encode(w, data); err != nil {</span>
<span class="term-fg32">+			panic(err)</span>
<span class="term-fg32">+		}</span>
 	default:
 		&#47;&#47; For unsupported types, write nothing. Since this is for
 		&#47;&#47; DeriveSha, the error will be caught matching the derived hash
<span class="term-fg36">@@ -457,7 +524,7 @@</span> }
&nbsp;
 &#47;&#47; DeriveFields fills the receipts with their computed fields based on consensus
 &#47;&#47; data and contextual infos like containing block and transactions.
<span class="term-fg31">-func (r Receipts) DeriveFields(hash libcommon.Hash, number uint64, txs Transactions, senders []libcommon.Address) error {</span>
<span class="term-fg32">+func (r Receipts) DeriveFields(config *chain.Config, hash libcommon.Hash, number uint64, time uint64, txs Transactions, senders []libcommon.Address) error {</span>
 	logIndex := uint(0) &#47;&#47; logIdx is unique within the block and starts from 0
 	if len(txs) != len(r) {
 		return fmt.Errorf(&quot;transaction and receipt count mismatch, tx count = %d, receipts count = %d&quot;, len(txs), len(r))
<span class="term-fg36">@@ -482,7 +549,11 @@</span> 		if txs[i].GetTo() == nil {
 			&#47;&#47; If one wants to deploy a contract, one needs to send a transaction that does not have `To` field
 			&#47;&#47; and then the address of the contract one is creating this way will depend on the `tx.From`
 			&#47;&#47; and the nonce of the creating account (which is `tx.From`).
<span class="term-fg31">-			r[i].ContractAddress = crypto.CreateAddress(senders[i], txs[i].GetNonce())</span>
<span class="term-fg32">+			nonce := txs[i].GetNonce()</span>
<span class="term-fg32">+			if r[i].DepositNonce != nil {</span>
<span class="term-fg32">+				nonce = *r[i].DepositNonce</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			r[i].ContractAddress = crypto.CreateAddress(senders[i], nonce)</span>
 		}
 		&#47;&#47; The used gas can be calculated based on previous r
 		if i == 0 {
<span class="term-fg36">@@ -498,6 +569,29 @@</span> 			r[i].Logs[j].TxHash = r[i].TxHash
 			r[i].Logs[j].TxIndex = uint(i)
 			r[i].Logs[j].Index = logIndex
 			logIndex++
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	rules := config.Rules(number, time)</span>
<span class="term-fg32">+	if rules.IsBedrock &amp;&amp; len(txs) &gt;= 2 { &#47;&#47; need at least an info tx and a non-info tx</span>
<span class="term-fg32">+		if data := txs[0].GetData(); len(data) &gt;= 4+32*8 { &#47;&#47; function selector + 8 arguments to setL1BlockValues</span>
<span class="term-fg32">+			l1Basefee := new(uint256.Int).SetBytes(data[4+32*2 : 4+32*3]) &#47;&#47; arg index 2</span>
<span class="term-fg32">+			overhead := new(uint256.Int).SetBytes(data[4+32*6 : 4+32*7])  &#47;&#47; arg index 6</span>
<span class="term-fg32">+			scalar := new(uint256.Int).SetBytes(data[4+32*7 : 4+32*8])    &#47;&#47; arg index 7</span>
<span class="term-fg32">+			fscalar := new(big.Float).SetInt(scalar.ToBig())              &#47;&#47; legacy: format fee scalar as big Float</span>
<span class="term-fg32">+			fdivisor := new(big.Float).SetUint64(1_000_000)               &#47;&#47; 10**6, i.e. 6 decimals</span>
<span class="term-fg32">+			feeScalar := new(big.Float).Quo(fscalar, fdivisor)</span>
<span class="term-fg32">+			for i := 0; i &lt; len(r); i++ {</span>
<span class="term-fg32">+				if !txs[i].IsDepositTx() {</span>
<span class="term-fg32">+					rollupDataGas := RollupDataGas(txs[i], rules) &#47;&#47; Only fake txs for RPC view-calls are 0.</span>
<span class="term-fg32">+					r[i].L1GasPrice = l1Basefee.ToBig()</span>
<span class="term-fg32">+					&#47;&#47; GasUsed reported in receipt should include the overhead</span>
<span class="term-fg32">+					r[i].L1GasUsed = new(big.Int).Add(new(big.Int).SetUint64(rollupDataGas), overhead.ToBig())</span>
<span class="term-fg32">+					r[i].L1Fee = L1Cost(rollupDataGas, l1Basefee, overhead, scalar).ToBig()</span>
<span class="term-fg32">+					r[i].FeeScalar = feeScalar</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;L1 info tx only has %d bytes, cannot read gas price parameters&quot;, len(data))</span>
 		}
 	}
 	return nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1fd68a08cf4046a9e289d51f" role="button"
                   aria-expanded="false" aria-controls="id-1fd68a08cf4046a9e289d51f">
                    <code>core/types/receipt_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/receipt_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/receipt_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+216</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1fd68a08cf4046a9e289d51f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt_test.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg1">index cef57f007db148dc53536ee5a22c14a52fb496dc..0af26069a0c0e2192a39e1b976b6eddfe7bda4ca 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg36">@@ -19,6 +19,7 @@</span>
 import (
 	&quot;bytes&quot;
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&quot;
 	&quot;math&#47;big&quot;
 	&quot;reflect&quot;
<span class="term-fg36">@@ -26,6 +27,7 @@</span> 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;u256&quot;
<span class="term-fg36">@@ -34,6 +36,95 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 )
&nbsp;
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	legacyReceipt = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	accessListReceipt = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: AccessListTxType,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	eip1559Receipt = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: DynamicFeeTxType,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	depositReceiptNoNonce = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: DepositTxType,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nonce                   = uint64(1234)</span>
<span class="term-fg32">+	depositReceiptWithNonce = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		DepositNonce:      &amp;nonce,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: libcommon.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []libcommon.Hash{libcommon.HexToHash(&quot;dead&quot;), libcommon.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: DepositTxType,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
 func TestDecodeEmptyTypedReceipt(t *testing.T) {
 	input := []byte{0x80}
 	var r Receipt
<span class="term-fg36">@@ -158,7 +249,13 @@</span> 				},
 				GasPrice: uint256.NewInt(3),
 			},
 		},
<span class="term-fg32">+		&amp;DepositTransaction{</span>
<span class="term-fg32">+			Value:    uint256.NewInt(3),</span>
<span class="term-fg32">+			From:     &amp;libcommon.Address{},</span>
<span class="term-fg32">+			GasLimit: 4,</span>
<span class="term-fg32">+		},</span>
 	}
<span class="term-fg32">+	depNonce := uint64(7)</span>
 	&#47;&#47; Create the corresponding receipts
 	receipts := Receipts{
 		&amp;Receipt{
<span class="term-fg36">@@ -195,13 +292,34 @@</span> 			TxHash:          txs[2].Hash(),
 			ContractAddress: libcommon.BytesToAddress([]byte{0x03, 0x33, 0x33}),
 			GasUsed:         3,
 		},
<span class="term-fg32">+		&amp;Receipt{</span>
<span class="term-fg32">+			Type:              DepositTxType,</span>
<span class="term-fg32">+			PostState:         libcommon.Hash{3}.Bytes(),</span>
<span class="term-fg32">+			CumulativeGasUsed: 10,</span>
<span class="term-fg32">+			Logs: []*Log{</span>
<span class="term-fg32">+				{Address: libcommon.BytesToAddress([]byte{0x33})},</span>
<span class="term-fg32">+				{Address: libcommon.BytesToAddress([]byte{0x03, 0x33})},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			TxHash:          txs[3].Hash(),</span>
<span class="term-fg32">+			ContractAddress: libcommon.BytesToAddress([]byte{0x03, 0x33, 0x33}),</span>
<span class="term-fg32">+			GasUsed:         4,</span>
<span class="term-fg32">+			DepositNonce:    &amp;depNonce,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	nonces := []uint64{</span>
<span class="term-fg32">+		txs[0].GetNonce(),</span>
<span class="term-fg32">+		txs[1].GetNonce(),</span>
<span class="term-fg32">+		txs[2].GetNonce(),</span>
<span class="term-fg32">+		*receipts[3].DepositNonce, &#47;&#47; Deposit tx should use deposit nonce</span>
 	}
 	&#47;&#47; Clear all the computed fields and re-derive them
 	number := big.NewInt(1)
 	hash := libcommon.BytesToHash([]byte{0x03, 0x14})
<span class="term-fg32">+	time := uint64(0)</span>
&nbsp;
 	clearComputedFieldsOnReceipts(t, receipts)
<span class="term-fg31">-	if err := receipts.DeriveFields(hash, number.Uint64(), txs, []libcommon.Address{libcommon.BytesToAddress([]byte{0x0}), libcommon.BytesToAddress([]byte{0x0}), libcommon.BytesToAddress([]byte{0x0})}); err != nil {</span>
<span class="term-fg32">+	if err := receipts.DeriveFields(params.TestChainConfig, hash, number.Uint64(), time, txs, []libcommon.Address{libcommon.BytesToAddress([]byte{0x0}), libcommon.BytesToAddress([]byte{0x0}), libcommon.BytesToAddress([]byte{0x0}), libcommon.BytesToAddress([]byte{0x0})}); err != nil {</span>
 		t.Fatalf(&quot;DeriveFields(...) = %v, want &lt;nil&gt;&quot;, err)
 	}
 	&#47;&#47; Iterate over all the computed fields and check that they&#39;re correct
<span class="term-fg36">@@ -231,7 +349,7 @@</span> 		if txs[i].GetTo() != nil &amp;&amp; receipts[i].ContractAddress != (libcommon.Address{}) {
 			t.Errorf(&quot;receipts[%d].ContractAddress = %s, want %s&quot;, i, receipts[i].ContractAddress.String(), (libcommon.Address{}).String())
 		}
 		from, _ := txs[i].Sender(*signer)
<span class="term-fg31">-		contractAddress := crypto.CreateAddress(from, txs[i].GetNonce())</span>
<span class="term-fg32">+		contractAddress := crypto.CreateAddress(from, nonces[i])</span>
 		if txs[i].GetTo() == nil &amp;&amp; receipts[i].ContractAddress != contractAddress {
 			t.Errorf(&quot;receipts[%d].ContractAddress = %s, want %s&quot;, i, receipts[i].ContractAddress.String(), contractAddress.String())
 		}
<span class="term-fg36">@@ -327,3 +445,99 @@</span> 	log.TxHash = libcommon.Hash{}
 	log.TxIndex = math.MaxUint32
 	log.Index = math.MaxUint32
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestBedrockDepositReceiptUnchanged(t *testing.T) {</span>
<span class="term-fg32">+	expectedRlp := common.FromHex(&quot;B9015a7EF90156A003000000000000000000000000000000000000000000000000000000000000000AB9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0D7940000000000000000000000000000000000000033C001D7940000000000000000000000000000000000000333C002&quot;)</span>
<span class="term-fg32">+	&#47;&#47; Deposit receipt with no nonce</span>
<span class="term-fg32">+	receipt := &amp;Receipt{</span>
<span class="term-fg32">+		Type:              DepositTxType,</span>
<span class="term-fg32">+		PostState:         libcommon.Hash{3}.Bytes(),</span>
<span class="term-fg32">+		CumulativeGasUsed: 10,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x33}), Data: []byte{1}, Topics: nil},</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x03, 0x33}), Data: []byte{2}, Topics: nil},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		TxHash:          libcommon.Hash{},</span>
<span class="term-fg32">+		ContractAddress: libcommon.BytesToAddress([]byte{0x03, 0x33, 0x33}),</span>
<span class="term-fg32">+		GasUsed:         4,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	encodedRlp, err := rlp.EncodeToBytes(receipt)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, expectedRlp, encodedRlp)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Consensus values should be unchanged after reparsing</span>
<span class="term-fg32">+	parsed := new(Receipt)</span>
<span class="term-fg32">+	err = rlp.DecodeBytes(encodedRlp, parsed)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Status, parsed.Status)</span>
<span class="term-fg32">+	require.Equal(t, receipt.CumulativeGasUsed, parsed.CumulativeGasUsed)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Bloom, parsed.Bloom)</span>
<span class="term-fg32">+	require.Equal(t, len(receipt.Logs), len(parsed.Logs))</span>
<span class="term-fg32">+	for i := 0; i &lt; len(receipt.Logs); i++ {</span>
<span class="term-fg32">+		require.EqualValues(t, receipt.Logs[i], parsed.Logs[i])</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; And still shouldn&#39;t have a nonce</span>
<span class="term-fg32">+	require.Nil(t, parsed.DepositNonce)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestRoundTripReceipt(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name string</span>
<span class="term-fg32">+		rcpt *Receipt</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{name: &quot;Legacy&quot;, rcpt: legacyReceipt},</span>
<span class="term-fg32">+		{name: &quot;AccessList&quot;, rcpt: accessListReceipt},</span>
<span class="term-fg32">+		{name: &quot;EIP1559&quot;, rcpt: eip1559Receipt},</span>
<span class="term-fg32">+		{name: &quot;DepositNoNonce&quot;, rcpt: depositReceiptNoNonce},</span>
<span class="term-fg32">+		{name: &quot;DepositWithNonce&quot;, rcpt: depositReceiptWithNonce},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := rlp.EncodeToBytes(test.rcpt)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			d := &amp;Receipt{}</span>
<span class="term-fg32">+			err = rlp.DecodeBytes(data, d)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt, d)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		t.Run(fmt.Sprintf(&quot;%sRejectExtraData&quot;, test.name), func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := rlp.EncodeToBytes(test.rcpt)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			data = append(data, 1, 2, 3, 4)</span>
<span class="term-fg32">+			d := &amp;Receipt{}</span>
<span class="term-fg32">+			err = rlp.DecodeBytes(data, d)</span>
<span class="term-fg32">+			require.Error(t, err)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestRoundTripReceiptForStorage(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name string</span>
<span class="term-fg32">+		rcpt *Receipt</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{name: &quot;Legacy&quot;, rcpt: legacyReceipt},</span>
<span class="term-fg32">+		{name: &quot;AccessList&quot;, rcpt: accessListReceipt},</span>
<span class="term-fg32">+		{name: &quot;EIP1559&quot;, rcpt: eip1559Receipt},</span>
<span class="term-fg32">+		{name: &quot;DepositNoNonce&quot;, rcpt: depositReceiptNoNonce},</span>
<span class="term-fg32">+		{name: &quot;DepositWithNonce&quot;, rcpt: depositReceiptWithNonce},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := rlp.EncodeToBytes((*ReceiptForStorage)(test.rcpt))</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			d := &amp;ReceiptForStorage{}</span>
<span class="term-fg32">+			err = rlp.DecodeBytes(data, d)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			&#47;&#47; Only check the stored fields - the others are derived later</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.Status, d.Status)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.CumulativeGasUsed, d.CumulativeGasUsed)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.Logs, d.Logs)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.DepositNonce, d.DepositNonce)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fe6a519f2caa3c2757e59936" role="button"
                   aria-expanded="false" aria-controls="id-fe6a519f2caa3c2757e59936">
                    <code>accounts/abi/bind/backends/simulated.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/accounts/abi/bind/backends/simulated.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/accounts/abi/bind/backends/simulated.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fe6a519f2caa3c2757e59936"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go bobanetwork&#47;v3-erigon&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg1">index ff2f1393b0c5cd205538e88ae48f96696a006490..805b050c0a59b9ec7eda5b1a4321b675a8543cba 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg36">@@ -85,6 +85,8 @@</span>
 	rmLogsFeed event.Feed
 	chainFeed  event.Feed
 	logsFeed   event.Feed
<span class="term-fg32">+</span>
<span class="term-fg32">+	chainConfig *chain.Config</span>
 }
&nbsp;
 &#47;&#47; NewSimulatedBackend creates a new binding backend using a simulated blockchain
<span class="term-fg36">@@ -107,6 +109,7 @@</span> 				panic(err)
 			}
 			return h
 		},
<span class="term-fg32">+		chainConfig: config,</span>
 	}
 	backend.emptyPendingBlock()
 	return backend
<span class="term-fg36">@@ -273,7 +276,7 @@</span> 	if err != nil {
 		return nil, err
 	}
 	&#47;&#47; Read all the receipts from the block and return the one with the matching hash
<span class="term-fg31">-	receipts := rawdb.ReadReceipts(tx, block, nil)</span>
<span class="term-fg32">+	receipts := rawdb.ReadReceipts(b.chainConfig, tx, block, nil)</span>
 	for _, receipt := range receipts {
 		if receipt.TxHash == txHash {
 			return receipt, nil
<span class="term-fg36">@@ -720,7 +723,8 @@</span> 	msg := callMsg{call}
&nbsp;
 	txContext := core.NewEVMTxContext(msg)
 	header := block.Header()
<span class="term-fg31">-	evmContext := core.NewEVMBlockContext(header, core.GetHashFn(header, b.getHeader), b.m.Engine, nil)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(b.m.ChainConfig, statedb)</span>
<span class="term-fg32">+	evmContext := core.NewEVMBlockContext(header, core.GetHashFn(header, b.getHeader), b.m.Engine, nil, l1CostFunc)</span>
 	&#47;&#47; Create a new environment which holds all relevant information
 	&#47;&#47; about the transaction and calling mechanisms.
 	vmEnv := vm.NewEVM(evmContext, txContext, statedb, b.m.ChainConfig, vm.Config{})
<span class="term-fg36">@@ -835,6 +839,13 @@</span> func (m callMsg) Value() *uint256.Int           { return m.CallMsg.Value }
 func (m callMsg) Data() []byte                  { return m.CallMsg.Data }
 func (m callMsg) AccessList() types2.AccessList { return m.CallMsg.AccessList }
 func (m callMsg) IsFree() bool                  { return false }
<span class="term-fg32">+func (m callMsg) IsSystemTx() bool              { return false }</span>
<span class="term-fg32">+func (m callMsg) Mint() *uint256.Int            { return new(uint256.Int) }</span>
<span class="term-fg32">+func (m callMsg) IsDepositTx() bool             { return false }</span>
<span class="term-fg32">+func (m callMsg) RollupDataGas() uint64 {</span>
<span class="term-fg32">+	log.Warn(&quot;simulated.go callMsg.RollupDataGas() returning 0&quot;)</span>
<span class="term-fg32">+	return 0 &#47;* FIXME *&#47;</span>
<span class="term-fg32">+}</span>
&nbsp;
 func (m callMsg) BlobGas() uint64                { return misc.GetBlobGasUsed(len(m.CallMsg.BlobHashes)) }
 func (m callMsg) MaxFeePerBlobGas() *uint256.Int { return m.CallMsg.MaxFeePerBlobGas }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-36134399160269f91bf1bd54" role="button"
                   aria-expanded="false" aria-controls="id-36134399160269f91bf1bd54">
                    <code>core/rawdb/accessors_chain.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/rawdb/accessors_chain.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/rawdb/accessors_chain.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-36134399160269f91bf1bd54"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;rawdb&#47;accessors_chain.go bobanetwork&#47;v3-erigon&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg1">index e33469925f3ae81f339627c50adb23ed9357f58d..3593b9f7a54f94e30a2f39c0215cd0e3694c0d6b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg36">@@ -27,6 +27,7 @@</span> 	&quot;math&#47;big&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;gballet&#47;go-verkle&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;cmp&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;dbg&quot;
<span class="term-fg36">@@ -833,7 +834,7 @@</span> &#47;&#47;
 &#47;&#47; The current implementation populates these metadata fields by reading the receipts&#39;
 &#47;&#47; corresponding block body, so if the block body is not found it will return nil even
 &#47;&#47; if the receipt itself is stored.
<span class="term-fg31">-func ReadReceipts(db kv.Tx, block *types.Block, senders []common.Address) types.Receipts {</span>
<span class="term-fg32">+func ReadReceipts(config *chain.Config, db kv.Tx, block *types.Block, senders []common.Address) types.Receipts {</span>
 	if block == nil {
 		return nil
 	}
<span class="term-fg36">@@ -847,11 +848,23 @@</span> 		block.SendersToTxs(senders)
 	} else {
 		senders = block.Body().SendersFromTxs()
 	}
<span class="term-fg31">-	if err := receipts.DeriveFields(block.Hash(), block.NumberU64(), block.Transactions(), senders); err != nil {</span>
<span class="term-fg32">+	if err := receipts.DeriveFields(config, block.Hash(), block.NumberU64(), block.Time(), block.Transactions(), senders); err != nil {</span>
 		log.Error(&quot;Failed to derive block receipts fields&quot;, &quot;hash&quot;, block.Hash(), &quot;number&quot;, block.NumberU64(), &quot;err&quot;, err, &quot;stack&quot;, dbg.Stack())
 		return nil
 	}
 	return receipts
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func ReadDepositNonces(db kv.Tx, blockNumber uint64) []*uint64 {</span>
<span class="term-fg32">+	receipts := ReadRawReceipts(db, blockNumber)</span>
<span class="term-fg32">+	if receipts == nil {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	depositNonces := make([]*uint64, len(receipts))</span>
<span class="term-fg32">+	for i, r := range receipts {</span>
<span class="term-fg32">+		depositNonces[i] = r.DepositNonce</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return depositNonces</span>
 }
&nbsp;
 &#47;&#47; WriteReceipts stores all the transaction receipts belonging to a block.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-920054901f85d9a29f13fea4" role="button"
                   aria-expanded="false" aria-controls="id-920054901f85d9a29f13fea4">
                    <code>core/rawdb/accessors_chain_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/rawdb/accessors_chain_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/rawdb/accessors_chain_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-920054901f85d9a29f13fea4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;rawdb&#47;accessors_chain_test.go bobanetwork&#47;v3-erigon&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg1">index a317d7b133e8b5c650a32a7132e7fdc10427573b..cf99d8b48c1996214dd689f31fc8d28ed6404895 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg36">@@ -469,6 +469,7 @@</span> 		},
 		TxHash:          tx1.Hash(),
 		ContractAddress: libcommon.BytesToAddress([]byte{0x01, 0x11, 0x11}),
 		GasUsed:         111111,
<span class="term-fg32">+		L1Fee:           big.NewInt(7),</span>
 	}
 	&#47;&#47;receipt1.Bloom = types.CreateBloom(types.Receipts{receipt1})
&nbsp;
<span class="term-fg36">@@ -502,7 +503,7 @@</span>
 	b, senders, err := br.BlockWithSenders(ctx, tx, hash, 1)
 	require.NoError(err)
 	require.NotNil(b)
<span class="term-fg31">-	if rs := rawdb.ReadReceipts(tx, b, senders); len(rs) == 0 {</span>
<span class="term-fg32">+	if rs := rawdb.ReadReceipts(params.TestChainConfig, tx, b, senders); len(rs) == 0 {</span>
 		t.Fatalf(&quot;no receipts returned&quot;)
 	} else {
 		if err := checkReceiptsRLP(rs, receipts); err != nil {
<span class="term-fg36">@@ -515,7 +516,7 @@</span> 	rawdb.DeleteBody(tx, hash, 1)
 	b, senders, err = br.BlockWithSenders(ctx, tx, hash, 1)
 	require.NoError(err)
 	require.Nil(b)
<span class="term-fg31">-	if rs := rawdb.ReadReceipts(tx, b, senders); rs != nil {</span>
<span class="term-fg32">+	if rs := rawdb.ReadReceipts(params.TestChainConfig, tx, b, senders); rs != nil {</span>
 		t.Fatalf(&quot;receipts returned when body was deleted: %v&quot;, rs)
 	}
 	&#47;&#47; Ensure that receipts without metadata can be returned without the block body too
<span class="term-fg36">@@ -529,7 +530,7 @@</span> 	require.NoError(rawdb.TruncateReceipts(tx, 1))
 	b, senders, err = br.BlockWithSenders(ctx, tx, hash, 1)
 	require.NoError(err)
 	require.NotNil(b)
<span class="term-fg31">-	if rs := rawdb.ReadReceipts(tx, b, senders); len(rs) != 0 {</span>
<span class="term-fg32">+	if rs := rawdb.ReadReceipts(params.TestChainAuraConfig, tx, b, senders); len(rs) != 0 {</span>
 		t.Fatalf(&quot;deleted receipts returned: %v&quot;, rs)
 	}
 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-aebe208a12b239c82c0b80bf"role="button" aria-expanded="false" aria-controls="id-aebe208a12b239c82c0b80bf">
        
            <div class="col-12 col-sm-9 text-start"><h3>API Backend</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+65</span></div>
                <div class="text-start"><span class="text-danger">-39</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-aebe208a12b239c82c0b80bf">
        <div><p>Forward transactions to the sequencer or historical node if configured.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0d9cc470e29cfc6da10e44bc" role="button"
                   aria-expanded="false" aria-controls="id-0d9cc470e29cfc6da10e44bc">
                    <code>eth/backend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/backend.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/backend.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+55</span></div>
                        <div class="text-start"><span class="text-danger">-39</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0d9cc470e29cfc6da10e44bc"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;backend.go bobanetwork&#47;v3-erigon&#47;eth&#47;backend.go</span>
<span class="term-fg1">index 8293d6af64b4773b6bce3d72eed07868cab29fe2..37bb811b022008019b9124107a7f5489053f9da2 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;backend.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;backend.go</span>
<span class="term-fg36">@@ -31,7 +31,6 @@</span> 	&quot;strings&quot;
 	&quot;sync&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&#47;downloadergrpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;kvcfg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cl&#47;beacon&quot;
<span class="term-fg36">@@ -42,6 +41,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cl&#47;persistence&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cl&#47;phase1&#47;execution_client&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;rawdb&#47;blockio&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;ethdb&#47;prune&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;builder&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&#47;engine_block_downloader&quot;
<span class="term-fg36">@@ -63,6 +63,7 @@</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;dir&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;direct&quot;
 	downloader3 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&#47;downloadercfg&quot;
<span class="term-fg36">@@ -150,10 +151,12 @@</span> 	genesisHash  libcommon.Hash
&nbsp;
 	eth1ExecutionServer *eth1.EthereumExecutionModule
&nbsp;
<span class="term-fg31">-	ethBackendRPC      *privateapi.EthBackendServer</span>
<span class="term-fg31">-	engineBackendRPC   *engineapi.EngineServer</span>
<span class="term-fg31">-	miningRPC          txpool_proto.MiningServer</span>
<span class="term-fg31">-	stateChangesClient txpool.StateChangesClient</span>
<span class="term-fg32">+	ethBackendRPC        *privateapi.EthBackendServer</span>
<span class="term-fg32">+	seqRPCService        *rpc.Client</span>
<span class="term-fg32">+	historicalRPCService *rpc.Client</span>
<span class="term-fg32">+	engineBackendRPC     *engineapi.EngineServer</span>
<span class="term-fg32">+	miningRPC            txpool_proto.MiningServer</span>
<span class="term-fg32">+	stateChangesClient   txpool.StateChangesClient</span>
&nbsp;
 	miningSealingQuit chan struct{}
 	pendingBlocks     chan *types.Block
<span class="term-fg36">@@ -284,23 +287,9 @@</span> 	}
&nbsp;
 	&#47;&#47; Check if we have an already initialized chain and fall back to
 	&#47;&#47; that if so. Otherwise we need to generate a new genesis spec.
<span class="term-fg31">-	blockReader, blockWriter, allSnapshots, agg, err := setUpBlockReader(ctx, chainKv, config.Dirs, config.Snapshot, config.HistoryV3, config.Genesis.Config.Bor != nil, logger)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	backend.agg, backend.blockSnapshots, backend.blockReader, backend.blockWriter = agg, allSnapshots, blockReader, blockWriter</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	if config.HistoryV3 {</span>
<span class="term-fg31">-		backend.chainDB, err = temporal.New(backend.chainDB, agg, systemcontracts.SystemContractCodeLookup[config.Genesis.Config.ChainName])</span>
<span class="term-fg31">-		if err != nil {</span>
<span class="term-fg31">-			return nil, err</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		chainKv = backend.chainDB &#47;&#47;nolint</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
 	var chainConfig *chain.Config
 	var genesis *types.Block
<span class="term-fg31">-	if err := backend.chainDB.Update(context.Background(), func(tx kv.RwTx) error {</span>
<span class="term-fg32">+	if err := chainKv.Update(context.Background(), func(tx kv.RwTx) error {</span>
 		h, err := rawdb.ReadCanonicalHash(tx, 0)
 		if err != nil {
 			panic(err)
<span class="term-fg36">@@ -319,6 +308,13 @@</span> 		return nil
 	}); err != nil {
 		panic(err)
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	blockReader, blockWriter, allSnapshots, agg, err := setUpBlockReader(ctx, chainKv, config.Dirs, config.Snapshot, config.HistoryV3, chainConfig.Bor != nil, logger)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	backend.agg, backend.blockSnapshots, backend.blockReader, backend.blockWriter = agg, allSnapshots, blockReader, blockWriter</span>
<span class="term-fg32">+</span>
 	backend.chainConfig = chainConfig
 	backend.genesisBlock = genesis
 	backend.genesisHash = genesis.Hash()
<span class="term-fg36">@@ -329,7 +325,15 @@</span> 	if err := backend.setUpSnapDownloader(ctx, config.Downloader); err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg31">-	kvRPC := remotedbserver.NewKvServer(ctx, backend.chainDB, allSnapshots, agg, logger)</span>
<span class="term-fg32">+	if config.HistoryV3 {</span>
<span class="term-fg32">+		backend.chainDB, err = temporal.New(backend.chainDB, agg, systemcontracts.SystemContractCodeLookup[chainConfig.ChainName])</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		chainKv = backend.chainDB</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	kvRPC := remotedbserver.NewKvServer(ctx, chainKv, allSnapshots, agg, logger)</span>
 	backend.notifications.StateChangesConsumer = kvRPC
 	backend.kvRPC = kvRPC
&nbsp;
<span class="term-fg36">@@ -547,6 +551,27 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg32">+	&#47;&#47; Setup sequencer and hsistorical RPC relay services</span>
<span class="term-fg32">+	if config.RollupSequencerHTTP != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupSequencerHTTP, logger)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		backend.seqRPCService = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if config.RollupHistoricalRPC != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), config.RollupHistoricalRPCTimeout)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupHistoricalRPC, logger)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		backend.historicalRPCService = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config.TxPool.NoTxGossip = config.RollupDisableTxPoolGossip</span>
<span class="term-fg32">+</span>
 	var miningRPC txpool_proto.MiningServer
 	stateDiffClient := direct.NewStateDiffClientDirect(kvRPC)
 	if config.DeprecatedTxPool.Disable {
<span class="term-fg36">@@ -606,9 +631,11 @@</span> 				stagedsync.StageMiningFinishCfg(backend.chainDB, *backend.chainConfig, backend.engine, miningStatePos, backend.miningSealingQuit, backend.blockReader, latestBlockBuiltStore),
 			), stagedsync.MiningUnwindOrder, stagedsync.MiningPruneOrder,
 			logger)
 		&#47;&#47; We start the mining step
<span class="term-fg32">+		log.Debug(&quot;Starting assembleBlockPOS mining step&quot;, &quot;payloadId&quot;, param.PayloadId)</span>
 		if err := stages2.MiningStep(ctx, backend.chainDB, proposingSync, tmpdir); err != nil {
 			return nil, err
 		}
<span class="term-fg32">+		log.Debug(&quot;Finished assembleBlockPOS mining step&quot;, &quot;payloadId&quot;, param.PayloadId)</span>
 		block := &lt;-miningStatePos.MiningResultPOSCh
 		return block, nil
 	}
<span class="term-fg36">@@ -855,27 +882,15 @@</span> 	if err != nil {
 		return err
 	}
&nbsp;
<span class="term-fg31">-	s.apiList = jsonrpc.APIList(chainKv, ethRpcClient, txPoolRpcClient, miningRpcClient, ff, stateCache, blockReader, s.agg, httpRpcCfg, s.engine, s.logger)</span>
<span class="term-fg32">+	s.apiList = jsonrpc.APIList(chainKv, ethRpcClient, txPoolRpcClient, miningRpcClient, ff, stateCache, blockReader, s.agg, httpRpcCfg, s.engine, s.seqRPCService, s.historicalRPCService, s.logger)</span>
 	go func() {
<span class="term-fg31">-		if config.SilkwormEnabled &amp;&amp; httpRpcCfg.Enabled {</span>
<span class="term-fg31">-			go func() {</span>
<span class="term-fg31">-				&lt;-ctx.Done()</span>
<span class="term-fg31">-				s.silkworm.StopRpcDaemon()</span>
<span class="term-fg31">-			}()</span>
<span class="term-fg31">-			err = s.silkworm.StartRpcDaemon(chainKv)</span>
<span class="term-fg31">-			if err != nil {</span>
<span class="term-fg31">-				s.logger.Error(err.Error())</span>
<span class="term-fg31">-				return</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-		} else {</span>
<span class="term-fg31">-			if err := cli.StartRpcServer(ctx, httpRpcCfg, s.apiList, s.logger); err != nil {</span>
<span class="term-fg31">-				s.logger.Error(err.Error())</span>
<span class="term-fg31">-				return</span>
<span class="term-fg31">-			}</span>
<span class="term-fg32">+		if err := cli.StartRpcServer(ctx, httpRpcCfg, s.apiList, s.logger); err != nil {</span>
<span class="term-fg32">+			s.logger.Error(err.Error())</span>
<span class="term-fg32">+			return</span>
 		}
 	}()
&nbsp;
<span class="term-fg31">-	go s.engineBackendRPC.Start(httpRpcCfg, s.chainDB, s.blockReader, ff, stateCache, s.agg, s.engine, ethRpcClient, txPoolRpcClient, miningRpcClient)</span>
<span class="term-fg32">+	go s.engineBackendRPC.Start(httpRpcCfg, s.chainDB, s.blockReader, ff, stateCache, s.agg, s.engine, ethRpcClient, txPoolRpcClient, miningRpcClient, s.seqRPCService, s.historicalRPCService)</span>
&nbsp;
 	&#47;&#47; Register the backend on the node
 	stack.RegisterLifecycle(s)
<span class="term-fg36">@@ -1130,7 +1145,7 @@</span> 		&#47;&#47; connect to external Downloader
 		s.downloaderClient, err = downloadergrpc.NewClient(ctx, s.config.Snapshot.DownloaderAddr)
 	} else {
 		&#47;&#47; start embedded Downloader
<span class="term-fg31">-		s.downloader, err = downloader3.New(ctx, downloaderCfg, s.config.Dirs, s.logger, log.LvlDebug)</span>
<span class="term-fg32">+		s.downloader, err = downloader3.New(ctx, downloaderCfg, s.logger, log.LvlInfo)</span>
 		if err != nil {
 			return err
 		}
<span class="term-fg36">@@ -1176,6 +1191,7 @@</span> 	}
 	blockReader := freezeblocks.NewBlockReader(allSnapshots, allBorSnapshots)
 	blockWriter := blockio.NewBlockWriter(histV3)
&nbsp;
<span class="term-fg32">+	dir.MustExist(dirs.SnapHistory)</span>
 	agg, err := libstate.NewAggregatorV3(ctx, dirs.SnapHistory, dirs.Tmp, ethconfig.HistoryV3AggregationStep, db, logger)
 	if err != nil {
 		return nil, nil, nil, nil, err</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7f7422dd4ea28c66b39892b9" role="button"
                   aria-expanded="false" aria-controls="id-7f7422dd4ea28c66b39892b9">
                    <code>rpc/errors.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/rpc/errors.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/rpc/errors.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7f7422dd4ea28c66b39892b9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;rpc&#47;errors.go bobanetwork&#47;v3-erigon&#47;rpc&#47;errors.go</span>
<span class="term-fg1">index 83f9c031309d3f46ed9b5ed4d63e3d4a36a894ba..0af99284535679a144eb5784f4e524415edf15fe 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;rpc&#47;errors.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;rpc&#47;errors.go</span>
<span class="term-fg36">@@ -30,6 +30,16 @@</span> )
&nbsp;
 const defaultErrorCode = -32000
&nbsp;
<span class="term-fg32">+var ErrNoHistoricalFallback = NoHistoricalFallbackError{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type NoHistoricalFallbackError struct{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (e NoHistoricalFallbackError) ErrorCode() int { return -32801 }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (e NoHistoricalFallbackError) Error() string {</span>
<span class="term-fg32">+	return &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 type methodNotFoundError struct{ method string }
&nbsp;
 func (e *methodNotFoundError) ErrorCode() int { return -32601 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-eefd610c11c8f74967e61512"role="button" aria-expanded="false" aria-controls="id-eefd610c11c8f74967e61512">
        
            <div class="col-12 col-sm-9 text-start"><h3>Transaction & Block response</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+62</span></div>
                <div class="text-start"><span class="text-danger">-19</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-eefd610c11c8f74967e61512">
        <div><p>Format deposit and L1-cost data in transaction responses.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cbe2a5c87cf6b9f6cd8046cc" role="button"
                   aria-expanded="false" aria-controls="id-cbe2a5c87cf6b9f6cd8046cc">
                    <code>turbo/adapter/ethapi/api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/adapter/ethapi/api.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/adapter/ethapi/api.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+58</span></div>
                        <div class="text-start"><span class="text-danger">-15</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cbe2a5c87cf6b9f6cd8046cc"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api.go bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api.go</span>
<span class="term-fg1">index c11dd3c98b063909489278d70c0f4fd89d643c64..d5fb933fdae809f320951a821868064efd942277 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api.go</span>
<span class="term-fg36">@@ -153,7 +153,7 @@</span> 	if args.AccessList != nil {
 		accessList = *args.AccessList
 	}
&nbsp;
<span class="term-fg31">-	msg := types.NewMessage(addr, args.To, 0, value, gas, gasPrice, gasFeeCap, gasTipCap, data, accessList, false &#47;* checkNonce *&#47;, false &#47;* isFree *&#47;, maxFeePerBlobGas)</span>
<span class="term-fg32">+	msg := types.NewMessage(addr, args.To, 0, value, gas, gasPrice, gasFeeCap, gasTipCap, data, accessList, false &#47;* checkNonce *&#47;, false &#47;* isFree *&#47;, maxFeePerBlobGas, 0 &#47;* rollupDataGas *&#47;)</span>
 	return msg, nil
 }
&nbsp;
<span class="term-fg36">@@ -305,11 +305,11 @@</span>
 &#47;&#47; RPCMarshalBlock converts the given block to the RPC output which depends on fullTx. If inclTx is true transactions are
 &#47;&#47; returned. When fullTx is true the returned block contains full transaction details, otherwise it will only contain
 &#47;&#47; transaction hashes.
<span class="term-fg31">-func RPCMarshalBlockDeprecated(block *types.Block, inclTx bool, fullTx bool) (map[string]interface{}, error) {</span>
<span class="term-fg31">-	return RPCMarshalBlockExDeprecated(block, inclTx, fullTx, nil, libcommon.Hash{})</span>
<span class="term-fg32">+func RPCMarshalBlockDeprecated(block *types.Block, inclTx bool, fullTx bool, depositNonces []*uint64) (map[string]interface{}, error) {</span>
<span class="term-fg32">+	return RPCMarshalBlockExDeprecated(block, inclTx, fullTx, nil, libcommon.Hash{}, nil, depositNonces)</span>
 }
&nbsp;
<span class="term-fg31">-func RPCMarshalBlockExDeprecated(block *types.Block, inclTx bool, fullTx bool, borTx types.Transaction, borTxHash libcommon.Hash) (map[string]interface{}, error) {</span>
<span class="term-fg32">+func RPCMarshalBlockExDeprecated(block *types.Block, inclTx bool, fullTx bool, borTx types.Transaction, borTxHash libcommon.Hash, receipts types.Receipts, depositNonces []*uint64) (map[string]interface{}, error) {</span>
 	fields := RPCMarshalHeader(block.Header())
 	fields[&quot;size&quot;] = hexutil.Uint64(block.Size())
 	if _, ok := fields[&quot;transactions&quot;]; !ok {
<span class="term-fg36">@@ -317,19 +317,31 @@</span> 		fields[&quot;transactions&quot;] = make([]interface{}, 0)
 	}
&nbsp;
 	if inclTx {
<span class="term-fg31">-		formatTx := func(tx types.Transaction, index int) (interface{}, error) {</span>
<span class="term-fg32">+		formatTx := func(tx types.Transaction, index int, dn *uint64) (interface{}, error) {</span>
 			return tx.Hash(), nil
 		}
 		if fullTx {
<span class="term-fg31">-			formatTx = func(tx types.Transaction, index int) (interface{}, error) {</span>
<span class="term-fg31">-				return newRPCTransactionFromBlockAndTxGivenIndex(block, tx, uint64(index)), nil</span>
<span class="term-fg32">+			formatTx = func(tx types.Transaction, index int, dn *uint64) (interface{}, error) {</span>
<span class="term-fg32">+				rpcTx := newRPCTransactionFromBlockAndTxGivenIndex(block, tx, uint64(index), depositNonces[index])</span>
<span class="term-fg32">+				if dn != nil {</span>
<span class="term-fg32">+					rpcTx.Nonce = hexutil.Uint64(*dn)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				return rpcTx, nil</span>
 			}
 		}
 		txs := block.Transactions()
 		transactions := make([]interface{}, len(txs), len(txs)+1)
<span class="term-fg32">+		if depositNonces == nil {</span>
<span class="term-fg32">+			&#47;&#47; ensure that depositNonces is always initialized for formatTx</span>
<span class="term-fg32">+			depositNonces = make([]*uint64, len(txs))</span>
<span class="term-fg32">+		}</span>
 		var err error
 		for i, tx := range txs {
<span class="term-fg31">-			if transactions[i], err = formatTx(tx, i); err != nil {</span>
<span class="term-fg32">+			var dn *uint64</span>
<span class="term-fg32">+			if tx.Type() == types.DepositTxType &amp;&amp; receipts != nil {</span>
<span class="term-fg32">+				dn = receipts[i].DepositNonce</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if transactions[i], err = formatTx(tx, i, dn); err != nil {</span>
 				return nil, err
 			}
 		}
<span class="term-fg36">@@ -404,13 +416,16 @@</span> 	ChainID          *hexutil.Big       `json:&quot;chainId,omitempty&quot;`
 	V                *hexutil.Big       `json:&quot;v&quot;`
 	R                *hexutil.Big       `json:&quot;r&quot;`
 	S                *hexutil.Big       `json:&quot;s&quot;`
<span class="term-fg32">+	SourceHash       *libcommon.Hash    `json:&quot;sourceHash,omitempty&quot;`</span>
<span class="term-fg32">+	Mint             *hexutil.Big       `json:&quot;mint,omitempty&quot;`</span>
<span class="term-fg32">+	IsSystemTx       bool               `json:&quot;isSystemTx,omitempty&quot;`</span>
&nbsp;
 	BlobVersionedHashes []libcommon.Hash `json:&quot;blobVersionedHashes,omitempty&quot;`
 }
&nbsp;
 &#47;&#47; newRPCTransaction returns a transaction that will serialize to the RPC
 &#47;&#47; representation, with the given location metadata set (if available).
<span class="term-fg31">-func newRPCTransaction(tx types.Transaction, blockHash libcommon.Hash, blockNumber uint64, index uint64, baseFee *big.Int) *RPCTransaction {</span>
<span class="term-fg32">+func newRPCTransaction(tx types.Transaction, blockHash libcommon.Hash, blockNumber uint64, index uint64, baseFee *big.Int, depositNonce *uint64) *RPCTransaction {</span>
 	&#47;&#47; Determine the signer. For replay-protected transactions, use the most permissive
 	&#47;&#47; signer, because we assume that signers are backwards-compatible with old
 	&#47;&#47; transactions. For non-protected transactions, the homestead signer signer is used
<span class="term-fg36">@@ -427,10 +442,13 @@</span> 		Value: (*hexutil.Big)(tx.GetValue().ToBig()),
 	}
 	switch t := tx.(type) {
 	case *types.LegacyTx:
<span class="term-fg31">-		chainId = types.DeriveChainId(&amp;t.V)</span>
<span class="term-fg31">-		&#47;&#47; if a legacy transaction has an EIP-155 chain id, include it explicitly, otherwise chain id is not included</span>
<span class="term-fg31">-		if !chainId.IsZero() {</span>
<span class="term-fg31">-			result.ChainID = (*hexutil.Big)(chainId.ToBig())</span>
<span class="term-fg32">+		&#47;&#47; avoid overflow by not calling DeriveChainId. chain id not included when v = 0</span>
<span class="term-fg32">+		if !t.V.IsZero() {</span>
<span class="term-fg32">+			chainId = types.DeriveChainId(&amp;t.V)</span>
<span class="term-fg32">+			&#47;&#47; if a legacy transaction has an EIP-155 chain id, include it explicitly, otherwise chain id is not included</span>
<span class="term-fg32">+			if !chainId.IsZero() {</span>
<span class="term-fg32">+				result.ChainID = (*hexutil.Big)(chainId.ToBig())</span>
<span class="term-fg32">+			}</span>
 		}
 		result.GasPrice = (*hexutil.Big)(t.GasPrice.ToBig())
 		result.V = (*hexutil.Big)(t.V.ToBig())
<span class="term-fg36">@@ -468,6 +486,20 @@</span> 		&#47;&#47; if the transaction has been mined, compute the effective gas price
 		result.GasPrice = computeGasPrice(tx, blockHash, baseFee)
 		result.MaxFeePerBlobGas = (*hexutil.Big)(t.MaxFeePerBlobGas.ToBig())
 		result.BlobVersionedHashes = t.GetBlobHashes()
<span class="term-fg32">+	case *types.DepositTransaction:</span>
<span class="term-fg32">+		result.SourceHash = t.SourceHash</span>
<span class="term-fg32">+		if t.IsSystemTx {</span>
<span class="term-fg32">+			result.IsSystemTx = t.IsSystemTx</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if depositNonce != nil {</span>
<span class="term-fg32">+			result.Nonce = hexutil.Uint64(*depositNonce)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		result.Mint = (*hexutil.Big)(t.Mint.ToBig())</span>
<span class="term-fg32">+		result.GasPrice = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		&#47;&#47; must contain v, r, s values for backwards compatibility.</span>
<span class="term-fg32">+		result.V = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		result.R = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		result.S = (*hexutil.Big)(libcommon.Big0)</span>
 	}
 	signer := types.LatestSignerForChainID(chainId.ToBig())
 	var err error
<span class="term-fg36">@@ -538,8 +570,8 @@</span> }
 *&#47;
&nbsp;
 &#47;&#47; newRPCTransactionFromBlockAndTxGivenIndex returns a transaction that will serialize to the RPC representation.
<span class="term-fg31">-func newRPCTransactionFromBlockAndTxGivenIndex(b *types.Block, tx types.Transaction, index uint64) *RPCTransaction {</span>
<span class="term-fg31">-	return newRPCTransaction(tx, b.Hash(), b.NumberU64(), index, b.BaseFee())</span>
<span class="term-fg32">+func newRPCTransactionFromBlockAndTxGivenIndex(b *types.Block, tx types.Transaction, index uint64, depositNonce *uint64) *RPCTransaction {</span>
<span class="term-fg32">+	return newRPCTransaction(tx, b.Hash(), b.NumberU64(), index, b.BaseFee(), depositNonce)</span>
 }
&nbsp;
 &#47;*
<span class="term-fg36">@@ -736,6 +768,17 @@</span> 		&quot;contractAddress&quot;:   nil,
 		&quot;logs&quot;:              receipt.Logs,
 		&quot;logsBloom&quot;:         receipt.Bloom,
 		&quot;type&quot;:              hexutil.Uint(tx.Type()),
<span class="term-fg32">+		&quot;effectiveGasPrice&quot;: (*hexutil.Big)(receipt.EffectiveGasPrice),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().Optimism != nil &amp;&amp; !tx.IsDepositTx() {</span>
<span class="term-fg32">+		fields[&quot;l1GasPrice&quot;] = (*hexutil.Big)(receipt.L1GasPrice)</span>
<span class="term-fg32">+		fields[&quot;l1GasUsed&quot;] = (*hexutil.Big)(receipt.L1GasUsed)</span>
<span class="term-fg32">+		fields[&quot;l1Fee&quot;] = (*hexutil.Big)(receipt.L1Fee)</span>
<span class="term-fg32">+		fields[&quot;l1FeeScalar&quot;] = receipt.FeeScalar.String()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if s.b.ChainConfig().Optimism != nil &amp;&amp; tx.IsDepositTx() &amp;&amp; receipt.DepositNonce != nil {</span>
<span class="term-fg32">+		fields[&quot;depositNonce&quot;] = hexutil.Uint64(*receipt.DepositNonce)</span>
 	}
&nbsp;
 	&#47;&#47; Assign receipt status or post state.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7ef0e26f15777f8a1b12c01f" role="button"
                   aria-expanded="false" aria-controls="id-7ef0e26f15777f8a1b12c01f">
                    <code>turbo/adapter/ethapi/internal.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/adapter/ethapi/internal.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/adapter/ethapi/internal.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7ef0e26f15777f8a1b12c01f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;internal.go bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;internal.go</span>
<span class="term-fg1">index 67e985ade1e19354de132fc6a6f962cd1ae8e0db..841ec7c715657d252999486b579c406a16ab6140 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;internal.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;internal.go</span>
<span class="term-fg36">@@ -8,8 +8,8 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 )
&nbsp;
 &#47;&#47; nolint
<span class="term-fg31">-func RPCMarshalBlock(b *types.Block, inclTx bool, fullTx bool, additional map[string]interface{}) (map[string]interface{}, error) {</span>
<span class="term-fg31">-	fields, err := RPCMarshalBlockDeprecated(b, inclTx, fullTx)</span>
<span class="term-fg32">+func RPCMarshalBlock(b *types.Block, inclTx bool, fullTx bool, additional map[string]interface{}, depositNonces []*uint64) (map[string]interface{}, error) {</span>
<span class="term-fg32">+	fields, err := RPCMarshalBlockDeprecated(b, inclTx, fullTx, depositNonces)</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -22,8 +22,8 @@</span> 	return fields, err
 }
&nbsp;
 &#47;&#47; nolint
<span class="term-fg31">-func RPCMarshalBlockEx(b *types.Block, inclTx bool, fullTx bool, borTx types.Transaction, borTxHash libcommon.Hash, additional map[string]interface{}) (map[string]interface{}, error) {</span>
<span class="term-fg31">-	fields, err := RPCMarshalBlockExDeprecated(b, inclTx, fullTx, borTx, borTxHash)</span>
<span class="term-fg32">+func RPCMarshalBlockEx(b *types.Block, inclTx bool, fullTx bool, borTx types.Transaction, borTxHash libcommon.Hash, additional map[string]interface{}, receipts types.Receipts, depositNonces []*uint64) (map[string]interface{}, error) {</span>
<span class="term-fg32">+	fields, err := RPCMarshalBlockExDeprecated(b, inclTx, fullTx, borTx, borTxHash, receipts, depositNonces)</span>
 	if err != nil {
 		return nil, err
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-ebb6b9d05f7accb90448760c"role="button" aria-expanded="false" aria-controls="id-ebb6b9d05f7accb90448760c">
        
            <div class="col-12 col-sm-9 text-start"><h3>Otterscan API</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-ebb6b9d05f7accb90448760c">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-910f598877f9e467cd6e8e9a"role="button" aria-expanded="false" aria-controls="id-910f598877f9e467cd6e8e9a">
        
            <div class="col-12 col-sm-9 text-start"><h2>Generated files</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+300</span></div>
                <div class="text-start"><span class="text-danger">-51</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-910f598877f9e467cd6e8e9a">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-16877b6d7ea50a3423785048" role="button"
                   aria-expanded="false" aria-controls="id-16877b6d7ea50a3423785048">
                    <code>core/types/receipt_codecgen_gen.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/receipt_codecgen_gen.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/receipt_codecgen_gen.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+300</span></div>
                        <div class="text-start"><span class="text-danger">-51</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-16877b6d7ea50a3423785048"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt_codecgen_gen.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt_codecgen_gen.go</span>
<span class="term-fg1">index e2bc7db9db1f1e9bba2ed75a6cc84f685079bf75..65a696a556ee042fcd24ff50eda586cff83dfeb4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;receipt_codecgen_gen.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;receipt_codecgen_gen.go</span>
<span class="term-fg36">@@ -7,7 +7,7 @@</span> package types
&nbsp;
 import (
 	&quot;errors&quot;
<span class="term-fg31">-	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	pkg1_common &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
 	codec1978 &quot;github.com&#47;ugorji&#47;go&#47;codec&quot;
 	pkg2_big &quot;math&#47;big&quot;
 	&quot;runtime&quot;
<span class="term-fg36">@@ -46,7 +46,7 @@</span> 		ver := strconv.FormatInt(int64(codec1978.GenVersion), 10)
 		panic(errors.New(&quot;codecgen version mismatch: current: 19, need &quot; + ver + &quot;. Re-generate file: &quot; + file))
 	}
 	if false { &#47;&#47; reference the types, but skip this branch at build&#47;run time
<span class="term-fg31">-		var _ libcommon.Address</span>
<span class="term-fg32">+		var _ pkg1_common.Address</span>
 		var _ pkg2_big.Int
 	}
 }
<span class="term-fg36">@@ -64,7 +64,12 @@</span> 		} else {
 			yy2arr2 := z.EncBasicHandle().StructToArray
 			_ = yy2arr2
 			const yyr2 bool = false &#47;&#47; struct tag has &#39;toArray&#39;
<span class="term-fg31">-			z.EncWriteArrayStart(4)</span>
<span class="term-fg32">+			var yyn7 bool = x.DepositNonce == nil</span>
<span class="term-fg32">+			var yyn8 bool = x.L1GasPrice == nil</span>
<span class="term-fg32">+			var yyn9 bool = x.L1GasUsed == nil</span>
<span class="term-fg32">+			var yyn10 bool = x.L1Fee == nil</span>
<span class="term-fg32">+			var yyn11 bool = x.FeeScalar == nil</span>
<span class="term-fg32">+			z.EncWriteArrayStart(9)</span>
 			z.EncWriteArrayElem()
 			r.EncodeUint(uint64(x.Type))
 			z.EncWriteArrayElem()
<span class="term-fg36">@@ -77,6 +82,58 @@</span> 			z.EncWriteArrayElem()
 			r.EncodeUint(uint64(x.Status))
 			z.EncWriteArrayElem()
 			r.EncodeUint(uint64(x.CumulativeGasUsed))
<span class="term-fg32">+			if yyn7 {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				r.EncodeNil()</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				yy16 := *x.DepositNonce</span>
<span class="term-fg32">+				r.EncodeUint(uint64(yy16))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if yyn8 {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				r.EncodeNil()</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				if !z.EncBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.EncJSONMarshal(x.L1GasPrice)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.EncFallback(x.L1GasPrice)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if yyn9 {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				r.EncodeNil()</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				if !z.EncBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.EncJSONMarshal(x.L1GasUsed)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.EncFallback(x.L1GasUsed)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if yyn10 {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				r.EncodeNil()</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				if !z.EncBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.EncJSONMarshal(x.L1Fee)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.EncFallback(x.L1Fee)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if yyn11 {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				r.EncodeNil()</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				z.EncWriteArrayElem()</span>
<span class="term-fg32">+				if !z.EncBinary() {</span>
<span class="term-fg32">+					z.EncTextMarshal(x.FeeScalar)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.EncFallback(x.FeeScalar)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
 			z.EncWriteArrayEnd()
 		}
 	}
<span class="term-fg36">@@ -138,6 +195,77 @@</span> 		case &quot;2&quot;:
 			x.Status = (uint64)(r.DecodeUint64())
 		case &quot;3&quot;:
 			x.CumulativeGasUsed = (uint64)(r.DecodeUint64())
<span class="term-fg32">+		case &quot;DepositNonce&quot;:</span>
<span class="term-fg32">+			if r.TryNil() {</span>
<span class="term-fg32">+				if x.DepositNonce != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+					x.DepositNonce = nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				if x.DepositNonce == nil {</span>
<span class="term-fg32">+					x.DepositNonce = new(uint64)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				*x.DepositNonce = (uint64)(r.DecodeUint64())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		case &quot;L1GasPrice&quot;:</span>
<span class="term-fg32">+			if r.TryNil() {</span>
<span class="term-fg32">+				if x.L1GasPrice != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+					x.L1GasPrice = nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				if x.L1GasPrice == nil {</span>
<span class="term-fg32">+					x.L1GasPrice = new(pkg2_big.Int)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.DecJSONUnmarshal(x.L1GasPrice)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.DecFallback(x.L1GasPrice, false)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		case &quot;L1GasUsed&quot;:</span>
<span class="term-fg32">+			if r.TryNil() {</span>
<span class="term-fg32">+				if x.L1GasUsed != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+					x.L1GasUsed = nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				if x.L1GasUsed == nil {</span>
<span class="term-fg32">+					x.L1GasUsed = new(pkg2_big.Int)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.DecJSONUnmarshal(x.L1GasUsed)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.DecFallback(x.L1GasUsed, false)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		case &quot;L1Fee&quot;:</span>
<span class="term-fg32">+			if r.TryNil() {</span>
<span class="term-fg32">+				if x.L1Fee != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+					x.L1Fee = nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				if x.L1Fee == nil {</span>
<span class="term-fg32">+					x.L1Fee = new(pkg2_big.Int)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+					z.DecJSONUnmarshal(x.L1Fee)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.DecFallback(x.L1Fee, false)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		case &quot;FeeScalar&quot;:</span>
<span class="term-fg32">+			if r.TryNil() {</span>
<span class="term-fg32">+				if x.FeeScalar != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+					x.FeeScalar = nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				if x.FeeScalar == nil {</span>
<span class="term-fg32">+					x.FeeScalar = new(pkg2_big.Float)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !z.DecBinary() {</span>
<span class="term-fg32">+					z.DecTextUnmarshal(x.FeeScalar)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					z.DecFallback(x.FeeScalar, false)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
 		default:
 			z.DecStructFieldNotFound(-1, yys3)
 		} &#47;&#47; end switch yys3
<span class="term-fg36">@@ -148,69 +276,190 @@</span> func (x *Receipt) codecDecodeSelfFromArray(l int, d *codec1978.Decoder) {
 	var h codecSelfer2
 	z, r := codec1978.GenHelperDecoder(d)
 	_, _, _ = h, z, r
<span class="term-fg31">-	var yyj9 int</span>
<span class="term-fg31">-	var yyb9 bool</span>
<span class="term-fg31">-	var yyhl9 bool = l &gt;= 0</span>
<span class="term-fg31">-	yyj9++</span>
<span class="term-fg31">-	if yyhl9 {</span>
<span class="term-fg31">-		yyb9 = yyj9 &gt; l</span>
<span class="term-fg32">+	var yyj19 int</span>
<span class="term-fg32">+	var yyb19 bool</span>
<span class="term-fg32">+	var yyhl19 bool = l &gt;= 0</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
 	} else {
<span class="term-fg31">-		yyb9 = z.DecCheckBreak()</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
 	}
<span class="term-fg31">-	if yyb9 {</span>
<span class="term-fg32">+	if yyb19 {</span>
 		z.DecReadArrayEnd()
 		return
 	}
 	z.DecReadArrayElem()
 	x.Type = (uint8)(z.C.UintV(r.DecodeUint64(), 8))
<span class="term-fg31">-	yyj9++</span>
<span class="term-fg31">-	if yyhl9 {</span>
<span class="term-fg31">-		yyb9 = yyj9 &gt; l</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
 	} else {
<span class="term-fg31">-		yyb9 = z.DecCheckBreak()</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
 	}
<span class="term-fg31">-	if yyb9 {</span>
<span class="term-fg32">+	if yyb19 {</span>
 		z.DecReadArrayEnd()
 		return
 	}
 	z.DecReadArrayElem()
 	x.PostState = r.DecodeBytes(([]byte)(x.PostState), false)
<span class="term-fg31">-	yyj9++</span>
<span class="term-fg31">-	if yyhl9 {</span>
<span class="term-fg31">-		yyb9 = yyj9 &gt; l</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
 	} else {
<span class="term-fg31">-		yyb9 = z.DecCheckBreak()</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
 	}
<span class="term-fg31">-	if yyb9 {</span>
<span class="term-fg32">+	if yyb19 {</span>
 		z.DecReadArrayEnd()
 		return
 	}
 	z.DecReadArrayElem()
 	x.Status = (uint64)(r.DecodeUint64())
<span class="term-fg31">-	yyj9++</span>
<span class="term-fg31">-	if yyhl9 {</span>
<span class="term-fg31">-		yyb9 = yyj9 &gt; l</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
 	} else {
<span class="term-fg31">-		yyb9 = z.DecCheckBreak()</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
 	}
<span class="term-fg31">-	if yyb9 {</span>
<span class="term-fg32">+	if yyb19 {</span>
 		z.DecReadArrayEnd()
 		return
 	}
 	z.DecReadArrayElem()
 	x.CumulativeGasUsed = (uint64)(r.DecodeUint64())
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yyb19 {</span>
<span class="term-fg32">+		z.DecReadArrayEnd()</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	z.DecReadArrayElem()</span>
<span class="term-fg32">+	if r.TryNil() {</span>
<span class="term-fg32">+		if x.DepositNonce != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+			x.DepositNonce = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if x.DepositNonce == nil {</span>
<span class="term-fg32">+			x.DepositNonce = new(uint64)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		*x.DepositNonce = (uint64)(r.DecodeUint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yyb19 {</span>
<span class="term-fg32">+		z.DecReadArrayEnd()</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	z.DecReadArrayElem()</span>
<span class="term-fg32">+	if r.TryNil() {</span>
<span class="term-fg32">+		if x.L1GasPrice != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+			x.L1GasPrice = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if x.L1GasPrice == nil {</span>
<span class="term-fg32">+			x.L1GasPrice = new(pkg2_big.Int)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+			z.DecJSONUnmarshal(x.L1GasPrice)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			z.DecFallback(x.L1GasPrice, false)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yyb19 {</span>
<span class="term-fg32">+		z.DecReadArrayEnd()</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	z.DecReadArrayElem()</span>
<span class="term-fg32">+	if r.TryNil() {</span>
<span class="term-fg32">+		if x.L1GasUsed != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+			x.L1GasUsed = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if x.L1GasUsed == nil {</span>
<span class="term-fg32">+			x.L1GasUsed = new(pkg2_big.Int)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+			z.DecJSONUnmarshal(x.L1GasUsed)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			z.DecFallback(x.L1GasUsed, false)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yyb19 {</span>
<span class="term-fg32">+		z.DecReadArrayEnd()</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	z.DecReadArrayElem()</span>
<span class="term-fg32">+	if r.TryNil() {</span>
<span class="term-fg32">+		if x.L1Fee != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+			x.L1Fee = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if x.L1Fee == nil {</span>
<span class="term-fg32">+			x.L1Fee = new(pkg2_big.Int)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {</span>
<span class="term-fg32">+			z.DecJSONUnmarshal(x.L1Fee)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			z.DecFallback(x.L1Fee, false)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	yyj19++</span>
<span class="term-fg32">+	if yyhl19 {</span>
<span class="term-fg32">+		yyb19 = yyj19 &gt; l</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		yyb19 = z.DecCheckBreak()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yyb19 {</span>
<span class="term-fg32">+		z.DecReadArrayEnd()</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	z.DecReadArrayElem()</span>
<span class="term-fg32">+	if r.TryNil() {</span>
<span class="term-fg32">+		if x.FeeScalar != nil { &#47;&#47; remove the if-true</span>
<span class="term-fg32">+			x.FeeScalar = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		if x.FeeScalar == nil {</span>
<span class="term-fg32">+			x.FeeScalar = new(pkg2_big.Float)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !z.DecBinary() {</span>
<span class="term-fg32">+			z.DecTextUnmarshal(x.FeeScalar)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			z.DecFallback(x.FeeScalar, false)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	for {
<span class="term-fg31">-		yyj9++</span>
<span class="term-fg31">-		if yyhl9 {</span>
<span class="term-fg31">-			yyb9 = yyj9 &gt; l</span>
<span class="term-fg32">+		yyj19++</span>
<span class="term-fg32">+		if yyhl19 {</span>
<span class="term-fg32">+			yyb19 = yyj19 &gt; l</span>
 		} else {
<span class="term-fg31">-			yyb9 = z.DecCheckBreak()</span>
<span class="term-fg32">+			yyb19 = z.DecCheckBreak()</span>
 		}
<span class="term-fg31">-		if yyb9 {</span>
<span class="term-fg32">+		if yyb19 {</span>
 			break
 		}
 		z.DecReadArrayElem()
<span class="term-fg31">-		z.DecStructFieldNotFound(yyj9-1, &quot;&quot;)</span>
<span class="term-fg32">+		z.DecStructFieldNotFound(yyj19-1, &quot;&quot;)</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -255,13 +504,13 @@</span> 			yy6 := &amp;x.Address
 			if !z.EncBinary() {
 				z.EncTextMarshal(*yy6)
 			} else {
<span class="term-fg31">-				h.enccommon_Address((*libcommon.Address)(yy6), e)</span>
<span class="term-fg32">+				h.enccommon_Address((*pkg1_common.Address)(yy6), e)</span>
 			}
 			z.EncWriteArrayElem()
 			if x.Topics == nil {
 				r.EncodeNil()
 			} else {
<span class="term-fg31">-				h.encSlicecommon_Hash(([]libcommon.Hash)(x.Topics), e)</span>
<span class="term-fg32">+				h.encSlicecommon_Hash(([]pkg1_common.Hash)(x.Topics), e)</span>
 			} &#47;&#47; end block: if x.Topics slice == nil
 			z.EncWriteArrayElem()
 			if x.Data == nil {
<span class="term-fg36">@@ -326,10 +575,10 @@</span> 		case &quot;1&quot;:
 			if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {
 				z.DecJSONUnmarshal(&amp;x.Address)
 			} else {
<span class="term-fg31">-				h.deccommon_Address((*libcommon.Address)(&amp;x.Address), d)</span>
<span class="term-fg32">+				h.deccommon_Address((*pkg1_common.Address)(&amp;x.Address), d)</span>
 			}
 		case &quot;2&quot;:
<span class="term-fg31">-			h.decSlicecommon_Hash((*[]libcommon.Hash)(&amp;x.Topics), d)</span>
<span class="term-fg32">+			h.decSlicecommon_Hash((*[]pkg1_common.Hash)(&amp;x.Topics), d)</span>
 		case &quot;3&quot;:
 			x.Data = r.DecodeBytes(([]byte)(x.Data), false)
 		default:
<span class="term-fg36">@@ -359,7 +608,7 @@</span> 	z.DecReadArrayElem()
 	if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {
 		z.DecJSONUnmarshal(&amp;x.Address)
 	} else {
<span class="term-fg31">-		h.deccommon_Address((*libcommon.Address)(&amp;x.Address), d)</span>
<span class="term-fg32">+		h.deccommon_Address((*pkg1_common.Address)(&amp;x.Address), d)</span>
 	}
 	yyj10++
 	if yyhl10 {
<span class="term-fg36">@@ -372,7 +621,7 @@</span> 		z.DecReadArrayEnd()
 		return
 	}
 	z.DecReadArrayElem()
<span class="term-fg31">-	h.decSlicecommon_Hash((*[]libcommon.Hash)(&amp;x.Topics), d)</span>
<span class="term-fg32">+	h.decSlicecommon_Hash((*[]pkg1_common.Hash)(&amp;x.Topics), d)</span>
 	yyj10++
 	if yyhl10 {
 		yyb10 = yyj10 &gt; l
<span class="term-fg36">@@ -526,7 +775,7 @@</span> 		*v = yyv1
 	}
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) enccommon_Address(v *libcommon.Address, e *codec1978.Encoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) enccommon_Address(v *pkg1_common.Address, e *codec1978.Encoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperEncoder(e)
 	_, _, _ = h, z, r
<span class="term-fg36">@@ -537,14 +786,14 @@</span> 	}
 	r.EncodeStringBytesRaw(((*[20]byte)(v))[:])
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) deccommon_Address(v *libcommon.Address, d *codec1978.Decoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) deccommon_Address(v *pkg1_common.Address, d *codec1978.Decoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperDecoder(d)
 	_, _, _ = h, z, r
 	r.DecodeBytes(((*[20]byte)(v))[:], true)
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) encSlicecommon_Hash(v []libcommon.Hash, e *codec1978.Encoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) encSlicecommon_Hash(v []pkg1_common.Hash, e *codec1978.Encoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperEncoder(e)
 	_, _, _ = h, z, r
<span class="term-fg36">@@ -559,13 +808,13 @@</span> 		yy2 := &amp;yyv1
 		if !z.EncBinary() {
 			z.EncTextMarshal(*yy2)
 		} else {
<span class="term-fg31">-			h.enccommon_Hash((*libcommon.Hash)(yy2), e)</span>
<span class="term-fg32">+			h.enccommon_Hash((*pkg1_common.Hash)(yy2), e)</span>
 		}
 	}
 	z.EncWriteArrayEnd()
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) decSlicecommon_Hash(v *[]libcommon.Hash, d *codec1978.Decoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) decSlicecommon_Hash(v *[]pkg1_common.Hash, d *codec1978.Decoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperDecoder(d)
 	_, _, _ = h, z, r
<span class="term-fg36">@@ -581,7 +830,7 @@</span> 			yyc1 = true
 		}
 	} else if yyl1 == 0 {
 		if yyv1 == nil {
<span class="term-fg31">-			yyv1 = []libcommon.Hash{}</span>
<span class="term-fg32">+			yyv1 = []pkg1_common.Hash{}</span>
 			yyc1 = true
 		} else if len(yyv1) != 0 {
 			yyv1 = yyv1[:0]
<span class="term-fg36">@@ -597,7 +846,7 @@</span> 				yyrl1 = z.DecInferLen(yyl1, z.DecBasicHandle().MaxInitLen, 32)
 				if yyrl1 &lt;= cap(yyv1) {
 					yyv1 = yyv1[:yyrl1]
 				} else {
<span class="term-fg31">-					yyv1 = make([]libcommon.Hash, yyrl1)</span>
<span class="term-fg32">+					yyv1 = make([]pkg1_common.Hash, yyrl1)</span>
 				}
 				yyc1 = true
 			} else if yyl1 != len(yyv1) {
<span class="term-fg36">@@ -613,13 +862,13 @@</span> 					yyrl1 = z.DecInferLen(yyl1, z.DecBasicHandle().MaxInitLen, 32)
 				} else {
 					yyrl1 = 8
 				}
<span class="term-fg31">-				yyv1 = make([]libcommon.Hash, yyrl1)</span>
<span class="term-fg32">+				yyv1 = make([]pkg1_common.Hash, yyrl1)</span>
 				yyc1 = true
 			}
 			yyh1.ElemContainerState(yyj1)
 			var yydb1 bool
 			if yyj1 &gt;= len(yyv1) {
<span class="term-fg31">-				yyv1 = append(yyv1, libcommon.Hash{})</span>
<span class="term-fg32">+				yyv1 = append(yyv1, pkg1_common.Hash{})</span>
 				yyc1 = true
 			}
 			if yydb1 {
<span class="term-fg36">@@ -628,7 +877,7 @@</span> 			} else {
 				if !z.DecBinary() &amp;&amp; z.IsJSONHandle() {
 					z.DecJSONUnmarshal(&amp;yyv1[yyj1])
 				} else {
<span class="term-fg31">-					h.deccommon_Hash((*libcommon.Hash)(&amp;yyv1[yyj1]), d)</span>
<span class="term-fg32">+					h.deccommon_Hash((*pkg1_common.Hash)(&amp;yyv1[yyj1]), d)</span>
 				}
 			}
 		}
<span class="term-fg36">@@ -636,7 +885,7 @@</span> 		if yyj1 &lt; len(yyv1) {
 			yyv1 = yyv1[:yyj1]
 			yyc1 = true
 		} else if yyj1 == 0 &amp;&amp; yyv1 == nil {
<span class="term-fg31">-			yyv1 = make([]libcommon.Hash, 0)</span>
<span class="term-fg32">+			yyv1 = make([]pkg1_common.Hash, 0)</span>
 			yyc1 = true
 		}
 	}
<span class="term-fg36">@@ -646,7 +895,7 @@</span> 		*v = yyv1
 	}
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) enccommon_Hash(v *libcommon.Hash, e *codec1978.Encoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) enccommon_Hash(v *pkg1_common.Hash, e *codec1978.Encoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperEncoder(e)
 	_, _, _ = h, z, r
<span class="term-fg36">@@ -657,7 +906,7 @@</span> 	}
 	r.EncodeStringBytesRaw(((*[32]byte)(v))[:])
 }
&nbsp;
<span class="term-fg31">-func (x codecSelfer2) deccommon_Hash(v *libcommon.Hash, d *codec1978.Decoder) {</span>
<span class="term-fg32">+func (x codecSelfer2) deccommon_Hash(v *pkg1_common.Hash, d *codec1978.Decoder) {</span>
 	var h codecSelfer2
 	z, r := codec1978.GenHelperDecoder(d)
 	_, _, _ = h, z, r</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-fe1b2d75827e3f555b4f457e"role="button" aria-expanded="false" aria-controls="id-fe1b2d75827e3f555b4f457e">
        
            <div class="col-12 col-sm-9 text-start"><h2>Other changes</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+2857</span></div>
                <div class="text-start"><span class="text-danger">-983</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-fe1b2d75827e3f555b4f457e">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e9bbd5beeee54d96ce338836" role="button"
                   aria-expanded="false" aria-controls="id-e9bbd5beeee54d96ce338836">
                    <code>.circleci/ci-docker-tag-op-erigon-release.sh</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.circleci/ci-docker-tag-op-erigon-release.sh" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+37</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e9bbd5beeee54d96ce338836"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.circleci&#47;ci-docker-tag-op-erigon-release.sh bobanetwork&#47;v3-erigon&#47;.circleci&#47;ci-docker-tag-op-erigon-release.sh</span>
<span class="term-fg1">new file mode 100755</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..fac3d6d7f08db5e928583ef461175ec9b5023409</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.circleci&#47;ci-docker-tag-op-erigon-release.sh</span>
<span class="term-fg36">@@ -0,0 +1,37 @@</span>
<span class="term-fg32">+#!&#47;usr&#47;bin&#47;env bash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+set -euo pipefail</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+DOCKER_REPO=$1</span>
<span class="term-fg32">+GIT_TAG=$2</span>
<span class="term-fg32">+GIT_SHA=$3</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+IMAGE_NAME=&quot;op-erigon&quot;</span>
<span class="term-fg32">+IMAGE_TAG=$GIT_TAG</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+SOURCE_IMAGE_TAG=&quot;$DOCKER_REPO&#47;$IMAGE_NAME:$GIT_SHA&quot;</span>
<span class="term-fg32">+TARGET_IMAGE_TAG=&quot;$DOCKER_REPO&#47;$IMAGE_NAME:$IMAGE_TAG&quot;</span>
<span class="term-fg32">+TARGET_IMAGE_TAG_LATEST=&quot;$DOCKER_REPO&#47;$IMAGE_NAME:latest&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+echo &quot;Checking if docker images exist for &#39;$IMAGE_NAME&#39;&quot;</span>
<span class="term-fg32">+echo &quot;&quot;</span>
<span class="term-fg32">+tags=$(gcloud container images list-tags &quot;$DOCKER_REPO&#47;$IMAGE_NAME&quot; --limit 1 --format json)</span>
<span class="term-fg32">+if [ &quot;$tags&quot; = &quot;[]&quot; ]; then</span>
<span class="term-fg32">+  echo &quot;No existing docker images were found for &#39;$IMAGE_NAME&#39;. The code tagged with &#39;$GIT_TAG&#39; may not have an associated dockerfile or docker build job.&quot;</span>
<span class="term-fg32">+  echo &quot;If this service has a dockerfile, add a docker-publish job for it in the circleci config.&quot;</span>
<span class="term-fg32">+  echo &quot;&quot;</span>
<span class="term-fg32">+  echo &quot;Exiting&quot;</span>
<span class="term-fg32">+  exit 0</span>
<span class="term-fg32">+fi</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+echo &quot;Tagging $SOURCE_IMAGE_TAG with &#39;$IMAGE_TAG&#39;&quot;</span>
<span class="term-fg32">+gcloud container images add-tag -q &quot;$SOURCE_IMAGE_TAG&quot; &quot;$TARGET_IMAGE_TAG&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# Do not tag with latest if the release is a release candidate.</span>
<span class="term-fg32">+if [[ &quot;$IMAGE_TAG&quot; == *&quot;rc&quot;* ]]; then</span>
<span class="term-fg32">+  echo &quot;Not tagging with &#39;latest&#39; because the release is a release candidate.&quot;</span>
<span class="term-fg32">+  exit 0</span>
<span class="term-fg32">+fi</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+echo &quot;Tagging $SOURCE_IMAGE_TAG with &#39;latest&#39;&quot;</span>
<span class="term-fg32">+gcloud container images add-tag -q &quot;$SOURCE_IMAGE_TAG&quot; &quot;$TARGET_IMAGE_TAG_LATEST&quot;</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-900c9770ecef5bdff51fc967" role="button"
                   aria-expanded="false" aria-controls="id-900c9770ecef5bdff51fc967">
                    <code>.circleci/config.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.circleci/config.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+210</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-900c9770ecef5bdff51fc967"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.circleci&#47;config.yml bobanetwork&#47;v3-erigon&#47;.circleci&#47;config.yml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..22e30289effe3be245980541e628f943df57328b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.circleci&#47;config.yml</span>
<span class="term-fg36">@@ -0,0 +1,210 @@</span>
<span class="term-fg32">+version: 2.1</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+orbs:</span>
<span class="term-fg32">+  gcp-cli: circleci&#47;gcp-cli@3.0.1</span>
<span class="term-fg32">+  slack: circleci&#47;slack@4.10.1</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+commands:</span>
<span class="term-fg32">+  gcp-oidc-authenticate:</span>
<span class="term-fg32">+    description: &quot;Authenticate with GCP using a CircleCI OIDC token.&quot;</span>
<span class="term-fg32">+    parameters:</span>
<span class="term-fg32">+      project_number:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_PROJECT_NUMBER</span>
<span class="term-fg32">+      workload_identity_pool_id:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_WIP_ID</span>
<span class="term-fg32">+      workload_identity_pool_provider_id:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_WIP_PROVIDER_ID</span>
<span class="term-fg32">+      service_account_email:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_SERVICE_ACCOUNT_EMAIL</span>
<span class="term-fg32">+      gcp_cred_config_file_path:</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &#47;home&#47;circleci&#47;gcp_cred_config.json</span>
<span class="term-fg32">+      oidc_token_file_path:</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &#47;home&#47;circleci&#47;oidc_token.json</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: &quot;Create OIDC credential configuration&quot;</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            # Store OIDC token in temp file</span>
<span class="term-fg32">+            echo $CIRCLE_OIDC_TOKEN &gt; &lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg32">+            # Create a credential configuration for the generated OIDC ID Token</span>
<span class="term-fg32">+            gcloud iam workload-identity-pools create-cred-config \</span>
<span class="term-fg32">+                &quot;projects&#47;${&lt;&lt; parameters.project_number &gt;&gt;}&#47;locations&#47;global&#47;workloadIdentityPools&#47;${&lt;&lt; parameters.workload_identity_pool_id &gt;&gt;}&#47;providers&#47;${&lt;&lt; parameters.workload_identity_pool_provider_id &gt;&gt;}&quot;\</span>
<span class="term-fg32">+                --output-file=&quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot; \</span>
<span class="term-fg32">+                --service-account=&quot;${&lt;&lt; parameters.service_account_email &gt;&gt;}&quot; \</span>
<span class="term-fg32">+                --credential-source-file=&lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: &quot;Authenticate with GCP using OIDC&quot;</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            # Configure gcloud to leverage the generated credential configuration</span>
<span class="term-fg32">+            gcloud auth login --brief --cred-file &quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot;</span>
<span class="term-fg32">+            # Configure ADC</span>
<span class="term-fg32">+            echo &quot;export GOOGLE_APPLICATION_CREDENTIALS=&#39;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&#39;&quot; | tee -a &quot;$BASH_ENV&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# our defined job, and its steps</span>
<span class="term-fg32">+jobs:</span>
<span class="term-fg32">+  docker-release:</span>
<span class="term-fg32">+    environment:</span>
<span class="term-fg32">+      DOCKER_BUILDKIT: 1</span>
<span class="term-fg32">+    parameters:</span>
<span class="term-fg32">+      project_number:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_PROJECT_NUMBER</span>
<span class="term-fg32">+      docker_name:</span>
<span class="term-fg32">+        description: Docker image name</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;op-erigon&quot;</span>
<span class="term-fg32">+      docker_tags:</span>
<span class="term-fg32">+        description: Docker image tags as csv</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+      registry:</span>
<span class="term-fg32">+        description: Docker registry</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;us-docker.pkg.dev&quot;</span>
<span class="term-fg32">+      repo:</span>
<span class="term-fg32">+        description: Docker repo</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;bobanetwork-tools-artifacts&#47;images&quot;</span>
<span class="term-fg32">+      push_tags:</span>
<span class="term-fg32">+        description: Push release push tags</span>
<span class="term-fg32">+        type: boolean</span>
<span class="term-fg32">+        default: false</span>
<span class="term-fg32">+    machine:</span>
<span class="term-fg32">+      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg32">+      resource_class: xlarge</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - gcp-cli&#47;install</span>
<span class="term-fg32">+      - gcp-oidc-authenticate</span>
<span class="term-fg32">+      - checkout</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: Configure Docker</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            gcloud auth configure-docker &lt;&lt;parameters.registry&gt;&gt;</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: Build and push</span>
<span class="term-fg32">+          no_output_timeout: 30m</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            RAW_TAGS=&quot;&lt;&lt;parameters.docker_tags&gt;&gt;&quot;</span>
<span class="term-fg32">+            if [ &quot;$CIRCLE_BRANCH&quot; = &quot;optimism&quot; ]; then</span>
<span class="term-fg32">+              RAW_TAGS=&quot;$RAW_TAGS,optimism&quot;</span>
<span class="term-fg32">+            fi</span>
<span class="term-fg32">+            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;${GCP_PROJECT_ID}&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg32">+            DOCKER_TAGS=$(echo -ne &quot;$RAW_TAGS&quot; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n.]&#47;-&#47;g&quot; | sed -e &quot;s|^|-t ${IMAGE_BASE}:|&quot;)</span>
<span class="term-fg32">+            docker context create buildx-build</span>
<span class="term-fg32">+            docker buildx create --use buildx-build</span>
<span class="term-fg32">+            docker buildx build --push \</span>
<span class="term-fg32">+              $(echo -ne $DOCKER_TAGS | tr &#39;\n&#39; &#39; &#39;) \</span>
<span class="term-fg32">+              --platform=linux&#47;arm64,linux&#47;amd64 \</span>
<span class="term-fg32">+              --build-arg VERSION=$CIRCLE_TAG \</span>
<span class="term-fg32">+              --build-arg COMMIT=$CIRCLE_SHA \</span>
<span class="term-fg32">+              --build-arg BUILDNUM=$CIRCLE_BUILD_NUM \</span>
<span class="term-fg32">+              --progress plain \</span>
<span class="term-fg32">+              -f Dockerfile .</span>
<span class="term-fg32">+      - when:</span>
<span class="term-fg32">+          condition:</span>
<span class="term-fg32">+            equal: [ true, &lt;&lt;parameters.push_tags&gt;&gt; ]</span>
<span class="term-fg32">+          steps:</span>
<span class="term-fg32">+            - run:</span>
<span class="term-fg32">+                name: Tag</span>
<span class="term-fg32">+                command: |</span>
<span class="term-fg32">+                  .&#47;.circleci&#47;ci-docker-tag-op-erigon-release.sh &lt;&lt;parameters.registry&gt;&gt;&#47;${GCP_PROJECT_ID}&#47;&lt;&lt;parameters.repo&gt;&gt; $CIRCLE_TAG $CIRCLE_SHA1</span>
<span class="term-fg32">+  v3-achorage-checkout:</span>
<span class="term-fg32">+    machine:</span>
<span class="term-fg32">+      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg32">+      resource_class: medium</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      #modifying the usual checkout step so that we can clone two projects into a directory ~&#47;project&#47;&lt;&gt;</span>
<span class="term-fg32">+      - run: git clone -b &quot;$CIRCLE_BRANCH&quot; &quot;$CIRCLE_REPOSITORY_URL&quot; v3-erigon&#47;</span>
<span class="term-fg32">+      - run: git clone https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-anchorage v3-anchorage&#47;</span>
<span class="term-fg32">+      - run: git -C v3-anchorage rev-parse HEAD</span>
<span class="term-fg32">+      - persist_to_workspace:</span>
<span class="term-fg32">+          root: &quot;.&quot;</span>
<span class="term-fg32">+          paths:</span>
<span class="term-fg32">+            - &quot;v3-erigon&#47;&quot;</span>
<span class="term-fg32">+            - &quot;v3-anchorage&#47;&quot;</span>
<span class="term-fg32">+  go-e2e-test:</span>
<span class="term-fg32">+    parameters:</span>
<span class="term-fg32">+      module:</span>
<span class="term-fg32">+        description: Go Module Name</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+      target:</span>
<span class="term-fg32">+        description: The make target to execute</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+    docker:</span>
<span class="term-fg32">+      - image: us-docker.pkg.dev&#47;${GCP_PROJECT_ID}&#47;${GCP_ARTIFACT_REPOSITORY}&#47;images&#47;ci-builder:latest</span>
<span class="term-fg32">+    resource_class: xlarge</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - attach_workspace: { at: &quot;.&quot; }</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: Modify target Erigon</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            cp ~&#47;project&#47;v3-erigon&#47;go.mod ~&#47;project&#47;v3-anchorage&#47;op-erigon&#47;go.mod</span>
<span class="term-fg32">+            cd ~&#47;project&#47;v3-anchorage&#47;op-erigon </span>
<span class="term-fg32">+            go mod edit -module=&quot;github.com&#47;ethereum-optimism&#47;optimism&#47;op-erigon&quot;</span>
<span class="term-fg32">+            go mod edit \</span>
<span class="term-fg32">+            -replace &quot;github.com&#47;ledgerwatch&#47;erigon=github.com&#47;bobanetwork&#47;v3-erigon@$CIRCLE_SHA1&quot; \</span>
<span class="term-fg32">+            -replace &quot;github.com&#47;ledgerwatch&#47;erigon-lib=github.com&#47;bobanetwork&#47;v3-erigon&#47;erigon-lib@$CIRCLE_SHA1&quot; </span>
<span class="term-fg32">+            go mod tidy</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: prep results dir</span>
<span class="term-fg32">+          command: mkdir -p &#47;tmp&#47;test-results</span>
<span class="term-fg32">+          working_directory: ~&#47;project&#47;v3-anchorage</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: install geth</span>
<span class="term-fg32">+          command: make install-geth</span>
<span class="term-fg32">+          working_directory: ~&#47;project&#47;v3-anchorage</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: git submodules</span>
<span class="term-fg32">+          command: git submodule update --init --recursive</span>
<span class="term-fg32">+          working_directory: ~&#47;project&#47;v3-anchorage</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: print go&#39;s available MIPS targets</span>
<span class="term-fg32">+          command: go tool dist list | grep mips</span>
<span class="term-fg32">+          working_directory: ~&#47;project&#47;v3-anchorage</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: run tests</span>
<span class="term-fg32">+          command:</span>
<span class="term-fg32">+            # Note: We don&#39;t use circle CI test splits because we need to split by test name, not by package. There is an additional</span>
<span class="term-fg32">+            # constraint that gotestsum does not currently (nor likely will) accept files from different pacakges when building.</span>
<span class="term-fg32">+            JUNIT_FILE=&#47;tmp&#47;test-results&#47;&lt;&lt;parameters.module&gt;&gt;_&lt;&lt;parameters.target&gt;&gt;.xml make &lt;&lt;parameters.target&gt;&gt;</span>
<span class="term-fg32">+          working_directory: ~&#47;project&#47;v3-anchorage&#47;&lt;&lt;parameters.module&gt;&gt;</span>
<span class="term-fg32">+      - store_test_results:</span>
<span class="term-fg32">+          path: &#47;tmp&#47;test-results</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+workflows:</span>
<span class="term-fg32">+  release:</span>
<span class="term-fg32">+    jobs:</span>
<span class="term-fg32">+      - hold:</span>
<span class="term-fg32">+          type: approval</span>
<span class="term-fg32">+          filters:</span>
<span class="term-fg32">+            tags:</span>
<span class="term-fg32">+              only: &#47;^v.*&#47;</span>
<span class="term-fg32">+            branches:</span>
<span class="term-fg32">+              ignore: &#47;.*&#47;</span>
<span class="term-fg32">+      - docker-release:</span>
<span class="term-fg32">+          name: Push to Docker (release)</span>
<span class="term-fg32">+          filters:</span>
<span class="term-fg32">+            tags:</span>
<span class="term-fg32">+              only: &#47;^v.*&#47;</span>
<span class="term-fg32">+            branches:</span>
<span class="term-fg32">+              ignore: &#47;.*&#47;</span>
<span class="term-fg32">+          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.tag&gt;&gt;</span>
<span class="term-fg32">+          push_tags: true</span>
<span class="term-fg32">+          context:</span>
<span class="term-fg32">+            - bobanetwork-gcr-release</span>
<span class="term-fg32">+          requires:</span>
<span class="term-fg32">+            - hold</span>
<span class="term-fg32">+  main:</span>
<span class="term-fg32">+    jobs:</span>
<span class="term-fg32">+      - v3-achorage-checkout           </span>
<span class="term-fg32">+      - go-e2e-test:</span>
<span class="term-fg32">+          name: op-e2e-ext-erigon-tests</span>
<span class="term-fg32">+          module: op-e2e</span>
<span class="term-fg32">+          target: test-external-erigon</span>
<span class="term-fg32">+          requires:</span>
<span class="term-fg32">+            - v3-achorage-checkout    </span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8a245a927668f7d1a212a026" role="button"
                   aria-expanded="false" aria-controls="id-8a245a927668f7d1a212a026">
                    <code>Dockerfile.debian</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/Dockerfile.debian" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/Dockerfile.debian" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8a245a927668f7d1a212a026"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;Dockerfile.debian bobanetwork&#47;v3-erigon&#47;Dockerfile.debian</span>
<span class="term-fg1">index e3e8c9d5d89cf4d6eac146252922327a14024517..79471098464546f70f082c8e9ac735ec08b3849a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;Dockerfile.debian</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;Dockerfile.debian</span>
<span class="term-fg36">@@ -1,5 +1,5 @@</span>
 # syntax = docker&#47;dockerfile:1.2
<span class="term-fg31">-FROM docker.io&#47;library&#47;golang:1.20-bullseye AS builder</span>
<span class="term-fg32">+FROM docker.io&#47;library&#47;golang:1.19-bullseye AS builder</span>
&nbsp;
 RUN apt update
 RUN apt install -y build-essential git bash ca-certificates libstdc++6
<span class="term-fg36">@@ -17,7 +17,7 @@</span>     --mount=type=cache,target=&#47;go&#47;pkg&#47;mod \
     make all
&nbsp;

<span class="term-fg31">-FROM docker.io&#47;library&#47;golang:1.20-alpine3.17 AS tools-builder</span>
<span class="term-fg32">+FROM docker.io&#47;library&#47;golang:1.19-alpine3.16 AS tools-builder</span>
&nbsp;
 RUN apk --no-cache add build-base linux-headers git bash ca-certificates libstdc++
 WORKDIR &#47;app
<span class="term-fg36">@@ -96,10 +96,8 @@</span> LABEL org.label-schema.build-date=$BUILD_DATE \
       org.label-schema.description=&quot;Erigon Ethereum Client&quot; \
       org.label-schema.name=&quot;Erigon&quot; \
       org.label-schema.schema-version=&quot;1.0&quot; \
<span class="term-fg31">-      org.label-schema.url=&quot;https:&#47;&#47;torquem.ch&quot; \</span>
       org.label-schema.vcs-ref=$VCS_REF \
<span class="term-fg31">-      org.label-schema.vcs-url=&quot;https:&#47;&#47;github.com&#47;ledgerwatch&#47;erigon.git&quot; \</span>
<span class="term-fg31">-      org.label-schema.vendor=&quot;Torquem&quot; \</span>
<span class="term-fg32">+      org.label-schema.vcs-url=&quot;https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-erigon.git&quot; \</span>
       org.label-schema.version=$VERSION
&nbsp;
 ENTRYPOINT [&quot;erigon&quot;]</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2cc75147d1def3bb91b24fc1" role="button"
                   aria-expanded="false" aria-controls="id-2cc75147d1def3bb91b24fc1">
                    <code>OP.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/OP.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+119</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2cc75147d1def3bb91b24fc1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;OP.md bobanetwork&#47;v3-erigon&#47;OP.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..52a707ab6841536dc9c44cc2c61c083084bd6dae</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;OP.md</span>
<span class="term-fg36">@@ -0,0 +1,120 @@</span>
<span class="term-fg32">+# Running an OP Mainnet or Testnet node</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## Non-docker configuration</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Here are instructions if you want to run boba erigon version as the replica node for OP Mainnet or Testnet via binary files.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Build erigon</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+1. Clone [boba erigon](https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-erigon) repo</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	```bash</span>
<span class="term-fg32">+	cd ~</span>
<span class="term-fg32">+	git clone https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-erigon.git</span>
<span class="term-fg32">+	```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+2. Build [boba erigon](https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-erigon)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	```bash</span>
<span class="term-fg32">+	cd v3-erigon</span>
<span class="term-fg32">+	make erigon</span>
<span class="term-fg32">+	```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Build op-node</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+1. Clone [boba anchorage](https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-anchorage) repo</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+   ```bash</span>
<span class="term-fg32">+   cd ~</span>
<span class="term-fg32">+   git clone https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-anchorage.git</span>
<span class="term-fg32">+   ```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+2. Build [op-node](https:&#47;&#47;github.com&#47;bobanetwork&#47;v3-anchorage&#47;tree&#47;boba-develop&#47;op-node)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	```bash</span>
<span class="term-fg32">+	cd v3-anchorage&#47;op-node</span>
<span class="term-fg32">+	make</span>
<span class="term-fg32">+	```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Get the data dir</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+The next step is to download the initial data for `op-erigon`. Thanks for the contribution from [Test in Prod](https:&#47;&#47;www.testinprod.io).</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+1. Download the correct data directory snapshot.</span>
<span class="term-fg32">+   * [OP Mainnet](https:&#47;&#47;op-erigon-backup.mainnet.testinprod.io)</span>
<span class="term-fg32">+   * [OP Goerli](https:&#47;&#47;op-erigon-backup.goerli.testinprod.io)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+2. Create the data directory in `op-erigon` and fill it.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+   ```bash</span>
<span class="term-fg32">+   mkdir op-erigon</span>
<span class="term-fg32">+   cd .&#47;op-erigon</span>
<span class="term-fg32">+   mkdir erigon</span>
<span class="term-fg32">+   cd .&#47;erigon</span>
<span class="term-fg32">+   tar xvf ~&#47;[DIR]&#47;op-erigon-goerli.tar</span>
<span class="term-fg32">+   ```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+3. Create a shared secret (JWT token)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+   ```bash</span>
<span class="term-fg32">+   cd op-erigon</span>
<span class="term-fg32">+   openssl rand -hex 32 &gt; jwt.txt</span>
<span class="term-fg32">+   ```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Scripts to start the different components</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+`op-erigon`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```bash</span>
<span class="term-fg32">+cd v3-erigon</span>
<span class="term-fg32">+.&#47;build&#47;bin&#47;erigon \</span>
<span class="term-fg32">+--datadir=DATA_DIRECTORY \</span>
<span class="term-fg32">+--private.api.addr=localhost:9090 \</span>
<span class="term-fg32">+--http.addr=0.0.0.0 \</span>
<span class="term-fg32">+--http.port=9545 \</span>
<span class="term-fg32">+--http.corsdomain=&quot;*&quot; \</span>
<span class="term-fg32">+--http.vhosts=&quot;*&quot; \</span>
<span class="term-fg32">+--authrpc.addr=0.0.0.0 \</span>
<span class="term-fg32">+--authrpc.port=8551 \</span>
<span class="term-fg32">+--authrpc.vhosts=&quot;*&quot; \</span>
<span class="term-fg32">+--authrpc.jwtsecret=JWT_TOKEN_PATH \</span>
<span class="term-fg32">+--rollup.disabletxpoolgossip=true \</span>
<span class="term-fg32">+--chain=optimism-goerli \</span>
<span class="term-fg32">+--nodiscover \</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+`op-node`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```bash</span>
<span class="term-fg32">+cd v3-anchorage&#47;op-node</span>
<span class="term-fg32">+.&#47;bin&#47;op-node \</span>
<span class="term-fg32">+--l1=https:&#47;&#47;ethereum-goerli.publicnode.com \</span>
<span class="term-fg32">+--l2=http:&#47;&#47;localhost:8551 \</span>
<span class="term-fg32">+--l2.jwt-secret=JWT_TOKEN_PATH \</span>
<span class="term-fg32">+--network=goerli \</span>
<span class="term-fg32">+--rpc.addr=localhost \</span>
<span class="term-fg32">+--rpc.port=8547 \</span>
<span class="term-fg32">+--l1.http-poll-interval=500ms \</span>
<span class="term-fg32">+--l1.trustrpc=true \</span>
<span class="term-fg32">+--p2p.disable=true \</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### The initial synchornization</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+During the initial synchonization, you get log messages from `op-node`, and nothing else appears to happen.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```bash</span>
<span class="term-fg32">+INFO [08-04|16:36:07.150] Advancing bq origin                      origin=df76ff..48987e:8301316 originBehind=false</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+After a few minutes, `op-node` finds the right batch and then it starts synchronizing. During this synchonization process, you get log messags from `op-node`.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```bash</span>
<span class="term-fg32">+INFO [08-04|16:36:01.204] Found next batch                         epoch=44e203..fef9a5:8301309 batch_epoch=8301309                batch_timestamp=1,673,567,518</span>
<span class="term-fg32">+INFO [08-04|16:36:01.205] generated attributes in payload queue    txs=2  timestamp=1,673,567,518</span>
<span class="term-fg32">+INFO [08-04|16:36:01.265] inserted block                           hash=ee61ee..256300 number=4,069,725 state_root=a582ae..33a7c5 timestamp=1,673,567,518 parent=5b102e..13196c prev_randao=4758ca..11ff3a fee_recipient=0x4200000000000000000000000000000000000011 txs=2  update_safe=true</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Note</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+It must run `boba-erigon` first and shut it down last.</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a943132faa2bfd48842048e6" role="button"
                   aria-expanded="false" aria-controls="id-a943132faa2bfd48842048e6">
                    <code>cl/clparams/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cl/clparams/config.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cl/clparams/config.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a943132faa2bfd48842048e6"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cl&#47;clparams&#47;config.go bobanetwork&#47;v3-erigon&#47;cl&#47;clparams&#47;config.go</span>
<span class="term-fg1">index 93ea330f81fbe2162f71ffbad133078084d36834..56c347d6ce9c1d64803785c883c179fa5082e15d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cl&#47;clparams&#47;config.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cl&#47;clparams&#47;config.go</span>
<span class="term-fg36">@@ -21,12 +21,12 @@</span> 	&quot;math&#47;big&quot;
 	&quot;os&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&#47;ssz&quot;
 	&quot;gopkg.in&#47;yaml.v2&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cl&#47;utils&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 type NetworkType int</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f38ab47e1fff9a1746eeabbd" role="button"
                   aria-expanded="false" aria-controls="id-f38ab47e1fff9a1746eeabbd">
                    <code>cmd/devnet/README.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/README.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/README.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f38ab47e1fff9a1746eeabbd"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;README.md bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;README.md</span>
<span class="term-fg1">index cd281a53a999603ce77b2641cca71457a42d246d..74ddc735e4ae333c424f30ecd44c969d5a3d3c9d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;README.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;README.md</span>
<span class="term-fg36">@@ -9,7 +9,7 @@</span> * It runs a series of internal Erigon nodes which will connect to each other to form an internal P2P network
 * It allows for the specification of a series of scenarios which will be run against the nodes on that internal network
 * It can optionally run a `support` connection which allows the nodes on the network to be connected to the Erigon diagnostic system
&nbsp;
<span class="term-fg31">-The specification of both nodes and scenarios for the devenet is done by specifying configuration objects.  These objects are currently build in code using go `structs` but are capable of being read as configuration.</span>
<span class="term-fg32">+The specification of both nodes and scenarios for the devenet is done by specifying configuraion objects.  These objects are currently build in code using go `structs` but are cabable of being read as configuration.</span>
&nbsp;
 ## Devnet runtime start-up
&nbsp;
<span class="term-fg36">@@ -28,7 +28,7 @@</span> | insecure | N | false | Used if `diagnostics.url` is set to allow communication with diagnostics system using self-signed TLS certificates |
&nbsp;
 ## Network Configuration
&nbsp;
<span class="term-fg31">-Networks configurations are currently specified in code in `main.go` in the `selectNetwork` function.  This contains a series of `structs` with the following structure, for example:</span>
<span class="term-fg32">+Networks configurations are currently specified in code in `main.go` in the `selectNetwork` function.  This contains a series of `structs` with the following structue, for eample:</span>
&nbsp;
 ```go
 		return &amp;devnet.Network{
<span class="term-fg36">@@ -55,11 +55,11 @@</span> 			},
 		}, nil
 ```
&nbsp;
<span class="term-fg31">-Base IP&#39;s and addresses are iterated for each node in the network - to ensure that when the network starts there are no port clashes as the entire network operates in a single process, hence shares a common host.  Individual nodes will be configured with a default set of command line arguments dependent on type. To see the default arguments per node look at the `args\node.go` file where these are specified as tags on the struct members.</span>
<span class="term-fg32">+Base IP&#39;s and addresses are iterated for each node in the network - to ensure that when the network starts there are no port clashes as the entire nework operates in a single process, hence shares a common host.  Individual nodes will be configured with a default set of command line arguments dependent on type. To see the default arguments per node look at the `args\node.go` file where these are specified as tags on the struct members.</span>
&nbsp;
 ## Scenario Configuration
&nbsp;
<span class="term-fg31">-Scenarios are similarly specified in code in `main.go` in the `action` function.  This is the initial configuration:</span>
<span class="term-fg32">+Scenarios are similarly specified in code in `main.go` in the `action` function.  This is the initial configration:</span>
&nbsp;
 ```go
     scenarios.Scenario{
<span class="term-fg36">@@ -74,9 +74,9 @@</span>         },
     })
 ```
&nbsp;
<span class="term-fg31">-Scenarios are created a groups of steps which are created by registering a `step` handler too see an example of this take a look at the `commands\ping.go` file which adds a ping rpc method (see `PingErigonRpc` above).</span>
<span class="term-fg32">+Scenarios are created a groups of steps which are created by regestering a `step` handler too see an example of this take a look at the `commands\ping.go` file which adds a ping rpc method (see `PingErigonRpc` above).</span>
&nbsp;
<span class="term-fg31">-This illustrates the registration process.  The `init` function in the file registers the method with the `scenarios` package - which uses the function name as the default step name.  Others can be added with additional string arguments fo the `StepHandler` call where they will treated as regular expressions to be matched when processing scenario steps.</span>
<span class="term-fg32">+This illustrates the registratio process.  The `init` function in the file registers the method with the `scenarios` package - which uses the function name as the default step name.  Others can be added with additional string arguments fo the `StepHandler` call where they will treated as regular expressions to be matched when processing scenario steps.</span>
&nbsp;
 ```go
 func init() {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3e43bf5c53fdcab0e4839e69" role="button"
                   aria-expanded="false" aria-controls="id-3e43bf5c53fdcab0e4839e69">
                    <code>cmd/devnet/args/node.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/args/node.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/args/node.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3e43bf5c53fdcab0e4839e69"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;args&#47;node.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;args&#47;node.go</span>
<span class="term-fg1">index 1c8b74978518ffe537bad83319ca7c7236876f8f..e3e348e5226d4dab698096f657a5ef34b3c5dcba 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;args&#47;node.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;args&#47;node.go</span>
<span class="term-fg36">@@ -7,9 +7,9 @@</span> 	&quot;net&quot;
 	&quot;path&#47;filepath&quot;
 	&quot;strconv&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;accounts&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 type Node struct {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2705df148d1293a361d44799" role="button"
                   aria-expanded="false" aria-controls="id-2705df148d1293a361d44799">
                    <code>cmd/devnet/contracts/steps/l1l2transfers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/contracts/steps/l1l2transfers.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/contracts/steps/l1l2transfers.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2705df148d1293a361d44799"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l1l2transfers.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l1l2transfers.go</span>
<span class="term-fg1">index 74cb162a02f1c042d6a5741e5b19d1c8749f1012..c002c61c956af75adf833615505fc9d4446541cb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l1l2transfers.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l1l2transfers.go</span>
<span class="term-fg36">@@ -8,7 +8,6 @@</span> 	&quot;fmt&quot;
 	&quot;math&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&quot;
<span class="term-fg36">@@ -19,6 +18,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;devnet&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;scenarios&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&quot;
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-18accfb3fdd13d36047afce4" role="button"
                   aria-expanded="false" aria-controls="id-18accfb3fdd13d36047afce4">
                    <code>cmd/devnet/contracts/steps/l2l1transfers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/contracts/steps/l2l1transfers.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/contracts/steps/l2l1transfers.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-18accfb3fdd13d36047afce4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l2l1transfers.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l2l1transfers.go</span>
<span class="term-fg1">index 59481c8d022d7f35768f7a28279fb2474a59fb53..b7b04efe35edc191b9b19dc456304c1670ab4bcf 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l2l1transfers.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;contracts&#47;steps&#47;l2l1transfers.go</span>
<span class="term-fg36">@@ -6,7 +6,6 @@</span> 	&quot;encoding&#47;json&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&quot;
<span class="term-fg36">@@ -17,6 +16,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;devnet&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;scenarios&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&quot;
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bd44b26bde9a4a52633d18e1" role="button"
                   aria-expanded="false" aria-controls="id-bd44b26bde9a4a52633d18e1">
                    <code>cmd/devnet/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/main.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/main.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bd44b26bde9a4a52633d18e1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;main.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;main.go</span>
<span class="term-fg1">index f15a396dee9986679c8d2530199881ec9c15404e..827d8d7f8b551a5bb5546260c7a4b0d77b204477 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;main.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;main.go</span>
<span class="term-fg36">@@ -11,7 +11,6 @@</span> 	&quot;strings&quot;
 	&quot;syscall&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;accounts&quot;
 	_ &quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;accounts&#47;steps&quot;
 	_ &quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;admin&quot;
<span class="term-fg36">@@ -28,6 +27,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;devnetutils&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;scenarios&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;utils&#47;flags&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0ed744ba647bea97e28e264b" role="button"
                   aria-expanded="false" aria-controls="id-0ed744ba647bea97e28e264b">
                    <code>cmd/devnet/services/polygon/checkpoint.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/services/polygon/checkpoint.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/services/polygon/checkpoint.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0ed744ba647bea97e28e264b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;checkpoint.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;checkpoint.go</span>
<span class="term-fg1">index 9e8af1f5e8b5205f46f562bbda9733951a98b49a..b789d6de2b295cec8cebb5e17e5f68b2db6b4e46 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;checkpoint.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;checkpoint.go</span>
<span class="term-fg36">@@ -10,7 +10,6 @@</span> 	&quot;strconv&quot;
 	&quot;strings&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&quot;
<span class="term-fg36">@@ -22,6 +21,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;consensus&#47;bor&#47;heimdall&#47;checkpoint&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 type CheckpointBlock struct {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1e914447fbb0a33c6105483f" role="button"
                   aria-expanded="false" aria-controls="id-1e914447fbb0a33c6105483f">
                    <code>cmd/devnet/services/polygon/proofgenerator.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/devnet/services/polygon/proofgenerator.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/devnet/services/polygon/proofgenerator.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1e914447fbb0a33c6105483f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;proofgenerator.go bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;proofgenerator.go</span>
<span class="term-fg1">index 05a1d475918f764388bb906044855fbec921b26a..75faa4c8aa906fb24db26ed719e7b8b98c2035f9 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;proofgenerator.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;devnet&#47;services&#47;polygon&#47;proofgenerator.go</span>
<span class="term-fg36">@@ -10,7 +10,6 @@</span> 	&quot;math&#47;big&quot;
 	&quot;strings&quot;
 	&quot;sync&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;accounts&#47;abi&#47;bind&quot;
<span class="term-fg36">@@ -19,6 +18,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;devnet&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;devnet&#47;requests&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c1596b09a5d55e0cfd189139" role="button"
                   aria-expanded="false" aria-controls="id-c1596b09a5d55e0cfd189139">
                    <code>cmd/downloader/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/downloader/main.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/downloader/main.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-16</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c1596b09a5d55e0cfd189139"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;downloader&#47;main.go bobanetwork&#47;v3-erigon&#47;cmd&#47;downloader&#47;main.go</span>
<span class="term-fg1">index b20480c4e579608cf2a8a1953b29185d746dbcd1..a8d9f8f08d1e225909d8f8afca9a57e44fce1de6 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;downloader&#47;main.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;downloader&#47;main.go</span>
<span class="term-fg36">@@ -14,7 +14,6 @@</span>
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
 	grpc_middleware &quot;github.com&#47;grpc-ecosystem&#47;go-grpc-middleware&quot;
 	grpc_recovery &quot;github.com&#47;grpc-ecosystem&#47;go-grpc-middleware&#47;recovery&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;dir&quot;
<span class="term-fg36">@@ -42,6 +41,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;p2p&#47;nat&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;debug&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;logging&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 )
&nbsp;
 func main() {
<span class="term-fg36">@@ -148,7 +148,7 @@</span> 	dirs := datadir.New(datadirCli)
 	if err := datadir.ApplyMigrations(dirs); err != nil {
 		return err
 	}
<span class="term-fg31">-	if err := checkChainName(ctx, dirs, chain); err != nil {</span>
<span class="term-fg32">+	if err := checkChainName(dirs, chain); err != nil {</span>
 		return err
 	}
 	torrentLogLevel, _, err := downloadercfg2.Int2LogLevel(torrentVerbosity)
<span class="term-fg36">@@ -168,12 +168,7 @@</span> 	logger.Info(&quot;[snapshots] cli flags&quot;, &quot;chain&quot;, chain, &quot;addr&quot;, downloaderApiAddr, &quot;datadir&quot;, dirs.DataDir, &quot;ipv6-enabled&quot;, !disableIPV6, &quot;ipv4-enabled&quot;, !disableIPV4, &quot;download.rate&quot;, downloadRate.String(), &quot;upload.rate&quot;, uploadRate.String(), &quot;webseed&quot;, webseeds)
 	staticPeers := common.CliString2Array(staticPeersStr)
&nbsp;
 	version := &quot;erigon: &quot; + params.VersionWithCommit(params.GitCommit)
<span class="term-fg31">-</span>
<span class="term-fg31">-	webseedsList := common.CliString2Array(webseeds)</span>
<span class="term-fg31">-	if known, ok := snapcfg.KnownWebseeds[chain]; ok {</span>
<span class="term-fg31">-		webseedsList = append(webseedsList, known...)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	cfg, err := downloadercfg2.New(dirs, version, torrentLogLevel, downloadRate, uploadRate, torrentPort, torrentConnsPerFile, torrentDownloadSlots, staticPeers, webseedsList, chain)</span>
<span class="term-fg32">+	cfg, err := downloadercfg2.New(dirs, version, torrentLogLevel, downloadRate, uploadRate, torrentPort, torrentConnsPerFile, torrentDownloadSlots, staticPeers, webseeds)</span>
 	if err != nil {
 		return err
 	}
<span class="term-fg36">@@ -188,8 +183,7 @@</span> 		return fmt.Errorf(&quot;invalid nat option %s: %w&quot;, natSetting, err)
 	}
 	downloadernat.DoNat(natif, cfg.ClientConfig, logger)
&nbsp;
<span class="term-fg31">-	cfg.DownloadTorrentFilesFromWebseed = true &#47;&#47; enable it only for standalone mode now. feature is not fully ready yet</span>
<span class="term-fg31">-	d, err := downloader.New(ctx, cfg, dirs, logger, log.LvlInfo)</span>
<span class="term-fg32">+	d, err := downloader.New(ctx, cfg, logger, log.LvlInfo)</span>
 	if err != nil {
 		return err
 	}
<span class="term-fg36">@@ -379,17 +373,14 @@</span> 	}
 	return nil
 }
&nbsp;
<span class="term-fg31">-func checkChainName(ctx context.Context, dirs datadir.Dirs, chainName string) error {</span>
<span class="term-fg32">+func checkChainName(dirs datadir.Dirs, chainName string) error {</span>
 	if !dir.FileExist(filepath.Join(dirs.Chaindata, &quot;mdbx.dat&quot;)) {
 		return nil
 	}
<span class="term-fg31">-	db, err := mdbx.NewMDBX(log.New()).</span>
<span class="term-fg32">+	db := mdbx.NewMDBX(log.New()).</span>
 		Path(dirs.Chaindata).Label(kv.ChainDB).
 		Accede().
<span class="term-fg31">-		Open(ctx)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg32">+		MustOpen()</span>
 	defer db.Close()
 	if err := db.View(context.Background(), func(tx kv.Tx) error {
 		cc := tool.ChainConfig(tx)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-57d8213b5db548579d8253cb" role="button"
                   aria-expanded="false" aria-controls="id-57d8213b5db548579d8253cb">
                    <code>cmd/evm/testdata/3/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/evm/testdata/3/readme.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/evm/testdata/3/readme.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-57d8213b5db548579d8253cb"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;3&#47;readme.md bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;3&#47;readme.md</span>
<span class="term-fg1">index 47792de04c82c28fdad990a13a9bc9ab7a890f42..499f03d7aa7f4cc490ea5f7db6b9ad73fd14c39a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;3&#47;readme.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;3&#47;readme.md</span>
<span class="term-fg36">@@ -1,2 +1,2 @@</span>
<span class="term-fg31">-These files examplify a transition where a transaction (executed on block 5) requests</span>
<span class="term-fg32">+These files examplify a transition where a transaction (excuted on block 5) requests</span>
 the blockhash for block `1`.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-229e2e70e94cdede7bbb87bd" role="button"
                   aria-expanded="false" aria-controls="id-229e2e70e94cdede7bbb87bd">
                    <code>cmd/evm/testdata/4/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/evm/testdata/4/readme.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/evm/testdata/4/readme.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-229e2e70e94cdede7bbb87bd"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;4&#47;readme.md bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;4&#47;readme.md</span>
<span class="term-fg1">index a298c32ec77c7532bd644b36f8b7a044bfccdf36..08840d37bd9caf0d4a9415aeebcbd30290eeb788 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;4&#47;readme.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;4&#47;readme.md</span>
<span class="term-fg36">@@ -1,3 +1,3 @@</span>
<span class="term-fg31">-These files examplify a transition where a transaction (executed on block 5) requests</span>
<span class="term-fg32">+These files examplify a transition where a transaction (excuted on block 5) requests</span>
 the blockhash for block `4`, but where the hash for that block is missing.
 It&#39;s expected that executing these should cause `exit` with errorcode `4`.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-467013d7efa10c01cb1ad821" role="button"
                   aria-expanded="false" aria-controls="id-467013d7efa10c01cb1ad821">
                    <code>cmd/evm/testdata/8/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/evm/testdata/8/readme.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/evm/testdata/8/readme.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-467013d7efa10c01cb1ad821"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg1">index 52289f77d69a4cd600e58be15a2dd7faa7515252..f3b523d89556841af7307746cc0780f9e5cb34a3 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg36">@@ -33,7 +33,7 @@</span> {&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}
&nbsp;
 ```
&nbsp;
<span class="term-fg31">-Similarly, we can provide the input transactions via `stdin` instead of as file: </span>
<span class="term-fg32">+Simlarly, we can provide the input transactions via `stdin` instead of as file: </span>
&nbsp;
 ```
 dir=.&#47;testdata&#47;8 \</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-31f002b1e77872de4a7ce4fc" role="button"
                   aria-expanded="false" aria-controls="id-31f002b1e77872de4a7ce4fc">
                    <code>cmd/release/go.mod</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/release/go.mod" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/release/go.mod" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-31f002b1e77872de4a7ce4fc"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;release&#47;go.mod bobanetwork&#47;v3-erigon&#47;cmd&#47;release&#47;go.mod</span>
<span class="term-fg1">index 99bfb880ce57fce781bae4d6b4982eebe0790378..fac38415e31749aaef1b9bf5c9259baa18ef0d49 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;release&#47;go.mod</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;release&#47;go.mod</span>
<span class="term-fg36">@@ -1,5 +1,5 @@</span>
 module github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;release&#47;v2
&nbsp;
<span class="term-fg31">-go 1.20</span>
<span class="term-fg32">+go 1.19</span>
&nbsp;
 require github.com&#47;hashicorp&#47;go-version v1.6.0</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6f969e3180f1300d98c37896" role="button"
                   aria-expanded="false" aria-controls="id-6f969e3180f1300d98c37896">
                    <code>cmd/rpcdaemon/cli/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpcdaemon/cli/config.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpcdaemon/cli/config.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6f969e3180f1300d98c37896"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;config.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;config.go</span>
<span class="term-fg1">index 51d72638a4c050e7654dbc51b69bb82fa2b08040..5fdd9a727adc669a2ddba28cce6cbbe1724e57e0 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;config.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;config.go</span>
<span class="term-fg36">@@ -129,6 +129,10 @@</span> 	rootCmd.PersistentFlags().IntVar(&amp;cfg.ReturnDataLimit, utils.RpcReturnDataLimit.Name, utils.RpcReturnDataLimit.Value, utils.RpcReturnDataLimit.Usage)
 	rootCmd.PersistentFlags().BoolVar(&amp;cfg.AllowUnprotectedTxs, utils.AllowUnprotectedTxs.Name, utils.AllowUnprotectedTxs.Value, utils.AllowUnprotectedTxs.Usage)
 	rootCmd.PersistentFlags().Uint64Var(&amp;cfg.OtsMaxPageSize, utils.OtsSearchMaxCapFlag.Name, utils.OtsSearchMaxCapFlag.Value, utils.OtsSearchMaxCapFlag.Usage)
&nbsp;
<span class="term-fg32">+	rootCmd.PersistentFlags().StringVar(&amp;cfg.RollupSequencerHTTP, utils.RollupSequencerHTTPFlag.Name, &quot;&quot;, &quot;HTTP endpoint for the sequencer mempool&quot;)</span>
<span class="term-fg32">+	rootCmd.PersistentFlags().StringVar(&amp;cfg.RollupHistoricalRPC, utils.RollupHistoricalRPCFlag.Name, &quot;&quot;, &quot;RPC endpoint for historical data&quot;)</span>
<span class="term-fg32">+	rootCmd.PersistentFlags().DurationVar(&amp;cfg.RollupHistoricalRPCTimeout, utils.RollupHistoricalRPCTimeoutFlag.Name, rpccfg.DefaultHistoricalRPCTimeout, &quot;Timeout for historical RPC requests&quot;)</span>
<span class="term-fg32">+</span>
 	if err := rootCmd.MarkPersistentFlagFilename(&quot;rpc.accessList&quot;, &quot;json&quot;); err != nil {
 		panic(err)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9578dc7455e1e34bfecc2bb7" role="button"
                   aria-expanded="false" aria-controls="id-9578dc7455e1e34bfecc2bb7">
                    <code>cmd/rpcdaemon/cli/httpcfg/http_cfg.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpcdaemon/cli/httpcfg/http_cfg.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpcdaemon/cli/httpcfg/http_cfg.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9578dc7455e1e34bfecc2bb7"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;httpcfg&#47;http_cfg.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;httpcfg&#47;http_cfg.go</span>
<span class="term-fg1">index 63d4cb6a0ff01916886905eb20d4714caa45b6fd..fa829d1fe3cbff2fc2a189b4384fa4dbd428a68e 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;httpcfg&#47;http_cfg.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;cli&#47;httpcfg&#47;http_cfg.go</span>
<span class="term-fg36">@@ -67,4 +67,9 @@</span> 	AllowUnprotectedTxs bool &#47;&#47; Whether to allow non EIP-155 protected transactions  txs over RPC
&nbsp;
 	&#47;&#47; Ots API
 	OtsMaxPageSize uint64
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupSequencerHTTP        string</span>
<span class="term-fg32">+	RollupHistoricalRPC        string</span>
<span class="term-fg32">+	RollupHistoricalRPCTimeout time.Duration</span>
<span class="term-fg32">+	RollupDisableTxPoolGossip  bool</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-78be1af32478b6cc05c1d214" role="button"
                   aria-expanded="false" aria-controls="id-78be1af32478b6cc05c1d214">
                    <code>cmd/rpcdaemon/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpcdaemon/main.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpcdaemon/main.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+28</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-78be1af32478b6cc05c1d214"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;main.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;main.go</span>
<span class="term-fg1">index e64446c426419a57e2e6adb591a06370932ba6a3..16b712aa265cd2845b8954456b188c4c5f8ffa2f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;main.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;main.go</span>
<span class="term-fg36">@@ -5,12 +5,14 @@</span> 	&quot;context&quot;
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;os&quot;
<span class="term-fg32">+	&quot;time&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;cli&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;debug&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
 	&quot;github.com&#47;spf13&#47;cobra&quot;
 )
&nbsp;
<span class="term-fg36">@@ -30,7 +32,32 @@</span> 		}
 		defer db.Close()
 		defer engine.Close()
&nbsp;
<span class="term-fg31">-		apiList := jsonrpc.APIList(db, backend, txPool, mining, ff, stateCache, blockReader, agg, *cfg, engine, logger)</span>
<span class="term-fg32">+		var seqRPCService *rpc.Client</span>
<span class="term-fg32">+		var historicalRPCService *rpc.Client</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Setup sequencer and hsistorical RPC relay services</span>
<span class="term-fg32">+		if cfg.RollupSequencerHTTP != &quot;&quot; {</span>
<span class="term-fg32">+			ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+			client, err := rpc.DialContext(ctx, cfg.RollupSequencerHTTP, logger)</span>
<span class="term-fg32">+			cancel()</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				log.Error(err.Error())</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			seqRPCService = client</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if cfg.RollupHistoricalRPC != &quot;&quot; {</span>
<span class="term-fg32">+			ctx, cancel := context.WithTimeout(context.Background(), cfg.RollupHistoricalRPCTimeout)</span>
<span class="term-fg32">+			client, err := rpc.DialContext(ctx, cfg.RollupHistoricalRPC, logger)</span>
<span class="term-fg32">+			cancel()</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				log.Error(err.Error())</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			historicalRPCService = client</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		apiList := jsonrpc.APIList(db, backend, txPool, mining, ff, stateCache, blockReader, agg, *cfg, engine, seqRPCService, historicalRPCService, logger)</span>
 		rpc.PreAllocateRPCMetricLabels(apiList)
 		if err := cli.StartRpcServer(ctx, *cfg, apiList, logger); err != nil {
 			logger.Error(err.Error())</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-650cd0d047fe95c0da4f82fb" role="button"
                   aria-expanded="false" aria-controls="id-650cd0d047fe95c0da4f82fb">
                    <code>cmd/rpcdaemon/rpcdaemontest/test_util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpcdaemon/rpcdaemontest/test_util.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpcdaemon/rpcdaemontest/test_util.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+47</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-650cd0d047fe95c0da4f82fb"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&#47;test_util.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&#47;test_util.go</span>
<span class="term-fg1">index ecff7012c16cae7f3865518cf22fdeebe85aabab..a3451d10735c2710ce7c9b410a33716172146e3d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&#47;test_util.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&#47;test_util.go</span>
<span class="term-fg36">@@ -112,6 +112,53 @@</span>
 	return m, chain, []*core.ChainPack{orphanedChain}
 }
&nbsp;
<span class="term-fg32">+func CreateOptimismTestSentry(t *testing.T) (*mock.MockSentry, *core.ChainPack, []*core.ChainPack) {</span>
<span class="term-fg32">+	addresses := makeTestAddresses()</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		key      = addresses.key</span>
<span class="term-fg32">+		address  = addresses.address</span>
<span class="term-fg32">+		address1 = addresses.address1</span>
<span class="term-fg32">+		address2 = addresses.address2</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		gspec = &amp;types.Genesis{</span>
<span class="term-fg32">+			Config: params.TestOptimismChainConfig,</span>
<span class="term-fg32">+			Alloc: types.GenesisAlloc{</span>
<span class="term-fg32">+				address:  {Balance: big.NewInt(9000000000000000000)},</span>
<span class="term-fg32">+				address1: {Balance: big.NewInt(200000000000000000)},</span>
<span class="term-fg32">+				address2: {Balance: big.NewInt(300000000000000000)},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			GasLimit: 10000000,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	m := mock.MockWithGenesis(t, gspec, key, false)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contractBackend := backends.NewTestSimulatedBackendWithConfig(t, gspec.Alloc, gspec.Config, gspec.GasLimit)</span>
<span class="term-fg32">+	defer contractBackend.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Generate empty chain to have some orphaned blocks for tests</span>
<span class="term-fg32">+	orphanedChain, err := core.GenerateChain(m.ChainConfig, m.Genesis, m.Engine, m.DB, 5, func(i int, block *core.BlockGen) {</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	chain, err := getChainInstance(&amp;addresses, m.ChainConfig, m.Genesis, m.Engine, m.DB, contractBackend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err = m.InsertChain(orphanedChain); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err = m.InsertChain(chain); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return m, chain, []*core.ChainPack{orphanedChain}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 var chainInstance *core.ChainPack
&nbsp;
 func getChainInstance(</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7fb719056cb3e6c13a8356b4" role="button"
                   aria-expanded="false" aria-controls="id-7fb719056cb3e6c13a8356b4">
                    <code>cmd/rpctest/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpctest/main.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpctest/main.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7fb719056cb3e6c13a8356b4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;main.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpctest&#47;main.go</span>
<span class="term-fg1">index 4c8af1cb808f13302bffb48cbc43d571ce86a097..e54e93163c473f462bf71a1004ebfd73588d44cb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;main.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpctest&#47;main.go</span>
<span class="term-fg36">@@ -82,19 +82,6 @@</span> 		},
 	}
 	with(benchEthGetBlockByHash, withErigonUrl, withGethUrl, withNeedCompare, withBlockNum, withRecord, withErrorFile, withLatest)
&nbsp;
<span class="term-fg31">-	var benchEthGetBlockByNumber2Cmd = &amp;cobra.Command{</span>
<span class="term-fg31">-		Use:   &quot;benchEthGetBlockByNumber2&quot;,</span>
<span class="term-fg31">-		Short: &quot;&quot;,</span>
<span class="term-fg31">-		Long:  ``,</span>
<span class="term-fg31">-		Run: func(cmd *cobra.Command, args []string) {</span>
<span class="term-fg31">-			err := rpctest.BenchEthGetBlockByNumber2(erigonURL, gethURL, needCompare, latest, blockFrom, blockTo, recordFile, errorFile)</span>
<span class="term-fg31">-			if err != nil {</span>
<span class="term-fg31">-				logger.Error(err.Error())</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-		},</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	with(benchEthGetBlockByNumber2Cmd, withErigonUrl, withGethUrl, withNeedCompare, withBlockNum, withRecord, withErrorFile, withLatest)</span>
<span class="term-fg31">-</span>
 	var benchEthGetTransactionByHashCmd = &amp;cobra.Command{
 		Use:   &quot;benchEthGetTransactionByHash&quot;,
 		Short: &quot;&quot;,
<span class="term-fg36">@@ -341,7 +328,6 @@</span> 	rootCmd.Flags().Uint64Var(&amp;blockFrom, &quot;blockFrom&quot;, 2000000, &quot;Block number to start test generation from&quot;)
 	rootCmd.Flags().Uint64Var(&amp;blockTo, &quot;blockTo&quot;, 2101000, &quot;Block number to end test generation at&quot;)
&nbsp;
 	rootCmd.AddCommand(
<span class="term-fg31">-		benchEthGetBlockByNumber2Cmd,</span>
 		benchEthGetBlockByHash,
 		benchEthCallCmd,
 		benchEthGetTransactionByHashCmd,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-98d0c9cff12341189437deb1" role="button"
                   aria-expanded="false" aria-controls="id-98d0c9cff12341189437deb1">
                    <code>cmd/rpctest/rpctest/bench_ethgetblockbynumber.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpctest/rpctest/bench_ethgetblockbynumber.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-108</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-98d0c9cff12341189437deb1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;bench_ethgetblockbynumber.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;bench_ethgetblockbynumber.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 28988042f6ed198fcbd1a904cb86c24c5f6ca590..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;bench_ethgetblockbynumber.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,108 +0,0 @@</span>
<span class="term-fg31">-package rpctest</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-import (</span>
<span class="term-fg31">-	&quot;bufio&quot;</span>
<span class="term-fg31">-	&quot;fmt&quot;</span>
<span class="term-fg31">-	&quot;net&#47;http&quot;</span>
<span class="term-fg31">-	&quot;os&quot;</span>
<span class="term-fg31">-	&quot;time&quot;</span>
<span class="term-fg31">-)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; BenchEthGetBlockByNumber compares response of Erigon with Geth</span>
<span class="term-fg31">-&#47;&#47; but also can be used for comparing RPCDaemon with Geth or infura</span>
<span class="term-fg31">-&#47;&#47; parameters:</span>
<span class="term-fg31">-&#47;&#47; needCompare - if false - doesn&#39;t call Erigon and doesn&#39;t compare responses</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;			    false value - to generate vegeta files, it&#39;s faster but we can generate vegeta files for Geth and Erigon</span>
<span class="term-fg31">-&#47;&#47;	                 recordFile stores all eth_call returned with success</span>
<span class="term-fg31">-&#47;&#47;	                 errorFile stores information when erigon and geth doesn&#39;t return same data</span>
<span class="term-fg31">-func BenchEthGetBlockByNumber2(erigonURL, gethURL string, needCompare, latest bool, blockFrom, blockTo uint64, recordFileName string, errorFileName string) error {</span>
<span class="term-fg31">-	setRoutes(erigonURL, gethURL)</span>
<span class="term-fg31">-	var client = &amp;http.Client{</span>
<span class="term-fg31">-		Timeout: time.Second * 600,</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	var rec *bufio.Writer</span>
<span class="term-fg31">-	var errs *bufio.Writer</span>
<span class="term-fg31">-	var resultsCh chan CallResult = nil</span>
<span class="term-fg31">-	var nBlocks = 0</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	if errorFileName != &quot;&quot; {</span>
<span class="term-fg31">-		f, err := os.Create(errorFileName)</span>
<span class="term-fg31">-		if err != nil {</span>
<span class="term-fg31">-			return fmt.Errorf(&quot;Cannot create file %s for errorFile: %v\n&quot;, errorFileName, err)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		defer f.Close()</span>
<span class="term-fg31">-		errs = bufio.NewWriter(f)</span>
<span class="term-fg31">-		defer errs.Flush()</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	if recordFileName != &quot;&quot; {</span>
<span class="term-fg31">-		frec, errRec := os.Create(recordFileName)</span>
<span class="term-fg31">-		if errRec != nil {</span>
<span class="term-fg31">-			return fmt.Errorf(&quot;Cannot create file %s for errorFile: %v\n&quot;, recordFileName, errRec)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		defer frec.Close()</span>
<span class="term-fg31">-		rec = bufio.NewWriter(frec)</span>
<span class="term-fg31">-		defer rec.Flush()</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	if !needCompare {</span>
<span class="term-fg31">-		resultsCh = make(chan CallResult, 1000)</span>
<span class="term-fg31">-		defer close(resultsCh)</span>
<span class="term-fg31">-		go vegetaWrite(true, []string{&quot;eth_getBlockByNumber&quot;}, resultsCh)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	var res CallResult</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	reqGen := &amp;RequestGenerator{</span>
<span class="term-fg31">-		client: client,</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	reqGen.reqID++</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	for bn := blockFrom; bn &lt;= blockTo; bn++ {</span>
<span class="term-fg31">-		reqGen.reqID++</span>
<span class="term-fg31">-		var b EthBlockByNumber</span>
<span class="term-fg31">-		res = reqGen.Erigon(&quot;eth_getBlockByNumber&quot;, reqGen.getBlockByNumber(bn, true &#47;* withTxs *&#47;), &amp;b)</span>
<span class="term-fg31">-		if res.Err != nil {</span>
<span class="term-fg31">-			return fmt.Errorf(&quot;Could not retrieve block (Erigon) %d: %v\n&quot;, bn, res.Err)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		if b.Error != nil {</span>
<span class="term-fg31">-			return fmt.Errorf(&quot;Error retrieving block (Erigon): %d %s\n&quot;, b.Error.Code, b.Error.Message)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		if needCompare {</span>
<span class="term-fg31">-			var bg EthBlockByNumber</span>
<span class="term-fg31">-			res = reqGen.Geth(&quot;eth_getBlockByNumber&quot;, reqGen.getBlockByNumber(bn, true &#47;* withTxs *&#47;), &amp;bg)</span>
<span class="term-fg31">-			if res.Err != nil {</span>
<span class="term-fg31">-				return fmt.Errorf(&quot;Could not retrieve block (geth) %d: %v\n&quot;, bn, res.Err)</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if bg.Error != nil {</span>
<span class="term-fg31">-				return fmt.Errorf(&quot;Error retrieving block (geth): %d %s\n&quot;, bg.Error.Code, bg.Error.Message)</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if !compareBlocks(&amp;b, &amp;bg) {</span>
<span class="term-fg31">-				if rec != nil {</span>
<span class="term-fg31">-					fmt.Fprintf(rec, &quot;Block difference for block=%d\n&quot;, bn)</span>
<span class="term-fg31">-					rec.Flush()</span>
<span class="term-fg31">-					continue</span>
<span class="term-fg31">-				} else {</span>
<span class="term-fg31">-					return fmt.Errorf(&quot;Block difference for %d\n&quot;, bn)</span>
<span class="term-fg31">-				}</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		reqGen.reqID++</span>
<span class="term-fg31">-		nBlocks++</span>
<span class="term-fg31">-		var request string</span>
<span class="term-fg31">-		request = reqGen.getBlockByNumber(bn, true)</span>
<span class="term-fg31">-		errCtx := fmt.Sprintf(&quot; bn=%d &quot;, bn)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		if err := requestAndCompare(request, &quot;eth_getBlockByNumber&quot;, errCtx, reqGen, needCompare, rec, errs, resultsCh); err != nil {</span>
<span class="term-fg31">-			return err</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		fmt.Println(&quot;\nProcessed Blocks: &quot;, nBlocks)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return nil</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-32421be6865cff906167c0f9" role="button"
                   aria-expanded="false" aria-controls="id-32421be6865cff906167c0f9">
                    <code>cmd/rpctest/rpctest/type.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/rpctest/rpctest/type.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/rpctest/rpctest/type.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-32421be6865cff906167c0f9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;type.go bobanetwork&#47;v3-erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;type.go</span>
<span class="term-fg1">index bfdcbcc50502388d2605d5cac88485382ebacd5f..02ba51335fd8e9d1f4fe44a5ee01fb8a6a2e53d8 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;type.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;rpctest&#47;rpctest&#47;type.go</span>
<span class="term-fg36">@@ -233,7 +233,7 @@</span> }
&nbsp;
 type EthGetProof struct {
 	CommonResponse
<span class="term-fg31">-	Result AccountResult `json:&quot;result&quot;`</span>
<span class="term-fg32">+	Result AccountResult2 `json:&quot;result&quot;`</span>
 }
&nbsp;
 type EthGetLogs struct {
<span class="term-fg36">@@ -242,7 +242,7 @@</span> 	Result []Log `json:&quot;result&quot;`
 }
&nbsp;
 &#47;&#47; AccountResult is the result struct for GetProof
<span class="term-fg31">-type AccountResult struct {</span>
<span class="term-fg32">+type AccountResult2 struct {</span>
 	Address      libcommon.Address `json:&quot;address&quot;`
 	AccountProof []string          `json:&quot;accountProof&quot;`
 	Balance      *hexutil.Big      `json:&quot;balance&quot;`</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b86809cd04c485a651f7d958" role="button"
                   aria-expanded="false" aria-controls="id-b86809cd04c485a651f7d958">
                    <code>cmd/sentry/sentry/sentry_multi_client.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/sentry/sentry/sentry_multi_client.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/sentry/sentry/sentry_multi_client.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b86809cd04c485a651f7d958"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;sentry&#47;sentry&#47;sentry_multi_client.go bobanetwork&#47;v3-erigon&#47;cmd&#47;sentry&#47;sentry&#47;sentry_multi_client.go</span>
<span class="term-fg1">index f117020119ffabe5e819e25168c0bb44606b1e8e..a3cb8b7dcf2fadfae8024e4e7ea1f70afdb3598c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;sentry&#47;sentry&#47;sentry_multi_client.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;sentry&#47;sentry&#47;sentry_multi_client.go</span>
<span class="term-fg36">@@ -667,7 +667,7 @@</span> 	if err != nil {
 		return err
 	}
 	defer tx.Rollback()
<span class="term-fg31">-	receipts, err := eth.AnswerGetReceiptsQuery(cs.blockReader, tx, query.GetReceiptsPacket)</span>
<span class="term-fg32">+	receipts, err := eth.AnswerGetReceiptsQuery(cs.ChainConfig, cs.blockReader, tx, query.GetReceiptsPacket)</span>
 	if err != nil {
 		return err
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3bc2fc4a70b6e6973ddb7100" role="button"
                   aria-expanded="false" aria-controls="id-3bc2fc4a70b6e6973ddb7100">
                    <code>cmd/state/exec3/state.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/cmd/state/exec3/state.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/cmd/state/exec3/state.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3bc2fc4a70b6e6973ddb7100"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;cmd&#47;state&#47;exec3&#47;state.go bobanetwork&#47;v3-erigon&#47;cmd&#47;state&#47;exec3&#47;state.go</span>
<span class="term-fg1">index a5f61b03bdad33bf72de515545ac8e1446cda9af..c351aa7143d1c0182e496dfb75f7a3daa4325059 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;cmd&#47;state&#47;exec3&#47;state.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;cmd&#47;state&#47;exec3&#47;state.go</span>
<span class="term-fg36">@@ -194,7 +194,8 @@</span>
 		blockContext := txTask.EvmBlockContext
 		if !rw.background {
 			getHashFn := core.GetHashFn(header, rw.getHeader)
<span class="term-fg31">-			blockContext = core.NewEVMBlockContext(header, getHashFn, rw.engine, nil &#47;* author *&#47;)</span>
<span class="term-fg32">+			l1CostFunc := types.NewL1CostFunc(rw.chainConfig, rw.ibs)</span>
<span class="term-fg32">+			blockContext = core.NewEVMBlockContext(header, getHashFn, rw.engine, nil &#47;* author *&#47;, l1CostFunc)</span>
 		}
 		rw.evm.ResetBetweenBlocks(blockContext, core.NewEVMTxContext(msg), ibs, vmConfig, rules)
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5b8bb313c3b0dee594909b6f" role="button"
                   aria-expanded="false" aria-controls="id-5b8bb313c3b0dee594909b6f">
                    <code>common/paths/paths.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/common/paths/paths.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/common/paths/paths.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5b8bb313c3b0dee594909b6f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;common&#47;paths&#47;paths.go bobanetwork&#47;v3-erigon&#47;common&#47;paths&#47;paths.go</span>
<span class="term-fg1">index 51c0976350ac490983937beabf6aa0bf88ad85f1..7731ea5f95386ff4fd690f5fac31e326625d32bb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;common&#47;paths&#47;paths.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;common&#47;paths&#47;paths.go</span>
<span class="term-fg36">@@ -7,7 +7,7 @@</span> 	&quot;path&#47;filepath&quot;
 	&quot;runtime&quot;
 	&quot;strings&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 )
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eeb1969da2ff76ffd12996f7" role="button"
                   aria-expanded="false" aria-controls="id-eeb1969da2ff76ffd12996f7">
                    <code>consensus/bor/heimdall/span/testValidators.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/consensus/bor/heimdall/span/testValidators.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/consensus/bor/heimdall/span/testValidators.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eeb1969da2ff76ffd12996f7"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;consensus&#47;bor&#47;heimdall&#47;span&#47;testValidators.go bobanetwork&#47;v3-erigon&#47;consensus&#47;bor&#47;heimdall&#47;span&#47;testValidators.go</span>
<span class="term-fg1">index 29cf1cc2e6a12b1fa46bc69a7b27926cd97d3f63..8c00117dca5a731847186e11710e649723e19f85 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;consensus&#47;bor&#47;heimdall&#47;span&#47;testValidators.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;consensus&#47;bor&#47;heimdall&#47;span&#47;testValidators.go</span>
<span class="term-fg36">@@ -1,9 +1,9 @@</span>
 package span
&nbsp;
 import (
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;consensus&#47;bor&#47;valset&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47; NetworkNameVals is a map of network name to validator set for tests&#47;devnets</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f7b2b310ae6134f248d1f7e7" role="button"
                   aria-expanded="false" aria-controls="id-f7b2b310ae6134f248d1f7e7">
                    <code>core/allocs/optimism_goerli.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/allocs/optimism_goerli.json" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+78</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f7b2b310ae6134f248d1f7e7"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;allocs&#47;optimism_goerli.json bobanetwork&#47;v3-erigon&#47;core&#47;allocs&#47;optimism_goerli.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..ee2f7bad86098d4f195f79326dcaa422366a12ba</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;allocs&#47;optimism_goerli.json</span>
<span class="term-fg36">@@ -0,0 +1,79 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000000&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100365760003560e01c806382e3702d1461003b578063cafa81dc14610072575b600080fd5b61005e610049366004610112565b60006020819052908152604090205460ff1681565b604051901515815260200160405180910390f35b61008561008036600461015a565b610087565b005b6001600080833360405160200161009f929190610229565b604080518083037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001815291815281516020928301208352908201929092520160002080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001691151591909117905550565b60006020828403121561012457600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561016c57600080fd5b813567ffffffffffffffff8082111561018457600080fd5b818401915084601f83011261019857600080fd5b8135818111156101aa576101aa61012b565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156101f0576101f061012b565b8160405282815287602084870101111561020957600080fd5b826020860160208301376000928101602001929092525095945050505050565b6000835160005b8181101561024a5760208187018101518583015201610230565b81811115610259576000828501525b5060609390931b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016919092019081526014019291505056fea26469706673582212209ffc0b44ce8a27c46cae74a3b3b620a72f10aaea97ed37c15b5d36792abd2aa464736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000002&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100725760003560e01c80639b19251a116100505780639b19251a146100e9578063b1540a011461011c578063bdc7b54f1461012f57600080fd5b806308fd63221461007757806313af40351461008c5780638da5cb5b1461009f575b600080fd5b61008a610085366004610614565b610137565b005b61008a61009a366004610650565b610271565b6000546100bf9073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b61010c6100f7366004610650565b60016020526000908152604090205460ff1681565b60405190151581526020016100e0565b61010c61012a366004610650565b61047c565b61008a6104cd565b60005473ffffffffffffffffffffffffffffffffffffffff1633146101e3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084015b60405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff821660008181526001602090815260409182902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00168515159081179091558251938452908301527f8daaf060c3306c38e068a75c054bf96ecd85a3db1252712c4d93632744c42e0d910160405180910390a15050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610318576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084016101da565b73ffffffffffffffffffffffffffffffffffffffff81166103e1576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152605160248201527f4f564d5f4465706c6f79657257686974656c6973743a2063616e206f6e6c792060448201527f62652064697361626c65642076696120656e61626c654172626974726172794360648201527f6f6e74726163744465706c6f796d656e74000000000000000000000000000000608482015260a4016101da565b6000546040805173ffffffffffffffffffffffffffffffffffffffff928316815291831660208301527fb532073b38c83145e3e5135377a08bf9aab55bc0fd7c1179cd4fb995d2a5159c910160405180910390a1600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff92909216919091179055565b6000805473ffffffffffffffffffffffffffffffffffffffff1615806104c7575073ffffffffffffffffffffffffffffffffffffffff821660009081526001602052604090205460ff165b92915050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610574576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084016101da565b60005460405173ffffffffffffffffffffffffffffffffffffffff90911681527fc0e106cf568e50698fdbde1eff56f5a5c966cc7958e37e276918e9e4ccdf8cd49060200160405180910390a1600080547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055565b803573ffffffffffffffffffffffffffffffffffffffff8116811461060f57600080fd5b919050565b6000806040838503121561062757600080fd5b610630836105eb565b91506020830135801515811461064557600080fd5b809150509250929050565b60006020828403121561066257600080fd5b61066b826105eb565b939250505056fea264697066735822122045a02b3906eca00a51b37c2965ab13be381f71f60af681951849865fb2daa75f64736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000007&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000dead&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000005086d1eef304eb5284a0f6720f79403b4e9be294&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000186a0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100885760003560e01c8063a71198691161005b578063a71198691461012a578063b1b1b2091461014a578063cbd4ece91461016d578063ecc704281461018057600080fd5b806321d800ec1461008d5780633dbb202b146100c55780636e296e45146100da57806382e3702d14610107575b600080fd5b6100b061009b366004610826565b60006020819052908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100d86100d3366004610942565b610197565b005b6100e26102e2565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016100bc565b6100b0610115366004610826565b60026020526000908152604090205460ff1681565b6005546100e29073ffffffffffffffffffffffffffffffffffffffff1681565b6100b0610158366004610826565b60016020526000908152604090205460ff1681565b6100d861017b3660046109ad565b61038b565b61018960035481565b6040519081526020016100bc565b60006101a784338560035461078d565b80516020808301919091206000908152600290915260409081902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055517fcafa81dc0000000000000000000000000000000000000000000000000000000081529091507342000000000000000000000000000000000000009063cafa81dc9061023c908490600401610a89565b600060405180830381600087803b15801561025657600080fd5b505af115801561026a573d6000803e3d6000fd5b505050508373ffffffffffffffffffffffffffffffffffffffff167fcb0f7ffd78f9aee47a248fae8db181db6eee833039123e026dcbff529522e52a3385600354866040516102bc9493929190610aa3565b60405180910390a26001600360008282546102d79190610aef565b909155505050505050565b60045460009073ffffffffffffffffffffffffffffffffffffffff1661dead141561036e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f78446f6d61696e4d65737361676553656e646572206973206e6f74207365740060448201526064015b60405180910390fd5b5060045473ffffffffffffffffffffffffffffffffffffffff1690565b60055473ffffffffffffffffffffffffffffffffffffffff167fffffffffffffffffffffffffeeeeffffffffffffffffffffffffffffffffeeef330173ffffffffffffffffffffffffffffffffffffffff161461046a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602760248201527f50726f7669646564206d65737361676520636f756c64206e6f7420626520766560448201527f7269666965642e000000000000000000000000000000000000000000000000006064820152608401610365565b60006104788585858561078d565b8051602080830191909120600081815260019092526040909120549192509060ff1615610527576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602b60248201527f50726f7669646564206d6573736167652068617320616c72656164792062656560448201527f6e2072656365697665642e0000000000000000000000000000000000000000006064820152608401610365565b73ffffffffffffffffffffffffffffffffffffffff8616734200000000000000000000000000000000000000141561059957600090815260016020819052604090912080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016909117905550610787565b600480547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff878116919091179091556040516000918816906105f2908790610b2e565b6000604051808303816000865af19150503d806000811461062f576040519150601f19603f3d011682016040523d82523d6000602084013e610634565b606091505b5050600480547fffffffffffffffffffffffff00000000000000000000000000000000000000001661dead1790559050801515600114156106d557600082815260016020819052604080832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169092179091555183917f4641df4a962071e12719d8c8c8e5ac7fc4d97b927346a3d7a335b1f7517e133c91a2610701565b60405182907f99d0e048484baa1b1540b1367cb128acd7ab2946d1ed91ec10e3c85e4bf51b8f90600090a25b600083334360405160200161071893929190610b4a565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181528151602092830120600090815291829052902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055505050505b50505050565b6060848484846040516024016107a69493929190610b9c565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fcbd4ece9000000000000000000000000000000000000000000000000000000001790529050949350505050565b60006020828403121561083857600080fd5b5035919050565b803573ffffffffffffffffffffffffffffffffffffffff8116811461086357600080fd5b919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f8301126108a857600080fd5b813567ffffffffffffffff808211156108c3576108c3610868565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561090957610909610868565b8160405283815286602085880101111561092257600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060006060848603121561095757600080fd5b6109608461083f565b9250602084013567ffffffffffffffff81111561097c57600080fd5b61098886828701610897565b925050604084013563ffffffff811681146109a257600080fd5b809150509250925092565b600080600080608085870312156109c357600080fd5b6109cc8561083f565b93506109da6020860161083f565b9250604085013567ffffffffffffffff8111156109f657600080fd5b610a0287828801610897565b949793965093946060013593505050565b60005b83811015610a2e578181015183820152602001610a16565b838111156107875750506000910152565b60008151808452610a57816020860160208601610a13565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610a9c6020830184610a3f565b9392505050565b73ffffffffffffffffffffffffffffffffffffffff85168152608060208201526000610ad26080830186610a3f565b905083604083015263ffffffff8316606083015295945050505050565b60008219821115610b29577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b500190565b60008251610b40818460208701610a13565b9190910192915050565b60008451610b5c818460208901610a13565b60609490941b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001691909301908152601481019190915260340192915050565b600073ffffffffffffffffffffffffffffffffffffffff808716835280861660208401525060806040830152610bd56080830185610a3f565b90508260608301529594505050505056fea26469706673582212200afb9537c52292543adecf37773b8e4d795c984adf4e80970731e434679b4ec264736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x420000000000000000000000000000000000000F&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000000a693b8f8207ff043f6bbc2e2120bbe4c2251efe9&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000abe&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000016e360&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100f55760003560e01c80638c8885c811610097578063de26c4a111610066578063de26c4a1146101cc578063f2fde38b146101df578063f45e65d8146101f2578063fe173b97146101fb57600080fd5b80638c8885c81461016b5780638da5cb5b1461017e578063bede39b5146101a6578063bf1fe420146101b957600080fd5b806349948e0e116100d357806349948e0e14610134578063519b4bd3146101475780637046559714610150578063715018a61461016357600080fd5b80630c18c162146100fa578063313ce567146101165780633577afc51461011f575b600080fd5b61010360035481565b6040519081526020015b60405180910390f35b61010360055481565b61013261012d3660046108d0565b610204565b005b610103610142366004610918565b6102c6565b61010360025481565b61013261015e3660046108d0565b610322565b6101326103d8565b6101326101793660046108d0565b610465565b60005460405173ffffffffffffffffffffffffffffffffffffffff909116815260200161010d565b6101326101b43660046108d0565b61051b565b6101326101c73660046108d0565b6105d1565b6101036101da366004610918565b610687565b6101326101ed3660046109e7565b61072b565b61010360045481565b61010360015481565b60005473ffffffffffffffffffffffffffffffffffffffff16331461028a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b60038190556040518181527f32740b35c0ea213650f60d44366b4fb211c9033b50714e4a1d34e65d5beb9bb4906020015b60405180910390a150565b6000806102d283610687565b90506000600254826102e49190610a53565b90506000600554600a6102f79190610bb2565b90506000600454836103099190610a53565b905060006103178383610bbe565b979650505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff1633146103a3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60048190556040518181527f3336cd9708eaf2769a0f0dc0679f30e80f15dcd88d1921b5a16858e8b85c591a906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff163314610459576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b610463600061085b565b565b60005473ffffffffffffffffffffffffffffffffffffffff1633146104e6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60058190556040518181527fd68112a8707e326d08be3656b528c1bcc5bbbfc47f4177e2179b14d8640838c1906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff16331461059c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60028190556040518181527f351fb23757bb5ea0546c85b7996ddd7155f96b939ebaa5ff7bc49c75f27f2c44906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff163314610652576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60018190556040518181527ffcdccc6074c6c42e4bd578aa9870c697dc976a270968452d2b8c8dc369fae396906020016102bb565b600080805b8351811015610704578381815181106106a7576106a7610bf9565b01602001517fff00000000000000000000000000000000000000000000000000000000000000166106e4576106dd600483610c28565b91506106f2565b6106ef601083610c28565b91505b806106fc81610c40565b91505061068c565b506000600354826107159190610c28565b905061072381610440610c28565b949350505050565b60005473ffffffffffffffffffffffffffffffffffffffff1633146107ac576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b73ffffffffffffffffffffffffffffffffffffffff811661084f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f64647265737300000000000000000000000000000000000000000000000000006064820152608401610281565b6108588161085b565b50565b6000805473ffffffffffffffffffffffffffffffffffffffff8381167fffffffffffffffffffffffff0000000000000000000000000000000000000000831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156108e257600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561092a57600080fd5b813567ffffffffffffffff8082111561094257600080fd5b818401915084601f83011261095657600080fd5b813581811115610968576109686108e9565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156109ae576109ae6108e9565b816040528281528760208487010111156109c757600080fd5b826020860160208301376000928101602001929092525095945050505050565b6000602082840312156109f957600080fd5b813573ffffffffffffffffffffffffffffffffffffffff81168114610a1d57600080fd5b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615610a8b57610a8b610a24565b500290565b600181815b80851115610ae957817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff04821115610acf57610acf610a24565b80851615610adc57918102915b93841c9390800290610a95565b509250929050565b600082610b0057506001610bac565b81610b0d57506000610bac565b8160018114610b235760028114610b2d57610b49565b6001915050610bac565b60ff841115610b3e57610b3e610a24565b50506001821b610bac565b5060208310610133831016604e8410600b8410161715610b6c575081810a610bac565b610b768383610a90565b807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff04821115610ba857610ba8610a24565b0290505b92915050565b6000610a1d8383610af1565b600082610bf4577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b500490565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60008219821115610c3b57610c3b610a24565b500190565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610c7257610c72610a24565b506001019056fea2646970667358221220b949ef5f9defd6c0aab6259672d00d239cb8854c9972ba1866af1c6ec6433d4c64736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000010&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x000000000000000000000000636af16bf2f682dd3109e60102b8e1a089fedaa8&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x0000000000000000000000004200000000000000000000000000000000000007&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100675760003560e01c80633cb747bf116100505780633cb747bf146100ca578063662a633a146100ea578063a3a79548146100fd57600080fd5b806332b7006d1461006c57806336c717c114610081575b600080fd5b61007f61007a366004610d0f565b610110565b005b6001546100a19073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6000546100a19073ffffffffffffffffffffffffffffffffffffffff1681565b61007f6100f8366004610d80565b610126565b61007f61010b366004610e18565b6106c1565b61011f853333878787876106d8565b5050505050565b60015473ffffffffffffffffffffffffffffffffffffffff1661015e60005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461021d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602e60248201527f4f564d5f58434841494e3a206d657373656e67657220636f6e7472616374207560448201527f6e61757468656e7469636174656400000000000000000000000000000000000060648201526084015b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff1661025360005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff16636e296e456040518163ffffffff1660e01b815260040160206040518083038186803b15801561029857600080fd5b505afa1580156102ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102d09190610e9b565b73ffffffffffffffffffffffffffffffffffffffff1614610373576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603060248201527f4f564d5f58434841494e3a2077726f6e672073656e646572206f662063726f7360448201527f732d646f6d61696e206d657373616765000000000000000000000000000000006064820152608401610214565b61039d877f1d1d8b6300000000000000000000000000000000000000000000000000000000610a32565b801561045357508673ffffffffffffffffffffffffffffffffffffffff1663c01e1bd66040518163ffffffff1660e01b8152600401602060405180830381600087803b1580156103ec57600080fd5b505af1158015610400573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104249190610e9b565b73ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16145b15610567576040517f40c10f1900000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8681166004830152602482018690528816906340c10f1990604401600060405180830381600087803b1580156104c857600080fd5b505af11580156104dc573d6000803e3d6000fd5b505050508573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff167fb0444523268717a02698be47d0803aa7468c00acbed2f8bd93a0459cde61dd898888888860405161055a9493929190610f08565b60405180910390a46106b7565b600063a9f9e67560e01b8989888a89898960405160240161058e9796959493929190610f3e565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909316929092179091526001549091506106339073ffffffffffffffffffffffffffffffffffffffff16600083610a57565b8673ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff167f7ea89a4591614515571c2b51f5ea06494056f261c10ab1ed8c03c7590d87bce0898989896040516106ad9493929190610f08565b60405180910390a4505b5050505050505050565b6106d0863387878787876106d8565b505050505050565b6040517f9dc29fac0000000000000000000000000000000000000000000000000000000081523360048201526024810185905273ffffffffffffffffffffffffffffffffffffffff881690639dc29fac90604401600060405180830381600087803b15801561074657600080fd5b505af115801561075a573d6000803e3d6000fd5b5050505060008773ffffffffffffffffffffffffffffffffffffffff1663c01e1bd66040518163ffffffff1660e01b8152600401602060405180830381600087803b1580156107a857600080fd5b505af11580156107bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107e09190610e9b565b9050606073ffffffffffffffffffffffffffffffffffffffff891673deaddeaddeaddeaddeaddeaddeaddeaddead000014156108d5576040517f1532ec340000000000000000000000000000000000000000000000000000000090610851908a908a908a9089908990602401610f9b565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909316929092179091529050610994565b6040517fa9f9e67500000000000000000000000000000000000000000000000000000000906109149084908c908c908c908c908b908b90602401610f3e565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009093169290921790915290505b6001546109b89073ffffffffffffffffffffffffffffffffffffffff168683610a57565b3373ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f73d170910aba9e6d50b102db522b1dbcd796216f5128b445aa2135272886497e8a8a89896040516106ad9493929190610f08565b6000610a3d83610ae8565b8015610a4e5750610a4e8383610b4c565b90505b92915050565b6000546040517f3dbb202b00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff90911690633dbb202b90610ab190869085908790600401611016565b600060405180830381600087803b158015610acb57600080fd5b505af1158015610adf573d6000803e3d6000fd5b50505050505050565b6000610b14827f01ffc9a700000000000000000000000000000000000000000000000000000000610b4c565b8015610a515750610b45827fffffffff00000000000000000000000000000000000000000000000000000000610b4c565b1592915050565b604080517fffffffff00000000000000000000000000000000000000000000000000000000831660248083019190915282518083039091018152604490910182526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f01ffc9a7000000000000000000000000000000000000000000000000000000001790529051600091908290819073ffffffffffffffffffffffffffffffffffffffff87169061753090610c06908690611092565b6000604051808303818686fa925050503d8060008114610c42576040519150601f19603f3d011682016040523d82523d6000602084013e610c47565b606091505b5091509150602081511015610c625760009350505050610a51565b818015610c7e575080806020019051810190610c7e91906110ae565b9695505050505050565b73ffffffffffffffffffffffffffffffffffffffff81168114610caa57600080fd5b50565b803563ffffffff81168114610cc157600080fd5b919050565b60008083601f840112610cd857600080fd5b50813567ffffffffffffffff811115610cf057600080fd5b602083019150836020828501011115610d0857600080fd5b9250929050565b600080600080600060808688031215610d2757600080fd5b8535610d3281610c88565b945060208601359350610d4760408701610cad565b9250606086013567ffffffffffffffff811115610d6357600080fd5b610d6f88828901610cc6565b969995985093965092949392505050565b600080600080600080600060c0888a031215610d9b57600080fd5b8735610da681610c88565b96506020880135610db681610c88565b95506040880135610dc681610c88565b94506060880135610dd681610c88565b93506080880135925060a088013567ffffffffffffffff811115610df957600080fd5b610e058a828b01610cc6565b989b979a50959850939692959293505050565b60008060008060008060a08789031215610e3157600080fd5b8635610e3c81610c88565b95506020870135610e4c81610c88565b945060408701359350610e6160608801610cad565b9250608087013567ffffffffffffffff811115610e7d57600080fd5b610e8989828a01610cc6565b979a9699509497509295939492505050565b600060208284031215610ead57600080fd5b8151610eb881610c88565b9392505050565b8183528181602085013750600060208284010152600060207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116840101905092915050565b73ffffffffffffffffffffffffffffffffffffffff85168152836020820152606060408201526000610c7e606083018486610ebf565b600073ffffffffffffffffffffffffffffffffffffffff808a1683528089166020840152808816604084015280871660608401525084608083015260c060a0830152610f8e60c083018486610ebf565b9998505050505050505050565b600073ffffffffffffffffffffffffffffffffffffffff808816835280871660208401525084604083015260806060830152610fdb608083018486610ebf565b979650505050505050565b60005b83811015611001578181015183820152602001610fe9565b83811115611010576000848401525b50505050565b73ffffffffffffffffffffffffffffffffffffffff841681526060602082015260008351806060840152611051816080850160208801610fe6565b63ffffffff93909316604083015250601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160160800192915050565b600082516110a4818460208701610fe6565b9190910192915050565b6000602082840312156110c057600080fd5b81518015158114610eb857600080fdfea2646970667358221220df892c82e9ba0fc965240aa38614ff1bd6af4d227ce2c0e9933d7f50711a886264736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000011&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000000fd1d2e729ae8eee2e146c033bf4400fe75284301&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x6080604052600436106100385760003560e01c80633ccfd60b14610044578063d3e5792b1461005b578063d4ff92181461008a57600080fd5b3661003f57005b600080fd5b34801561005057600080fd5b506100596100dc565b005b34801561006757600080fd5b5061007767d02ab486cedc000081565b6040519081526020015b60405180910390f35b34801561009657600080fd5b506000546100b79073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610081565b67d02ab486cedc000047101561019e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152605760248201527f4f564d5f53657175656e6365724665655661756c743a2077697468647261776160448201527f6c20616d6f756e74206d7573742062652067726561746572207468616e206d6960648201527f6e696d756d207769746864726177616c20616d6f756e74000000000000000000608482015260a40160405180910390fd5b600080546040805160208101825283815290517fa3a795480000000000000000000000000000000000000000000000000000000081527342000000000000000000000000000000000000109363a3a79548936102309373deaddeaddeaddeaddeaddeaddeaddeaddead00009373ffffffffffffffffffffffffffffffffffffffff909216924792909190600401610264565b600060405180830381600087803b15801561024a57600080fd5b505af115801561025e573d6000803e3d6000fd5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff808816835260208188168185015286604085015263ffffffff8616606085015260a06080850152845191508160a085015260005b828110156102cb5785810182015185820160c0015281016102af565b828111156102dd57600060c084870101525b5050601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160c001969550505050505056fea2646970667358221220387a6116dde263ea48767352a397053c8cffa776aecb43cded2f25a4a9cfbdc264736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000012&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b506004361061002b5760003560e01c8063896f93d114610030575b600080fd5b61004361003e36600461025f565b610045565b005b73ffffffffffffffffffffffffffffffffffffffff83166100c6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f4d7573742070726f76696465204c3120746f6b656e2061646472657373000000604482015260640160405180910390fd5b60007342000000000000000000000000000000000000108484846040516100ec90610178565b6100f99493929190610359565b604051809103906000f080158015610115573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fceeb8e7d520d7f3b65fc11a262b91066940193b05d4f93df07cfdced0eb551cf60405160405180910390a350505050565b6113d7806103b083390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f8301126101c557600080fd5b813567ffffffffffffffff808211156101e0576101e0610185565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561022657610226610185565b8160405283815286602085880101111561023f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060006060848603121561027457600080fd5b833573ffffffffffffffffffffffffffffffffffffffff8116811461029857600080fd5b9250602084013567ffffffffffffffff808211156102b557600080fd5b6102c1878388016101b4565b935060408601359150808211156102d757600080fd5b506102e4868287016101b4565b9150509250925092565b6000815180845260005b81811015610314576020818501810151868301820152016102f8565b81811115610326576000602083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b600073ffffffffffffffffffffffffffffffffffffffff80871683528086166020840152506080604083015261039260808301856102ee565b82810360608401526103a481856102ee565b97965050505050505056fe60806040523480156200001157600080fd5b50604051620013d7380380620013d783398101604081905262000034916200022f565b8151829082906200004d9060039060208501906200009f565b508051620000639060049060208401906200009f565b5050600580546001600160a01b039586166001600160a01b031991821617909155600680549690951695169490941790925550620002fc915050565b828054620000ad90620002bf565b90600052602060002090601f016020900481019282620000d157600085556200011c565b82601f10620000ec57805160ff19168380011785556200011c565b828001600101855582156200011c579182015b828111156200011c578251825591602001919060010190620000ff565b506200012a9291506200012e565b5090565b5b808211156200012a57600081556001016200012f565b80516001600160a01b03811681146200015d57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200018a57600080fd5b81516001600160401b0380821115620001a757620001a762000162565b604051601f8301601f19908116603f01168101908282118183101715620001d257620001d262000162565b81604052838152602092508683858801011115620001ef57600080fd5b600091505b83821015620002135785820183015181830184015290820190620001f4565b83821115620002255760008385830101525b9695505050505050565b600080600080608085870312156200024657600080fd5b620002518562000145565b9350620002616020860162000145565b60408601519093506001600160401b03808211156200027f57600080fd5b6200028d8883890162000178565b93506060870151915080821115620002a457600080fd5b50620002b38782880162000178565b91505092959194509250565b600181811c90821680620002d457607f821691505b60208210811415620002f657634e487b7160e01b600052602260045260246000fd5b50919050565b6110cb806200030c6000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a9059cbb11610066578063a9059cbb14610215578063ae1f6aaf14610228578063c01e1bd61461026d578063dd62ed3e1461028d57600080fd5b806370a08231146101b157806395d89b41146101e75780639dc29fac146101ef578063a457c2d71461020257600080fd5b806323b872dd116100d357806323b872dd14610167578063313ce5671461017a578063395093511461018957806340c10f191461019c57600080fd5b806301ffc9a71461010557806306fdde031461012d578063095ea7b31461014257806318160ddd14610155575b600080fd5b610118610113366004610e4a565b6102d3565b60405190151581526020015b60405180910390f35b610135610393565b6040516101249190610e93565b610118610150366004610f2f565b610425565b6002545b604051908152602001610124565b610118610175366004610f59565b61043b565b60405160128152602001610124565b610118610197366004610f2f565b61050c565b6101af6101aa366004610f2f565b610555565b005b6101596101bf366004610f95565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b61013561061a565b6101af6101fd366004610f2f565b610629565b610118610210366004610f2f565b6106e2565b610118610223366004610f2f565b6107a0565b6006546102489073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610124565b6005546102489073ffffffffffffffffffffffffffffffffffffffff1681565b61015961029b366004610fb0565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60007f01ffc9a7a5cef8baa21ed3c5c0d7e23accb804b619e9333b597f47a0d84076e27f1d1d8b63000000000000000000000000000000000000000000000000000000007fffffffff0000000000000000000000000000000000000000000000000000000084167f01ffc9a700000000000000000000000000000000000000000000000000000000148061038b57507fffffffff00000000000000000000000000000000000000000000000000000000848116908216145b949350505050565b6060600380546103a290610fe3565b80601f01602080910402602001604051908101604052809291908181526020018280546103ce90610fe3565b801561041b5780601f106103f05761010080835404028352916020019161041b565b820191906000526020600020905b8154815290600101906020018083116103fe57829003601f168201915b5050505050905090565b60006104323384846107ad565b50600192915050565b600061044884848461092d565b73ffffffffffffffffffffffffffffffffffffffff84166000908152600160209081526040808320338452909152902054828110156104f45760405162461bcd60e51b815260206004820152602860248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206160448201527f6c6c6f77616e636500000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b61050185338584036107ad565b506001949350505050565b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff871684529091528120549091610432918590610550908690611066565b6107ad565b60065473ffffffffffffffffffffffffffffffffffffffff1633146105bc5760405162461bcd60e51b815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104eb565b6105c68282610b93565b8173ffffffffffffffffffffffffffffffffffffffff167f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d41213968858260405161060e91815260200190565b60405180910390a25050565b6060600480546103a290610fe3565b60065473ffffffffffffffffffffffffffffffffffffffff1633146106905760405162461bcd60e51b815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104eb565b61069a8282610c99565b8173ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca58260405161060e91815260200190565b33600090815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff86168452909152812054828110156107895760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f00000000000000000000000000000000000000000000000000000060648201526084016104eb565b61079633858584036107ad565b5060019392505050565b600061043233848461092d565b73ffffffffffffffffffffffffffffffffffffffff83166108355760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f726573730000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff82166108be5760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f737300000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff83811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b73ffffffffffffffffffffffffffffffffffffffff83166109b65760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f647265737300000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff8216610a3f5760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f657373000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff831660009081526020819052604090205481811015610adb5760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e6365000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff808516600090815260208190526040808220858503905591851681529081208054849290610b1f908490611066565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610b8591815260200190565b60405180910390a350505050565b73ffffffffffffffffffffffffffffffffffffffff8216610bf65760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f20616464726573730060448201526064016104eb565b8060026000828254610c089190611066565b909155505073ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604081208054839290610c42908490611066565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff8216610d225760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f730000000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604090205481811015610dbe5760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f636500000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff83166000908152602081905260408120838303905560028054849290610dfa90849061107e565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90602001610920565b600060208284031215610e5c57600080fd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610e8c57600080fd5b9392505050565b600060208083528351808285015260005b81811015610ec057858101830151858201604001528201610ea4565b81811115610ed2576000604083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016929092016040019392505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610f2a57600080fd5b919050565b60008060408385031215610f4257600080fd5b610f4b83610f06565b946020939093013593505050565b600080600060608486031215610f6e57600080fd5b610f7784610f06565b9250610f8560208501610f06565b9150604084013590509250925092565b600060208284031215610fa757600080fd5b610e8c82610f06565b60008060408385031215610fc357600080fd5b610fcc83610f06565b9150610fda60208401610f06565b90509250929050565b600181811c90821680610ff757607f821691505b60208210811415611031577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000821982111561107957611079611037565b500190565b60008282101561109057611090611037565b50039056fea264697066735822122069a2d33039157f3f2f180571262ca2a5d0a3a24d33bf9448f3b7c2ce9ff757f964736f6c63430008090033a2646970667358221220d2e13f28319115807ec7308d1cd88642a8542d0b838e00b8769f8a85d696f26764736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000013&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x4B60005260206000F3&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;: &quot;0x0000000000000000000000004200000000000000000000000000000000000010&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x457468657200000000000000000000000000000000000000000000000000000a&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x4554480000000000000000000000000000000000000000000000000000000006&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a9059cbb11610066578063a9059cbb14610215578063ae1f6aaf14610228578063c01e1bd61461026d578063dd62ed3e1461028d57600080fd5b806370a08231146101b157806395d89b41146101e75780639dc29fac146101ef578063a457c2d71461020257600080fd5b806323b872dd116100d357806323b872dd14610167578063313ce5671461017a578063395093511461018957806340c10f191461019c57600080fd5b806301ffc9a71461010557806306fdde031461012d578063095ea7b31461014257806318160ddd14610155575b600080fd5b610118610113366004610c6d565b6102d3565b60405190151581526020015b60405180910390f35b610135610393565b6040516101249190610cb6565b610118610150366004610d52565b610425565b6002545b604051908152602001610124565b610118610175366004610d7c565b6104db565b60405160128152602001610124565b610118610197366004610d52565b61058c565b6101af6101aa366004610d52565b61063d565b005b6101596101bf366004610db8565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b61013561071c565b6101af6101fd366004610d52565b61072b565b610118610210366004610d52565b6107fe565b610118610223366004610d52565b6108af565b6006546102489073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610124565b6005546102489073ffffffffffffffffffffffffffffffffffffffff1681565b61015961029b366004610dd3565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60007f01ffc9a7a5cef8baa21ed3c5c0d7e23accb804b619e9333b597f47a0d84076e27f1d1d8b63000000000000000000000000000000000000000000000000000000007fffffffff0000000000000000000000000000000000000000000000000000000084167f01ffc9a700000000000000000000000000000000000000000000000000000000148061038b57507fffffffff00000000000000000000000000000000000000000000000000000000848116908216145b949350505050565b6060600380546103a290610e06565b80601f01602080910402602001604051908101604052809291908181526020018280546103ce90610e06565b801561041b5780601f106103f05761010080835404028352916020019161041b565b820191906000526020600020905b8154815290600101906020018083116103fe57829003601f168201915b5050505050905090565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604260248201527f4f564d5f4554483a20617070726f76652069732064697361626c65642070656e60448201527f64696e67206675727468657220636f6d6d756e6974792064697363757373696f60648201527f6e2e000000000000000000000000000000000000000000000000000000000000608482015260009060a4015b60405180910390fd5b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604760248201527f4f564d5f4554483a207472616e7366657246726f6d2069732064697361626c6560448201527f642070656e64696e67206675727468657220636f6d6d756e697479206469736360648201527f757373696f6e2e00000000000000000000000000000000000000000000000000608482015260009060a4016104d2565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604c60248201527f4f564d5f4554483a20696e637265617365416c6c6f77616e636520697320646960448201527f7361626c65642070656e64696e67206675727468657220636f6d6d756e69747960648201527f2064697363757373696f6e2e0000000000000000000000000000000000000000608482015260009060a4016104d2565b60065473ffffffffffffffffffffffffffffffffffffffff1633146106be576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104d2565b6106c88282610960565b8173ffffffffffffffffffffffffffffffffffffffff167f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d41213968858260405161071091815260200190565b60405180910390a25050565b6060600480546103a290610e06565b60065473ffffffffffffffffffffffffffffffffffffffff1633146107ac576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104d2565b6107b68282610a80565b8173ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca58260405161071091815260200190565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604c60248201527f4f564d5f4554483a206465637265617365416c6c6f77616e636520697320646960448201527f7361626c65642070656e64696e67206675727468657220636f6d6d756e69747960648201527f2064697363757373696f6e2e0000000000000000000000000000000000000000608482015260009060a4016104d2565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604360248201527f4f564d5f4554483a207472616e736665722069732064697361626c656420706560448201527f6e64696e67206675727468657220636f6d6d756e69747920646973637573736960648201527f6f6e2e0000000000000000000000000000000000000000000000000000000000608482015260009060a4016104d2565b73ffffffffffffffffffffffffffffffffffffffff82166109dd576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f20616464726573730060448201526064016104d2565b80600260008282546109ef9190610e89565b909155505073ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604081208054839290610a29908490610e89565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff8216610b23576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f730000000000000000000000000000000000000000000000000000000000000060648201526084016104d2565b73ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604090205481811015610bd9576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f636500000000000000000000000000000000000000000000000000000000000060648201526084016104d2565b73ffffffffffffffffffffffffffffffffffffffff83166000908152602081905260408120838303905560028054849290610c15908490610ea1565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a3505050565b600060208284031215610c7f57600080fd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610caf57600080fd5b9392505050565b600060208083528351808285015260005b81811015610ce357858101830151858201604001528201610cc7565b81811115610cf5576000604083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016929092016040019392505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610d4d57600080fd5b919050565b60008060408385031215610d6557600080fd5b610d6e83610d29565b946020939093013593505050565b600080600060608486031215610d9157600080fd5b610d9a84610d29565b9250610da860208501610d29565b9150604084013590509250925092565b600060208284031215610dca57600080fd5b610caf82610d29565b60008060408385031215610de657600080fd5b610def83610d29565b9150610dfd60208401610d29565b90509250929050565b600181811c90821680610e1a57607f821691505b60208210811415610e54577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008219821115610e9c57610e9c610e5a565b500190565b600082821015610eb357610eb3610e5a565b50039056fea2646970667358221220b71535a5111461b42945e5d842957b3a5926f7ed07d271872f6da21952b5f8b464736f6c63430008090033&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;0x4200000000000000000000000000000000000006&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x577261707065642045746865720000000000000000000000000000000000001a&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x5745544800000000000000000000000000000000000000000000000000000008&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000012&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x6080604052600436106100bc5760003560e01c8063313ce56711610074578063a9059cbb1161004e578063a9059cbb146102cb578063d0e30db0146100bc578063dd62ed3e14610311576100bc565b8063313ce5671461024b57806370a082311461027657806395d89b41146102b6576100bc565b806318160ddd116100a557806318160ddd146101aa57806323b872dd146101d15780632e1a7d4d14610221576100bc565b806306fdde03146100c6578063095ea7b314610150575b6100c4610359565b005b3480156100d257600080fd5b506100db6103a8565b6040805160208082528351818301528351919283929083019185019080838360005b838110156101155781810151838201526020016100fd565b50505050905090810190601f1680156101425780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561015c57600080fd5b506101966004803603604081101561017357600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610454565b604080519115158252519081900360200190f35b3480156101b657600080fd5b506101bf6104c7565b60408051918252519081900360200190f35b3480156101dd57600080fd5b50610196600480360360608110156101f457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135811691602081013590911690604001356104cb565b34801561022d57600080fd5b506100c46004803603602081101561024457600080fd5b503561066b565b34801561025757600080fd5b50610260610700565b6040805160ff9092168252519081900360200190f35b34801561028257600080fd5b506101bf6004803603602081101561029957600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610709565b3480156102c257600080fd5b506100db61071b565b3480156102d757600080fd5b50610196600480360360408110156102ee57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610793565b34801561031d57600080fd5b506101bf6004803603604081101561033457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff813581169160200135166107a7565b33600081815260036020908152604091829020805434908101909155825190815291517fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9281900390910190a2565b6000805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561044c5780601f106104215761010080835404028352916020019161044c565b820191906000526020600020905b81548152906001019060200180831161042f57829003601f168201915b505050505081565b33600081815260046020908152604080832073ffffffffffffffffffffffffffffffffffffffff8716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b4790565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600360205260408120548211156104fd57600080fd5b73ffffffffffffffffffffffffffffffffffffffff84163314801590610573575073ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff14155b156105ed5773ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020548211156105b557600080fd5b73ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020805483900390555b73ffffffffffffffffffffffffffffffffffffffff808516600081815260036020908152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35060019392505050565b3360009081526003602052604090205481111561068757600080fd5b33600081815260036020526040808220805485900390555183156108fc0291849190818181858888f193505050501580156106c6573d6000803e3d6000fd5b5060408051828152905133917f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65919081900360200190a250565b60025460ff1681565b60036020526000908152604090205481565b60018054604080516020600284861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561044c5780601f106104215761010080835404028352916020019161044c565b60006107a03384846104cb565b9392505050565b60046020908152600092835260408084209091529082529020548156fea265627a7a7231582091c18790e0cca5011d2518024840ee00fecc67e11f56fd746f2cf84d5b583e0064736f6c63430005110032&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-62ef1c79ea459f9319c62669" role="button"
                   aria-expanded="false" aria-controls="id-62ef1c79ea459f9319c62669">
                    <code>core/allocs/optimism_mainnet.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/allocs/optimism_mainnet.json" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-62ef1c79ea459f9319c62669"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;allocs&#47;optimism_mainnet.json bobanetwork&#47;v3-erigon&#47;core&#47;allocs&#47;optimism_mainnet.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0967ef424bce6791893e9a57bb952f80fd536e93</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;allocs&#47;optimism_mainnet.json</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+{}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9a6e7be7d452efcd13eb5597" role="button"
                   aria-expanded="false" aria-controls="id-9a6e7be7d452efcd13eb5597">
                    <code>core/blockchain.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/blockchain.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/blockchain.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9a6e7be7d452efcd13eb5597"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;blockchain.go bobanetwork&#47;v3-erigon&#47;core&#47;blockchain.go</span>
<span class="term-fg1">index 4160da9d9bc2122590669cde791cff62ee4c827f..4dc6ae2a96ea6c456abc18ba8787c67bbd88d30b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;blockchain.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;blockchain.go</span>
<span class="term-fg36">@@ -220,6 +220,7 @@</span> 		nil, nil,
 		data, nil, false,
 		true, &#47;&#47; isFree
 		nil,  &#47;&#47; maxFeePerBlobGas
<span class="term-fg32">+		0,    &#47;&#47; rollupDataGas</span>
 	)
 	vmConfig := vm.Config{NoReceipts: true, RestoreState: constCall}
 	&#47;&#47; Create a new context to be used in the EVM environment
<span class="term-fg36">@@ -233,7 +234,8 @@</span> 	} else {
 		author = &amp;state.SystemAddress
 		txContext = NewEVMTxContext(msg)
 	}
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, GetHashFn(header, nil), engine, author)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, GetHashFn(header, nil), engine, author, l1CostFunc)</span>
 	evm := vm.NewEVM(blockContext, txContext, ibs, chainConfig, vmConfig)
&nbsp;
 	ret, _, err := evm.Call(
<span class="term-fg36">@@ -262,12 +264,14 @@</span> 		nil, nil,
 		data, nil, false,
 		true, &#47;&#47; isFree
 		nil,  &#47;&#47; maxFeePerBlobGas
<span class="term-fg32">+		0,    &#47;&#47; rollupDataGas</span>
 	)
 	vmConfig := vm.Config{NoReceipts: true}
 	&#47;&#47; Create a new context to be used in the EVM environment
 	author := &amp;contract
 	txContext := NewEVMTxContext(msg)
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, GetHashFn(header, nil), nil, author)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(&amp;chainConfig, ibs)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, GetHashFn(header, nil), nil, author, l1CostFunc)</span>
 	evm := vm.NewEVM(blockContext, txContext, ibs, &amp;chainConfig, vmConfig)
&nbsp;
 	ret, _, err := evm.SysCreate(</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f6ce4a06ca7ac63b64be14ea" role="button"
                   aria-expanded="false" aria-controls="id-f6ce4a06ca7ac63b64be14ea">
                    <code>core/error.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/error.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/error.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f6ce4a06ca7ac63b64be14ea"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;error.go bobanetwork&#47;v3-erigon&#47;core&#47;error.go</span>
<span class="term-fg1">index 9cb7ade50008fa52256e7960efdcc57efa26e2d2..63c8ab15ec0a48c40c5d57f46aa838fb3435f6ea 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;error.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;error.go</span>
<span class="term-fg36">@@ -107,4 +107,7 @@</span>
 	&#47;&#47; ErrSenderNoEOA is returned if the sender of a transaction is a contract.
 	&#47;&#47; See EIP-3607: Reject transactions from senders with deployed code.
 	ErrSenderNoEOA = errors.New(&quot;sender not an eoa&quot;)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; ErrSystemTxNotSupported is returned for any deposit tx with IsSystemTx=true after the Regolith fork</span>
<span class="term-fg32">+	ErrSystemTxNotSupported = errors.New(&quot;system tx not supported&quot;)</span>
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-17a4b9933fced9980590ff01" role="button"
                   aria-expanded="false" aria-controls="id-17a4b9933fced9980590ff01">
                    <code>core/evm.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/evm.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/evm.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-17a4b9933fced9980590ff01"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;evm.go bobanetwork&#47;v3-erigon&#47;core&#47;evm.go</span>
<span class="term-fg1">index 148e1ac07f6d2a58fdc157dcd7bbc12080dc0c39..9f312f84061ad819d3ed9e182e45e05bce05acfc 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;evm.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;evm.go</span>
<span class="term-fg36">@@ -32,7 +32,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;vm&#47;evmtypes&quot;
 )
&nbsp;
 &#47;&#47; NewEVMBlockContext creates a new context for use in the EVM.
<span class="term-fg31">-func NewEVMBlockContext(header *types.Header, blockHashFunc func(n uint64) libcommon.Hash, engine consensus.EngineReader, author *libcommon.Address) evmtypes.BlockContext {</span>
<span class="term-fg32">+func NewEVMBlockContext(header *types.Header, blockHashFunc func(n uint64) libcommon.Hash, engine consensus.EngineReader, author *libcommon.Address, l1CostFunc types.L1CostFunc) evmtypes.BlockContext {</span>
 	&#47;&#47; If we don&#39;t have an explicit author (i.e. not mining), extract from the header
 	var beneficiary libcommon.Address
 	if author == nil {
<span class="term-fg36">@@ -72,6 +72,7 @@</span> 		BaseFee:       &amp;baseFee,
 		GasLimit:      header.GasLimit,
 		PrevRanDao:    prevRandDao,
 		ExcessBlobGas: header.ExcessBlobGas,
<span class="term-fg32">+		L1CostFunc:    l1CostFunc,</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7ac15e9edf6c835347590dd4" role="button"
                   aria-expanded="false" aria-controls="id-7ac15e9edf6c835347590dd4">
                    <code>core/genesis_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/genesis_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/genesis_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7ac15e9edf6c835347590dd4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;genesis_test.go bobanetwork&#47;v3-erigon&#47;core&#47;genesis_test.go</span>
<span class="term-fg1">index 677b6db05f9220c62fb936d07be56daad1e16c60..b00d217eabe26bc832d6dbb6fe5b338b5b5a1f87 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;genesis_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;genesis_test.go</span>
<span class="term-fg36">@@ -6,7 +6,6 @@</span> 	&quot;math&#47;big&quot;
 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&quot;
<span class="term-fg36">@@ -20,6 +19,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;state&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 )
&nbsp;
<span class="term-fg36">@@ -40,6 +40,9 @@</span> 		require.NotNil(t, expect, network)
 		require.Equal(t, block.Hash().Bytes(), expect.Bytes(), network)
 	}
 	for _, network := range networkname.All {
<span class="term-fg32">+		if network == &quot;optimism-mainnet&quot; {</span>
<span class="term-fg32">+			t.Skip()</span>
<span class="term-fg32">+		}</span>
 		check(network)
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b9771a908abf14f4e3709f69" role="button"
                   aria-expanded="false" aria-controls="id-b9771a908abf14f4e3709f69">
                    <code>core/genesis_write.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/genesis_write.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/genesis_write.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+35</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b9771a908abf14f4e3709f69"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;genesis_write.go bobanetwork&#47;v3-erigon&#47;core&#47;genesis_write.go</span>
<span class="term-fg1">index 8ba7a679e6f5ce710007d8e8ac3743a8fb502675..321937444e799c711851e4a06cb14cca29140dbb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;genesis_write.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;genesis_write.go</span>
<span class="term-fg36">@@ -28,7 +28,6 @@</span> 	&quot;sync&quot;
&nbsp;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;
&nbsp;
<span class="term-fg36">@@ -49,6 +48,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;trie&quot;
 )
&nbsp;
<span class="term-fg36">@@ -100,6 +100,14 @@</span>
 	applyOverrides := func(config *chain.Config) {
 		if overrideCancunTime != nil {
 			config.CancunTime = overrideCancunTime
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if config.Optimism != nil &amp;&amp; config.ChainID != nil {</span>
<span class="term-fg32">+			if config.ChainID.Cmp(params.OptimismGoerliChainConfig.ChainID) == 0 {</span>
<span class="term-fg32">+				config.RegolithTime = params.OptimismGoerliChainConfig.RegolithTime</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if config.ChainID.Cmp(params.OptimismMainnetChainConfig.ChainID) == 0 {</span>
<span class="term-fg32">+				config.RegolithTime = params.OptimismMainnetChainConfig.RegolithTime</span>
<span class="term-fg32">+			}</span>
 		}
 	}
&nbsp;
<span class="term-fg36">@@ -442,6 +450,28 @@</span> 		Alloc:      readPrealloc(&quot;allocs&#47;chiado.json&quot;),
 	}
 }
&nbsp;
<span class="term-fg32">+func OptimismMainnetGenesisBlock() *types.Genesis {</span>
<span class="term-fg32">+	return &amp;types.Genesis{</span>
<span class="term-fg32">+		Config:     params.OptimismMainnetChainConfig,</span>
<span class="term-fg32">+		Difficulty: big.NewInt(1),</span>
<span class="term-fg32">+		Mixhash:    libcommon.HexToHash(&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+		ExtraData:  hexutil.MustDecode(&quot;0x000000000000000000000000000000000000000000000000000000000000000000000398232e2064f896018496b4b44b3d62751f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+		GasLimit:   15000000,</span>
<span class="term-fg32">+		Alloc:      readPrealloc(&quot;allocs&#47;optimism_mainnet.json&quot;),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func OptimismGoerliGenesisBlock() *types.Genesis {</span>
<span class="term-fg32">+	return &amp;types.Genesis{</span>
<span class="term-fg32">+		Config:     params.OptimismGoerliChainConfig,</span>
<span class="term-fg32">+		Difficulty: big.NewInt(1),</span>
<span class="term-fg32">+		Mixhash:    libcommon.HexToHash(&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+		ExtraData:  hexutil.MustDecode(&quot;0x000000000000000000000000000000000000000000000000000000000000000027770a9694e4b4b1e130ab91bc327c36855f612e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+		GasLimit:   15000000,</span>
<span class="term-fg32">+		Alloc:      readPrealloc(&quot;allocs&#47;optimism_goerli.json&quot;),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Pre-calculated version of:
 &#47;&#47;
 &#47;&#47;	DevnetSignPrivateKey = crypto.HexToECDSA(sha256.Sum256([]byte(&quot;erigon devnet key&quot;)))
<span class="term-fg36">@@ -657,6 +687,10 @@</span> 	case networkname.GnosisChainName:
 		return GnosisGenesisBlock()
 	case networkname.ChiadoChainName:
 		return ChiadoGenesisBlock()
<span class="term-fg32">+	case networkname.OptimismMainnetChainName:</span>
<span class="term-fg32">+		return OptimismMainnetGenesisBlock()</span>
<span class="term-fg32">+	case networkname.OptimismGoerliChainName:</span>
<span class="term-fg32">+		return OptimismGoerliGenesisBlock()</span>
 	default:
 		return nil
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c6125e2d94161cd9812685e2" role="button"
                   aria-expanded="false" aria-controls="id-c6125e2d94161cd9812685e2">
                    <code>core/skip_analysis.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/skip_analysis.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/skip_analysis.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c6125e2d94161cd9812685e2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;skip_analysis.go bobanetwork&#47;v3-erigon&#47;core&#47;skip_analysis.go</span>
<span class="term-fg1">index 55d38fc15ec4bcce59a27993fa99ebbabe9b0a29..96c9226bdd9fb29b7685bd3b10e1852641ca4665 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;skip_analysis.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;skip_analysis.go</span>
<span class="term-fg36">@@ -20,7 +20,8 @@</span> import (
 	&quot;sort&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47; SkipAnalysis function tells us whether we can skip performing jumpdest analysis</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0b5a268ee90278e4487e976b" role="button"
                   aria-expanded="false" aria-controls="id-0b5a268ee90278e4487e976b">
                    <code>core/system_contract_lookup.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/system_contract_lookup.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/system_contract_lookup.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0b5a268ee90278e4487e976b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;system_contract_lookup.go bobanetwork&#47;v3-erigon&#47;core&#47;system_contract_lookup.go</span>
<span class="term-fg1">index 8e6250a9232ac2d9d3fcd4571f256cbda3d5f5fe..dfcecb38d8ce2ca9b30d8ae34b0f4faa970194b5 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;system_contract_lookup.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;system_contract_lookup.go</span>
<span class="term-fg36">@@ -4,7 +4,6 @@</span> import (
 	&quot;fmt&quot;
 	&quot;strconv&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
&nbsp;
<span class="term-fg36">@@ -12,6 +11,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;systemcontracts&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 func init() {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-18c35976ea6f180b4339409b" role="button"
                   aria-expanded="false" aria-controls="id-18c35976ea6f180b4339409b">
                    <code>core/types/accounts/account.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/accounts/account.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/accounts/account.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-18c35976ea6f180b4339409b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;accounts&#47;account.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;accounts&#47;account.go</span>
<span class="term-fg1">index a2c284042c7224f8bd02d67cef4c19cc9273c921..1953249c6527289273b2e52fa7f939629d2f0f38 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;accounts&#47;account.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;accounts&#47;account.go</span>
<span class="term-fg36">@@ -8,7 +8,6 @@</span> 	&quot;sync&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
<span class="term-fg36">@@ -78,6 +77,8 @@</span> 	return structLength
 }
&nbsp;
 func (a *Account) EncodingLengthForHashing() uint {
<span class="term-fg32">+	var structLength uint</span>
<span class="term-fg32">+</span>
 	balanceBytes := 0
 	if !a.Balance.LtUint64(128) {
 		balanceBytes = a.Balance.ByteLen()
<span class="term-fg36">@@ -85,11 +86,17 @@</span> 	}
&nbsp;
 	nonceBytes := rlp.IntLenExcludingHead(a.Nonce)
&nbsp;
<span class="term-fg31">-	structLength := balanceBytes + nonceBytes + 2</span>
<span class="term-fg32">+	structLength += uint(balanceBytes + nonceBytes + 2)</span>
&nbsp;
 	structLength += 66 &#47;&#47; Two 32-byte arrays + 2 prefixes
&nbsp;
<span class="term-fg31">-	return uint(rlp2.ListPrefixLen(structLength) + structLength)</span>
<span class="term-fg32">+	if structLength &lt; 56 {</span>
<span class="term-fg32">+		return 1 + structLength</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	lengthBytes := libcommon.BitLenToByteLen(bits.Len(structLength))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return uint(1+lengthBytes) + structLength</span>
 }
&nbsp;
 func (a *Account) EncodeForStorage(buffer []byte) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0f7e2b6a1052aa941f732114" role="button"
                   aria-expanded="false" aria-controls="id-0f7e2b6a1052aa941f732114">
                    <code>core/types/blob_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/blob_tx.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/blob_tx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+11</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0f7e2b6a1052aa941f732114"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;blob_tx.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;blob_tx.go</span>
<span class="term-fg1">index d2bede77c4060e3dc6916cf5ff96d04cd7c84fcc..dfe03c44c586e707bb3c3955cdabbfda43ae345d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;blob_tx.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;blob_tx.go</span>
<span class="term-fg36">@@ -4,13 +4,13 @@</span> import (
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;fixedgas&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
 	types2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;types&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
<span class="term-fg36">@@ -102,8 +102,12 @@</span> 	&#47;&#47; size of MaxFeePerBlobGas
 	payloadSize++
 	payloadSize += rlp.Uint256LenExcludingHead(stx.MaxFeePerBlobGas)
 	&#47;&#47; size of BlobVersionedHashes
<span class="term-fg32">+	payloadSize++</span>
 	blobHashesLen = blobVersionedHashesSize(stx.BlobVersionedHashes)
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(blobHashesLen) + blobHashesLen</span>
<span class="term-fg32">+	if blobHashesLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(blobHashesLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += blobHashesLen</span>
 	return
 }
&nbsp;
<span class="term-fg36">@@ -198,8 +202,12 @@</span> }
&nbsp;
 func (stx BlobTx) EncodeRLP(w io.Writer) error {
 	payloadSize, nonceLen, gasLen, accessListLen, blobHashesLen := stx.payloadSize()
<span class="term-fg32">+	envelopeSize := payloadSize</span>
<span class="term-fg32">+	if payloadSize &gt;= 56 {</span>
<span class="term-fg32">+		envelopeSize += libcommon.BitLenToByteLen(bits.Len(uint(payloadSize)))</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; size of struct prefix and TxType
<span class="term-fg31">-	envelopeSize := 1 + rlp2.ListPrefixLen(payloadSize) + payloadSize</span>
<span class="term-fg32">+	envelopeSize += 2</span>
 	var b [33]byte
 	&#47;&#47; envelope
 	if err := rlp.EncodeStringSizePrefix(envelopeSize, w, b[:]); err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b956d9415a71532a114f4594" role="button"
                   aria-expanded="false" aria-controls="id-b956d9415a71532a114f4594">
                    <code>core/types/blob_tx_wrapper.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/blob_tx_wrapper.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/blob_tx_wrapper.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b956d9415a71532a114f4594"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;blob_tx_wrapper.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;blob_tx_wrapper.go</span>
<span class="term-fg1">index 654e53e71223777f97e30e7ba1f0abe691f8d8e3..2c4303d15f793bce22bd16f21f905a29f6fc1572 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;blob_tx_wrapper.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;blob_tx_wrapper.go</span>
<span class="term-fg36">@@ -343,6 +343,8 @@</span> func (txw *BlobTxWrapper) SetSender(address libcommon.Address) { txw.Tx.SetSender(address) }
&nbsp;
 func (txw *BlobTxWrapper) IsContractDeploy() bool { return txw.Tx.IsContractDeploy() }
&nbsp;
<span class="term-fg32">+func (txw *BlobTxWrapper) IsDepositTx() bool { return false }</span>
<span class="term-fg32">+</span>
 func (txw *BlobTxWrapper) Unwrap() Transaction { return &amp;txw.Tx }
&nbsp;
 func (txw *BlobTxWrapper) DecodeRLP(s *rlp.Stream) error {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e2cb9d2042950addee974bbe" role="button"
                   aria-expanded="false" aria-controls="id-e2cb9d2042950addee974bbe">
                    <code>core/types/block.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/block.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/block.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+146</span></div>
                        <div class="text-start"><span class="text-danger">-27</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e2cb9d2042950addee974bbe"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;block.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">index 47264d7a7c6afba3534fe7bb26bc04d1d0a5a131..8aa2f23d5a22b2672d8de6a52e69b2ffccf489b4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;block.go</span>
<span class="term-fg36">@@ -24,6 +24,7 @@</span> 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
 	&quot;reflect&quot;
 	&quot;sync&#47;atomic&quot;
&nbsp;
<span class="term-fg36">@@ -127,11 +128,25 @@</span> 	encodingSize += rlp.IntLenExcludingHead(h.GasUsed)
 	encodingSize++
 	encodingSize += rlp.IntLenExcludingHead(h.Time)
 	&#47;&#47; size of Extra
<span class="term-fg31">-	encodingSize += rlp2.StringLen(h.Extra)</span>
<span class="term-fg32">+	encodingSize++</span>
<span class="term-fg32">+	switch len(h.Extra) {</span>
<span class="term-fg32">+	case 0:</span>
<span class="term-fg32">+	case 1:</span>
<span class="term-fg32">+		if h.Extra[0] &gt;= 128 {</span>
<span class="term-fg32">+			encodingSize++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		if len(h.Extra) &gt;= 56 {</span>
<span class="term-fg32">+			encodingSize += libcommon.BitLenToByteLen(bits.Len(uint(len(h.Extra))))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		encodingSize += len(h.Extra)</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	if len(h.AuRaSeal) != 0 {
<span class="term-fg31">-		encodingSize += 1 + rlp.IntLenExcludingHead(h.AuRaStep)</span>
<span class="term-fg31">-		encodingSize += rlp2.ListPrefixLen(len(h.AuRaSeal)) + len(h.AuRaSeal)</span>
<span class="term-fg32">+		encodingSize += 1 + rlp.IntLenExcludingHead(h.AuRaStep) + 1 + len(h.AuRaSeal)</span>
<span class="term-fg32">+		if len(h.AuRaSeal) &gt;= 56 {</span>
<span class="term-fg32">+			encodingSize += libcommon.BitLenToByteLen(bits.Len(uint(len(h.AuRaSeal))))</span>
<span class="term-fg32">+		}</span>
 	} else {
 		encodingSize += 33 &#47;* MixDigest *&#47; + 9 &#47;* BlockNonce *&#47;
 	}
<span class="term-fg36">@@ -160,12 +175,26 @@</span> 	}
&nbsp;
 	if h.Verkle {
 		&#47;&#47; Encoding of Verkle Proof
<span class="term-fg31">-		encodingSize += rlp2.StringLen(h.VerkleProof)</span>
<span class="term-fg32">+		encodingSize++</span>
<span class="term-fg32">+		switch len(h.VerkleProof) {</span>
<span class="term-fg32">+		case 0:</span>
<span class="term-fg32">+		case 1:</span>
<span class="term-fg32">+			if h.VerkleProof[0] &gt;= 128 {</span>
<span class="term-fg32">+				encodingSize++</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			if len(h.VerkleProof) &gt;= 56 {</span>
<span class="term-fg32">+				encodingSize += libcommon.BitLenToByteLen(bits.Len(uint(len(h.VerkleProof))))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			encodingSize += len(h.VerkleProof)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		encodingSize++</span>
<span class="term-fg32">+</span>
 		var tmpBuffer bytes.Buffer
 		if err := rlp.Encode(&amp;tmpBuffer, h.VerkleKeyVals); err != nil {
 			panic(err)
 		}
<span class="term-fg31">-		encodingSize += rlp2.ListPrefixLen(tmpBuffer.Len()) + tmpBuffer.Len()</span>
<span class="term-fg32">+		encodingSize += tmpBuffer.Len()</span>
 	}
&nbsp;
 	return encodingSize
<span class="term-fg36">@@ -669,25 +698,45 @@</span> }
&nbsp;
 func (rb RawBody) payloadSize() (payloadSize, txsLen, unclesLen, withdrawalsLen int) {
 	&#47;&#47; size of Transactions
<span class="term-fg32">+	payloadSize++</span>
 	for _, tx := range rb.Transactions {
 		txsLen += len(tx)
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(txsLen) + txsLen</span>
<span class="term-fg32">+	if txsLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(txsLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += txsLen</span>
&nbsp;
 	&#47;&#47; size of Uncles
<span class="term-fg32">+	payloadSize++</span>
 	for _, uncle := range rb.Uncles {
<span class="term-fg32">+		unclesLen++</span>
 		uncleLen := uncle.EncodingSize()
<span class="term-fg31">-		unclesLen += rlp2.ListPrefixLen(uncleLen) + uncleLen</span>
<span class="term-fg32">+		if uncleLen &gt;= 56 {</span>
<span class="term-fg32">+			unclesLen += libcommon.BitLenToByteLen(bits.Len(uint(uncleLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		unclesLen += uncleLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(unclesLen) + unclesLen</span>
<span class="term-fg32">+	if unclesLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(unclesLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += unclesLen</span>
&nbsp;
 	&#47;&#47; size of Withdrawals
 	if rb.Withdrawals != nil {
<span class="term-fg32">+		payloadSize++</span>
 		for _, withdrawal := range rb.Withdrawals {
<span class="term-fg32">+			withdrawalsLen++</span>
 			withdrawalLen := withdrawal.EncodingSize()
<span class="term-fg31">-			withdrawalsLen += rlp2.ListPrefixLen(withdrawalLen) + withdrawalLen</span>
<span class="term-fg32">+			if withdrawalLen &gt;= 56 {</span>
<span class="term-fg32">+				withdrawalLen += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalLen)))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			withdrawalsLen += withdrawalLen</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if withdrawalsLen &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalsLen)))</span>
 		}
<span class="term-fg31">-		payloadSize += rlp2.ListPrefixLen(withdrawalsLen) + withdrawalsLen</span>
<span class="term-fg32">+		payloadSize += withdrawalsLen</span>
 	}
&nbsp;
 	return payloadSize, txsLen, unclesLen, withdrawalsLen
<span class="term-fg36">@@ -804,6 +853,9 @@</span> 	return s.ListEnd()
 }
&nbsp;
 func (bfs BodyForStorage) payloadSize() (payloadSize, unclesLen, withdrawalsLen int) {
<span class="term-fg32">+</span>
<span class="term-fg32">+	payloadSize++</span>
<span class="term-fg32">+</span>
 	baseTxIdLen := 1 + rlp.IntLenExcludingHead(bfs.BaseTxId)
 	txAmountLen := 1 + rlp.IntLenExcludingHead(uint64(bfs.TxAmount))
&nbsp;
<span class="term-fg36">@@ -812,18 +864,33 @@</span> 	payloadSize += txAmountLen
&nbsp;
 	&#47;&#47; size of Uncles
 	for _, uncle := range bfs.Uncles {
<span class="term-fg32">+		unclesLen++</span>
 		uncleLen := uncle.EncodingSize()
<span class="term-fg31">-		unclesLen += rlp2.ListPrefixLen(uncleLen) + uncleLen</span>
<span class="term-fg32">+		if uncleLen &gt;= 56 {</span>
<span class="term-fg32">+			unclesLen += libcommon.BitLenToByteLen(bits.Len(uint(uncleLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		unclesLen += uncleLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(unclesLen) + unclesLen</span>
<span class="term-fg32">+	if unclesLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(unclesLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += unclesLen</span>
&nbsp;
 	&#47;&#47; size of Withdrawals
 	if bfs.Withdrawals != nil {
<span class="term-fg32">+		payloadSize++</span>
 		for _, withdrawal := range bfs.Withdrawals {
<span class="term-fg32">+			withdrawalsLen++</span>
 			withdrawalLen := withdrawal.EncodingSize()
<span class="term-fg31">-			withdrawalsLen += rlp2.ListPrefixLen(withdrawalLen) + withdrawalLen</span>
<span class="term-fg32">+			if withdrawalLen &gt;= 56 {</span>
<span class="term-fg32">+				withdrawalLen += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalLen)))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			withdrawalsLen += withdrawalLen</span>
 		}
<span class="term-fg31">-		payloadSize += rlp2.ListPrefixLen(withdrawalsLen) + withdrawalsLen</span>
<span class="term-fg32">+		if withdrawalsLen &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalsLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += withdrawalsLen</span>
 	}
&nbsp;
 	return payloadSize, unclesLen, withdrawalsLen
<span class="term-fg36">@@ -945,26 +1012,50 @@</span> }
&nbsp;
 func (bb Body) payloadSize() (payloadSize int, txsLen, unclesLen, withdrawalsLen int) {
 	&#47;&#47; size of Transactions
<span class="term-fg32">+	payloadSize++</span>
 	for _, tx := range bb.Transactions {
<span class="term-fg32">+		txsLen++</span>
 		txLen := tx.EncodingSize()
<span class="term-fg31">-		txsLen += rlp2.ListPrefixLen(txLen) + txLen</span>
<span class="term-fg32">+		if txLen &gt;= 56 {</span>
<span class="term-fg32">+			txsLen += libcommon.BitLenToByteLen(bits.Len(uint(txLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		txsLen += txLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(txsLen) + txsLen</span>
<span class="term-fg32">+	if txsLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(txsLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += txsLen</span>
&nbsp;
 	&#47;&#47; size of Uncles
<span class="term-fg32">+	payloadSize++</span>
 	for _, uncle := range bb.Uncles {
<span class="term-fg32">+		unclesLen++</span>
 		uncleLen := uncle.EncodingSize()
<span class="term-fg31">-		unclesLen += rlp2.ListPrefixLen(uncleLen) + uncleLen</span>
<span class="term-fg32">+		if uncleLen &gt;= 56 {</span>
<span class="term-fg32">+			unclesLen += libcommon.BitLenToByteLen(bits.Len(uint(uncleLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		unclesLen += uncleLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(unclesLen) + unclesLen</span>
<span class="term-fg32">+	if unclesLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(unclesLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += unclesLen</span>
&nbsp;
 	&#47;&#47; size of Withdrawals
 	if bb.Withdrawals != nil {
<span class="term-fg32">+		payloadSize++</span>
 		for _, withdrawal := range bb.Withdrawals {
<span class="term-fg32">+			withdrawalsLen++</span>
 			withdrawalLen := withdrawal.EncodingSize()
<span class="term-fg31">-			withdrawalsLen += rlp2.ListPrefixLen(withdrawalLen) + withdrawalLen</span>
<span class="term-fg32">+			if withdrawalLen &gt;= 56 {</span>
<span class="term-fg32">+				withdrawalLen += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalLen)))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			withdrawalsLen += withdrawalLen</span>
 		}
<span class="term-fg31">-		payloadSize += rlp2.ListPrefixLen(withdrawalsLen) + withdrawalsLen</span>
<span class="term-fg32">+		if withdrawalsLen &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalsLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += withdrawalsLen</span>
 	}
&nbsp;
 	return payloadSize, txsLen, unclesLen, withdrawalsLen
<span class="term-fg36">@@ -1268,30 +1359,58 @@</span> }
&nbsp;
 func (bb Block) payloadSize() (payloadSize int, txsLen, unclesLen, withdrawalsLen int) {
 	&#47;&#47; size of Header
<span class="term-fg32">+	payloadSize++</span>
 	headerLen := bb.header.EncodingSize()
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(headerLen) + headerLen</span>
<span class="term-fg32">+	if headerLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(headerLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += headerLen</span>
&nbsp;
 	&#47;&#47; size of Transactions
<span class="term-fg32">+	payloadSize++</span>
 	for _, tx := range bb.transactions {
<span class="term-fg32">+		txsLen++</span>
 		txLen := tx.EncodingSize()
<span class="term-fg31">-		txsLen += rlp2.ListPrefixLen(txLen) + txLen</span>
<span class="term-fg32">+		if txLen &gt;= 56 {</span>
<span class="term-fg32">+			txsLen += libcommon.BitLenToByteLen(bits.Len(uint(txLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		txsLen += txLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(txsLen) + txsLen</span>
<span class="term-fg32">+	if txsLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(txsLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += txsLen</span>
&nbsp;
 	&#47;&#47; size of Uncles
<span class="term-fg32">+	payloadSize++</span>
 	for _, uncle := range bb.uncles {
<span class="term-fg32">+		unclesLen++</span>
 		uncleLen := uncle.EncodingSize()
<span class="term-fg31">-		unclesLen += rlp2.ListPrefixLen(uncleLen) + uncleLen</span>
<span class="term-fg32">+		if uncleLen &gt;= 56 {</span>
<span class="term-fg32">+			unclesLen += libcommon.BitLenToByteLen(bits.Len(uint(uncleLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		unclesLen += uncleLen</span>
 	}
<span class="term-fg31">-	payloadSize += rlp2.ListPrefixLen(unclesLen) + unclesLen</span>
<span class="term-fg32">+	if unclesLen &gt;= 56 {</span>
<span class="term-fg32">+		payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(unclesLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	payloadSize += unclesLen</span>
&nbsp;
 	&#47;&#47; size of Withdrawals
 	if bb.withdrawals != nil {
<span class="term-fg32">+		payloadSize++</span>
 		for _, withdrawal := range bb.withdrawals {
<span class="term-fg32">+			withdrawalsLen++</span>
 			withdrawalLen := withdrawal.EncodingSize()
<span class="term-fg31">-			withdrawalsLen += rlp2.ListPrefixLen(withdrawalLen) + withdrawalLen</span>
<span class="term-fg32">+			if withdrawalLen &gt;= 56 {</span>
<span class="term-fg32">+				withdrawalLen += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalLen)))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			withdrawalsLen += withdrawalLen</span>
 		}
<span class="term-fg31">-		payloadSize += rlp2.ListPrefixLen(withdrawalsLen) + withdrawalsLen</span>
<span class="term-fg32">+		if withdrawalsLen &gt;= 56 {</span>
<span class="term-fg32">+			payloadSize += libcommon.BitLenToByteLen(bits.Len(uint(withdrawalsLen)))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		payloadSize += withdrawalsLen</span>
 	}
&nbsp;
 	return payloadSize, txsLen, unclesLen, withdrawalsLen</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9567a1abfb380b49abc3a509" role="button"
                   aria-expanded="false" aria-controls="id-9567a1abfb380b49abc3a509">
                    <code>core/types/deposit_tx_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/deposit_tx_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+26</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9567a1abfb380b49abc3a509"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;deposit_tx_test.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;deposit_tx_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..718afb48659e8823e005f48cb1362d8b296cc7e4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;deposit_tx_test.go</span>
<span class="term-fg36">@@ -0,0 +1,26 @@</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestDepositTxHash(t *testing.T) {</span>
<span class="term-fg32">+	dtx := DepositTransaction{</span>
<span class="term-fg32">+		SourceHash: ptr(common.HexToHash(&quot;0xc9fa17cc88928d8303f4efcc0053ddbd8c5baea5ed4c1da2efd019833070c182&quot;)),</span>
<span class="term-fg32">+		From:       ptr(common.HexToAddress(&quot;0x976EA74026E726554dB657fA54763abd0C3a0aa9&quot;)),</span>
<span class="term-fg32">+		To:         ptr(common.HexToAddress(&quot;0x976EA74026E726554dB657fA54763abd0C3a0aa9&quot;)),</span>
<span class="term-fg32">+		Mint:       uint256.NewInt(1_000_000_000_000),</span>
<span class="term-fg32">+		Value:      uint256.NewInt(0),</span>
<span class="term-fg32">+		GasLimit:   1_000_000,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.Equal(t, common.HexToHash(&quot;0x5c7753e59abb0904e0e70a28f4d24458cf20c2b5b491365411ce54a662874197&quot;), dtx.Hash())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func ptr[T any](v T) *T {</span>
<span class="term-fg32">+	return &amp;v</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-662cfa3b495475be24140bee" role="button"
                   aria-expanded="false" aria-controls="id-662cfa3b495475be24140bee">
                    <code>core/types/gen_genesis.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/gen_genesis.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/gen_genesis.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+24</span></div>
                        <div class="text-start"><span class="text-danger">-24</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-662cfa3b495475be24140bee"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_genesis.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_genesis.go</span>
<span class="term-fg1">index 3528ce38e560652ed8117b3792147470d5f7f12a..ed3e92d961478420995e4076505bb9d2bad5dc48 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_genesis.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_genesis.go</span>
<span class="term-fg36">@@ -27,16 +27,16 @@</span> 		GasLimit              math.HexOrDecimal64                          `json:&quot;gasLimit&quot;   gencodec:&quot;required&quot;`
 		Difficulty            *math.HexOrDecimal256                        `json:&quot;difficulty&quot; gencodec:&quot;required&quot;`
 		Mixhash               common.Hash                                  `json:&quot;mixHash&quot;`
 		Coinbase              common.Address                               `json:&quot;coinbase&quot;`
<span class="term-fg31">-		BaseFee               *math.HexOrDecimal256                        `json:&quot;baseFeePerGas&quot;`</span>
<span class="term-fg31">-		BlobGasUsed           *math.HexOrDecimal64                         `json:&quot;blobGasUsed&quot;`</span>
<span class="term-fg31">-		ExcessBlobGas         *math.HexOrDecimal64                         `json:&quot;excessBlobGas&quot;`</span>
 		Alloc                 map[common0.UnprefixedAddress]GenesisAccount `json:&quot;alloc&quot;      gencodec:&quot;required&quot;`
 		AuRaStep              uint64                                       `json:&quot;auRaStep&quot;`
 		AuRaSeal              []byte                                       `json:&quot;auRaSeal&quot;`
<span class="term-fg31">-		ParentBeaconBlockRoot *common.Hash                                 `json:&quot;parentBeaconBlockRoot&quot;`</span>
 		Number                math.HexOrDecimal64                          `json:&quot;number&quot;`
 		GasUsed               math.HexOrDecimal64                          `json:&quot;gasUsed&quot;`
 		ParentHash            common.Hash                                  `json:&quot;parentHash&quot;`
<span class="term-fg32">+		BaseFee               *math.HexOrDecimal256                        `json:&quot;baseFeePerGas&quot;`</span>
<span class="term-fg32">+		BlobGasUsed           *math.HexOrDecimal64                         `json:&quot;blobGasUsed&quot;`</span>
<span class="term-fg32">+		ExcessBlobGas         *math.HexOrDecimal64                         `json:&quot;excessBlobGas&quot;`</span>
<span class="term-fg32">+		ParentBeaconBlockRoot *common.Hash                                 `json:&quot;parentBeaconBlockRoot&quot;`</span>
 	}
 	var enc Genesis
 	enc.Config = g.Config
<span class="term-fg36">@@ -47,9 +47,6 @@</span> 	enc.GasLimit = math.HexOrDecimal64(g.GasLimit)
 	enc.Difficulty = (*math.HexOrDecimal256)(g.Difficulty)
 	enc.Mixhash = g.Mixhash
 	enc.Coinbase = g.Coinbase
<span class="term-fg31">-	enc.BaseFee = (*math.HexOrDecimal256)(g.BaseFee)</span>
<span class="term-fg31">-	enc.BlobGasUsed = (*math.HexOrDecimal64)(g.BlobGasUsed)</span>
<span class="term-fg31">-	enc.ExcessBlobGas = (*math.HexOrDecimal64)(g.ExcessBlobGas)</span>
 	if g.Alloc != nil {
 		enc.Alloc = make(map[common0.UnprefixedAddress]GenesisAccount, len(g.Alloc))
 		for k, v := range g.Alloc {
<span class="term-fg36">@@ -58,10 +55,13 @@</span> 		}
 	}
 	enc.AuRaStep = g.AuRaStep
 	enc.AuRaSeal = g.AuRaSeal
<span class="term-fg31">-	enc.ParentBeaconBlockRoot = g.ParentBeaconBlockRoot</span>
 	enc.Number = math.HexOrDecimal64(g.Number)
 	enc.GasUsed = math.HexOrDecimal64(g.GasUsed)
 	enc.ParentHash = g.ParentHash
<span class="term-fg32">+	enc.BaseFee = (*math.HexOrDecimal256)(g.BaseFee)</span>
<span class="term-fg32">+	enc.BlobGasUsed = (*math.HexOrDecimal64)(g.BlobGasUsed)</span>
<span class="term-fg32">+	enc.ExcessBlobGas = (*math.HexOrDecimal64)(g.ExcessBlobGas)</span>
<span class="term-fg32">+	enc.ParentBeaconBlockRoot = g.ParentBeaconBlockRoot</span>
 	return json.Marshal(&amp;enc)
 }
&nbsp;
<span class="term-fg36">@@ -76,16 +76,16 @@</span> 		GasLimit              *math.HexOrDecimal64                         `json:&quot;gasLimit&quot;   gencodec:&quot;required&quot;`
 		Difficulty            *math.HexOrDecimal256                        `json:&quot;difficulty&quot; gencodec:&quot;required&quot;`
 		Mixhash               *common.Hash                                 `json:&quot;mixHash&quot;`
 		Coinbase              *common.Address                              `json:&quot;coinbase&quot;`
<span class="term-fg31">-		BaseFee               *math.HexOrDecimal256                        `json:&quot;baseFeePerGas&quot;`</span>
<span class="term-fg31">-		BlobGasUsed           *math.HexOrDecimal64                         `json:&quot;blobGasUsed&quot;`</span>
<span class="term-fg31">-		ExcessBlobGas         *math.HexOrDecimal64                         `json:&quot;excessBlobGas&quot;`</span>
 		Alloc                 map[common0.UnprefixedAddress]GenesisAccount `json:&quot;alloc&quot;      gencodec:&quot;required&quot;`
 		AuRaStep              *uint64                                      `json:&quot;auRaStep&quot;`
 		AuRaSeal              []byte                                       `json:&quot;auRaSeal&quot;`
<span class="term-fg31">-		ParentBeaconBlockRoot *common.Hash                                 `json:&quot;parentBeaconBlockRoot&quot;`</span>
 		Number                *math.HexOrDecimal64                         `json:&quot;number&quot;`
 		GasUsed               *math.HexOrDecimal64                         `json:&quot;gasUsed&quot;`
 		ParentHash            *common.Hash                                 `json:&quot;parentHash&quot;`
<span class="term-fg32">+		BaseFee               *math.HexOrDecimal256                        `json:&quot;baseFeePerGas&quot;`</span>
<span class="term-fg32">+		BlobGasUsed           *math.HexOrDecimal64                         `json:&quot;blobGasUsed&quot;`</span>
<span class="term-fg32">+		ExcessBlobGas         *math.HexOrDecimal64                         `json:&quot;excessBlobGas&quot;`</span>
<span class="term-fg32">+		ParentBeaconBlockRoot *common.Hash                                 `json:&quot;parentBeaconBlockRoot&quot;`</span>
 	}
 	var dec Genesis
 	if err := json.Unmarshal(input, &amp;dec); err != nil {
<span class="term-fg36">@@ -117,15 +117,6 @@</span> 	}
 	if dec.Coinbase != nil {
 		g.Coinbase = *dec.Coinbase
 	}
<span class="term-fg31">-	if dec.BaseFee != nil {</span>
<span class="term-fg31">-		g.BaseFee = (*big.Int)(dec.BaseFee)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if dec.BlobGasUsed != nil {</span>
<span class="term-fg31">-		g.BlobGasUsed = (*uint64)(dec.BlobGasUsed)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if dec.ExcessBlobGas != nil {</span>
<span class="term-fg31">-		g.ExcessBlobGas = (*uint64)(dec.ExcessBlobGas)</span>
<span class="term-fg31">-	}</span>
 	if dec.Alloc == nil {
 		return errors.New(&quot;missing required field &#39;alloc&#39; for Genesis&quot;)
 	}
<span class="term-fg36">@@ -138,9 +129,6 @@</span> 		g.AuRaStep = *dec.AuRaStep
 	}
 	if dec.AuRaSeal != nil {
 		g.AuRaSeal = dec.AuRaSeal
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if dec.ParentBeaconBlockRoot != nil {</span>
<span class="term-fg31">-		g.ParentBeaconBlockRoot = dec.ParentBeaconBlockRoot</span>
 	}
 	if dec.Number != nil {
 		g.Number = uint64(*dec.Number)
<span class="term-fg36">@@ -150,6 +138,18 @@</span> 		g.GasUsed = uint64(*dec.GasUsed)
 	}
 	if dec.ParentHash != nil {
 		g.ParentHash = *dec.ParentHash
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.BaseFee != nil {</span>
<span class="term-fg32">+		g.BaseFee = (*big.Int)(dec.BaseFee)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.BlobGasUsed != nil {</span>
<span class="term-fg32">+		g.BlobGasUsed = (*uint64)(dec.BlobGasUsed)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.ExcessBlobGas != nil {</span>
<span class="term-fg32">+		g.ExcessBlobGas = (*uint64)(dec.ExcessBlobGas)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.ParentBeaconBlockRoot != nil {</span>
<span class="term-fg32">+		g.ParentBeaconBlockRoot = dec.ParentBeaconBlockRoot</span>
 	}
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6dd7241b4e58ee16e5a178f3" role="button"
                   aria-expanded="false" aria-controls="id-6dd7241b4e58ee16e5a178f3">
                    <code>core/types/gen_genesis_account.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/gen_genesis_account.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/gen_genesis_account.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6dd7241b4e58ee16e5a178f3"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_genesis_account.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_genesis_account.go</span>
<span class="term-fg1">index 21fa482d88cef96644e252d516ecda7d175508f9..858502cbdbb829e4861606cfb94bbaf9b277a9e7 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_genesis_account.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_genesis_account.go</span>
<span class="term-fg36">@@ -7,9 +7,8 @@</span> 	&quot;encoding&#47;json&quot;
 	&quot;errors&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg31">-	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
<span class="term-fg31">-</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;math&quot;
 )
&nbsp;
<span class="term-fg36">@@ -61,9 +60,9 @@</span> 	if dec.Code != nil {
 		g.Code = *dec.Code
 	}
 	if dec.Storage != nil {
<span class="term-fg31">-		g.Storage = make(map[libcommon.Hash]libcommon.Hash, len(dec.Storage))</span>
<span class="term-fg32">+		g.Storage = make(map[common.Hash]common.Hash, len(dec.Storage))</span>
 		for k, v := range dec.Storage {
<span class="term-fg31">-			g.Storage[libcommon.Hash(k)] = libcommon.Hash(v)</span>
<span class="term-fg32">+			g.Storage[common.Hash(k)] = common.Hash(v)</span>
 		}
 	}
 	if dec.Balance == nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1fd5bd8a2ae042a2b23fb509" role="button"
                   aria-expanded="false" aria-controls="id-1fd5bd8a2ae042a2b23fb509">
                    <code>core/types/gen_receipt_json.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/core/types/gen_receipt_json.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/core/types/gen_receipt_json.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+56</span></div>
                        <div class="text-start"><span class="text-danger">-27</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1fd5bd8a2ae042a2b23fb509"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_receipt_json.go bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg1">index 8a898648386e9a59111c35adf39d1b60778b98e1..566c4863202e34495c13cc5fcca2102032189178 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg36">@@ -7,9 +7,8 @@</span> 	&quot;encoding&#47;json&quot;
 	&quot;errors&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg31">-	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
<span class="term-fg31">-</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;
 )
&nbsp;
<span class="term-fg36">@@ -18,18 +17,23 @@</span>
 &#47;&#47; MarshalJSON marshals as JSON.
 func (r Receipt) MarshalJSON() ([]byte, error) {
 	type Receipt struct {
<span class="term-fg31">-		Type              hexutil.Uint64    `json:&quot;type,omitempty&quot;`</span>
<span class="term-fg31">-		PostState         hexutility.Bytes  `json:&quot;root&quot;`</span>
<span class="term-fg31">-		Status            hexutil.Uint64    `json:&quot;status&quot;`</span>
<span class="term-fg31">-		CumulativeGasUsed hexutil.Uint64    `json:&quot;cumulativeGasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		Bloom             Bloom             `json:&quot;logsBloom&quot;         gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		Logs              []*Log            `json:&quot;logs&quot;              gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		TxHash            libcommon.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		ContractAddress   libcommon.Address `json:&quot;contractAddress&quot;`</span>
<span class="term-fg31">-		GasUsed           hexutil.Uint64    `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		BlockHash         libcommon.Hash    `json:&quot;blockHash,omitempty&quot;`</span>
<span class="term-fg31">-		BlockNumber       *hexutil.Big      `json:&quot;blockNumber,omitempty&quot;`</span>
<span class="term-fg31">-		TransactionIndex  hexutil.Uint      `json:&quot;transactionIndex&quot;`</span>
<span class="term-fg32">+		Type              hexutil.Uint64   `json:&quot;type,omitempty&quot;`</span>
<span class="term-fg32">+		PostState         hexutility.Bytes `json:&quot;root&quot; codec:&quot;1&quot;`</span>
<span class="term-fg32">+		Status            hexutil.Uint64   `json:&quot;status&quot; codec:&quot;2&quot;`</span>
<span class="term-fg32">+		CumulativeGasUsed hexutil.Uint64   `json:&quot;cumulativeGasUsed&quot; gencodec:&quot;required&quot; codec:&quot;3&quot;`</span>
<span class="term-fg32">+		Bloom             Bloom            `json:&quot;logsBloom&quot;         gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		Logs              Logs             `json:&quot;logs&quot;              gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		TxHash            common.Hash      `json:&quot;transactionHash&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		ContractAddress   common.Address   `json:&quot;contractAddress&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		GasUsed           hexutil.Uint64   `json:&quot;gasUsed&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		DepositNonce      *uint64          `json:&quot;depositNonce,omitempty&quot;`</span>
<span class="term-fg32">+		BlockHash         common.Hash      `json:&quot;blockHash,omitempty&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		BlockNumber       *hexutil.Big     `json:&quot;blockNumber,omitempty&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		TransactionIndex  hexutil.Uint     `json:&quot;transactionIndex&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		L1GasPrice        *hexutil.Big     `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+		L1GasUsed         *hexutil.Big     `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		L1Fee             *hexutil.Big     `json:&quot;l1Fee,omitempty&quot;`</span>
<span class="term-fg32">+		FeeScalar         *big.Float       `json:&quot;l1FeeScalar,omitempty&quot;`</span>
 	}
 	var enc Receipt
 	enc.Type = hexutil.Uint64(r.Type)
<span class="term-fg36">@@ -41,27 +45,37 @@</span> 	enc.Logs = r.Logs
 	enc.TxHash = r.TxHash
 	enc.ContractAddress = r.ContractAddress
 	enc.GasUsed = hexutil.Uint64(r.GasUsed)
<span class="term-fg32">+	enc.DepositNonce = r.DepositNonce</span>
 	enc.BlockHash = r.BlockHash
 	enc.BlockNumber = (*hexutil.Big)(r.BlockNumber)
 	enc.TransactionIndex = hexutil.Uint(r.TransactionIndex)
<span class="term-fg32">+	enc.L1GasPrice = (*hexutil.Big)(r.L1GasPrice)</span>
<span class="term-fg32">+	enc.L1GasUsed = (*hexutil.Big)(r.L1GasUsed)</span>
<span class="term-fg32">+	enc.L1Fee = (*hexutil.Big)(r.L1Fee)</span>
<span class="term-fg32">+	enc.FeeScalar = r.FeeScalar</span>
 	return json.Marshal(&amp;enc)
 }
&nbsp;
 &#47;&#47; UnmarshalJSON unmarshals from JSON.
 func (r *Receipt) UnmarshalJSON(input []byte) error {
 	type Receipt struct {
<span class="term-fg31">-		Type              *hexutil.Uint64    `json:&quot;type,omitempty&quot;`</span>
<span class="term-fg31">-		PostState         *hexutility.Bytes  `json:&quot;root&quot;`</span>
<span class="term-fg31">-		Status            *hexutil.Uint64    `json:&quot;status&quot;`</span>
<span class="term-fg31">-		CumulativeGasUsed *hexutil.Uint64    `json:&quot;cumulativeGasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		Bloom             *Bloom             `json:&quot;logsBloom&quot;         gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		Logs              []*Log             `json:&quot;logs&quot;              gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		TxHash            *libcommon.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		ContractAddress   *libcommon.Address `json:&quot;contractAddress&quot;`</span>
<span class="term-fg31">-		GasUsed           *hexutil.Uint64    `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-		BlockHash         *libcommon.Hash    `json:&quot;blockHash,omitempty&quot;`</span>
<span class="term-fg31">-		BlockNumber       *hexutil.Big       `json:&quot;blockNumber,omitempty&quot;`</span>
<span class="term-fg31">-		TransactionIndex  *hexutil.Uint      `json:&quot;transactionIndex&quot;`</span>
<span class="term-fg32">+		Type              *hexutil.Uint64   `json:&quot;type,omitempty&quot;`</span>
<span class="term-fg32">+		PostState         *hexutility.Bytes `json:&quot;root&quot; codec:&quot;1&quot;`</span>
<span class="term-fg32">+		Status            *hexutil.Uint64   `json:&quot;status&quot; codec:&quot;2&quot;`</span>
<span class="term-fg32">+		CumulativeGasUsed *hexutil.Uint64   `json:&quot;cumulativeGasUsed&quot; gencodec:&quot;required&quot; codec:&quot;3&quot;`</span>
<span class="term-fg32">+		Bloom             *Bloom            `json:&quot;logsBloom&quot;         gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		Logs              *Logs             `json:&quot;logs&quot;              gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		TxHash            *common.Hash      `json:&quot;transactionHash&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		ContractAddress   *common.Address   `json:&quot;contractAddress&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		GasUsed           *hexutil.Uint64   `json:&quot;gasUsed&quot; gencodec:&quot;required&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		DepositNonce      *uint64           `json:&quot;depositNonce,omitempty&quot;`</span>
<span class="term-fg32">+		BlockHash         *common.Hash      `json:&quot;blockHash,omitempty&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		BlockNumber       *hexutil.Big      `json:&quot;blockNumber,omitempty&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		TransactionIndex  *hexutil.Uint     `json:&quot;transactionIndex&quot; codec:&quot;-&quot;`</span>
<span class="term-fg32">+		L1GasPrice        *hexutil.Big      `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+		L1GasUsed         *hexutil.Big      `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		L1Fee             *hexutil.Big      `json:&quot;l1Fee,omitempty&quot;`</span>
<span class="term-fg32">+		FeeScalar         *big.Float        `json:&quot;l1FeeScalar,omitempty&quot;`</span>
 	}
 	var dec Receipt
 	if err := json.Unmarshal(input, &amp;dec); err != nil {
<span class="term-fg36">@@ -87,7 +101,7 @@</span> 	r.Bloom = *dec.Bloom
 	if dec.Logs == nil {
 		return errors.New(&quot;missing required field &#39;logs&#39; for Receipt&quot;)
 	}
<span class="term-fg31">-	r.Logs = dec.Logs</span>
<span class="term-fg32">+	r.Logs = *dec.Logs</span>
 	if dec.TxHash == nil {
 		return errors.New(&quot;missing required field &#39;transactionHash&#39; for Receipt&quot;)
 	}
<span class="term-fg36">@@ -99,6 +113,9 @@</span> 	if dec.GasUsed == nil {
 		return errors.New(&quot;missing required field &#39;gasUsed&#39; for Receipt&quot;)
 	}
 	r.GasUsed = uint64(*dec.GasUsed)
<span class="term-fg32">+	if dec.DepositNonce != nil {</span>
<span class="term-fg32">+		r.DepositNonce = dec.DepositNonce</span>
<span class="term-fg32">+	}</span>
 	if dec.BlockHash != nil {
 		r.BlockHash = *dec.BlockHash
 	}
<span class="term-fg36">@@ -107,6 +124,18 @@</span> 		r.BlockNumber = (*big.Int)(dec.BlockNumber)
 	}
 	if dec.TransactionIndex != nil {
 		r.TransactionIndex = uint(*dec.TransactionIndex)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1GasPrice != nil {</span>
<span class="term-fg32">+		r.L1GasPrice = (*big.Int)(dec.L1GasPrice)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1GasUsed != nil {</span>
<span class="term-fg32">+		r.L1GasUsed = (*big.Int)(dec.L1GasUsed)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1Fee != nil {</span>
<span class="term-fg32">+		r.L1Fee = (*big.Int)(dec.L1Fee)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.FeeScalar != nil {</span>
<span class="term-fg32">+		r.FeeScalar = dec.FeeScalar</span>
 	}
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9bc592ca5a9ccfa32426c9e8" role="button"
                   aria-expanded="false" aria-controls="id-9bc592ca5a9ccfa32426c9e8">
                    <code>docker-compose.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/docker-compose.yml" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/docker-compose.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9bc592ca5a9ccfa32426c9e8"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;docker-compose.yml bobanetwork&#47;v3-erigon&#47;docker-compose.yml</span>
<span class="term-fg1">index 2870998092ba59a6561271007a8e47bcb7ed4d1b..93de938870a3b71dfbf2fddc54f8a3c8441a4246 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;docker-compose.yml</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;docker-compose.yml</span>
<span class="term-fg36">@@ -15,7 +15,7 @@</span> version: &#39;2.2&#39;
&nbsp;
 # Basic erigon&#39;s service
 x-erigon-service: &amp;default-erigon-service
<span class="term-fg31">-  image: thorax&#47;erigon:${TAG:-latest}</span>
<span class="term-fg32">+  image: erigon:${TAG:-latest}</span>
   pid: service:erigon # Use erigon&#39;s PID namespace. It&#39;s required to open Erigon&#39;s DB from another process (RPCDaemon local-mode)
   volumes_from: [ erigon ]
   restart: unless-stopped
<span class="term-fg36">@@ -24,7 +24,7 @@</span>   user: ${DOCKER_UID:-1000}:${DOCKER_GID:-1000}
&nbsp;
 services:
   erigon:
<span class="term-fg31">-    image: thorax&#47;erigon:${TAG:-latest}</span>
<span class="term-fg32">+    image: bobanetwork&#47;erigon-base:${TAG:-latest}</span>
     build:
       args:
         UID: ${DOCKER_UID:-1000}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-486a8cf1b1b00c06dc358741" role="button"
                   aria-expanded="false" aria-controls="id-486a8cf1b1b00c06dc358741">
                    <code>docs/examples/single-process.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/docs/examples/single-process.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/docs/examples/single-process.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-486a8cf1b1b00c06dc358741"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;docs&#47;examples&#47;single-process.md bobanetwork&#47;v3-erigon&#47;docs&#47;examples&#47;single-process.md</span>
<span class="term-fg1">index aaed061b0be79da076315a7b3b2d1800e7a8b034..6465128fba743c03d0480ce9424ad327604c72b0 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;docs&#47;examples&#47;single-process.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;docs&#47;examples&#47;single-process.md</span>
<span class="term-fg36">@@ -27,7 +27,7 @@</span> This runs Erigon with RPCDaemon, TxPool etc. all in one single process. This is the &#39;simplest&#39; way to run Erigon, reasons for splitting parts out may be that you wish to put different parts of the system on different machines due to performance requirements&#47;load.
&nbsp;
 ## Flags of Interest
&nbsp;
<span class="term-fg31">-- `--chain` dictates the chain (goerli&#47;mainnet etc.) - https:&#47;&#47;chainlist.org&#47; is a helpful resource</span>
<span class="term-fg32">+- `--chain` dictactes the chain (goerli&#47;mainnet etc.) - https:&#47;&#47;chainlist.org&#47; is a helpful resource</span>
 - `--log.dir.path` dictates where logs will be output - useful for sending reports to the Erigon team when issues occur
 - `--http.api` defines the set of APIs which are enabled, the above example is a pretty comprehensive list - what these do is beyond the scope of this example
 - `--authrpc.port` is the port which the consensus layer (PoS) uses to talk to Erigon</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-51a75cb6f71d1b3f5fe4d836" role="button"
                   aria-expanded="false" aria-controls="id-51a75cb6f71d1b3f5fe4d836">
                    <code>docs/programmers_guide/guide.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/docs/programmers_guide/guide.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/docs/programmers_guide/guide.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-51a75cb6f71d1b3f5fe4d836"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;docs&#47;programmers_guide&#47;guide.md bobanetwork&#47;v3-erigon&#47;docs&#47;programmers_guide&#47;guide.md</span>
<span class="term-fg1">index 19606453f654b743428d7976a3d70a4e90c89b2d..43ddef2e6b487a87fbb0a118d02717e0165eb0e4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;docs&#47;programmers_guide&#47;guide.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;docs&#47;programmers_guide&#47;guide.md</span>
<span class="term-fg36">@@ -450,7 +450,7 @@</span> `CODEHASH` opcode consumes the next hash from the hash sequence, pushes it onto the hash stack, and pushes `nil` into
 the node stack.
&nbsp;
 `ACCOUNTLEAF` opcode is similar to `LEAF`. It consumes the next item from the key tape. The rest of the semantics
<span class="term-fg31">-depends on the value of the `field-set`. Field set can be represented by a bitmask. In that case, bit 0 would</span>
<span class="term-fg32">+depends on the value of the `field-set`. Field set can be respresented by a bitmask. In that case, bit 0 would</span>
 correspond to field 0, bit 1 (number 2) - to field 1, bit 2 (number 4) - to field 2. Currently, field 0 means account
 nonce, field 1 means account balance, field 2 means contract storage, field 3 means contract code.
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ae5040d9d29b2506b0a370a8" role="button"
                   aria-expanded="false" aria-controls="id-ae5040d9d29b2506b0a370a8">
                    <code>erigon-lib/.github/workflows/ci.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/.github/workflows/ci.yml" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/.github/workflows/ci.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ae5040d9d29b2506b0a370a8"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;.github&#47;workflows&#47;ci.yml bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">index 79ddb71692160065bf31ee076d923c5ebee227ad..b76ed8d3b035cccef4195a7aa7bd4d39603e2c25 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg36">@@ -32,7 +32,7 @@</span>           submodules: recursive
           fetch-depth: 0 # fetch git tags for &quot;git describe&quot;
       - uses: actions&#47;setup-go@v4
         with:
<span class="term-fg31">-          go-version: &#39;1.20&#39;</span>
<span class="term-fg32">+          go-version: &#39;1.19&#39;</span>
&nbsp;
       - name: Install deps
         if: matrix.os == &#39;ubuntu-20.04&#39;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c3bb70c814bb86834438a65f" role="button"
                   aria-expanded="false" aria-controls="id-c3bb70c814bb86834438a65f">
                    <code>erigon-lib/chain/chain_config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/chain/chain_config.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/chain/chain_config.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+69</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c3bb70c814bb86834438a65f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;chain_config.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;chain&#47;chain_config.go</span>
<span class="term-fg1">index 2fccd28cf007057db3c721916d104cfc57712efa..121ebd2288132986635058dad11719c00ec05b9c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;chain_config.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;chain&#47;chain_config.go</span>
<span class="term-fg36">@@ -68,6 +68,11 @@</span> 	ShanghaiTime *big.Int `json:&quot;shanghaiTime,omitempty&quot;`
 	CancunTime   *big.Int `json:&quot;cancunTime,omitempty&quot;`
 	PragueTime   *big.Int `json:&quot;pragueTime,omitempty&quot;`
&nbsp;
<span class="term-fg32">+	&#47;&#47; Optimism Forks</span>
<span class="term-fg32">+	BedrockBlock *big.Int `json:&quot;bedrockBlock,omitempty&quot;` &#47;&#47; bedrockSwitch block (nil = no fork, 0 = already actived)</span>
<span class="term-fg32">+	&#47;&#47; RegolithTime is *uint64 in op-geth</span>
<span class="term-fg32">+	RegolithTime *big.Int `json:&quot;regolithTime,omitempty&quot;` &#47;&#47; Regolith switch time (nil = no fork, 0 = already on optimism regolith)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Optional EIP-4844 parameters
 	MinBlobGasPrice            *uint64 `json:&quot;minBlobGasPrice,omitempty&quot;`
 	MaxBlobGasPerBlock         *uint64 `json:&quot;maxBlobGasPerBlock,omitempty&quot;`
<span class="term-fg36">@@ -78,10 +83,11 @@</span> 	Eip1559FeeCollector           *common.Address `json:&quot;eip1559FeeCollector,omitempty&quot;`           &#47;&#47; (Optional) Address where burnt EIP-1559 fees go to
 	Eip1559FeeCollectorTransition *big.Int        `json:&quot;eip1559FeeCollectorTransition,omitempty&quot;` &#47;&#47; (Optional) Block from which burnt EIP-1559 fees go to the Eip1559FeeCollector
&nbsp;
 	&#47;&#47; Various consensus engines
<span class="term-fg31">-	Ethash *EthashConfig `json:&quot;ethash,omitempty&quot;`</span>
<span class="term-fg31">-	Clique *CliqueConfig `json:&quot;clique,omitempty&quot;`</span>
<span class="term-fg31">-	Aura   *AuRaConfig   `json:&quot;aura,omitempty&quot;`</span>
<span class="term-fg31">-	Bor    *BorConfig    `json:&quot;bor,omitempty&quot;`</span>
<span class="term-fg32">+	Ethash   *EthashConfig   `json:&quot;ethash,omitempty&quot;`</span>
<span class="term-fg32">+	Clique   *CliqueConfig   `json:&quot;clique,omitempty&quot;`</span>
<span class="term-fg32">+	Aura     *AuRaConfig     `json:&quot;aura,omitempty&quot;`</span>
<span class="term-fg32">+	Bor      *BorConfig      `json:&quot;bor,omitempty&quot;`</span>
<span class="term-fg32">+	Optimism *OptimismConfig `json:&quot;optimism,omitempty&quot;`</span>
 }
&nbsp;
 func (c *Config) String() string {
<span class="term-fg36">@@ -121,6 +127,8 @@</span> 	case c.Bor != nil:
 		return c.Bor.String()
 	case c.Aura != nil:
 		return c.Aura.String()
<span class="term-fg32">+	case c.Optimism != nil:</span>
<span class="term-fg32">+		return c.Optimism.String()</span>
 	default:
 		return &quot;unknown&quot;
 	}
<span class="term-fg36">@@ -208,10 +216,53 @@</span> func (c *Config) IsPrague(time uint64) bool {
 	return isForked(c.PragueTime, time)
 }
&nbsp;
<span class="term-fg32">+func (c *Config) IsBedrock(num uint64) bool {</span>
<span class="term-fg32">+	return isForked(c.BedrockBlock, num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *Config) IsRegolith(time uint64) bool {</span>
<span class="term-fg32">+	return isForked(c.RegolithTime, time)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsOptimism returns whether the node is an optimism node or not.</span>
<span class="term-fg32">+func (c *Config) IsOptimism() bool {</span>
<span class="term-fg32">+	return c.Optimism != nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *Config) IsOptimismBedrock(num uint64) bool {</span>
<span class="term-fg32">+	return c.IsOptimism() &amp;&amp; c.IsBedrock(num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *Config) IsOptimismRegolith(time uint64) bool {</span>
<span class="term-fg32">+	&#47;&#47; Optimism op-geth has additional complexity which is not yet ported here.</span>
<span class="term-fg32">+	return &#47;* c.IsOptimism() &amp;&amp; *&#47; c.IsRegolith(time)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsOptimismPreBedrock returns true iff this is an optimism node &amp; bedrock is not yet active</span>
<span class="term-fg32">+func (c *Config) IsOptimismPreBedrock(num uint64) bool {</span>
<span class="term-fg32">+	return c.IsOptimism() &amp;&amp; !c.IsBedrock(num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func (c *Config) IsEip1559FeeCollector(num uint64) bool {
 	return c.Eip1559FeeCollector != nil &amp;&amp; isForked(c.Eip1559FeeCollectorTransition, num)
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; BaseFeeChangeDenominator bounds the amount the base fee can change between blocks.</span>
<span class="term-fg32">+func (c *Config) BaseFeeChangeDenominator(defaultParam int) uint64 {</span>
<span class="term-fg32">+	if c.IsOptimism() {</span>
<span class="term-fg32">+		return c.Optimism.EIP1559Denominator</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return uint64(defaultParam)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ElasticityMultiplier bounds the maximum gas limit an EIP-1559 block may have.</span>
<span class="term-fg32">+func (c *Config) ElasticityMultiplier(defaultParam int) uint64 {</span>
<span class="term-fg32">+	if c.IsOptimism() {</span>
<span class="term-fg32">+		return c.Optimism.EIP1559Elasticity</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return uint64(defaultParam)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func (c *Config) GetMinBlobGasPrice() uint64 {
 	if c.MinBlobGasPrice != nil {
 		return *c.MinBlobGasPrice
<span class="term-fg36">@@ -437,6 +488,17 @@</span> func (c *CliqueConfig) String() string {
 	return &quot;clique&quot;
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; OptimismConfig is the optimism config.</span>
<span class="term-fg32">+type OptimismConfig struct {</span>
<span class="term-fg32">+	EIP1559Elasticity  uint64 `json:&quot;eip1559Elasticity&quot;`</span>
<span class="term-fg32">+	EIP1559Denominator uint64 `json:&quot;eip1559Denominator&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; String implements the stringer interface, returning the optimism fee config details.</span>
<span class="term-fg32">+func (o *OptimismConfig) String() string {</span>
<span class="term-fg32">+	return &quot;optimism&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; BorConfig is the consensus engine configs for Matic bor based sealing.
 type BorConfig struct {
 	Period                map[string]uint64 `json:&quot;period&quot;`                &#47;&#47; Number of seconds between blocks to enforce
<span class="term-fg36">@@ -630,6 +692,7 @@</span> 	IsHomestead, IsTangerineWhistle, IsSpuriousDragon       bool
 	IsByzantium, IsConstantinople, IsPetersburg, IsIstanbul bool
 	IsBerlin, IsLondon, IsShanghai, IsCancun, IsPrague      bool
 	IsEip1559FeeCollector, IsAura                           bool
<span class="term-fg32">+	IsBedrock, IsOptimismRegolith                           bool</span>
 }
&nbsp;
 &#47;&#47; Rules ensures c&#39;s ChainID is not nil and returns a new Rules instance
<span class="term-fg36">@@ -654,6 +717,8 @@</span> 		IsShanghai:            c.IsShanghai(time),
 		IsCancun:              c.IsCancun(time),
 		IsPrague:              c.IsPrague(time),
 		IsEip1559FeeCollector: c.IsEip1559FeeCollector(num),
<span class="term-fg32">+		IsBedrock:             c.IsBedrock(num),</span>
<span class="term-fg32">+		IsOptimismRegolith:    c.IsOptimismRegolith(time),</span>
 		IsAura:                c.Aura != nil,
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e17f22d8837ce35cb8b9d081" role="button"
                   aria-expanded="false" aria-controls="id-e17f22d8837ce35cb8b9d081">
                    <code>erigon-lib/chain/networkname/network_name.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/chain/networkname/network_name.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-27</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e17f22d8837ce35cb8b9d081"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;networkname&#47;network_name.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;chain&#47;networkname&#47;network_name.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 258174763007bb80ba0d29008cf87a1c46db356d..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;networkname&#47;network_name.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,27 +0,0 @@</span>
<span class="term-fg31">-package networkname</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-const (</span>
<span class="term-fg31">-	MainnetChainName        = &quot;mainnet&quot;</span>
<span class="term-fg31">-	HoleskyChainName        = &quot;holesky&quot;</span>
<span class="term-fg31">-	SepoliaChainName        = &quot;sepolia&quot;</span>
<span class="term-fg31">-	GoerliChainName         = &quot;goerli&quot;</span>
<span class="term-fg31">-	DevChainName            = &quot;dev&quot;</span>
<span class="term-fg31">-	MumbaiChainName         = &quot;mumbai&quot;</span>
<span class="term-fg31">-	BorMainnetChainName     = &quot;bor-mainnet&quot;</span>
<span class="term-fg31">-	BorDevnetChainName      = &quot;bor-devnet&quot;</span>
<span class="term-fg31">-	GnosisChainName         = &quot;gnosis&quot;</span>
<span class="term-fg31">-	BorE2ETestChain2ValName = &quot;bor-e2e-test-2Val&quot;</span>
<span class="term-fg31">-	ChiadoChainName         = &quot;chiado&quot;</span>
<span class="term-fg31">-)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-var All = []string{</span>
<span class="term-fg31">-	MainnetChainName,</span>
<span class="term-fg31">-	HoleskyChainName,</span>
<span class="term-fg31">-	SepoliaChainName,</span>
<span class="term-fg31">-	GoerliChainName,</span>
<span class="term-fg31">-	MumbaiChainName,</span>
<span class="term-fg31">-	BorMainnetChainName,</span>
<span class="term-fg31">-	BorDevnetChainName,</span>
<span class="term-fg31">-	GnosisChainName,</span>
<span class="term-fg31">-	ChiadoChainName,</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c97878db0f6efd0fc5f8836f" role="button"
                   aria-expanded="false" aria-controls="id-c97878db0f6efd0fc5f8836f">
                    <code>erigon-lib/downloader/downloader.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/downloader/downloader.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/downloader/downloader.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c97878db0f6efd0fc5f8836f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloader.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">index c001695ba43aff099f2378081e83f9d7ec9f279c..afc0bf1580b18ce1872ccd875e52202c780bba0a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloader.go</span>
<span class="term-fg36">@@ -78,7 +78,7 @@</span> 	BytesDownload, BytesUpload uint64
 	UploadRate, DownloadRate   uint64
 }
&nbsp;
<span class="term-fg31">-func New(ctx context.Context, cfg *downloadercfg.Cfg, dirs datadir.Dirs, logger log.Logger, verbosity log.Lvl) (*Downloader, error) {</span>
<span class="term-fg32">+func New(ctx context.Context, cfg *downloadercfg.Cfg, logger log.Logger, verbosity log.Lvl) (*Downloader, error) {</span>
 	db, c, m, torrentClient, err := openClient(ctx, cfg.Dirs.Downloader, cfg.Dirs.Snap, cfg.ClientConfig)
 	if err != nil {
 		return nil, fmt.Errorf(&quot;openClient: %w&quot;, err)
<span class="term-fg36">@@ -102,7 +102,7 @@</span> 		pieceCompletionDB: c,
 		folder:            m,
 		torrentClient:     torrentClient,
 		statsLock:         &amp;sync.RWMutex{},
<span class="term-fg31">-		webseeds:          &amp;WebSeeds{logger: logger, verbosity: verbosity, downloadTorrentFile: cfg.DownloadTorrentFilesFromWebseed, chainName: cfg.ChainName},</span>
<span class="term-fg32">+		webseeds:          &amp;WebSeeds{logger: logger, verbosity: verbosity, downloadTorrentFile: cfg.DownloadTorrentFilesFromWebseed},</span>
 		logger:            logger,
 		verbosity:         verbosity,
 	}
<span class="term-fg36">@@ -119,7 +119,7 @@</span> 	&#47;&#47; means we can start adding weebseeds without waiting for `&lt;-t.GotInfo()`
 	d.wg.Add(1)
 	go func() {
 		defer d.wg.Done()
<span class="term-fg31">-		d.webseeds.Discover(d.ctx, d.cfg.WebSeedS3Tokens, d.cfg.WebSeedUrls, d.cfg.WebSeedFiles, d.cfg.Dirs.Snap)</span>
<span class="term-fg32">+		d.webseeds.Discover(d.ctx, d.cfg.WebSeedUrls, d.cfg.WebSeedFiles, d.cfg.Dirs.Snap)</span>
 		&#47;&#47; webseeds.Discover may create new .torrent files on disk
 		if err := d.addTorrentFilesFromDisk(true); err != nil &amp;&amp; !errors.Is(err, context.Canceled) {
 			d.logger.Warn(&quot;[snapshots] addTorrentFilesFromDisk&quot;, &quot;err&quot;, err)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d0e5be770dc5a68c0ced044e" role="button"
                   aria-expanded="false" aria-controls="id-d0e5be770dc5a68c0ced044e">
                    <code>erigon-lib/downloader/downloader_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/downloader/downloader_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/downloader/downloader_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d0e5be770dc5a68c0ced044e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloader_test.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg1">index 5a82307b38b8279c9e4abdde4d1666fa70c3e7c2..493e3bddd430947c083140d3e1c68495b2e1966c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg36">@@ -16,9 +16,9 @@</span>
 func TestChangeInfoHashOfSameFile(t *testing.T) {
 	require := require.New(t)
 	dirs := datadir.New(t.TempDir())
<span class="term-fg31">-	cfg, err := downloadercfg2.New(dirs, &quot;&quot;, lg.Info, 0, 0, 0, 0, 0, nil, nil, &quot;testnet&quot;)</span>
<span class="term-fg32">+	cfg, err := downloadercfg2.New(dirs, &quot;&quot;, lg.Info, 0, 0, 0, 0, 0, nil, &quot;&quot;)</span>
 	require.NoError(err)
<span class="term-fg31">-	d, err := New(context.Background(), cfg, dirs, log.New(), log.LvlInfo)</span>
<span class="term-fg32">+	d, err := New(context.Background(), cfg, log.New(), log.LvlInfo)</span>
 	require.NoError(err)
 	defer d.Close()
 	err = d.AddInfoHashAsMagnetLink(d.ctx, snaptype.Hex2InfoHash(&quot;aa&quot;), &quot;a.seg&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fa8cd7c7fe6dedc1e5cc3871" role="button"
                   aria-expanded="false" aria-controls="id-fa8cd7c7fe6dedc1e5cc3871">
                    <code>erigon-lib/downloader/downloadercfg/downloadercfg.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/downloader/downloadercfg/downloadercfg.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/downloader/downloadercfg/downloadercfg.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+11</span></div>
                        <div class="text-start"><span class="text-danger">-16</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fa8cd7c7fe6dedc1e5cc3871"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;downloadercfg.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;downloadercfg.go</span>
<span class="term-fg1">index 498a6894b96f10e6046539e3060f0ab37fda7954..f8737d2f6a9a1c626cccdfb3d4c6a59935ff0454 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;downloadercfg.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;downloadercfg.go</span>
<span class="term-fg36">@@ -29,6 +29,7 @@</span> 	&quot;github.com&#47;anacrolix&#47;dht&#47;v2&quot;
 	lg &quot;github.com&#47;anacrolix&#47;log&quot;
 	&quot;github.com&#47;anacrolix&#47;torrent&quot;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;dir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
<span class="term-fg36">@@ -50,9 +51,7 @@</span> 	DownloadSlots int
&nbsp;
 	WebSeedUrls                     []*url.URL
 	WebSeedFiles                    []string
<span class="term-fg31">-	WebSeedS3Tokens                 []string</span>
 	DownloadTorrentFilesFromWebseed bool
<span class="term-fg31">-	ChainName                       string</span>
&nbsp;
 	Dirs datadir.Dirs
 }
<span class="term-fg36">@@ -86,7 +85,7 @@</span>
 	return torrentConfig
 }
&nbsp;
<span class="term-fg31">-func New(dirs datadir.Dirs, version string, verbosity lg.Level, downloadRate, uploadRate datasize.ByteSize, port, connsPerFile, downloadSlots int, staticPeers, webseeds []string, chainName string) (*Cfg, error) {</span>
<span class="term-fg32">+func New(dirs datadir.Dirs, version string, verbosity lg.Level, downloadRate, uploadRate datasize.ByteSize, port, connsPerFile, downloadSlots int, staticPeers []string, webseeds string) (*Cfg, error) {</span>
 	torrentConfig := Default()
 	torrentConfig.DataDir = dirs.Snap &#47;&#47; `DataDir` of torrent-client-lib is different from Erigon&#39;s `DataDir`. Just same naming.
&nbsp;
<span class="term-fg36">@@ -145,31 +144,27 @@</span> 		}
 		&#47;&#47;staticPeers
 	}
&nbsp;
<span class="term-fg31">-	webseedUrlsOrFiles := webseeds</span>
<span class="term-fg31">-	webseedHttpProviders := make([]*url.URL, 0, len(webseedUrlsOrFiles))</span>
<span class="term-fg31">-	webseedFileProviders := make([]string, 0, len(webseedUrlsOrFiles))</span>
<span class="term-fg31">-	webseedS3Providers := make([]string, 0, len(webseedUrlsOrFiles))</span>
<span class="term-fg32">+	webseedUrlsOrFiles := common.CliString2Array(webseeds)</span>
<span class="term-fg32">+	webseedUrls := make([]*url.URL, 0, len(webseedUrlsOrFiles))</span>
<span class="term-fg32">+	webseedFiles := make([]string, 0, len(webseedUrlsOrFiles))</span>
 	for _, webseed := range webseedUrlsOrFiles {
<span class="term-fg31">-		if strings.HasPrefix(webseed, &quot;v&quot;) { &#47;&#47; has marker v1&#47;v2&#47;...</span>
<span class="term-fg31">-			webseedS3Providers = append(webseedS3Providers, webseed)</span>
<span class="term-fg31">-			continue</span>
<span class="term-fg31">-		}</span>
 		uri, err := url.ParseRequestURI(webseed)
 		if err != nil {
 			if strings.HasSuffix(webseed, &quot;.toml&quot;) &amp;&amp; dir.FileExist(webseed) {
<span class="term-fg31">-				webseedFileProviders = append(webseedFileProviders, webseed)</span>
<span class="term-fg32">+				webseedFiles = append(webseedFiles, webseed)</span>
 			}
 			continue
 		}
<span class="term-fg31">-		webseedHttpProviders = append(webseedHttpProviders, uri)</span>
<span class="term-fg32">+		webseedUrls = append(webseedUrls, uri)</span>
 	}
 	localCfgFile := filepath.Join(dirs.DataDir, &quot;webseed.toml&quot;) &#47;&#47; datadir&#47;webseed.toml allowed
 	if dir.FileExist(localCfgFile) {
<span class="term-fg31">-		webseedFileProviders = append(webseedFileProviders, localCfgFile)</span>
<span class="term-fg32">+		webseedFiles = append(webseedFiles, localCfgFile)</span>
 	}
<span class="term-fg31">-	return &amp;Cfg{Dirs: dirs, ChainName: chainName,</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;Cfg{Dirs: dirs,</span>
 		ClientConfig: torrentConfig, DownloadSlots: downloadSlots,
<span class="term-fg31">-		WebSeedUrls: webseedHttpProviders, WebSeedFiles: webseedFileProviders, WebSeedS3Tokens: webseedS3Providers,</span>
<span class="term-fg32">+		WebSeedUrls: webseedUrls, WebSeedFiles: webseedFiles,</span>
 	}, nil
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8c9de1924b558b731442b5a3" role="button"
                   aria-expanded="false" aria-controls="id-8c9de1924b558b731442b5a3">
                    <code>erigon-lib/downloader/downloadercfg/logger.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/downloader/downloadercfg/logger.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/downloader/downloadercfg/logger.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8c9de1924b558b731442b5a3"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;logger.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;logger.go</span>
<span class="term-fg1">index ed0b793453af803886a2365271aaf97b40d2d455..8878e9004edc09041798b82ece9a77e0080c6127 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;logger.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;downloadercfg&#47;logger.go</span>
<span class="term-fg36">@@ -139,24 +139,15 @@</span> 		&#47;&#47;}
 		&#47;&#47;if strings.Contains(str, &quot;don&#39;t want conns&quot;) { &#47;&#47; suppress useless errors
 		&#47;&#47;	break
 		&#47;&#47;}
<span class="term-fg31">-		if strings.Contains(str, &quot;torrent closed&quot;) { &#47;&#47; suppress useless errors</span>
<span class="term-fg31">-			break</span>
<span class="term-fg31">-		}</span>
<span class="term-fg32">+		&#47;&#47;if strings.Contains(str, &quot;torrent closed&quot;) { &#47;&#47; suppress useless errors</span>
<span class="term-fg32">+		&#47;&#47;	break</span>
<span class="term-fg32">+		&#47;&#47;}</span>
&nbsp;
 		if skip {
 			break
 		}
 		log.Error(str)
 	default:
<span class="term-fg31">-		str := r.String()</span>
<span class="term-fg31">-		skip := false</span>
<span class="term-fg31">-		if strings.Contains(str, &quot;unhandled response status&quot;) { &#47;&#47; suppress useless errors</span>
<span class="term-fg31">-			break</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if skip {</span>
<span class="term-fg31">-			break</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-</span>
 		log.Info(&quot;[downloader] &quot;+r.String(), &quot;torrent_log_type&quot;, &quot;unknown&quot;, &quot;or&quot;, lvl.LogString())
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-04c7b59044579cc69a821ea1" role="button"
                   aria-expanded="false" aria-controls="id-04c7b59044579cc69a821ea1">
                    <code>erigon-lib/downloader/webseed.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/downloader/webseed.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/downloader/webseed.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-87</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-04c7b59044579cc69a821ea1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;webseed.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;webseed.go</span>
<span class="term-fg1">index 90f5ad9d17768c3ffcf0386b7fbf623d70f206a9..d0992681e485cd47dabe06718d93be81feab7dde 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;downloader&#47;webseed.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;downloader&#47;webseed.go</span>
<span class="term-fg36">@@ -3,7 +3,6 @@</span>
 import (
 	&quot;bytes&quot;
 	&quot;context&quot;
<span class="term-fg31">-	&quot;encoding&#47;base64&quot;</span>
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;net&#47;http&quot;
<span class="term-fg36">@@ -12,11 +11,6 @@</span> 	&quot;os&quot;
 	&quot;path&#47;filepath&quot;
 	&quot;strings&quot;
 	&quot;sync&quot;
<span class="term-fg31">-</span>
<span class="term-fg31">-	&quot;github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;aws&#47;aws-sdk-go-v2&#47;config&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3&quot;</span>
&nbsp;
 	&quot;github.com&#47;anacrolix&#47;torrent&#47;bencode&quot;
 	&quot;github.com&#47;anacrolix&#47;torrent&#47;metainfo&quot;
<span class="term-fg36">@@ -37,45 +31,30 @@</span> 	byFileName          snaptype.WebSeedUrls &#47;&#47; HTTP urls of data files
 	torrentUrls         snaptype.TorrentUrls &#47;&#47; HTTP urls of .torrent files
 	downloadTorrentFile bool
&nbsp;
<span class="term-fg31">-	chainName string</span>
 	logger    log.Logger
 	verbosity log.Lvl
 }
&nbsp;
<span class="term-fg31">-func (d *WebSeeds) Discover(ctx context.Context, s3tokens []string, urls []*url.URL, files []string, rootDir string) {</span>
<span class="term-fg31">-	d.downloadWebseedTomlFromProviders(ctx, s3tokens, urls, files)</span>
<span class="term-fg32">+func (d *WebSeeds) Discover(ctx context.Context, urls []*url.URL, files []string, rootDir string) {</span>
<span class="term-fg32">+	d.downloadWebseedTomlFromProviders(ctx, urls, files)</span>
 	d.downloadTorrentFilesFromProviders(ctx, rootDir)
 }
&nbsp;
<span class="term-fg31">-func (d *WebSeeds) downloadWebseedTomlFromProviders(ctx context.Context, s3Providers []string, httpProviders []*url.URL, diskProviders []string) {</span>
<span class="term-fg31">-	log.Debug(&quot;[snapshots] webseed providers&quot;, &quot;http&quot;, len(httpProviders), &quot;s3&quot;, len(s3Providers), &quot;disk&quot;, len(diskProviders))</span>
<span class="term-fg31">-	list := make([]snaptype.WebSeedsFromProvider, 0, len(httpProviders)+len(diskProviders))</span>
<span class="term-fg31">-	for _, webSeedProviderURL := range httpProviders {</span>
<span class="term-fg32">+func (d *WebSeeds) downloadWebseedTomlFromProviders(ctx context.Context, providers []*url.URL, diskProviders []string) {</span>
<span class="term-fg32">+	list := make([]snaptype.WebSeedsFromProvider, 0, len(providers)+len(diskProviders))</span>
<span class="term-fg32">+	for _, webSeedProviderURL := range providers {</span>
 		select {
 		case &lt;-ctx.Done():
 			break
 		default:
 		}
<span class="term-fg31">-		response, err := d.callHttpProvider(ctx, webSeedProviderURL)</span>
<span class="term-fg32">+		response, err := d.callWebSeedsProvider(ctx, webSeedProviderURL)</span>
 		if err != nil { &#47;&#47; don&#39;t fail on error
 			d.logger.Debug(&quot;[snapshots] downloadWebseedTomlFromProviders&quot;, &quot;err&quot;, err, &quot;url&quot;, webSeedProviderURL.EscapedPath())
 			continue
 		}
 		list = append(list, response)
 	}
<span class="term-fg31">-	for _, webSeedProviderURL := range s3Providers {</span>
<span class="term-fg31">-		select {</span>
<span class="term-fg31">-		case &lt;-ctx.Done():</span>
<span class="term-fg31">-			break</span>
<span class="term-fg31">-		default:</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		response, err := d.callS3Provider(ctx, webSeedProviderURL)</span>
<span class="term-fg31">-		if err != nil { &#47;&#47; don&#39;t fail on error</span>
<span class="term-fg31">-			d.logger.Debug(&quot;[snapshots] downloadWebseedTomlFromProviders&quot;, &quot;err&quot;, err, &quot;url&quot;, &quot;s3&quot;)</span>
<span class="term-fg31">-			continue</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		list = append(list, response)</span>
<span class="term-fg31">-	}</span>
 	&#47;&#47; add to list files from disk
 	for _, webSeedFile := range diskProviders {
 		response, err := d.readWebSeedsFile(webSeedFile)
<span class="term-fg36">@@ -145,9 +124,9 @@</span> 		name := name
 		tUrls := tUrls
 		e.Go(func() error {
 			for _, url := range tUrls {
<span class="term-fg31">-				res, err := d.callTorrentHttpProvider(ctx, url)</span>
<span class="term-fg32">+				res, err := d.callTorrentUrlProvider(ctx, url)</span>
 				if err != nil {
<span class="term-fg31">-					d.logger.Debug(&quot;[snapshots] callTorrentHttpProvider&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+					d.logger.Debug(&quot;[snapshots] callTorrentUrlProvider&quot;, &quot;err&quot;, err)</span>
 					continue
 				}
 				d.logger.Log(d.verbosity, &quot;[snapshots] downloaded .torrent file from webseed&quot;, &quot;name&quot;, name)
<span class="term-fg36">@@ -183,7 +162,7 @@</span> 	defer d.lock.Unlock()
 	v, ok := d.byFileName[name]
 	return v, ok
 }
<span class="term-fg31">-func (d *WebSeeds) callHttpProvider(ctx context.Context, webSeedProviderUrl *url.URL) (snaptype.WebSeedsFromProvider, error) {</span>
<span class="term-fg32">+func (d *WebSeeds) callWebSeedsProvider(ctx context.Context, webSeedProviderUrl *url.URL) (snaptype.WebSeedsFromProvider, error) {</span>
 	request, err := http.NewRequest(http.MethodGet, webSeedProviderUrl.String(), nil)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -200,63 +179,7 @@</span> 		return nil, err
 	}
 	return response, nil
 }
<span class="term-fg31">-func (d *WebSeeds) callS3Provider(ctx context.Context, token string) (snaptype.WebSeedsFromProvider, error) {</span>
<span class="term-fg31">-	var bucketName = &quot;erigon-v3-snapshots-&quot; + d.chainName + &quot;-webseed&quot;</span>
<span class="term-fg31">-	&#47;&#47;v1:base64(accID:accessKeyID:accessKeySecret)</span>
<span class="term-fg31">-	l := strings.Split(token, &quot;:&quot;)</span>
<span class="term-fg31">-	if len(l) != 2 {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;token has invalid format, exepcing &#39;v1:tokenInBase64&#39;&quot;)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	version, tokenInBase64 := strings.TrimSpace(l[0]), strings.TrimSpace(l[1])</span>
<span class="term-fg31">-	if version != &quot;v1&quot; {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;not supported version: %s&quot;, version)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	rawDecodedText, err := base64.StdEncoding.DecodeString(tokenInBase64)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	l = strings.Split(string(rawDecodedText), &quot;:&quot;)</span>
<span class="term-fg31">-	accountId, accessKeyId, accessKeySecret := strings.TrimSpace(l[0]), strings.TrimSpace(l[1]), strings.TrimSpace(l[2])</span>
<span class="term-fg31">-	if len(l) != 3 {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;token has invalid format, exepcing &#39;accountId:accessKeyId:accessKeySecret&#39;&quot;)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	var fileName = &quot;webseeds.toml&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	r2Resolver := aws.EndpointResolverWithOptionsFunc(func(service, region string, options ...interface{}) (aws.Endpoint, error) {</span>
<span class="term-fg31">-		return aws.Endpoint{</span>
<span class="term-fg31">-			URL: fmt.Sprintf(&quot;https:&#47;&#47;%s.r2.cloudflarestorage.com&quot;, accountId),</span>
<span class="term-fg31">-		}, nil</span>
<span class="term-fg31">-	})</span>
<span class="term-fg31">-	cfg, err := config.LoadDefaultConfig(ctx,</span>
<span class="term-fg31">-		config.WithEndpointResolverWithOptions(r2Resolver),</span>
<span class="term-fg31">-		config.WithCredentialsProvider(credentials.NewStaticCredentialsProvider(accessKeyId, accessKeySecret, &quot;&quot;)),</span>
<span class="term-fg31">-	)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	client := s3.NewFromConfig(cfg)</span>
<span class="term-fg31">-	&#47;&#47;  {</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;ChecksumAlgorithm&quot;: null,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;ETag&quot;: &quot;\&quot;eb2b891dc67b81755d2b726d9110af16\&quot;&quot;,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;Key&quot;: &quot;ferriswasm.png&quot;,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;LastModified&quot;: &quot;2022-05-18T17:20:21.67Z&quot;,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;Owner&quot;: null,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;Size&quot;: 87671,</span>
<span class="term-fg31">-	&#47;&#47;  	&quot;StorageClass&quot;: &quot;STANDARD&quot;</span>
<span class="term-fg31">-	&#47;&#47;  }</span>
<span class="term-fg31">-	resp, err := client.GetObject(ctx, &amp;s3.GetObjectInput{Bucket: &amp;bucketName, Key: &amp;fileName})</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	defer resp.Body.Close()</span>
<span class="term-fg31">-	response := snaptype.WebSeedsFromProvider{}</span>
<span class="term-fg31">-	if err := toml.NewDecoder(resp.Body).Decode(&amp;response); err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return response, nil</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-func (d *WebSeeds) callTorrentHttpProvider(ctx context.Context, url *url.URL) ([]byte, error) {</span>
<span class="term-fg32">+func (d *WebSeeds) callTorrentUrlProvider(ctx context.Context, url *url.URL) ([]byte, error) {</span>
 	request, err := http.NewRequest(http.MethodGet, url.String(), nil)
 	if err != nil {
 		return nil, err</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-87ed2535129ec48be4f7da20" role="button"
                   aria-expanded="false" aria-controls="id-87ed2535129ec48be4f7da20">
                    <code>erigon-lib/go.mod</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/go.mod" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/go.mod" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-23</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-87ed2535129ec48be4f7da20"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;go.mod bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;go.mod</span>
<span class="term-fg1">index e419bc240babb8485a85ca11e0fd0de37fe1e80d..558cfe03d0dda44838a3c9b6fda561b875a907d7 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;go.mod</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;go.mod</span>
<span class="term-fg36">@@ -1,10 +1,9 @@</span>
 module github.com&#47;ledgerwatch&#47;erigon-lib
&nbsp;
<span class="term-fg31">-go 1.20</span>
<span class="term-fg32">+go 1.19</span>
&nbsp;
 require (
<span class="term-fg31">-	github.com&#47;erigontech&#47;mdbx-go v0.27.19</span>
<span class="term-fg31">-	github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084</span>
<span class="term-fg32">+	github.com&#47;erigontech&#47;mdbx-go v0.27.17</span>
 	github.com&#47;ledgerwatch&#47;interfaces v0.0.0-20231011121315-f58b806039f0
 	github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0
 	github.com&#47;ledgerwatch&#47;secp256k1 v1.0.0
<span class="term-fg36">@@ -17,10 +16,6 @@</span> 	github.com&#47;anacrolix&#47;dht&#47;v2 v2.20.0
 	github.com&#47;anacrolix&#47;go-libutp v1.3.1
 	github.com&#47;anacrolix&#47;log v0.14.3-0.20230823030427-4b296d71a6b4
 	github.com&#47;anacrolix&#47;torrent v1.52.6-0.20230926121951-11833b45cfbe
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2</span>
 	github.com&#47;c2h5oh&#47;datasize v0.0.0-20220606134207-859f65c6625b
 	github.com&#47;crate-crypto&#47;go-kzg-4844 v0.3.0
 	github.com&#47;deckarep&#47;golang-set&#47;v2 v2.3.1
<span class="term-fg36">@@ -43,7 +38,7 @@</span> 	golang.org&#47;x&#47;exp v0.0.0-20230905200255-921286631fa9
 	golang.org&#47;x&#47;sync v0.4.0
 	golang.org&#47;x&#47;sys v0.13.0
 	golang.org&#47;x&#47;time v0.3.0
<span class="term-fg31">-	google.golang.org&#47;grpc v1.59.0</span>
<span class="term-fg32">+	google.golang.org&#47;grpc v1.58.3</span>
 	google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0
 	google.golang.org&#47;protobuf v1.31.0
 )
<span class="term-fg36">@@ -63,20 +58,6 @@</span> 	github.com&#47;anacrolix&#47;stm v0.4.1-0.20221221005312-96d17df0e496 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;sync v0.4.0 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;upnp v0.1.3-0.20220123035249-922794e51c96 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;utp v0.1.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;smithy-go v1.15.0 &#47;&#47; indirect</span>
 	github.com&#47;bahlo&#47;generic-list-go v0.2.0 &#47;&#47; indirect
 	github.com&#47;benbjohnson&#47;immutable v0.4.1-0.20221220213129-8932b999621d &#47;&#47; indirect
 	github.com&#47;bits-and-blooms&#47;bitset v1.7.0 &#47;&#47; indirect
<span class="term-fg36">@@ -128,7 +109,7 @@</span> 	golang.org&#47;x&#47;mod v0.13.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;net v0.17.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;text v0.13.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;tools v0.14.0 &#47;&#47; indirect
<span class="term-fg31">-	google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d &#47;&#47; indirect</span>
<span class="term-fg32">+	google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98 &#47;&#47; indirect</span>
 	gopkg.in&#47;yaml.v3 v3.0.1 &#47;&#47; indirect
 	modernc.org&#47;libc v1.24.1 &#47;&#47; indirect
 	modernc.org&#47;mathutil v1.6.0 &#47;&#47; indirect
<span class="term-fg36">@@ -137,3 +118,7 @@</span> 	modernc.org&#47;sqlite v1.26.0 &#47;&#47; indirect
 	rsc.io&#47;tmplfunc v0.0.3 &#47;&#47; indirect
 	zombiezen.com&#47;go&#47;sqlite v0.13.1 &#47;&#47; indirect
 )
<span class="term-fg32">+</span>
<span class="term-fg32">+replace github.com&#47;ledgerwatch&#47;interfaces =&gt; github.com&#47;bobanetwork&#47;v3-erigon-interfaces v0.0.0-20231016141625-3f56f9c7c5ce</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; replace github.com&#47;ledgerwatch&#47;interfaces =&gt; ..&#47;erigon-interfaces</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-111e174432e81ad8e7d91663" role="button"
                   aria-expanded="false" aria-controls="id-111e174432e81ad8e7d91663">
                    <code>erigon-lib/go.sum</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/go.sum" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/go.sum" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-49</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-111e174432e81ad8e7d91663"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;go.sum bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;go.sum</span>
<span class="term-fg1">index a087d5ba2b72fc15c6ce8f1ea97e0fbc00a1fcb1..ceaa0584845d763cab24c298f8cd46c248bdd0aa 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;go.sum</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;go.sum</span>
<span class="term-fg36">@@ -80,42 +80,6 @@</span> github.com&#47;anacrolix&#47;upnp v0.1.3-0.20220123035249-922794e51c96&#47;go.mod h1:Wa6n8cYIdaG35x15aH3Zy6d03f7P728QfdcDeD&#47;IEOs=
 github.com&#47;anacrolix&#47;utp v0.1.0 h1:FOpQOmIwYsnENnz7tAGohA+r6iXpRjrq8ssKSre2Cp4=
 github.com&#47;anacrolix&#47;utp v0.1.0&#47;go.mod h1:MDwc+vsGEq7RMw6lr2GKOEqjWny5hO5OZXRVNaBJ2Dk=
 github.com&#47;apache&#47;thrift v0.12.0&#47;go.mod h1:cp2SuWMxlEZw2r+iP2GNCdIi4C1qmUzdZFSVb+bacwQ=
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2 h1:+LXZ0sgo8quN9UOKXXzAWRT3FWd4NxeXWOZom9pE7GA=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2&#47;go.mod h1:ErQhvNuEMhJjweavOYhxVkn2RUx7kQXVATHrjKtxIpM=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14 h1:Sc82v7tDQ&#47;vdU1WtuSyzZ1I7y&#47;68j&#47;&#47;HJ6uozND1IDs=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14&#47;go.mod h1:9NCTOURS8OpxvoAVHq79LK81&#47;zC78hfRWFn+aL0SPcY=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0 h1:AdzDvwH6dWuVARCl3RTLGRc4Ogy+N7yLFxVxXe1ClQ0=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0&#47;go.mod h1:ZwDUgFnQgsazQTnWfeLWk5GjeqTQTL8lMkoE1UXzxdE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43 h1:LU8vo40zBlo3R7bAvBVy&#47;ku4nxGEyZe9N8MqAeFTzF8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43&#47;go.mod h1:zWJBz1Yf1ZtX5NGax9ZdNjhhI4rgjfgsyk6vTY1yfVg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13 h1:PIktER+hwIG286DqXyvVENjgLTAwGgoeriLDD5C+YlQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13&#47;go.mod h1:f&#47;Ib&#47;qYjhV2&#47;qdsf79H3QP&#47;eRE4AkVyEf6sk7XfZ1tg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43 h1:nFBQlGtkbPzp&#47;NjZLuFxRqmT91rLJkgvsEQs68h962Y=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43&#47;go.mod h1:auo+PiyLl0n1l8A0e8RIeR8tOzYPfZZH&#47;JNlrJ8igTQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37 h1:JRVhO25+r3ar2mKGP7E0LDl8K9&#47;G36gjlqca5iQbaqc=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37&#47;go.mod h1:Qe+2KtKml+FEsQF&#47;DHmDV+xjtche&#47;hwoF75EG4UlHW8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45 h1:hze8YsjSh8Wl1rYa1CJpRmXP21BvOBuc76YhW0HsuQ4=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45&#47;go.mod h1:lD5M20o09&#47;LCuQ2mE62Mb&#47;iSdSlCNuj6H5ci7tW7OsE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6 h1:wmGLw2i8ZTlHLw7a9ULGfQbuccw8uIiNr6sol5bFzc8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6&#47;go.mod h1:Q0Hq2X&#47;NuL7z8b1Dww8rmOFl+jzusKEcyvkKspwdpyc=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15 h1:7R8uRYyXzdD71KWVCL78lJZltah6VVznXBazvKjfH58=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15&#47;go.mod h1:26SQUPcTNgV1Tapwdt4a1rOsYRsnBsJHLMPoxK2b0d8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38 h1:skaFGzv+3kA+v2BPKhuekeb1Hbb105+44r8ASC+q5SE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38&#47;go.mod h1:epIZoRSSbRIwLPJU5F+OldHhwZPBdpDeQkRdCeY3+00=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37 h1:WWZA&#47;I2K4ptBS1kg0kV1JbBtG&#47;umed0vwHRrmcr9z7k=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37&#47;go.mod h1:vBmDnwWXWxNPFRMmG2m&#47;3MKOe+xEcMDo1tanpaWCcck=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6 h1:9ulSU5ClouoPIYhDQdg9tpl83d5Yb91PXTKK+17q+ow=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6&#47;go.mod h1:lnc2taBsR9nTlz9meD+lhFZZ9EWY712QHrRflWpTcOA=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2 h1:Ll5&#47;YVCOzRB+gxPqs2uD0R7&#47;MyATC0w85626glSKmp4=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2&#47;go.mod h1:Zjfqt7KhQK+PO1bbOsFNzKgaq7TcxzmEoDWN8lM0qzQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2 h1:JuPGc7IkOP4AaqcZSIcyqLpFSqBWK32rM9+a1g6u73k=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2&#47;go.mod h1:gsL4keucRCgW+xA85ALBpRFfdSLH4kHOVSnLMSuBECo=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 h1:HFiiRkf1SdaAmV3&#47;BHOFZ9DjFynPHj8G&#47;UIO1lQS+fk=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3&#47;go.mod h1:a7bHA82fyUXOm+ZSWKU6PIoBxrjSprdLoM8xPYvzYVg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 h1:0BkLfgeDjfZnZ+MhB3ONb01u9pwFYTCZVhlsSSBvlbU=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2&#47;go.mod h1:Eows6e1uQEsc4ZaHANmsPRzAKcVDrcmjjWiih2+HUUQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;smithy-go v1.15.0 h1:PS&#47;durmlzvAFpQHDs4wi4sNNP9ExsqZh6IlfdHXgKK8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;smithy-go v1.15.0&#47;go.mod h1:Tg+OJXh4MB2R&#47;uN61Ko2f6hTZwB&#47;ZYGOtib8J3gBHzA=</span>
 github.com&#47;bahlo&#47;generic-list-go v0.2.0 h1:5sz&#47;EEAK+ls5wF+NeqDpk5+iNdMDXrh3z3nPnH1Wvgk=
 github.com&#47;bahlo&#47;generic-list-go v0.2.0&#47;go.mod h1:2KvAjgMlE5NNynlg&#47;5iLrrCCZ2+5xWbdbCW3pNTGyYg=
 github.com&#47;benbjohnson&#47;clock v1.1.0&#47;go.mod h1:J11&#47;hYXuz8f4ySSvYwY0FKfm+ezbsZBKZxNJlLklBHA=
<span class="term-fg36">@@ -128,6 +92,8 @@</span> github.com&#47;beorn7&#47;perks v1.0.1&#47;go.mod h1:G2ZrVWU2WbWT9wwq4&#47;hrbKbnv&#47;1ERSJQ0ibhJ6rlkpw=
 github.com&#47;bits-and-blooms&#47;bitset v1.2.0&#47;go.mod h1:gIdJ4wp64HaoK2YrL1Q5&#47;N7Y16edYb8uY+O0FJTyyDA=
 github.com&#47;bits-and-blooms&#47;bitset v1.7.0 h1:YjAGVd3XmtK9ktAbX8Zg2g2PwLIMjGREZJHlV4j7NEo=
 github.com&#47;bits-and-blooms&#47;bitset v1.7.0&#47;go.mod h1:gIdJ4wp64HaoK2YrL1Q5&#47;N7Y16edYb8uY+O0FJTyyDA=
<span class="term-fg32">+github.com&#47;bobanetwork&#47;v3-erigon-interfaces v0.0.0-20231016141625-3f56f9c7c5ce h1:9F9EgLzZJYpH8KRtmHo4j3oDi&#47;NSL7W115Lee38CeHg=</span>
<span class="term-fg32">+github.com&#47;bobanetwork&#47;v3-erigon-interfaces v0.0.0-20231016141625-3f56f9c7c5ce&#47;go.mod h1:ugQv1QllJzBny3cKZKxUrSnykkjkBgm27eQM6dnGAcc=</span>
 github.com&#47;bradfitz&#47;iter v0.0.0-20140124041915-454541ec3da2&#47;go.mod h1:PyRFw1Lt2wKX4ZVSQ2mk+PeDa1rxyObEDlApuIsUKuo=
 github.com&#47;bradfitz&#47;iter v0.0.0-20190303215204-33e6a9893b0c&#47;go.mod h1:PyRFw1Lt2wKX4ZVSQ2mk+PeDa1rxyObEDlApuIsUKuo=
 github.com&#47;bradfitz&#47;iter v0.0.0-20191230175014-e8f45d346db8 h1:GKTyiRCL6zVf5wWaqKnf+7Qs6GbEPfd4iMOitWzXJx8=
<span class="term-fg36">@@ -164,8 +130,8 @@</span> github.com&#47;envoyproxy&#47;go-control-plane v0.9.0&#47;go.mod h1:YTl&#47;9mNaCwkRvm6d1a2C3ymFceY&#47;DCBVvsKhRF0iEA4=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.1-0.20191026205805-5f8ba28d4473&#47;go.mod h1:YTl&#47;9mNaCwkRvm6d1a2C3ymFceY&#47;DCBVvsKhRF0iEA4=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.4&#47;go.mod h1:6rpuAdCZL397s3pYoYcLgu1mIlRU8Am5FuJP05cCM98=
 github.com&#47;envoyproxy&#47;protoc-gen-validate v0.1.0&#47;go.mod h1:iSmxcyjqTsJpI2R4NaDN7+kN2VEUnK&#47;pcBlmesArF7c=
<span class="term-fg31">-github.com&#47;erigontech&#47;mdbx-go v0.27.19 h1:3jugN7wNmVZ4zDk4heLMPAGuOXuCG&#47;0&#47;DfzjlGB48kk=</span>
<span class="term-fg31">-github.com&#47;erigontech&#47;mdbx-go v0.27.19&#47;go.mod h1:FAMxbOgqOnRDx51j8HjuJZIgznbDwjX7LItd+&#47;UWyA4=</span>
<span class="term-fg32">+github.com&#47;erigontech&#47;mdbx-go v0.27.17 h1:+LOuGmdrD74psBVHDaS3cFXzI9tTSfLcUvOUtMwX2Ok=</span>
<span class="term-fg32">+github.com&#47;erigontech&#47;mdbx-go v0.27.17&#47;go.mod h1:FAMxbOgqOnRDx51j8HjuJZIgznbDwjX7LItd+&#47;UWyA4=</span>
 github.com&#47;frankban&#47;quicktest v1.9.0&#47;go.mod h1:ui7WezCLWMWxVWr1GETZY3smRy0G4KWq9vcPtJmFl7Y=
 github.com&#47;frankban&#47;quicktest v1.14.6 h1:7Xjx+VpznH+oBnejlPUj8oUpdxnVs4f8XU8WnHkI4W8=
 github.com&#47;fsnotify&#47;fsnotify v1.4.7&#47;go.mod h1:jwhsz4b93w&#47;PPRr&#47;qN1Yymfu8t87LnFCMoQvtojpjFo=
<span class="term-fg36">@@ -229,7 +195,6 @@</span> github.com&#47;google&#47;go-cmp v0.3.0&#47;go.mod h1:8QqcDgzrUqlUb&#47;G2PQTWiueGozuR1884gddMywk6iLU=
 github.com&#47;google&#47;go-cmp v0.3.1&#47;go.mod h1:8QqcDgzrUqlUb&#47;G2PQTWiueGozuR1884gddMywk6iLU=
 github.com&#47;google&#47;go-cmp v0.4.0&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
 github.com&#47;google&#47;go-cmp v0.5.5&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
<span class="term-fg31">-github.com&#47;google&#47;go-cmp v0.5.8&#47;go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=</span>
 github.com&#47;google&#47;go-cmp v0.5.9 h1:O2Tfq5qg4qc4AmwVlvv0oLiVAGB7enBSJ2x2DqQFi38=
 github.com&#47;google&#47;gofuzz v1.0.0&#47;go.mod h1:dBl0BpW6vV&#47;+mYPU4Po3pmUjxk6FQPldtuIdl&#47;M65Eg=
 github.com&#47;google&#47;subcommands v1.2.0&#47;go.mod h1:ZjhPrFU+Olkh9WazFPsl27BQ4UPiG37m3yTrtFlrHVk=
<span class="term-fg36">@@ -260,8 +225,6 @@</span> github.com&#47;huandu&#47;xstrings v1.3.1&#47;go.mod h1:y5&#47;lhBue+AyNmUVz9RLU9xbLR0o4KIIExikq4ovT0aE=
 github.com&#47;huandu&#47;xstrings v1.3.2&#47;go.mod h1:y5&#47;lhBue+AyNmUVz9RLU9xbLR0o4KIIExikq4ovT0aE=
 github.com&#47;huandu&#47;xstrings v1.4.0 h1:D17IlohoQq4UcpqD7fDk80P7l+lwAmlFaBHgOipl2FU=
 github.com&#47;huandu&#47;xstrings v1.4.0&#47;go.mod h1:y5&#47;lhBue+AyNmUVz9RLU9xbLR0o4KIIExikq4ovT0aE=
<span class="term-fg31">-github.com&#47;jmespath&#47;go-jmespath v0.4.0&#47;go.mod h1:T8mJZnbsbmF+m6zOOFylbeCJqk5+pHWvzYPziyZiYoo=</span>
<span class="term-fg31">-github.com&#47;jmespath&#47;go-jmespath&#47;internal&#47;testify v1.5.1&#47;go.mod h1:L3OGu8Wl2&#47;fWfCI6z80xFu9LTZmf1ZRjMHUOPmWr69U=</span>
 github.com&#47;json-iterator&#47;go v1.1.6&#47;go.mod h1:+SdeFBvtyEkXs7REEP0seUULqWtbJapLOCVDaaPEHmU=
 github.com&#47;json-iterator&#47;go v1.1.9&#47;go.mod h1:KdQUCv79m&#47;52Kvf8AW2vK1V8akMuk1QjK&#47;uOdHXbAo4=
 github.com&#47;jtolds&#47;gls v4.2.1+incompatible&#47;go.mod h1:QJZ7F&#47;aHp+rZTRtaJ1ow&#47;lLfFfVYBRgL+9YlvaHOwJU=
<span class="term-fg36">@@ -280,10 +243,6 @@</span> github.com&#47;kr&#47;text v0.1.0&#47;go.mod h1:4Jbv+DJW3UT&#47;LiOwJeYQe1efqtUx&#47;iVham&#47;4vfdArNI=
 github.com&#47;kr&#47;text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=
 github.com&#47;kr&#47;text v0.2.0&#47;go.mod h1:eLer722TekiGuMkidMxC&#47;pM04lWEeraHUUmBw8l2grE=
 github.com&#47;leanovate&#47;gopter v0.2.9 h1:fQjYxZaynp97ozCzfOyOuAGOU4aU&#47;z37zf&#47;tOujFk7c=
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084 h1:5FFMJ67en&#47;bG3w335e3KW4fcqX65k6Xel6DsoAH7Mho=</span>
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084&#47;go.mod h1:3AuPxZc85jkehh&#47;HA9h8gabv5MSi3kb&#47;ddtzBsTVJFo=</span>
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;interfaces v0.0.0-20231011121315-f58b806039f0 h1:7z6cyoCKP6qxtKSO74eAY6XiHWKaOi+melvPeMCXLl8=</span>
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;interfaces v0.0.0-20231011121315-f58b806039f0&#47;go.mod h1:ugQv1QllJzBny3cKZKxUrSnykkjkBgm27eQM6dnGAcc=</span>
 github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0 h1:iDwrXe0PVwBC68Dd94YSsHbMgQ3ufsgjzXtFNFVZFRk=
 github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0&#47;go.mod h1:EiAY6upmI&#47;6LkNhOVxb4eVsmsP11HZCnZ3PlJMjYiqE=
 github.com&#47;ledgerwatch&#47;secp256k1 v1.0.0 h1:Usvz87YoTG0uePIV8woOof5cQnLXGYa162rFf3YnwaQ=
<span class="term-fg36">@@ -603,8 +562,8 @@</span> google.golang.org&#47;genproto v0.0.0-20190307195333-5fe7a883aa19&#47;go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5&#47;KpmUdxsrq26oE=
 google.golang.org&#47;genproto v0.0.0-20190425155659-357c62f0e4bb&#47;go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5&#47;KpmUdxsrq26oE=
 google.golang.org&#47;genproto v0.0.0-20190819201941-24fa4b261c55&#47;go.mod h1:DMBHOl98Agz4BDEuKkezgsaosCRResVns1a3J2ZsMNc=
 google.golang.org&#47;genproto v0.0.0-20200423170343-7949de9c1215&#47;go.mod h1:55QSHmfGQM9UVYDPBsyGGes0y52j32PQ3BqQfXhyH3c=
<span class="term-fg31">-google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d h1:uvYuEyMHKNt+lT4K3bN6fGswmK8qSvcreM3BwjDh+y4=</span>
<span class="term-fg31">-google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d&#47;go.mod h1:+Bk1OCOj40wS2hwAMA+aCW9ypzm63QTBBHp6lQ3p+9M=</span>
<span class="term-fg32">+google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98 h1:bVf09lpb+OJbByTj913DRJioFFAjf&#47;ZGxEz7MajTp2U=</span>
<span class="term-fg32">+google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98&#47;go.mod h1:TUfxEVdsvPg18p6AslUXFoLdpED4oBnGwyqk3dV1XzM=</span>
 google.golang.org&#47;grpc v1.17.0&#47;go.mod h1:6QZJwpn2B+Zp71q&#47;5VxRsJ6NXXVCE5NRUHRo+f3cWCs=
 google.golang.org&#47;grpc v1.19.0&#47;go.mod h1:mqu4LbDTu4XGKhr4mRzUsmM4RtVoemTSY81AxZiDr8c=
 google.golang.org&#47;grpc v1.20.1&#47;go.mod h1:10oTOabMzJvdu6&#47;UiuZezV6QK5dSlG84ov&#47;aaiqXj38=
<span class="term-fg36">@@ -612,8 +571,8 @@</span> google.golang.org&#47;grpc v1.23.0&#47;go.mod h1:Y5yQAOtifL1yxbo5wqy6BxZv8vAUGQwXBOALyacEbxg=
 google.golang.org&#47;grpc v1.25.1&#47;go.mod h1:c3i+UQWmh7LiEpx4sFZnkU36qjEYZ0imhYfXVyQciAY=
 google.golang.org&#47;grpc v1.27.0&#47;go.mod h1:qbnxyOmOxrQa7FizSgH+ReBfzJrCY1pSN7KXBS8abTk=
 google.golang.org&#47;grpc v1.29.1&#47;go.mod h1:itym6AZVZYACWQqET3MqgPpjcuV5QH3BxFS3IjizoKk=
<span class="term-fg31">-google.golang.org&#47;grpc v1.59.0 h1:Z5Iec2pjwb+LEOqzpB2MR12&#47;eKFhDPhuqW91O+4bwUk=</span>
<span class="term-fg31">-google.golang.org&#47;grpc v1.59.0&#47;go.mod h1:aUPDwccQo6OTjy7Hct4AfBPD1GptF4fyUjIkQ9YtF98=</span>
<span class="term-fg32">+google.golang.org&#47;grpc v1.58.3 h1:BjnpXut1btbtgN&#47;6sp+brB2Kbm2LjNXnidYujAVbSoQ=</span>
<span class="term-fg32">+google.golang.org&#47;grpc v1.58.3&#47;go.mod h1:tgX3ZQDlNJGU96V6yHh1T&#47;JeoBQ2TXdr43YbYSsCJk0=</span>
 google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0 h1:rNBFJjBCOgVr9pWD7rs&#47;knKL4FRTKgpZmsRfV214zcA=
 google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0&#47;go.mod h1:Dk1tviKTvMCz5tvh7t+fh94dhmQVHuCt2OzJB3CTW9Y=
 google.golang.org&#47;protobuf v0.0.0-20200109180630-ec00e32a8dfd&#47;go.mod h1:DFci5gLYBciE7Vtevhsrf46CRTquxDuWsQurQQe4oz8=</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-edc418330ca85e9068ca65de" role="button"
                   aria-expanded="false" aria-controls="id-edc418330ca85e9068ca65de">
                    <code>erigon-lib/gointerfaces/downloader/downloader.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/downloader/downloader.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/downloader/downloader.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-edc418330ca85e9068ca65de"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader.pb.go</span>
<span class="term-fg1">index 773282e315b8e7d79b37a90a14f3a0b69c625878..beddbbca423357ebe44ce164fc0a84acf870ad7d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: downloader&#47;downloader.proto
&nbsp;
 package downloader</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-75ef9029c110c55f8d0f6411" role="button"
                   aria-expanded="false" aria-controls="id-75ef9029c110c55f8d0f6411">
                    <code>erigon-lib/gointerfaces/downloader/downloader_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/downloader/downloader_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/downloader/downloader_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-75ef9029c110c55f8d0f6411"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader_grpc.pb.go</span>
<span class="term-fg1">index 831743bbc7135194f8af78e647f3844b1ca5df9c..8a6a60a7d84296abb05aa692162bfbc6d804116c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;downloader&#47;downloader_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: downloader&#47;downloader.proto
&nbsp;
 package downloader</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ea438d0818cc9000432c7bae" role="button"
                   aria-expanded="false" aria-controls="id-ea438d0818cc9000432c7bae">
                    <code>erigon-lib/gointerfaces/execution/execution.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/execution/execution.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/execution/execution.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+165</span></div>
                        <div class="text-start"><span class="text-danger">-133</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ea438d0818cc9000432c7bae"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution.pb.go</span>
<span class="term-fg1">index c331568493bd18402e7a33f003e7d811d7b60d76..839a7fd53478b4888c4055614841da3b07f573f6 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: execution&#47;execution.proto
&nbsp;
 package execution
<span class="term-fg36">@@ -1074,6 +1074,10 @@</span> 	PrevRandao            *types.H256         `protobuf:&quot;bytes,3,opt,name=prev_randao,json=prevRandao,proto3&quot; json:&quot;prev_randao,omitempty&quot;`
 	SuggestedFeeRecipient *types.H160         `protobuf:&quot;bytes,4,opt,name=suggested_fee_recipient,json=suggestedFeeRecipient,proto3&quot; json:&quot;suggested_fee_recipient,omitempty&quot;`
 	Withdrawals           []*types.Withdrawal `protobuf:&quot;bytes,5,rep,name=withdrawals,proto3&quot; json:&quot;withdrawals,omitempty&quot;`                                                            &#47;&#47; added in Shapella (EIP-4895)
 	ParentBeaconBlockRoot *types.H256         `protobuf:&quot;bytes,6,opt,name=parent_beacon_block_root,json=parentBeaconBlockRoot,proto3,oneof&quot; json:&quot;parent_beacon_block_root,omitempty&quot;` &#47;&#47; added in Dencun (EIP-4788)
<span class="term-fg32">+	&#47;&#47; Optimism support requires these fields, offset starting at 101 to avoid future conflicts</span>
<span class="term-fg32">+	Transactions [][]byte `protobuf:&quot;bytes,101,rep,name=transactions,proto3&quot; json:&quot;transactions,omitempty&quot;`</span>
<span class="term-fg32">+	NoTxPool     bool     `protobuf:&quot;varint,102,opt,name=noTxPool,proto3&quot; json:&quot;noTxPool,omitempty&quot;`</span>
<span class="term-fg32">+	GasLimit     *uint64  `protobuf:&quot;varint,103,opt,name=gasLimit,proto3,oneof&quot; json:&quot;gasLimit,omitempty&quot;`</span>
 }
&nbsp;
 func (x *AssembleBlockRequest) Reset() {
<span class="term-fg36">@@ -1148,6 +1152,27 @@</span> 	if x != nil {
 		return x.ParentBeaconBlockRoot
 	}
 	return nil
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (x *AssembleBlockRequest) GetTransactions() [][]byte {</span>
<span class="term-fg32">+	if x != nil {</span>
<span class="term-fg32">+		return x.Transactions</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (x *AssembleBlockRequest) GetNoTxPool() bool {</span>
<span class="term-fg32">+	if x != nil {</span>
<span class="term-fg32">+		return x.NoTxPool</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return false</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (x *AssembleBlockRequest) GetGasLimit() uint64 {</span>
<span class="term-fg32">+	if x != nil &amp;&amp; x.GasLimit != nil {</span>
<span class="term-fg32">+		return *x.GasLimit</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return 0</span>
 }
&nbsp;
 type AssembleBlockResponse struct {
<span class="term-fg36">@@ -1790,7 +1815,7 @@</span> 	0x69, 0x64, 0x61, 0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x12, 0x1f,
 	0x0a, 0x04, 0x68, 0x61, 0x73, 0x68, 0x18, 0x01, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x0b, 0x2e, 0x74,
 	0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32, 0x35, 0x36, 0x52, 0x04, 0x68, 0x61, 0x73, 0x68, 0x12,
 	0x16, 0x0a, 0x06, 0x6e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x18, 0x02, 0x20, 0x01, 0x28, 0x04, 0x52,
<span class="term-fg31">-	0x06, 0x6e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x22, 0xf2, 0x02, 0x0a, 0x14, 0x41, 0x73, 0x73, 0x65,</span>
<span class="term-fg32">+	0x06, 0x6e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x22, 0xe0, 0x03, 0x0a, 0x14, 0x41, 0x73, 0x73, 0x65,</span>
 	0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74,
 	0x12, 0x2c, 0x0a, 0x0b, 0x70, 0x61, 0x72, 0x65, 0x6e, 0x74, 0x5f, 0x68, 0x61, 0x73, 0x68, 0x18,
 	0x01, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32,
<span class="term-fg36">@@ -1811,140 +1836,147 @@</span> 	0x77, 0x61, 0x6c, 0x73, 0x12, 0x49, 0x0a, 0x18, 0x70, 0x61, 0x72, 0x65, 0x6e, 0x74, 0x5f, 0x62,
 	0x65, 0x61, 0x63, 0x6f, 0x6e, 0x5f, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x5f, 0x72, 0x6f, 0x6f, 0x74,
 	0x18, 0x06, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48,
 	0x32, 0x35, 0x36, 0x48, 0x00, 0x52, 0x15, 0x70, 0x61, 0x72, 0x65, 0x6e, 0x74, 0x42, 0x65, 0x61,
<span class="term-fg31">-	0x63, 0x6f, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x6f, 0x6f, 0x74, 0x88, 0x01, 0x01, 0x42,</span>
<span class="term-fg31">-	0x1b, 0x0a, 0x19, 0x5f, 0x70, 0x61, 0x72, 0x65, 0x6e, 0x74, 0x5f, 0x62, 0x65, 0x61, 0x63, 0x6f,</span>
<span class="term-fg31">-	0x6e, 0x5f, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x5f, 0x72, 0x6f, 0x6f, 0x74, 0x22, 0x3b, 0x0a, 0x15,</span>
<span class="term-fg31">-	0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x73,</span>
<span class="term-fg31">-	0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x0e, 0x0a, 0x02, 0x69, 0x64, 0x18, 0x01, 0x20, 0x01, 0x28,</span>
<span class="term-fg31">-	0x04, 0x52, 0x02, 0x69, 0x64, 0x12, 0x12, 0x0a, 0x04, 0x62, 0x75, 0x73, 0x79, 0x18, 0x02, 0x20,</span>
<span class="term-fg31">-	0x01, 0x28, 0x08, 0x52, 0x04, 0x62, 0x75, 0x73, 0x79, 0x22, 0x2a, 0x0a, 0x18, 0x47, 0x65, 0x74,</span>
<span class="term-fg31">-	0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65,</span>
<span class="term-fg31">-	0x71, 0x75, 0x65, 0x73, 0x74, 0x12, 0x0e, 0x0a, 0x02, 0x69, 0x64, 0x18, 0x01, 0x20, 0x01, 0x28,</span>
<span class="term-fg31">-	0x04, 0x52, 0x02, 0x69, 0x64, 0x22, 0xc1, 0x01, 0x0a, 0x12, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62,</span>
<span class="term-fg31">-	0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x44, 0x61, 0x74, 0x61, 0x12, 0x44, 0x0a, 0x11,</span>
<span class="term-fg31">-	0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x5f, 0x70, 0x61, 0x79, 0x6c, 0x6f, 0x61,</span>
<span class="term-fg31">-	0x64, 0x18, 0x01, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x17, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e,</span>
<span class="term-fg31">-	0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64,</span>
<span class="term-fg31">-	0x52, 0x10, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x50, 0x61, 0x79, 0x6c, 0x6f,</span>
<span class="term-fg31">-	0x61, 0x64, 0x12, 0x2c, 0x0a, 0x0b, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x5f, 0x76, 0x61, 0x6c, 0x75,</span>
<span class="term-fg31">-	0x65, 0x18, 0x02, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e,</span>
<span class="term-fg31">-	0x48, 0x32, 0x35, 0x36, 0x52, 0x0a, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x56, 0x61, 0x6c, 0x75, 0x65,</span>
<span class="term-fg31">-	0x12, 0x37, 0x0a, 0x0c, 0x62, 0x6c, 0x6f, 0x62, 0x73, 0x5f, 0x62, 0x75, 0x6e, 0x64, 0x6c, 0x65,</span>
<span class="term-fg31">-	0x18, 0x03, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x14, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x42,</span>
<span class="term-fg31">-	0x6c, 0x6f, 0x62, 0x73, 0x42, 0x75, 0x6e, 0x64, 0x6c, 0x65, 0x56, 0x31, 0x52, 0x0b, 0x62, 0x6c,</span>
<span class="term-fg31">-	0x6f, 0x62, 0x73, 0x42, 0x75, 0x6e, 0x64, 0x6c, 0x65, 0x22, 0x70, 0x0a, 0x19, 0x47, 0x65, 0x74,</span>
<span class="term-fg31">-	0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65,</span>
<span class="term-fg31">-	0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x36, 0x0a, 0x04, 0x64, 0x61, 0x74, 0x61, 0x18, 0x01,</span>
<span class="term-fg31">-	0x20, 0x01, 0x28, 0x0b, 0x32, 0x1d, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x44,</span>
<span class="term-fg31">-	0x61, 0x74, 0x61, 0x48, 0x00, 0x52, 0x04, 0x64, 0x61, 0x74, 0x61, 0x88, 0x01, 0x01, 0x12, 0x12,</span>
<span class="term-fg31">-	0x0a, 0x04, 0x62, 0x75, 0x73, 0x79, 0x18, 0x02, 0x20, 0x01, 0x28, 0x08, 0x52, 0x04, 0x62, 0x75,</span>
<span class="term-fg31">-	0x73, 0x79, 0x42, 0x07, 0x0a, 0x05, 0x5f, 0x64, 0x61, 0x74, 0x61, 0x22, 0x46, 0x0a, 0x16, 0x47,</span>
<span class="term-fg32">+	0x63, 0x6f, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x6f, 0x6f, 0x74, 0x88, 0x01, 0x01, 0x12,</span>
<span class="term-fg32">+	0x22, 0x0a, 0x0c, 0x74, 0x72, 0x61, 0x6e, 0x73, 0x61, 0x63, 0x74, 0x69, 0x6f, 0x6e, 0x73, 0x18,</span>
<span class="term-fg32">+	0x65, 0x20, 0x03, 0x28, 0x0c, 0x52, 0x0c, 0x74, 0x72, 0x61, 0x6e, 0x73, 0x61, 0x63, 0x74, 0x69,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x73, 0x12, 0x1a, 0x0a, 0x08, 0x6e, 0x6f, 0x54, 0x78, 0x50, 0x6f, 0x6f, 0x6c, 0x18,</span>
<span class="term-fg32">+	0x66, 0x20, 0x01, 0x28, 0x08, 0x52, 0x08, 0x6e, 0x6f, 0x54, 0x78, 0x50, 0x6f, 0x6f, 0x6c, 0x12,</span>
<span class="term-fg32">+	0x1f, 0x0a, 0x08, 0x67, 0x61, 0x73, 0x4c, 0x69, 0x6d, 0x69, 0x74, 0x18, 0x67, 0x20, 0x01, 0x28,</span>
<span class="term-fg32">+	0x04, 0x48, 0x01, 0x52, 0x08, 0x67, 0x61, 0x73, 0x4c, 0x69, 0x6d, 0x69, 0x74, 0x88, 0x01, 0x01,</span>
<span class="term-fg32">+	0x42, 0x1b, 0x0a, 0x19, 0x5f, 0x70, 0x61, 0x72, 0x65, 0x6e, 0x74, 0x5f, 0x62, 0x65, 0x61, 0x63,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x5f, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x5f, 0x72, 0x6f, 0x6f, 0x74, 0x42, 0x0b, 0x0a,</span>
<span class="term-fg32">+	0x09, 0x5f, 0x67, 0x61, 0x73, 0x4c, 0x69, 0x6d, 0x69, 0x74, 0x22, 0x3b, 0x0a, 0x15, 0x41, 0x73,</span>
<span class="term-fg32">+	0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x73, 0x70, 0x6f,</span>
<span class="term-fg32">+	0x6e, 0x73, 0x65, 0x12, 0x0e, 0x0a, 0x02, 0x69, 0x64, 0x18, 0x01, 0x20, 0x01, 0x28, 0x04, 0x52,</span>
<span class="term-fg32">+	0x02, 0x69, 0x64, 0x12, 0x12, 0x0a, 0x04, 0x62, 0x75, 0x73, 0x79, 0x18, 0x02, 0x20, 0x01, 0x28,</span>
<span class="term-fg32">+	0x08, 0x52, 0x04, 0x62, 0x75, 0x73, 0x79, 0x22, 0x2a, 0x0a, 0x18, 0x47, 0x65, 0x74, 0x41, 0x73,</span>
<span class="term-fg32">+	0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71, 0x75,</span>
<span class="term-fg32">+	0x65, 0x73, 0x74, 0x12, 0x0e, 0x0a, 0x02, 0x69, 0x64, 0x18, 0x01, 0x20, 0x01, 0x28, 0x04, 0x52,</span>
<span class="term-fg32">+	0x02, 0x69, 0x64, 0x22, 0xc1, 0x01, 0x0a, 0x12, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65,</span>
<span class="term-fg32">+	0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x44, 0x61, 0x74, 0x61, 0x12, 0x44, 0x0a, 0x11, 0x65, 0x78,</span>
<span class="term-fg32">+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x5f, 0x70, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64, 0x18,</span>
<span class="term-fg32">+	0x01, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x17, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x45, 0x78,</span>
<span class="term-fg32">+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64, 0x52, 0x10,</span>
<span class="term-fg32">+	0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64,</span>
<span class="term-fg32">+	0x12, 0x2c, 0x0a, 0x0b, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x5f, 0x76, 0x61, 0x6c, 0x75, 0x65, 0x18,</span>
<span class="term-fg32">+	0x02, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32,</span>
<span class="term-fg32">+	0x35, 0x36, 0x52, 0x0a, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x56, 0x61, 0x6c, 0x75, 0x65, 0x12, 0x37,</span>
<span class="term-fg32">+	0x0a, 0x0c, 0x62, 0x6c, 0x6f, 0x62, 0x73, 0x5f, 0x62, 0x75, 0x6e, 0x64, 0x6c, 0x65, 0x18, 0x03,</span>
<span class="term-fg32">+	0x20, 0x01, 0x28, 0x0b, 0x32, 0x14, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x42, 0x6c, 0x6f,</span>
<span class="term-fg32">+	0x62, 0x73, 0x42, 0x75, 0x6e, 0x64, 0x6c, 0x65, 0x56, 0x31, 0x52, 0x0b, 0x62, 0x6c, 0x6f, 0x62,</span>
<span class="term-fg32">+	0x73, 0x42, 0x75, 0x6e, 0x64, 0x6c, 0x65, 0x22, 0x70, 0x0a, 0x19, 0x47, 0x65, 0x74, 0x41, 0x73,</span>
<span class="term-fg32">+	0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x73, 0x65, 0x12, 0x36, 0x0a, 0x04, 0x64, 0x61, 0x74, 0x61, 0x18, 0x01, 0x20, 0x01,</span>
<span class="term-fg32">+	0x28, 0x0b, 0x32, 0x1d, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x41,</span>
<span class="term-fg32">+	0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x44, 0x61, 0x74,</span>
<span class="term-fg32">+	0x61, 0x48, 0x00, 0x52, 0x04, 0x64, 0x61, 0x74, 0x61, 0x88, 0x01, 0x01, 0x12, 0x12, 0x0a, 0x04,</span>
<span class="term-fg32">+	0x62, 0x75, 0x73, 0x79, 0x18, 0x02, 0x20, 0x01, 0x28, 0x08, 0x52, 0x04, 0x62, 0x75, 0x73, 0x79,</span>
<span class="term-fg32">+	0x42, 0x07, 0x0a, 0x05, 0x5f, 0x64, 0x61, 0x74, 0x61, 0x22, 0x46, 0x0a, 0x16, 0x47, 0x65, 0x74,</span>
<span class="term-fg32">+	0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x61, 0x74, 0x63, 0x68, 0x52, 0x65, 0x73, 0x70, 0x6f,</span>
<span class="term-fg32">+	0x6e, 0x73, 0x65, 0x12, 0x2c, 0x0a, 0x06, 0x62, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x18, 0x01, 0x20,</span>
<span class="term-fg32">+	0x03, 0x28, 0x0b, 0x32, 0x14, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e,</span>
<span class="term-fg32">+	0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x42, 0x6f, 0x64, 0x79, 0x52, 0x06, 0x62, 0x6f, 0x64, 0x69, 0x65,</span>
<span class="term-fg32">+	0x73, 0x22, 0x3f, 0x0a, 0x18, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x79,</span>
<span class="term-fg32">+	0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x12, 0x23, 0x0a,</span>
<span class="term-fg32">+	0x06, 0x68, 0x61, 0x73, 0x68, 0x65, 0x73, 0x18, 0x01, 0x20, 0x03, 0x28, 0x0b, 0x32, 0x0b, 0x2e,</span>
<span class="term-fg32">+	0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32, 0x35, 0x36, 0x52, 0x06, 0x68, 0x61, 0x73, 0x68,</span>
<span class="term-fg32">+	0x65, 0x73, 0x22, 0x45, 0x0a, 0x17, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42,</span>
<span class="term-fg32">+	0x79, 0x52, 0x61, 0x6e, 0x67, 0x65, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x12, 0x14, 0x0a,</span>
<span class="term-fg32">+	0x05, 0x73, 0x74, 0x61, 0x72, 0x74, 0x18, 0x01, 0x20, 0x01, 0x28, 0x04, 0x52, 0x05, 0x73, 0x74,</span>
<span class="term-fg32">+	0x61, 0x72, 0x74, 0x12, 0x14, 0x0a, 0x05, 0x63, 0x6f, 0x75, 0x6e, 0x74, 0x18, 0x02, 0x20, 0x01,</span>
<span class="term-fg32">+	0x28, 0x04, 0x52, 0x05, 0x63, 0x6f, 0x75, 0x6e, 0x74, 0x22, 0x25, 0x0a, 0x0d, 0x52, 0x65, 0x61,</span>
<span class="term-fg32">+	0x64, 0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x14, 0x0a, 0x05, 0x72, 0x65,</span>
<span class="term-fg32">+	0x61, 0x64, 0x79, 0x18, 0x01, 0x20, 0x01, 0x28, 0x08, 0x52, 0x05, 0x72, 0x65, 0x61, 0x64, 0x79,</span>
<span class="term-fg32">+	0x22, 0x3b, 0x0a, 0x14, 0x46, 0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73,</span>
<span class="term-fg32">+	0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x23, 0x0a, 0x0d, 0x66, 0x72, 0x6f, 0x7a,</span>
<span class="term-fg32">+	0x65, 0x6e, 0x5f, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x18, 0x01, 0x20, 0x01, 0x28, 0x04, 0x52,</span>
<span class="term-fg32">+	0x0c, 0x66, 0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x2a, 0x71, 0x0a,</span>
<span class="term-fg32">+	0x0f, 0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x53, 0x74, 0x61, 0x74, 0x75, 0x73,</span>
<span class="term-fg32">+	0x12, 0x0b, 0x0a, 0x07, 0x53, 0x75, 0x63, 0x63, 0x65, 0x73, 0x73, 0x10, 0x00, 0x12, 0x0c, 0x0a,</span>
<span class="term-fg32">+	0x08, 0x42, 0x61, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x10, 0x01, 0x12, 0x0e, 0x0a, 0x0a, 0x54,</span>
<span class="term-fg32">+	0x6f, 0x6f, 0x46, 0x61, 0x72, 0x41, 0x77, 0x61, 0x79, 0x10, 0x02, 0x12, 0x12, 0x0a, 0x0e, 0x4d,</span>
<span class="term-fg32">+	0x69, 0x73, 0x73, 0x69, 0x6e, 0x67, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x10, 0x03, 0x12,</span>
<span class="term-fg32">+	0x15, 0x0a, 0x11, 0x49, 0x6e, 0x76, 0x61, 0x6c, 0x69, 0x64, 0x46, 0x6f, 0x72, 0x6b, 0x63, 0x68,</span>
<span class="term-fg32">+	0x6f, 0x69, 0x63, 0x65, 0x10, 0x04, 0x12, 0x08, 0x0a, 0x04, 0x42, 0x75, 0x73, 0x79, 0x10, 0x05,</span>
<span class="term-fg32">+	0x32, 0xbf, 0x09, 0x0a, 0x09, 0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x12, 0x4a,</span>
<span class="term-fg32">+	0x0a, 0x0c, 0x49, 0x6e, 0x73, 0x65, 0x72, 0x74, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x12, 0x1e,</span>
<span class="term-fg32">+	0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x49, 0x6e, 0x73, 0x65, 0x72,</span>
<span class="term-fg32">+	0x74, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1a,</span>
<span class="term-fg32">+	0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x49, 0x6e, 0x73, 0x65, 0x72,</span>
<span class="term-fg32">+	0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x12, 0x4b, 0x0a, 0x0d, 0x56, 0x61,</span>
<span class="term-fg32">+	0x6c, 0x69, 0x64, 0x61, 0x74, 0x65, 0x43, 0x68, 0x61, 0x69, 0x6e, 0x12, 0x1c, 0x2e, 0x65, 0x78,</span>
<span class="term-fg32">+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x56, 0x61, 0x6c, 0x69, 0x64, 0x61, 0x74, 0x69,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63,</span>
<span class="term-fg32">+	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x56, 0x61, 0x6c, 0x69, 0x64, 0x61, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg32">+	0x52, 0x65, 0x63, 0x65, 0x69, 0x70, 0x74, 0x12, 0x47, 0x0a, 0x10, 0x55, 0x70, 0x64, 0x61, 0x74,</span>
<span class="term-fg32">+	0x65, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x12, 0x15, 0x2e, 0x65, 0x78,</span>
<span class="term-fg32">+	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69,</span>
<span class="term-fg32">+	0x63, 0x65, 0x1a, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x46,</span>
<span class="term-fg32">+	0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x52, 0x65, 0x63, 0x65, 0x69, 0x70, 0x74,</span>
<span class="term-fg32">+	0x12, 0x52, 0x0a, 0x0d, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63,</span>
<span class="term-fg32">+	0x6b, 0x12, 0x1f, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x41, 0x73,</span>
<span class="term-fg32">+	0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71, 0x75, 0x65,</span>
<span class="term-fg32">+	0x73, 0x74, 0x1a, 0x20, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x41,</span>
<span class="term-fg32">+	0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x73, 0x65, 0x12, 0x5e, 0x0a, 0x11, 0x47, 0x65, 0x74, 0x41, 0x73, 0x73, 0x65, 0x6d,</span>
<span class="term-fg32">+	0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x12, 0x23, 0x2e, 0x65, 0x78, 0x65, 0x63,</span>
<span class="term-fg32">+	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c,</span>
<span class="term-fg32">+	0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x24,</span>
<span class="term-fg32">+	0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x41, 0x73,</span>
<span class="term-fg32">+	0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x73, 0x65, 0x12, 0x45, 0x0a, 0x0d, 0x43, 0x75, 0x72, 0x72, 0x65, 0x6e, 0x74, 0x48,</span>
<span class="term-fg32">+	0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65, 0x2e, 0x70,</span>
<span class="term-fg32">+	0x72, 0x6f, 0x74, 0x6f, 0x62, 0x75, 0x66, 0x2e, 0x45, 0x6d, 0x70, 0x74, 0x79, 0x1a, 0x1c, 0x2e,</span>
<span class="term-fg32">+	0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61,</span>
<span class="term-fg32">+	0x64, 0x65, 0x72, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x3f, 0x0a, 0x05, 0x47,</span>
<span class="term-fg32">+	0x65, 0x74, 0x54, 0x44, 0x12, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg32">+	0x2e, 0x47, 0x65, 0x74, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x52, 0x65, 0x71, 0x75, 0x65,</span>
<span class="term-fg32">+	0x73, 0x74, 0x1a, 0x18, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47,</span>
<span class="term-fg32">+	0x65, 0x74, 0x54, 0x44, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x47, 0x0a, 0x09,</span>
<span class="term-fg32">+	0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63,</span>
<span class="term-fg32">+	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74,</span>
<span class="term-fg32">+	0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74,</span>
<span class="term-fg32">+	0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x52, 0x65, 0x73,</span>
<span class="term-fg32">+	0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x43, 0x0a, 0x07, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x79,</span>
<span class="term-fg32">+	0x12, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74,</span>
<span class="term-fg32">+	0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1a,</span>
<span class="term-fg32">+	0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x42, 0x6f,</span>
<span class="term-fg32">+	0x64, 0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x59, 0x0a, 0x10, 0x47, 0x65,</span>
<span class="term-fg32">+	0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x79, 0x52, 0x61, 0x6e, 0x67, 0x65, 0x12, 0x22,</span>
<span class="term-fg32">+	0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x42, 0x6f,</span>
<span class="term-fg32">+	0x64, 0x69, 0x65, 0x73, 0x42, 0x79, 0x52, 0x61, 0x6e, 0x67, 0x65, 0x52, 0x65, 0x71, 0x75, 0x65,</span>
<span class="term-fg32">+	0x73, 0x74, 0x1a, 0x21, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47,</span>
 	0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x61, 0x74, 0x63, 0x68, 0x52, 0x65, 0x73,
<span class="term-fg31">-	0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x2c, 0x0a, 0x06, 0x62, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x18,</span>
<span class="term-fg31">-	0x01, 0x20, 0x03, 0x28, 0x0b, 0x32, 0x14, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f,</span>
<span class="term-fg31">-	0x6e, 0x2e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x42, 0x6f, 0x64, 0x79, 0x52, 0x06, 0x62, 0x6f, 0x64,</span>
<span class="term-fg31">-	0x69, 0x65, 0x73, 0x22, 0x3f, 0x0a, 0x18, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73,</span>
<span class="term-fg31">-	0x42, 0x79, 0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x12,</span>
<span class="term-fg31">-	0x23, 0x0a, 0x06, 0x68, 0x61, 0x73, 0x68, 0x65, 0x73, 0x18, 0x01, 0x20, 0x03, 0x28, 0x0b, 0x32,</span>
<span class="term-fg31">-	0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32, 0x35, 0x36, 0x52, 0x06, 0x68, 0x61,</span>
<span class="term-fg31">-	0x73, 0x68, 0x65, 0x73, 0x22, 0x45, 0x0a, 0x17, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65,</span>
<span class="term-fg31">-	0x73, 0x42, 0x79, 0x52, 0x61, 0x6e, 0x67, 0x65, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x12,</span>
<span class="term-fg31">-	0x14, 0x0a, 0x05, 0x73, 0x74, 0x61, 0x72, 0x74, 0x18, 0x01, 0x20, 0x01, 0x28, 0x04, 0x52, 0x05,</span>
<span class="term-fg31">-	0x73, 0x74, 0x61, 0x72, 0x74, 0x12, 0x14, 0x0a, 0x05, 0x63, 0x6f, 0x75, 0x6e, 0x74, 0x18, 0x02,</span>
<span class="term-fg31">-	0x20, 0x01, 0x28, 0x04, 0x52, 0x05, 0x63, 0x6f, 0x75, 0x6e, 0x74, 0x22, 0x25, 0x0a, 0x0d, 0x52,</span>
<span class="term-fg31">-	0x65, 0x61, 0x64, 0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x14, 0x0a, 0x05,</span>
<span class="term-fg31">-	0x72, 0x65, 0x61, 0x64, 0x79, 0x18, 0x01, 0x20, 0x01, 0x28, 0x08, 0x52, 0x05, 0x72, 0x65, 0x61,</span>
<span class="term-fg31">-	0x64, 0x79, 0x22, 0x3b, 0x0a, 0x14, 0x46, 0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63,</span>
<span class="term-fg31">-	0x6b, 0x73, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x23, 0x0a, 0x0d, 0x66, 0x72,</span>
<span class="term-fg31">-	0x6f, 0x7a, 0x65, 0x6e, 0x5f, 0x62, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x18, 0x01, 0x20, 0x01, 0x28,</span>
<span class="term-fg31">-	0x04, 0x52, 0x0c, 0x66, 0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x2a,</span>
<span class="term-fg31">-	0x71, 0x0a, 0x0f, 0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x53, 0x74, 0x61, 0x74,</span>
<span class="term-fg31">-	0x75, 0x73, 0x12, 0x0b, 0x0a, 0x07, 0x53, 0x75, 0x63, 0x63, 0x65, 0x73, 0x73, 0x10, 0x00, 0x12,</span>
<span class="term-fg31">-	0x0c, 0x0a, 0x08, 0x42, 0x61, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x10, 0x01, 0x12, 0x0e, 0x0a,</span>
<span class="term-fg31">-	0x0a, 0x54, 0x6f, 0x6f, 0x46, 0x61, 0x72, 0x41, 0x77, 0x61, 0x79, 0x10, 0x02, 0x12, 0x12, 0x0a,</span>
<span class="term-fg31">-	0x0e, 0x4d, 0x69, 0x73, 0x73, 0x69, 0x6e, 0x67, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x10,</span>
<span class="term-fg31">-	0x03, 0x12, 0x15, 0x0a, 0x11, 0x49, 0x6e, 0x76, 0x61, 0x6c, 0x69, 0x64, 0x46, 0x6f, 0x72, 0x6b,</span>
<span class="term-fg31">-	0x63, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x10, 0x04, 0x12, 0x08, 0x0a, 0x04, 0x42, 0x75, 0x73, 0x79,</span>
<span class="term-fg31">-	0x10, 0x05, 0x32, 0xbf, 0x09, 0x0a, 0x09, 0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x12, 0x4a, 0x0a, 0x0c, 0x49, 0x6e, 0x73, 0x65, 0x72, 0x74, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73,</span>
<span class="term-fg31">-	0x12, 0x1e, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x49, 0x6e, 0x73,</span>
<span class="term-fg31">-	0x65, 0x72, 0x74, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74,</span>
<span class="term-fg31">-	0x1a, 0x1a, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x49, 0x6e, 0x73,</span>
<span class="term-fg31">-	0x65, 0x72, 0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65, 0x73, 0x75, 0x6c, 0x74, 0x12, 0x4b, 0x0a, 0x0d,</span>
<span class="term-fg31">-	0x56, 0x61, 0x6c, 0x69, 0x64, 0x61, 0x74, 0x65, 0x43, 0x68, 0x61, 0x69, 0x6e, 0x12, 0x1c, 0x2e,</span>
<span class="term-fg31">-	0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x56, 0x61, 0x6c, 0x69, 0x64, 0x61,</span>
<span class="term-fg31">-	0x74, 0x69, 0x6f, 0x6e, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1c, 0x2e, 0x65, 0x78,</span>
<span class="term-fg31">-	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x56, 0x61, 0x6c, 0x69, 0x64, 0x61, 0x74, 0x69,</span>
<span class="term-fg31">-	0x6f, 0x6e, 0x52, 0x65, 0x63, 0x65, 0x69, 0x70, 0x74, 0x12, 0x47, 0x0a, 0x10, 0x55, 0x70, 0x64,</span>
<span class="term-fg31">-	0x61, 0x74, 0x65, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x12, 0x15, 0x2e,</span>
<span class="term-fg31">-	0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68,</span>
<span class="term-fg31">-	0x6f, 0x69, 0x63, 0x65, 0x1a, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x52, 0x65, 0x63, 0x65, 0x69,</span>
<span class="term-fg31">-	0x70, 0x74, 0x12, 0x52, 0x0a, 0x0d, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c,</span>
<span class="term-fg31">-	0x6f, 0x63, 0x6b, 0x12, 0x1f, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e,</span>
<span class="term-fg31">-	0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71,</span>
<span class="term-fg31">-	0x75, 0x65, 0x73, 0x74, 0x1a, 0x20, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65,</span>
<span class="term-fg31">-	0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x5e, 0x0a, 0x11, 0x47, 0x65, 0x74, 0x41, 0x73, 0x73,</span>
<span class="term-fg31">-	0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x12, 0x23, 0x2e, 0x65, 0x78,</span>
<span class="term-fg31">-	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x41, 0x73, 0x73, 0x65, 0x6d,</span>
<span class="term-fg31">-	0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74,</span>
<span class="term-fg31">-	0x1a, 0x24, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74,</span>
<span class="term-fg31">-	0x41, 0x73, 0x73, 0x65, 0x6d, 0x62, 0x6c, 0x65, 0x64, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x52, 0x65,</span>
<span class="term-fg31">-	0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x45, 0x0a, 0x0d, 0x43, 0x75, 0x72, 0x72, 0x65, 0x6e,</span>
<span class="term-fg31">-	0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65,</span>
<span class="term-fg32">+	0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x5b, 0x0a, 0x11, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69,</span>
<span class="term-fg32">+	0x65, 0x73, 0x42, 0x79, 0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x12, 0x23, 0x2e, 0x65, 0x78, 0x65,</span>
<span class="term-fg32">+	0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73,</span>
<span class="term-fg32">+	0x42, 0x79, 0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a,</span>
<span class="term-fg32">+	0x21, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x42,</span>
<span class="term-fg32">+	0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x61, 0x74, 0x63, 0x68, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e,</span>
<span class="term-fg32">+	0x73, 0x65, 0x12, 0x3e, 0x0a, 0x0f, 0x49, 0x73, 0x43, 0x61, 0x6e, 0x6f, 0x6e, 0x69, 0x63, 0x61,</span>
<span class="term-fg32">+	0x6c, 0x48, 0x61, 0x73, 0x68, 0x12, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e, 0x48, 0x32,</span>
<span class="term-fg32">+	0x35, 0x36, 0x1a, 0x1e, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x49,</span>
<span class="term-fg32">+	0x73, 0x43, 0x61, 0x6e, 0x6f, 0x6e, 0x69, 0x63, 0x61, 0x6c, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e,</span>
<span class="term-fg32">+	0x73, 0x65, 0x12, 0x4a, 0x0a, 0x13, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x48,</span>
<span class="term-fg32">+	0x61, 0x73, 0x68, 0x4e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x12, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65,</span>
<span class="term-fg32">+	0x73, 0x2e, 0x48, 0x32, 0x35, 0x36, 0x1a, 0x26, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69,</span>
<span class="term-fg32">+	0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x48, 0x61, 0x73, 0x68,</span>
<span class="term-fg32">+	0x4e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x3e,</span>
<span class="term-fg32">+	0x0a, 0x0d, 0x47, 0x65, 0x74, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x12,</span>
<span class="term-fg32">+	0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x62, 0x75,</span>
<span class="term-fg32">+	0x66, 0x2e, 0x45, 0x6d, 0x70, 0x74, 0x79, 0x1a, 0x15, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74,</span>
<span class="term-fg32">+	0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65, 0x12, 0x39,</span>
<span class="term-fg32">+	0x0a, 0x05, 0x52, 0x65, 0x61, 0x64, 0x79, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65,</span>
 	0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x62, 0x75, 0x66, 0x2e, 0x45, 0x6d, 0x70, 0x74, 0x79, 0x1a,
<span class="term-fg31">-	0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48,</span>
<span class="term-fg31">-	0x65, 0x61, 0x64, 0x65, 0x72, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x3f, 0x0a,</span>
<span class="term-fg31">-	0x05, 0x47, 0x65, 0x74, 0x54, 0x44, 0x12, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69,</span>
<span class="term-fg31">-	0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x52, 0x65, 0x71,</span>
<span class="term-fg31">-	0x75, 0x65, 0x73, 0x74, 0x1a, 0x18, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x47, 0x65, 0x74, 0x54, 0x44, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x47,</span>
<span class="term-fg31">-	0x0a, 0x09, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x12, 0x1c, 0x2e, 0x65, 0x78,</span>
<span class="term-fg31">-	0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x53, 0x65, 0x67, 0x6d, 0x65,</span>
<span class="term-fg31">-	0x6e, 0x74, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74, 0x1a, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63,</span>
<span class="term-fg31">-	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x52,</span>
<span class="term-fg31">-	0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x43, 0x0a, 0x07, 0x47, 0x65, 0x74, 0x42, 0x6f,</span>
<span class="term-fg31">-	0x64, 0x79, 0x12, 0x1c, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47,</span>
<span class="term-fg31">-	0x65, 0x74, 0x53, 0x65, 0x67, 0x6d, 0x65, 0x6e, 0x74, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74,</span>
<span class="term-fg31">-	0x1a, 0x1a, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74,</span>
<span class="term-fg31">-	0x42, 0x6f, 0x64, 0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x59, 0x0a, 0x10,</span>
<span class="term-fg31">-	0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x79, 0x52, 0x61, 0x6e, 0x67, 0x65,</span>
<span class="term-fg31">-	0x12, 0x22, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74,</span>
<span class="term-fg31">-	0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x79, 0x52, 0x61, 0x6e, 0x67, 0x65, 0x52, 0x65, 0x71,</span>
<span class="term-fg31">-	0x75, 0x65, 0x73, 0x74, 0x1a, 0x21, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x61, 0x74, 0x63, 0x68, 0x52,</span>
<span class="term-fg31">-	0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x5b, 0x0a, 0x11, 0x47, 0x65, 0x74, 0x42, 0x6f,</span>
<span class="term-fg31">-	0x64, 0x69, 0x65, 0x73, 0x42, 0x79, 0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x12, 0x23, 0x2e, 0x65,</span>
<span class="term-fg31">-	0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x42, 0x6f, 0x64, 0x69,</span>
<span class="term-fg31">-	0x65, 0x73, 0x42, 0x79, 0x48, 0x61, 0x73, 0x68, 0x65, 0x73, 0x52, 0x65, 0x71, 0x75, 0x65, 0x73,</span>
<span class="term-fg31">-	0x74, 0x1a, 0x21, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65,</span>
<span class="term-fg31">-	0x74, 0x42, 0x6f, 0x64, 0x69, 0x65, 0x73, 0x42, 0x61, 0x74, 0x63, 0x68, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg31">-	0x6f, 0x6e, 0x73, 0x65, 0x12, 0x3e, 0x0a, 0x0f, 0x49, 0x73, 0x43, 0x61, 0x6e, 0x6f, 0x6e, 0x69,</span>
<span class="term-fg31">-	0x63, 0x61, 0x6c, 0x48, 0x61, 0x73, 0x68, 0x12, 0x0b, 0x2e, 0x74, 0x79, 0x70, 0x65, 0x73, 0x2e,</span>
<span class="term-fg31">-	0x48, 0x32, 0x35, 0x36, 0x1a, 0x1e, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e,</span>
<span class="term-fg31">-	0x2e, 0x49, 0x73, 0x43, 0x61, 0x6e, 0x6f, 0x6e, 0x69, 0x63, 0x61, 0x6c, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg31">-	0x6f, 0x6e, 0x73, 0x65, 0x12, 0x4a, 0x0a, 0x13, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65,</span>
<span class="term-fg31">-	0x72, 0x48, 0x61, 0x73, 0x68, 0x4e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x12, 0x0b, 0x2e, 0x74, 0x79,</span>
<span class="term-fg31">-	0x70, 0x65, 0x73, 0x2e, 0x48, 0x32, 0x35, 0x36, 0x1a, 0x26, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75,</span>
<span class="term-fg31">-	0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x47, 0x65, 0x74, 0x48, 0x65, 0x61, 0x64, 0x65, 0x72, 0x48, 0x61,</span>
<span class="term-fg31">-	0x73, 0x68, 0x4e, 0x75, 0x6d, 0x62, 0x65, 0x72, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65,</span>
<span class="term-fg31">-	0x12, 0x3e, 0x0a, 0x0d, 0x47, 0x65, 0x74, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63,</span>
<span class="term-fg31">-	0x65, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f,</span>
<span class="term-fg31">-	0x62, 0x75, 0x66, 0x2e, 0x45, 0x6d, 0x70, 0x74, 0x79, 0x1a, 0x15, 0x2e, 0x65, 0x78, 0x65, 0x63,</span>
<span class="term-fg31">-	0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x6f, 0x72, 0x6b, 0x43, 0x68, 0x6f, 0x69, 0x63, 0x65,</span>
<span class="term-fg31">-	0x12, 0x39, 0x0a, 0x05, 0x52, 0x65, 0x61, 0x64, 0x79, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67,</span>
<span class="term-fg32">+	0x18, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x52, 0x65, 0x61, 0x64,</span>
<span class="term-fg32">+	0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x47, 0x0a, 0x0c, 0x46, 0x72, 0x6f,</span>
<span class="term-fg32">+	0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x12, 0x16, 0x2e, 0x67, 0x6f, 0x6f, 0x67,</span>
 	0x6c, 0x65, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x62, 0x75, 0x66, 0x2e, 0x45, 0x6d, 0x70, 0x74,
<span class="term-fg31">-	0x79, 0x1a, 0x18, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x52, 0x65,</span>
<span class="term-fg31">-	0x61, 0x64, 0x79, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e, 0x73, 0x65, 0x12, 0x47, 0x0a, 0x0c, 0x46,</span>
<span class="term-fg31">-	0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x12, 0x16, 0x2e, 0x67, 0x6f,</span>
<span class="term-fg31">-	0x6f, 0x67, 0x6c, 0x65, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x62, 0x75, 0x66, 0x2e, 0x45, 0x6d,</span>
<span class="term-fg31">-	0x70, 0x74, 0x79, 0x1a, 0x1f, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e,</span>
<span class="term-fg31">-	0x46, 0x72, 0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x52, 0x65, 0x73, 0x70,</span>
<span class="term-fg31">-	0x6f, 0x6e, 0x73, 0x65, 0x42, 0x17, 0x5a, 0x15, 0x2e, 0x2f, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74,</span>
<span class="term-fg31">-	0x69, 0x6f, 0x6e, 0x3b, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x62, 0x06, 0x70,</span>
<span class="term-fg31">-	0x72, 0x6f, 0x74, 0x6f, 0x33,</span>
<span class="term-fg32">+	0x79, 0x1a, 0x1f, 0x2e, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x2e, 0x46, 0x72,</span>
<span class="term-fg32">+	0x6f, 0x7a, 0x65, 0x6e, 0x42, 0x6c, 0x6f, 0x63, 0x6b, 0x73, 0x52, 0x65, 0x73, 0x70, 0x6f, 0x6e,</span>
<span class="term-fg32">+	0x73, 0x65, 0x42, 0x17, 0x5a, 0x15, 0x2e, 0x2f, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f,</span>
<span class="term-fg32">+	0x6e, 0x3b, 0x65, 0x78, 0x65, 0x63, 0x75, 0x74, 0x69, 0x6f, 0x6e, 0x62, 0x06, 0x70, 0x72, 0x6f,</span>
<span class="term-fg32">+	0x74, 0x6f, 0x33,</span>
 }
&nbsp;
 var (</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bb8100cb308d081f2e0ce8eb" role="button"
                   aria-expanded="false" aria-controls="id-bb8100cb308d081f2e0ce8eb">
                    <code>erigon-lib/gointerfaces/execution/execution_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/execution/execution_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/execution/execution_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bb8100cb308d081f2e0ce8eb"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution_grpc.pb.go</span>
<span class="term-fg1">index 065a305e8fce4b758744c0de6397676760320d7c..f47c35e1cb11718c457fc1a5c896d938d7c22622 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;execution&#47;execution_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: execution&#47;execution.proto
&nbsp;
 package execution</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c82999acc96853908174b2d8" role="button"
                   aria-expanded="false" aria-controls="id-c82999acc96853908174b2d8">
                    <code>erigon-lib/gointerfaces/remote/ethbackend.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/remote/ethbackend.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/remote/ethbackend.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c82999acc96853908174b2d8"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend.pb.go</span>
<span class="term-fg1">index 118a3f7637dc68964be361516d881d94360a1856..78ba974b68a5e294d89f13bb3f3b5226229cf75a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: remote&#47;ethbackend.proto
&nbsp;
 package remote</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8276a820857c1282f4bceed2" role="button"
                   aria-expanded="false" aria-controls="id-8276a820857c1282f4bceed2">
                    <code>erigon-lib/gointerfaces/remote/ethbackend_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/remote/ethbackend_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/remote/ethbackend_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8276a820857c1282f4bceed2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend_grpc.pb.go</span>
<span class="term-fg1">index 4a410a32b86ea6a698f5ba53eb65627f0047f0d4..8e986e082db5ea64b8634cb72d77ac94a5026a64 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;ethbackend_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: remote&#47;ethbackend.proto
&nbsp;
 package remote</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a636556c6494ddbbd15a76d4" role="button"
                   aria-expanded="false" aria-controls="id-a636556c6494ddbbd15a76d4">
                    <code>erigon-lib/gointerfaces/remote/kv.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/remote/kv.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/remote/kv.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a636556c6494ddbbd15a76d4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv.pb.go</span>
<span class="term-fg1">index b2a0bff9ce9c19f602ead91caf389d94ea5e2d1d..006b6e4e1c6183abe84fd3c84a1ebdb260e76a88 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: remote&#47;kv.proto
&nbsp;
 package remote</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ae54ac59422bd654f7af428e" role="button"
                   aria-expanded="false" aria-controls="id-ae54ac59422bd654f7af428e">
                    <code>erigon-lib/gointerfaces/remote/kv_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/remote/kv_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/remote/kv_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ae54ac59422bd654f7af428e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv_grpc.pb.go</span>
<span class="term-fg1">index d0305cb0fb424501a1ce8ad406009a05eafe7b9e..eb32cbf395ca92f6052c10cb7562be91c6355776 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;remote&#47;kv_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: remote&#47;kv.proto
&nbsp;
 package remote</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f660267c043880780311b163" role="button"
                   aria-expanded="false" aria-controls="id-f660267c043880780311b163">
                    <code>erigon-lib/gointerfaces/sentinel/sentinel.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/sentinel/sentinel.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/sentinel/sentinel.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f660267c043880780311b163"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel.pb.go</span>
<span class="term-fg1">index 0fc32fe89d8912bb3498bfffe0c1bac71d5bbba1..f82d1bb3f541ab7e91d51c37e70fe2fa53558a6e 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: p2psentinel&#47;sentinel.proto
&nbsp;
 package sentinel</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-627a2d8d3ecf20649e3e2fd9" role="button"
                   aria-expanded="false" aria-controls="id-627a2d8d3ecf20649e3e2fd9">
                    <code>erigon-lib/gointerfaces/sentinel/sentinel_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/sentinel/sentinel_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/sentinel/sentinel_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-627a2d8d3ecf20649e3e2fd9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel_grpc.pb.go</span>
<span class="term-fg1">index a62786b600f728982321aa97725dbcb5c021d5cf..13052e192f82662bb6c662a9376293dd301d3587 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentinel&#47;sentinel_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: p2psentinel&#47;sentinel.proto
&nbsp;
 package sentinel</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1183c79f5e018d86c66f6107" role="button"
                   aria-expanded="false" aria-controls="id-1183c79f5e018d86c66f6107">
                    <code>erigon-lib/gointerfaces/sentry/sentry.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/sentry/sentry.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/sentry/sentry.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1183c79f5e018d86c66f6107"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry.pb.go</span>
<span class="term-fg1">index 87710f442926e6868b89f98536be04a8f4fc36cf..fa266f2c1d1305cce6c522fef0e21119844f823f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: p2psentry&#47;sentry.proto
&nbsp;
 package sentry</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-62ac710b04462f94ab36a15c" role="button"
                   aria-expanded="false" aria-controls="id-62ac710b04462f94ab36a15c">
                    <code>erigon-lib/gointerfaces/sentry/sentry_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/sentry/sentry_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/sentry/sentry_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-62ac710b04462f94ab36a15c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry_grpc.pb.go</span>
<span class="term-fg1">index 1a9d1959b5cd4c856e6fe154a55e4210e71d76ed..7802cf4fd7b7de833c77308cf5cb3216f824d674 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;sentry&#47;sentry_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: p2psentry&#47;sentry.proto
&nbsp;
 package sentry</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6590bd3d872c72f55788039a" role="button"
                   aria-expanded="false" aria-controls="id-6590bd3d872c72f55788039a">
                    <code>erigon-lib/gointerfaces/txpool/mining.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/txpool/mining.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/txpool/mining.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6590bd3d872c72f55788039a"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining.pb.go</span>
<span class="term-fg1">index 20b3e0bd7e6510191f9b6dffd5eefd24de037855..827e8da6e029d880ddabc9713f95b5de629ad7e6 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: txpool&#47;mining.proto
&nbsp;
 package txpool</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-05cfe9efd629f2a05d24f1f8" role="button"
                   aria-expanded="false" aria-controls="id-05cfe9efd629f2a05d24f1f8">
                    <code>erigon-lib/gointerfaces/txpool/mining_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/txpool/mining_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/txpool/mining_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-05cfe9efd629f2a05d24f1f8"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining_grpc.pb.go</span>
<span class="term-fg1">index d0465eb5f1187b037217ec99c7de514052c6efc2..c2054b4e15a491170f02ed2a56aa2571a4a04390 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;mining_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: txpool&#47;mining.proto
&nbsp;
 package txpool</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-476fefa63398edc2671ef6f1" role="button"
                   aria-expanded="false" aria-controls="id-476fefa63398edc2671ef6f1">
                    <code>erigon-lib/gointerfaces/txpool/txpool.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/txpool/txpool.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/txpool/txpool.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-476fefa63398edc2671ef6f1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool.pb.go</span>
<span class="term-fg1">index 52b9b02def1c53179bc04256e1af9b9dcb0cfb9c..49693c16b051aff7987ac1706a3a477f65b076c5 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: txpool&#47;txpool.proto
&nbsp;
 package txpool</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b7ad87dc8a61e81f2c57d430" role="button"
                   aria-expanded="false" aria-controls="id-b7ad87dc8a61e81f2c57d430">
                    <code>erigon-lib/gointerfaces/txpool/txpool_grpc.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/txpool/txpool_grpc.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/txpool/txpool_grpc.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b7ad87dc8a61e81f2c57d430"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool_grpc.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool_grpc.pb.go</span>
<span class="term-fg1">index d8c6da0d0a6eb53222adea30c57e81f7d6bbe5b4..a1ae12fc0a1e0285289be775dd730cdbed7d32fe 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool_grpc.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;txpool&#47;txpool_grpc.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go-grpc. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; - protoc-gen-go-grpc v1.3.0
<span class="term-fg31">-&#47;&#47; - protoc             v4.24.2</span>
<span class="term-fg32">+&#47;&#47; - protoc             v4.23.3</span>
 &#47;&#47; source: txpool&#47;txpool.proto
&nbsp;
 package txpool</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f2a6d2440cbef38f9117c167" role="button"
                   aria-expanded="false" aria-controls="id-f2a6d2440cbef38f9117c167">
                    <code>erigon-lib/gointerfaces/types/types.pb.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/gointerfaces/types/types.pb.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/gointerfaces/types/types.pb.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f2a6d2440cbef38f9117c167"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;types&#47;types.pb.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;types&#47;types.pb.go</span>
<span class="term-fg1">index adae72de7eca3cb9afad5897d4d5d868d2bdb3d4..b81ea0b4db4cf05ecc71941c44360da49709a5b4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;gointerfaces&#47;types&#47;types.pb.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;gointerfaces&#47;types&#47;types.pb.go</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 &#47;&#47; Code generated by protoc-gen-go. DO NOT EDIT.
 &#47;&#47; versions:
 &#47;&#47; 	protoc-gen-go v1.31.0
<span class="term-fg31">-&#47;&#47; 	protoc        v4.24.2</span>
<span class="term-fg32">+&#47;&#47; 	protoc        v4.23.3</span>
 &#47;&#47; source: types&#47;types.proto
&nbsp;
 package types</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b7fe9af581f4a731f15cb3ca" role="button"
                   aria-expanded="false" aria-controls="id-b7fe9af581f4a731f15cb3ca">
                    <code>erigon-lib/kv/kv_interface.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/kv/kv_interface.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/kv/kv_interface.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b7fe9af581f4a731f15cb3ca"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;kv_interface.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;kv_interface.go</span>
<span class="term-fg1">index 86255720a005fcfb1d8891cdb9764597034a1810..3c9bc832cde163369dfadbb63d85973717a7d0e2 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;kv_interface.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;kv_interface.go</span>
<span class="term-fg36">@@ -155,6 +155,7 @@</span> 	SentryDB     Label = 2
 	ConsensusDB  Label = 3
 	DownloaderDB Label = 4
 	InMem        Label = 5
<span class="term-fg32">+	AcctProofDB  Label = 99</span>
 )
&nbsp;
 func (l Label) String() string {
<span class="term-fg36">@@ -171,6 +172,8 @@</span> 	case DownloaderDB:
 		return &quot;downloader&quot;
 	case InMem:
 		return &quot;inMem&quot;
<span class="term-fg32">+	case AcctProofDB:</span>
<span class="term-fg32">+		return &quot;proofdb&quot;</span>
 	default:
 		return &quot;unknown&quot;
 	}
<span class="term-fg36">@@ -256,9 +259,6 @@</span> 	&#47;&#47;	Commit and Rollback while it has active child transactions.
 	BeginRo(ctx context.Context) (Tx, error)
 	AllTables() TableCfg
 	PageSize() uint64
<span class="term-fg31">-</span>
<span class="term-fg31">-	&#47;&#47; Pointer to the underlying C environment handle, if applicable (e.g. *C.MDBX_env)</span>
<span class="term-fg31">-	CHandle() unsafe.Pointer</span>
 }
&nbsp;
 &#47;&#47; RwDB low-level database interface - main target is - to provide common abstraction over top of MDBX and RemoteKV.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c97f1cf92eadd0a883e94a68" role="button"
                   aria-expanded="false" aria-controls="id-c97f1cf92eadd0a883e94a68">
                    <code>erigon-lib/kv/mdbx/kv_mdbx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/kv/mdbx/kv_mdbx.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/kv/mdbx/kv_mdbx.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c97f1cf92eadd0a883e94a68"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx.go</span>
<span class="term-fg1">index 7bb1702b7253845529a7611cabef8a27f891c61d..0bde1043ec2e8d163625a7707b1e17dcd8c0d849 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx.go</span>
<span class="term-fg36">@@ -448,10 +448,6 @@</span> func (db *MdbxKV) PageSize() uint64 { return db.opts.pageSize }
 func (db *MdbxKV) ReadOnly() bool   { return db.opts.HasFlag(mdbx.Readonly) }
 func (db *MdbxKV) Accede() bool     { return db.opts.HasFlag(mdbx.Accede) }
&nbsp;
<span class="term-fg31">-func (db *MdbxKV) CHandle() unsafe.Pointer {</span>
<span class="term-fg31">-	return db.env.CHandle()</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
 &#47;&#47; openDBIs - first trying to open existing DBI&#39;s in RO transaction
 &#47;&#47; otherwise re-try by RW transaction
 &#47;&#47; it allow open DB from another process - even if main process holding long RW transaction</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f44a17b23482a30b3d01d9d4" role="button"
                   aria-expanded="false" aria-controls="id-f44a17b23482a30b3d01d9d4">
                    <code>erigon-lib/kv/mdbx/kv_mdbx_temporary.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/kv/mdbx/kv_mdbx_temporary.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/kv/mdbx/kv_mdbx_temporary.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f44a17b23482a30b3d01d9d4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx_temporary.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx_temporary.go</span>
<span class="term-fg1">index c5e585bffe1f3ec6b0761633099b6576b4310194..b35d2f75618a49b4409637ea2b174d3e24955aae 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx_temporary.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;mdbx&#47;kv_mdbx_temporary.go</span>
<span class="term-fg36">@@ -19,7 +19,6 @@</span>
 import (
 	&quot;context&quot;
 	&quot;os&quot;
<span class="term-fg31">-	&quot;unsafe&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&quot;
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
<span class="term-fg36">@@ -83,7 +82,3 @@</span> func (t *TemporaryMdbx) Close() {
 	t.db.Close()
 	os.RemoveAll(t.path)
 }
<span class="term-fg31">-</span>
<span class="term-fg31">-func (t *TemporaryMdbx) CHandle() unsafe.Pointer {</span>
<span class="term-fg31">-	panic(&quot;CHandle not implemented&quot;)</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e90b83818f8844e1d84f24b8" role="button"
                   aria-expanded="false" aria-controls="id-e90b83818f8844e1d84f24b8">
                    <code>erigon-lib/kv/remotedb/kv_remote.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/kv/remotedb/kv_remote.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/kv/remotedb/kv_remote.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e90b83818f8844e1d84f24b8"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;remotedb&#47;kv_remote.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;remotedb&#47;kv_remote.go</span>
<span class="term-fg1">index 7df14ae88decefdb3e13984dd7198170f3726906..e0ae3a26e79dc1d654c5b904c7e76d7dee7e748a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;remotedb&#47;kv_remote.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;remotedb&#47;kv_remote.go</span>
<span class="term-fg36">@@ -148,10 +148,6 @@</span> }
&nbsp;
 func (db *DB) Close() {}
&nbsp;
<span class="term-fg31">-func (db *DB) CHandle() unsafe.Pointer {</span>
<span class="term-fg31">-	panic(&quot;CHandle not implemented&quot;)</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
 func (db *DB) BeginRo(ctx context.Context) (txn kv.Tx, err error) {
 	select {
 	case &lt;-ctx.Done():</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-36db551a9302b3f2cde97311" role="button"
                   aria-expanded="false" aria-controls="id-36db551a9302b3f2cde97311">
                    <code>erigon-lib/kv/temporal/historyv2/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/kv/temporal/historyv2/readme.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/kv/temporal/historyv2/readme.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-36db551a9302b3f2cde97311"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;temporal&#47;historyv2&#47;readme.md bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;temporal&#47;historyv2&#47;readme.md</span>
<span class="term-fg1">index 5b35b0d8083bd4423e450e86cadaf0dc403cda82..4dbad1c273da36248bcd1d3bf8b13f4514f1cbc5 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;kv&#47;temporal&#47;historyv2&#47;readme.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;kv&#47;temporal&#47;historyv2&#47;readme.md</span>
<span class="term-fg36">@@ -50,7 +50,7 @@</span>
 ### Keys
 The number of keys N (uint32, 4 bytes)
 Contiguous array of keys (N*32 bytes)
<span class="term-fg31">-### Values lengths</span>
<span class="term-fg32">+### Values lengthes</span>
  Contiguous array of accumulating value indexes:
 len(val0), len(val0)+len(val1), ..., len(val0)+len(val1)+...+len(val_{N-1})
 (4*N bytes since the lengths are treated as uint32).
<span class="term-fg36">@@ -61,5 +61,5 @@</span> Value | Type | Comment
 ------------ | ------------- | -------------
 num of keys | uint32 |
 address hashes | [num of keys][32]byte | [num of keys]common.Hash
<span class="term-fg31">-values lengths | [num of keys]uint32</span>
<span class="term-fg32">+values lengthes | [num of keys]uint32</span>
 values | [num of keys][]byte</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-dd7d1c7a831d3a2194b8b7fa" role="button"
                   aria-expanded="false" aria-controls="id-dd7d1c7a831d3a2194b8b7fa">
                    <code>erigon-lib/txpool/pool.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/txpool/pool.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/txpool/pool.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+28</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-dd7d1c7a831d3a2194b8b7fa"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;pool.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;pool.go</span>
<span class="term-fg1">index 83635ee097feb4445800b3482f01fccab079a56c..47adfadfa66af51460416ca1dc21319b4fccb028 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;pool.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;pool.go</span>
<span class="term-fg36">@@ -224,6 +224,11 @@</span> 	maxBlobsPerBlock        uint64
 	logger                  log.Logger
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; disables adding remote transactions</span>
<span class="term-fg32">+type TxPoolDropRemote struct {</span>
<span class="term-fg32">+	*TxPool</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func New(newTxs chan types.Announcements, coreDB kv.RoDB, cfg txpoolcfg.Config, cache kvcache.Cache,
 	chainID uint256.Int, shanghaiTime, cancunTime *big.Int, maxBlobsPerBlock uint64, logger log.Logger,
 ) (*TxPool, error) {
<span class="term-fg36">@@ -287,6 +292,10 @@</span> 		res.cancunTime = &amp;cancunTimeU64
 	}
&nbsp;
 	return res, nil
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func NewTxPoolDropRemote(txPool *TxPool) *TxPoolDropRemote {</span>
<span class="term-fg32">+	return &amp;TxPoolDropRemote{TxPool: txPool}</span>
 }
&nbsp;
 func (p *TxPool) OnNewBlock(ctx context.Context, stateChanges *remote.StateChangeBatch, unwindTxs, minedTxs types.TxSlots, tx kv.Tx) error {
<span class="term-fg36">@@ -1078,6 +1087,12 @@</span> 	p.lock.Lock()
 	defer p.lock.Unlock()
 	return p._chainDB, p._stateCache
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func (p *TxPoolDropRemote) AddRemoteTxs(ctx context.Context, newTxs types.TxSlots) {</span>
<span class="term-fg32">+	&#47;&#47; disable adding remote transactions</span>
<span class="term-fg32">+	&#47;&#47; consume remote tx from fetch</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func addTxs(blockNum uint64, cacheView kvcache.CacheView, senders *sendersBatch,
 	newTxs types.TxSlots, pendingBaseFee, pendingBlobFee, blockGasLimit uint64,
 	pending *PendingPool, baseFee, queued *SubPool,
<span class="term-fg36">@@ -1651,6 +1666,14 @@</span> 				announcements = announcements.DedupCopy()
&nbsp;
 				notifyMiningAboutNewSlots()
&nbsp;
<span class="term-fg32">+				if p.cfg.NoTxGossip {</span>
<span class="term-fg32">+					&#47;&#47; drain newTxs for emptying newTx channel</span>
<span class="term-fg32">+					&#47;&#47; newTx channel will be filled only with local transactions</span>
<span class="term-fg32">+					&#47;&#47; early return to avoid outbound transaction propagation</span>
<span class="term-fg32">+					log.Debug(&quot;[txpool] tx gossip disabled&quot;, &quot;state&quot;, &quot;drain new transactions&quot;)</span>
<span class="term-fg32">+					return</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+</span>
 				var localTxTypes []byte
 				var localTxSizes []uint32
 				var localTxHashes types.Hashes
<span class="term-fg36">@@ -1719,6 +1742,11 @@</span> 			}()
 		case &lt;-syncToNewPeersEvery.C: &#47;&#47; new peer
 			newPeers := p.recentlyConnectedPeers.GetAndClean()
 			if len(newPeers) == 0 {
<span class="term-fg32">+				continue</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if p.cfg.NoTxGossip {</span>
<span class="term-fg32">+				&#47;&#47; avoid transaction gossiping for new peers</span>
<span class="term-fg32">+				log.Debug(&quot;[txpool] tx gossip disabled&quot;, &quot;state&quot;, &quot;sync new peers&quot;)</span>
 				continue
 			}
 			t := time.Now()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c98a1d8ed02b11c847949041" role="button"
                   aria-expanded="false" aria-controls="id-c98a1d8ed02b11c847949041">
                    <code>erigon-lib/txpool/pool_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/txpool/pool_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/txpool/pool_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+106</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c98a1d8ed02b11c847949041"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;pool_test.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;pool_test.go</span>
<span class="term-fg1">index 1347beeb6637da35dd01a84822001592a431bc1a..926b4943231ab247718873d61e75ffa617efc250 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;pool_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;pool_test.go</span>
<span class="term-fg36">@@ -733,7 +733,6 @@</span> 	assert.NoError(err)
 	require.True(pool != nil)
 	ctx := context.Background()
 	var stateVersionID uint64 = 0
<span class="term-fg31">-</span>
 	h1 := gointerfaces.ConvertHashToH256([32]byte{})
 	change := &amp;remote.StateChangeBatch{
 		StateVersionId:       stateVersionID,
<span class="term-fg36">@@ -750,7 +749,6 @@</span>
 	&#47;&#47; Add 1 eth to the user account, as a part of change
 	v := make([]byte, types.EncodeSenderLengthForStorage(2, *uint256.NewInt(1 * common.Ether)))
 	types.EncodeSender(2, *uint256.NewInt(1 * common.Ether), v)
<span class="term-fg31">-</span>
 	change.ChangeBatch[0].Changes = append(change.ChangeBatch[0].Changes, &amp;remote.AccountChange{
 		Action:  remote.Action_UPSERT,
 		Address: gointerfaces.ConvertAddressToH160(addr),
<span class="term-fg36">@@ -759,6 +757,7 @@</span> 	})
 	tx, err := db.BeginRw(ctx)
 	require.NoError(err)
 	defer tx.Rollback()
<span class="term-fg32">+</span>
 	err = pool.OnNewBlock(ctx, change, types.TxSlots{}, types.TxSlots{}, tx)
 	assert.NoError(err)
&nbsp;
<span class="term-fg36">@@ -779,7 +778,6 @@</span> 		for _, reason := range reasons {
 			assert.Equal(txpoolcfg.Success, reason, reason.String())
 		}
 	}
<span class="term-fg31">-</span>
 	{
 		&#47;&#47; try to replace it with 5% extra blob gas, 2x higher tx fee - should fail
 		txSlots := types.TxSlots{}
<span class="term-fg36">@@ -941,3 +939,108 @@</span> 	blobTx.FeeCap = *feeCap
 	blobTx.BlobFeeCap = *blobFeeCap
 	return blobTx
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestDropRemote(t *testing.T) {</span>
<span class="term-fg32">+	assert, require := assert.New(t), require.New(t)</span>
<span class="term-fg32">+	ch := make(chan types.Announcements, 100)</span>
<span class="term-fg32">+	db, coreDB := memdb.NewTestPoolDB(t), memdb.NewTestDB(t)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	cfg := txpoolcfg.DefaultConfig</span>
<span class="term-fg32">+	cfg.NoTxGossip = true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logger := log.New()</span>
<span class="term-fg32">+	sendersCache := kvcache.New(kvcache.DefaultCoherentConfig)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	txPool, err := New(ch, coreDB, cfg, sendersCache, *u256.N1, big.NewInt(0), big.NewInt(0), fixedgas.DefaultMaxBlobsPerBlock, logger)</span>
<span class="term-fg32">+	assert.NoError(err)</span>
<span class="term-fg32">+	require.True(txPool != nil)</span>
<span class="term-fg32">+	txPoolDropRemote := NewTxPoolDropRemote(txPool)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ctx := context.Background()</span>
<span class="term-fg32">+	var stateVersionID uint64 = 0</span>
<span class="term-fg32">+	pendingBaseFee := uint64(1_000_000)</span>
<span class="term-fg32">+	&#47;&#47; start blocks from 0, set empty hash - then kvcache will also work on this</span>
<span class="term-fg32">+	h1 := gointerfaces.ConvertHashToH256([32]byte{})</span>
<span class="term-fg32">+	change := &amp;remote.StateChangeBatch{</span>
<span class="term-fg32">+		StateVersionId:      stateVersionID,</span>
<span class="term-fg32">+		PendingBlockBaseFee: pendingBaseFee,</span>
<span class="term-fg32">+		BlockGasLimit:       1000000,</span>
<span class="term-fg32">+		ChangeBatch: []*remote.StateChange{</span>
<span class="term-fg32">+			{BlockHeight: 0, BlockHash: h1},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var addr [20]byte</span>
<span class="term-fg32">+	addr[0] = 1</span>
<span class="term-fg32">+	v := make([]byte, types.EncodeSenderLengthForStorage(2, *uint256.NewInt(1 * common.Ether)))</span>
<span class="term-fg32">+	types.EncodeSender(2, *uint256.NewInt(1 * common.Ether), v)</span>
<span class="term-fg32">+	change.ChangeBatch[0].Changes = append(change.ChangeBatch[0].Changes, &amp;remote.AccountChange{</span>
<span class="term-fg32">+		Action:  remote.Action_UPSERT,</span>
<span class="term-fg32">+		Address: gointerfaces.ConvertAddressToH160(addr),</span>
<span class="term-fg32">+		Data:    v,</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	tx, err := db.BeginRw(ctx)</span>
<span class="term-fg32">+	require.NoError(err)</span>
<span class="term-fg32">+	defer tx.Rollback()</span>
<span class="term-fg32">+	err = txPoolDropRemote.OnNewBlock(ctx, change, types.TxSlots{}, types.TxSlots{}, tx)</span>
<span class="term-fg32">+	assert.NoError(err)</span>
<span class="term-fg32">+	&#47;&#47; 1. Try Local Tx</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		var txSlots types.TxSlots</span>
<span class="term-fg32">+		txSlot := &amp;types.TxSlot{</span>
<span class="term-fg32">+			Tip:    *uint256.NewInt(500_000),</span>
<span class="term-fg32">+			FeeCap: *uint256.NewInt(3_000_000),</span>
<span class="term-fg32">+			Gas:    100000,</span>
<span class="term-fg32">+			Nonce:  3,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		txSlot.IDHash[0] = 1</span>
<span class="term-fg32">+		txSlots.Append(txSlot, addr[:], true)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		reasons, err := txPoolDropRemote.AddLocalTxs(ctx, txSlots, tx)</span>
<span class="term-fg32">+		assert.NoError(err)</span>
<span class="term-fg32">+		for _, reason := range reasons {</span>
<span class="term-fg32">+			assert.Equal(txpoolcfg.Success, reason, reason.String())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case annoucements := &lt;-ch:</span>
<span class="term-fg32">+		for i := 0; i &lt; annoucements.Len(); i++ {</span>
<span class="term-fg32">+			_, _, hash := annoucements.At(i)</span>
<span class="term-fg32">+			fmt.Printf(&quot;propagated hash %x\n&quot;, hash)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; 2. Try same Tx, but as remote; tx must be dropped</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		var txSlots types.TxSlots</span>
<span class="term-fg32">+		txSlot := &amp;types.TxSlot{</span>
<span class="term-fg32">+			Tip:    *uint256.NewInt(500_000),</span>
<span class="term-fg32">+			FeeCap: *uint256.NewInt(3_000_000),</span>
<span class="term-fg32">+			Gas:    100000,</span>
<span class="term-fg32">+			Nonce:  3,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		txSlot.IDHash[0] = 1</span>
<span class="term-fg32">+		txSlots.Append(txSlot, addr[:], true)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		txPoolDropRemote.AddRemoteTxs(ctx, txSlots)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; empty because AddRemoteTxs logic is intentionally empty</span>
<span class="term-fg32">+	assert.Equal(0, len(txPoolDropRemote.unprocessedRemoteByHash))</span>
<span class="term-fg32">+	assert.Equal(0, len(txPoolDropRemote.unprocessedRemoteTxs.Txs))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	assert.NoError(txPoolDropRemote.processRemoteTxs(ctx))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	checkAnnouncementEmpty := func() bool {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case &lt;-ch:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; no announcement because unprocessedRemoteTxs is already empty</span>
<span class="term-fg32">+	assert.True(checkAnnouncementEmpty())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-38c4c098c8839c12d50999d2" role="button"
                   aria-expanded="false" aria-controls="id-38c4c098c8839c12d50999d2">
                    <code>erigon-lib/txpool/txpoolcfg/txpoolcfg.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/txpool/txpoolcfg/txpoolcfg.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/txpool/txpoolcfg/txpoolcfg.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-38c4c098c8839c12d50999d2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;txpoolcfg&#47;txpoolcfg.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;txpoolcfg&#47;txpoolcfg.go</span>
<span class="term-fg1">index c929b22402ca5c1c81b38c07e0e1986a4b95db1b..b2b510655277734747e581f7540169f767bb197d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;txpoolcfg&#47;txpoolcfg.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;txpoolcfg&#47;txpoolcfg.go</span>
<span class="term-fg36">@@ -47,6 +47,8 @@</span> 	OverrideCancunTime    *big.Int
 	MdbxPageSize          datasize.ByteSize
 	MdbxDBSizeLimit       datasize.ByteSize
 	MdbxGrowthStep        datasize.ByteSize
<span class="term-fg32">+</span>
<span class="term-fg32">+	NoTxGossip bool</span>
 }
&nbsp;
 var DefaultConfig = Config{
<span class="term-fg36">@@ -64,6 +66,8 @@</span> 	AccountSlots:  16, &#47;&#47;TODO: to choose right value (16 to be compatible with Geth)
 	BlobSlots:     48, &#47;&#47; Default for a total of 8 txs for 6 blobs each - for hive tests
 	PriceBump:     10, &#47;&#47; Price bump percentage to replace an already existing transaction
 	BlobPriceBump: 100,
<span class="term-fg32">+</span>
<span class="term-fg32">+	NoTxGossip: false,</span>
 }
&nbsp;
 type DiscardReason uint8</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-11d7887c8e0c53faec329704" role="button"
                   aria-expanded="false" aria-controls="id-11d7887c8e0c53faec329704">
                    <code>erigon-lib/txpool/txpooluitl/all_components.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/txpool/txpooluitl/all_components.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/txpool/txpooluitl/all_components.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-11d7887c8e0c53faec329704"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;txpooluitl&#47;all_components.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;txpooluitl&#47;all_components.go</span>
<span class="term-fg1">index e5ca0509ec5a0f446a9af2f471f1cb34ac383d61..458692921ecf1cd8d710c23d000dff1465eeb16b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;txpool&#47;txpooluitl&#47;all_components.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;txpool&#47;txpooluitl&#47;all_components.go</span>
<span class="term-fg36">@@ -138,16 +138,21 @@</span> 	if cfg.OverrideCancunTime != nil {
 		cancunTime = cfg.OverrideCancunTime
 	}
&nbsp;
<span class="term-fg32">+	var pool txpool.Pool</span>
 	txPool, err := txpool.New(newTxs, chainDB, cfg, cache, *chainID, shanghaiTime, cancunTime, maxBlobsPerBlock, logger)
 	if err != nil {
 		return nil, nil, nil, nil, nil, err
 	}
<span class="term-fg32">+	pool = txpool.Pool(txPool)</span>
<span class="term-fg32">+	if cfg.NoTxGossip {</span>
<span class="term-fg32">+		pool = txpool.Pool(txpool.NewTxPoolDropRemote(txPool))</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	fetch := txpool.NewFetch(ctx, sentryClients, txPool, stateChangesClient, chainDB, txPoolDB, *chainID, logger)
 	&#47;&#47;fetch.ConnectCore()
 	&#47;&#47;fetch.ConnectSentries()
&nbsp;
<span class="term-fg31">-	send := txpool.NewSend(ctx, sentryClients, txPool, logger)</span>
<span class="term-fg32">+	send := txpool.NewSend(ctx, sentryClients, pool, logger)</span>
 	txpoolGrpcServer := txpool.NewGrpcServer(ctx, txPool, txPoolDB, *chainID, logger)
 	return txPoolDB, txPool, fetch, send, txpoolGrpcServer, nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-943598729265b800bfb5662f" role="button"
                   aria-expanded="false" aria-controls="id-943598729265b800bfb5662f">
                    <code>erigon-lib/types/txn.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/types/txn.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/types/txn.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+90</span></div>
                        <div class="text-start"><span class="text-danger">-47</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-943598729265b800bfb5662f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;types&#47;txn.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;types&#47;txn.go</span>
<span class="term-fg1">index a2ffd2222d2492a57156c4dee1e81160382a6576..04c6463a7e2b681ea6741744a1de00179250e66a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;types&#47;txn.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;types&#47;txn.go</span>
<span class="term-fg36">@@ -38,6 +38,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;u256&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;gointerfaces&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
 )
&nbsp;
 type TxParseConfig struct {
<span class="term-fg36">@@ -100,7 +101,7 @@</span> 	IDHash         [32]byte &#47;&#47; Transaction hash for the purposes of using it as a transaction Id
 	Traced         bool     &#47;&#47; Whether transaction needs to be traced throughout transaction pool code and generate debug printing
 	Creation       bool     &#47;&#47; Set to true if &quot;To&quot; field of the transaction is not set
 	Type           byte     &#47;&#47; Transaction type
<span class="term-fg31">-	Size           uint32   &#47;&#47; Size of the payload, always including the envelope for typed transactions</span>
<span class="term-fg32">+	Size           uint32   &#47;&#47; Size of the payload</span>
&nbsp;
 	&#47;&#47; EIP-4844: Shard Blob Transactions
 	BlobFeeCap  uint256.Int &#47;&#47; max_fee_per_blob_gas
<span class="term-fg36">@@ -115,6 +116,7 @@</span> 	LegacyTxType     byte = 0
 	AccessListTxType byte = 1 &#47;&#47; EIP-2930
 	DynamicFeeTxType byte = 2 &#47;&#47; EIP-1559
 	BlobTxType       byte = 3 &#47;&#47; EIP-4844
<span class="term-fg32">+	DepositTxType    byte = 0x7e</span>
 )
&nbsp;
 var ErrParseTxn = fmt.Errorf(&quot;%w transaction&quot;, rlp.ErrParse)
<span class="term-fg36">@@ -184,7 +186,7 @@</span>
 	&#47;&#47; If it is non-legacy transaction, the transaction type follows, and then the the list
 	if !legacy {
 		slot.Type = payload[p]
<span class="term-fg31">-		if slot.Type &gt; BlobTxType {</span>
<span class="term-fg32">+		if slot.Type &gt; BlobTxType &amp;&amp; slot.Type != DepositTxType {</span>
 			return 0, fmt.Errorf(&quot;%w: unknown transaction type: %d&quot;, ErrParseTxn, slot.Type)
 		}
 		p++
<span class="term-fg36">@@ -287,12 +289,6 @@</span> 		}
 	}
&nbsp;
 	slot.Size = uint32(p - pos)
<span class="term-fg31">-	if !legacy &amp;&amp; !hasEnvelope {</span>
<span class="term-fg31">-		&#47;&#47; Normalize the size so that it accounts for the envelope bytes</span>
<span class="term-fg31">-		&#47;&#47; See https:&#47;&#47;github.com&#47;ledgerwatch&#47;erigon&#47;issues&#47;8456</span>
<span class="term-fg31">-		slot.Size = uint32(rlp.ListPrefixLen(int(slot.Size))) + slot.Size</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
 	return p, err
 }
&nbsp;
<span class="term-fg36">@@ -303,8 +299,10 @@</span>
 	&#47;&#47; Compute transaction hash
 	ctx.Keccak1.Reset()
 	ctx.Keccak2.Reset()
<span class="term-fg32">+	var txType byte</span>
 	if !legacy {
 		typeByte := []byte{slot.Type}
<span class="term-fg32">+		txType = typeByte[0]</span>
 		if _, err = ctx.Keccak1.Write(typeByte); err != nil {
 			return 0, fmt.Errorf(&quot;%w: computing IdHash (hashing type Prefix): %s&quot;, ErrParseTxn, err) &#47;&#47;nolint
 		}
<span class="term-fg36">@@ -330,7 +328,8 @@</span> 	}
&nbsp;
 	&#47;&#47; Remember where signing hash data begins (it will need to be wrapped in an RLP list)
 	sigHashPos := p
<span class="term-fg31">-	if !legacy {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if !legacy &amp;&amp; txType != DepositTxType {</span>
 		p, err = rlp.U256(payload, p, &amp;ctx.ChainID)
 		if err != nil {
 			return 0, fmt.Errorf(&quot;%w: chainId len: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint
<span class="term-fg36">@@ -345,47 +344,87 @@</span> 		if !ctx.ChainID.Eq(&amp;ctx.cfg.ChainID) {
 			return 0, fmt.Errorf(&quot;%w: %s, %d (expected %d)&quot;, ErrParseTxn, &quot;invalid chainID&quot;, ctx.ChainID.Uint64(), ctx.cfg.ChainID.Uint64())
 		}
 	}
<span class="term-fg31">-	&#47;&#47; Next follows the nonce, which we need to parse</span>
<span class="term-fg31">-	p, slot.Nonce, err = rlp.U64(payload, p)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: nonce: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; Next follows gas price or tip</span>
<span class="term-fg31">-	p, err = rlp.U256(payload, p, &amp;slot.Tip)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: tip: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; Next follows feeCap, but only for dynamic fee transactions, for legacy transaction, it is</span>
<span class="term-fg31">-	&#47;&#47; equal to tip</span>
<span class="term-fg31">-	if slot.Type &lt; DynamicFeeTxType {</span>
<span class="term-fg31">-		slot.FeeCap = slot.Tip</span>
<span class="term-fg32">+	var dataPos, dataLen int</span>
<span class="term-fg32">+	if txType == DepositTxType {</span>
<span class="term-fg32">+		slot.FeeCap = uint256.Int{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p) &#47;&#47; SourceHash</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;failed to parse source hash&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p) &#47;&#47; From</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;failed to parse from&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p) &#47;&#47; To</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;failed to parse to&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p) &#47;&#47; Mint</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;failed to parse mint&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p) &#47;&#47; Value</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;failed to parse value&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		p, slot.Gas, err = rlp.U64(payload, p)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: d_gas: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		p += 1 &#47;&#47; SystemTx</span>
 	} else {
<span class="term-fg31">-		p, err = rlp.U256(payload, p, &amp;slot.FeeCap)</span>
<span class="term-fg32">+		&#47;&#47; Next follows the nonce, which we need to parse</span>
<span class="term-fg32">+		p, slot.Nonce, err = rlp.U64(payload, p)</span>
<span class="term-fg32">+</span>
 		if err != nil {
<span class="term-fg31">-			return 0, fmt.Errorf(&quot;%w: feeCap: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: nonce: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
 		}
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; Next follows gas</span>
<span class="term-fg31">-	p, slot.Gas, err = rlp.U64(payload, p)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: gas: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; Next follows the destination address (if present)</span>
<span class="term-fg31">-	dataPos, dataLen, err := rlp.String(payload, p)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: to len: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if dataLen != 0 &amp;&amp; dataLen != 20 {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: unexpected length of to field: %d&quot;, ErrParseTxn, dataLen)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	&#47;&#47; Only note if To field is empty or not</span>
<span class="term-fg31">-	slot.Creation = dataLen == 0</span>
<span class="term-fg31">-	p = dataPos + dataLen</span>
<span class="term-fg31">-	&#47;&#47; Next follows value</span>
<span class="term-fg31">-	p, err = rlp.U256(payload, p, &amp;slot.Value)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, fmt.Errorf(&quot;%w: value: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		&#47;&#47; Next follows gas price or tip</span>
<span class="term-fg32">+		&#47;&#47; Although consensus rules specify that tip can be up to 256 bit long, we narrow it to 64 bit</span>
<span class="term-fg32">+		p, err = rlp.U256(payload, p, &amp;slot.Tip)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: tip: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Next follows feeCap, but only for dynamic fee transactions, for legacy transaction, it is</span>
<span class="term-fg32">+		&#47;&#47; equal to tip</span>
<span class="term-fg32">+		if slot.Type &lt; DynamicFeeTxType {</span>
<span class="term-fg32">+			slot.FeeCap = slot.Tip</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			&#47;&#47; Although consensus rules specify that feeCap can be up to 256 bit long, we narrow it to 64 bit</span>
<span class="term-fg32">+			p, err = rlp.U256(payload, p, &amp;slot.FeeCap)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return 0, fmt.Errorf(&quot;%w: feeCap: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Next follows gas</span>
<span class="term-fg32">+		p, slot.Gas, err = rlp.U64(payload, p)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: gas: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Next follows the destination address (if present)</span>
<span class="term-fg32">+		dataPos, dataLen, err = rlp.String(payload, p)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: to len: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if dataLen != 0 &amp;&amp; dataLen != 20 {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: unexpected length of to field: %d&quot;, ErrParseTxn, dataLen)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Only note if To field is empty or not</span>
<span class="term-fg32">+		slot.Creation = dataLen == 0</span>
<span class="term-fg32">+		p = dataPos + dataLen</span>
<span class="term-fg32">+		&#47;&#47; Next follows value</span>
<span class="term-fg32">+		p, err = rlp.U256(payload, p, &amp;slot.Value)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;%w: value: %s&quot;, ErrParseTxn, err) &#47;&#47;nolint</span>
<span class="term-fg32">+		}</span>
 	}
 	&#47;&#47; Next goes data, but we are only interesting in its length
 	dataPos, dataLen, err = rlp.String(payload, p)
<span class="term-fg36">@@ -403,6 +442,10 @@</span> 		}
 	}
&nbsp;
 	p = dataPos + dataLen
<span class="term-fg32">+</span>
<span class="term-fg32">+	if txType == DepositTxType {</span>
<span class="term-fg32">+		return p, nil</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	&#47;&#47; Next follows access list for non-legacy transactions, we are only interesting in number of addresses and storage keys
 	if !legacy {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bbb6a4db9e7fbe2a0864edc9" role="button"
                   aria-expanded="false" aria-controls="id-bbb6a4db9e7fbe2a0864edc9">
                    <code>erigon-lib/types/txn_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/erigon-lib/types/txn_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/erigon-lib/types/txn_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bbb6a4db9e7fbe2a0864edc9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;types&#47;txn_test.go bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;types&#47;txn_test.go</span>
<span class="term-fg1">index fd269cedc9336ab69a5ce8a558356b5820f8b1a2..b5e992d493f731094608db12ca5170eb693e44c0 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;types&#47;txn_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;erigon-lib&#47;types&#47;txn_test.go</span>
<span class="term-fg36">@@ -29,7 +29,6 @@</span> 	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;fixedgas&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
 )
&nbsp;
 func TestParseTransactionRLP(t *testing.T) {
<span class="term-fg36">@@ -262,8 +261,7 @@</span>
 	p, err = ctx.ParseTransaction(wrapperRlp, 0, &amp;fatTx, nil, hasEnvelope, wrappedWithBlobs, nil)
 	require.NoError(t, err)
 	assert.Equal(t, len(wrapperRlp), p)
<span class="term-fg31">-	wrapperLenWithEnvelope := rlp.ListPrefixLen(len(wrapperRlp)) + len(wrapperRlp)</span>
<span class="term-fg31">-	assert.Equal(t, wrapperLenWithEnvelope, int(fatTx.Size))</span>
<span class="term-fg32">+	assert.Equal(t, len(wrapperRlp), int(fatTx.Size))</span>
 	assert.Equal(t, wrapperRlp, fatTx.Rlp)
 	assert.Equal(t, BlobTxType, fatTx.Type)
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-12837bab470c36d29033090b" role="button"
                   aria-expanded="false" aria-controls="id-12837bab470c36d29033090b">
                    <code>eth/ethconfig/estimate/esitmated_ram.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/ethconfig/estimate/esitmated_ram.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/ethconfig/estimate/esitmated_ram.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-12837bab470c36d29033090b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&#47;estimate&#47;esitmated_ram.go bobanetwork&#47;v3-erigon&#47;eth&#47;ethconfig&#47;estimate&#47;esitmated_ram.go</span>
<span class="term-fg1">index 0eeb3f0622ec2da0c6b450b32d16f1b0c331c0ac..573be06b861e91cc00b7aed2fd5aae12d47f91cc 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&#47;estimate&#47;esitmated_ram.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;ethconfig&#47;estimate&#47;esitmated_ram.go</span>
<span class="term-fg36">@@ -3,7 +3,6 @@</span>
 import (
 	&quot;os&quot;
 	&quot;runtime&quot;
<span class="term-fg31">-	&quot;runtime&#47;debug&quot;</span>
&nbsp;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;cmp&quot;
<span class="term-fg36">@@ -38,10 +37,6 @@</span> 	mem := memory.TotalMemory()
&nbsp;
 	if cgroupsMemLimit, ok := cgroupsMemoryLimit(); ok {
 		mem = cmp.Min(mem, cgroupsMemLimit)
<span class="term-fg31">-	}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	if goMemLimit := debug.SetMemoryLimit(-1); goMemLimit &gt; 0 {</span>
<span class="term-fg31">-		mem = cmp.Min(mem, uint64(goMemLimit))</span>
 	}
&nbsp;
 	return mem</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-050117c96d25ba2644ecb991" role="button"
                   aria-expanded="false" aria-controls="id-050117c96d25ba2644ecb991">
                    <code>eth/gasprice/gasprice_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/gasprice/gasprice_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/gasprice/gasprice_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-050117c96d25ba2644ecb991"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;gasprice&#47;gasprice_test.go bobanetwork&#47;v3-erigon&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg1">index 96184ffc296a0637c1fb1810fcd9d633bd58b1f8..9897084847a0e51156b4b0d397bdadb840b61606 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg36">@@ -53,7 +53,7 @@</span> 		return nil, err
 	}
 	defer tx.Rollback()
&nbsp;
<span class="term-fg31">-	receipts := rawdb.ReadReceipts(tx, block, nil)</span>
<span class="term-fg32">+	receipts := rawdb.ReadReceipts(b.cfg, tx, block, nil)</span>
 	return receipts, nil
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-59ef525db63927d3ca518a65" role="button"
                   aria-expanded="false" aria-controls="id-59ef525db63927d3ca518a65">
                    <code>eth/protocols/eth/handler_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/protocols/eth/handler_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/protocols/eth/handler_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-59ef525db63927d3ca518a65"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;handler_test.go bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg1">index a373858c043ce660b9cecb9847adff9793120759..0bb92a1c621b74d75891430c379c007abf968817 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg36">@@ -97,7 +97,7 @@</span> 			require.NoError(t, err)
&nbsp;
 			hashes = append(hashes, block.Hash())
 			&#47;&#47; If known, encode and queue for response packet
<span class="term-fg31">-			r := rawdb.ReadReceipts(tx, block, nil)</span>
<span class="term-fg32">+			r := rawdb.ReadReceipts(params.TestChainConfig, tx, block, nil)</span>
 			encoded, err := rlp.EncodeToBytes(r)
 			require.NoError(t, err)
 			receipts = append(receipts, encoded)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d50722f54d1ce8928abc775a" role="button"
                   aria-expanded="false" aria-controls="id-d50722f54d1ce8928abc775a">
                    <code>eth/protocols/eth/handlers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/protocols/eth/handlers.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/protocols/eth/handlers.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d50722f54d1ce8928abc775a"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;handlers.go bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;handlers.go</span>
<span class="term-fg1">index 774092027e1edaa56a748185d1a7739ca0c4410b..60e23cede61649f458178c5cdac5b049c128e237 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;handlers.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;handlers.go</span>
<span class="term-fg36">@@ -20,6 +20,7 @@</span> import (
 	&quot;context&quot;
 	&quot;fmt&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&quot;
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
<span class="term-fg36">@@ -157,7 +158,7 @@</span> 	}
 	return bodies
 }
&nbsp;
<span class="term-fg31">-func AnswerGetReceiptsQuery(br services.FullBlockReader, db kv.Tx, query GetReceiptsPacket) ([]rlp.RawValue, error) { &#47;&#47;nolint:unparam</span>
<span class="term-fg32">+func AnswerGetReceiptsQuery(chainConfig *chain.Config, br services.FullBlockReader, db kv.Tx, query GetReceiptsPacket) ([]rlp.RawValue, error) { &#47;&#47;nolint:unparam</span>
 	&#47;&#47; Gather state data until the fetch or network limits is reached
 	var (
 		bytes    int
<span class="term-fg36">@@ -180,7 +181,7 @@</span> 		}
 		if b == nil {
 			return nil, nil
 		}
<span class="term-fg31">-		results := rawdb.ReadReceipts(db, b, s)</span>
<span class="term-fg32">+		results := rawdb.ReadReceipts(chainConfig, db, b, s)</span>
 		if results == nil {
 			header, err := rawdb.ReadHeaderByHash(db, hash)
 			if err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d49bbabdffa3f82154f4acd7" role="button"
                   aria-expanded="false" aria-controls="id-d49bbabdffa3f82154f4acd7">
                    <code>eth/protocols/eth/protocol.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/protocols/eth/protocol.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/protocols/eth/protocol.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d49bbabdffa3f82154f4acd7"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;protocol.go bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;protocol.go</span>
<span class="term-fg1">index 1818bf25879cd391c0bbd08d8017aa4ea4e1a062..d55f4b5b61e315a7f34cc2645fcfde2f6856f59f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;protocols&#47;eth&#47;protocol.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;protocols&#47;eth&#47;protocol.go</span>
<span class="term-fg36">@@ -20,11 +20,11 @@</span> import (
 	&quot;fmt&quot;
 	&quot;io&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;bits&quot;</span>
&nbsp;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;direct&quot;
 	proto_sentry &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;gointerfaces&#47;sentry&quot;
<span class="term-fg31">-	rlp2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;rlp&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;forkid&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
<span class="term-fg36">@@ -250,8 +250,12 @@</span>
 func (nbp NewBlockPacket) EncodeRLP(w io.Writer) error {
 	encodingSize := 0
 	&#47;&#47; size of Block
<span class="term-fg32">+	encodingSize++</span>
 	blockLen := nbp.Block.EncodingSize()
<span class="term-fg31">-	encodingSize += rlp2.ListPrefixLen(blockLen) + blockLen</span>
<span class="term-fg32">+	if blockLen &gt;= 56 {</span>
<span class="term-fg32">+		encodingSize += libcommon.BitLenToByteLen(bits.Len(uint(blockLen)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	encodingSize += blockLen</span>
 	&#47;&#47; size of TD
 	encodingSize++
 	var tdBitLen, tdLen int</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-26c98bd4196c963927194166" role="button"
                   aria-expanded="false" aria-controls="id-26c98bd4196c963927194166">
                    <code>eth/stagedsync/exec3.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/exec3.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/exec3.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-26c98bd4196c963927194166"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;exec3.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;exec3.go</span>
<span class="term-fg1">index fb610e924415750a4232fa7bb7e102b160134940..baa73238920e8d1901fd75f4af0b5c7d72334119 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;exec3.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;exec3.go</span>
<span class="term-fg36">@@ -531,7 +531,7 @@</span> 			getHashFnMute.Lock()
 			defer getHashFnMute.Unlock()
 			return f(n)
 		}
<span class="term-fg31">-		blockContext := core.NewEVMBlockContext(header, getHashFn, engine, nil &#47;* author *&#47;)</span>
<span class="term-fg32">+		blockContext := core.NewEVMBlockContext(header, getHashFn, engine, nil &#47;* author *&#47;, nil &#47;*FIXME (this is definitely wrong)*&#47;)</span>
&nbsp;
 		if parallel {
 			select {
<span class="term-fg36">@@ -1058,7 +1058,7 @@</span> 				getHashFnMute.Lock()
 				defer getHashFnMute.Unlock()
 				return f(n)
 			}
<span class="term-fg31">-			blockContext := core.NewEVMBlockContext(header, getHashFn, engine, nil &#47;* author *&#47;)</span>
<span class="term-fg32">+			blockContext := core.NewEVMBlockContext(header, getHashFn, engine, nil &#47;* author *&#47;, nil &#47;* TODO(jky) this is definitely wrong *&#47;)</span>
 			rules := chainConfig.Rules(bn, b.Time())
&nbsp;
 			for txIndex := -1; txIndex &lt;= len(txs); txIndex++ {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0dc7fc2d1ea5bfac9ff6b2c7" role="button"
                   aria-expanded="false" aria-controls="id-0dc7fc2d1ea5bfac9ff6b2c7">
                    <code>eth/stagedsync/stage_execute.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/stage_execute.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/stage_execute.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0dc7fc2d1ea5bfac9ff6b2c7"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_execute.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_execute.go</span>
<span class="term-fg1">index 0a665cb30672730c331e1f5610d89590d587068a..1629bf5ca82c906745e5779bd520f9eb8116f61f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_execute.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_execute.go</span>
<span class="term-fg36">@@ -11,7 +11,6 @@</span> 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;c2h5oh&#47;datasize&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;membatch&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;membatchwithdb&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;golang.org&#47;x&#47;sync&#47;errgroup&quot;
&nbsp;
<span class="term-fg36">@@ -464,8 +463,7 @@</span> 		writeChangeSets := nextStagesExpectData || blockNum &gt; cfg.prune.History.PruneTo(to)
 		writeReceipts := nextStagesExpectData || blockNum &gt; cfg.prune.Receipts.PruneTo(to)
 		writeCallTraces := nextStagesExpectData || blockNum &gt; cfg.prune.CallTraces.PruneTo(to)
&nbsp;
<span class="term-fg31">-		_, is_memory_mutation := tx.(*membatchwithdb.MemoryMutation)</span>
<span class="term-fg31">-		if cfg.silkworm != nil &amp;&amp; !is_memory_mutation {</span>
<span class="term-fg32">+		if cfg.silkworm != nil {</span>
 			blockNum, err = cfg.silkworm.ExecuteBlocks(tx, cfg.chainConfig.ChainID, blockNum, to, uint64(cfg.batchSize), writeChangeSets, writeReceipts, writeCallTraces)
 		} else {
 			err = executeBlock(block, tx, batch, cfg, *cfg.vmConfig, writeChangeSets, writeReceipts, writeCallTraces, initialCycle, stateStream, logger)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-52bd93cd9602bccfc6171984" role="button"
                   aria-expanded="false" aria-controls="id-52bd93cd9602bccfc6171984">
                    <code>eth/stagedsync/stage_finish.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/stage_finish.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/stage_finish.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-52bd93cd9602bccfc6171984"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_finish.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_finish.go</span>
<span class="term-fg1">index 39bdd191cc162b0e9144bcdd3bb2d2be0cf4b7a8..4017e5fe3ad36cac6972249454aeb29437e24772 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_finish.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_finish.go</span>
<span class="term-fg36">@@ -55,9 +55,6 @@</span> 	var err error
 	if executionAt, err = s.ExecutionAt(tx); err != nil {
 		return err
 	}
<span class="term-fg31">-	if s.BlockNumber &gt; executionAt { &#47;&#47; Erigon will self-heal (download missed blocks) eventually</span>
<span class="term-fg31">-		return nil</span>
<span class="term-fg31">-	}</span>
 	if executionAt &lt;= s.BlockNumber {
 		return nil
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-11a20c97e58110d1f3182382" role="button"
                   aria-expanded="false" aria-controls="id-11a20c97e58110d1f3182382">
                    <code>eth/stagedsync/stage_headers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/eth/stagedsync/stage_headers.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/eth/stagedsync/stage_headers.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-11a20c97e58110d1f3182382"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_headers.go bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_headers.go</span>
<span class="term-fg1">index ea99b6c394394225d583b011fba0e2f5212d3b11..645cca61a9224e6b13685ce9fc343fc252fedd68 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;eth&#47;stagedsync&#47;stage_headers.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;eth&#47;stagedsync&#47;stage_headers.go</span>
<span class="term-fg36">@@ -113,7 +113,6 @@</span> 		}
 	}
&nbsp;
 	return HeadersPOW(s, u, ctx, tx, cfg, initialCycle, test, useExternalTx, logger)
<span class="term-fg31">-</span>
 }
&nbsp;
 &#47;&#47; HeadersPOW progresses Headers stage for Proof-of-Work headers</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bd64927bce37342c7ec2d060" role="button"
                   aria-expanded="false" aria-controls="id-bd64927bce37342c7ec2d060">
                    <code>go.mod</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/go.mod" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/go.mod" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-27</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bd64927bce37342c7ec2d060"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;go.mod bobanetwork&#47;v3-erigon&#47;go.mod</span>
<span class="term-fg1">index eda7b70c916ad20fd630d028147711ccb7fa0092..7d72629939469ef18619fede5585ea4e2e6b5181 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;go.mod</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;go.mod</span>
<span class="term-fg36">@@ -1,15 +1,14 @@</span>
 module github.com&#47;ledgerwatch&#47;erigon
&nbsp;
<span class="term-fg31">-go 1.20</span>
<span class="term-fg32">+go 1.19</span>
&nbsp;
 require (
<span class="term-fg31">-	github.com&#47;erigontech&#47;mdbx-go v0.27.19</span>
<span class="term-fg32">+	github.com&#47;erigontech&#47;mdbx-go v0.27.17</span>
 	github.com&#47;ledgerwatch&#47;erigon-lib v1.0.0
<span class="term-fg32">+	github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231014011414-bfa3a30f55b2</span>
 	github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0
 	github.com&#47;ledgerwatch&#47;secp256k1 v1.0.0
 )
<span class="term-fg31">-</span>
<span class="term-fg31">-replace github.com&#47;ledgerwatch&#47;erigon-lib =&gt; .&#47;erigon-lib</span>
&nbsp;
 require (
 	gfx.cafe&#47;util&#47;go&#47;generic v0.0.0-20230502013805-237fcc25d586
<span class="term-fg36">@@ -22,7 +21,7 @@</span> 	github.com&#47;alecthomas&#47;kong v0.8.0
 	github.com&#47;anacrolix&#47;sync v0.4.0
 	github.com&#47;anacrolix&#47;torrent v1.52.6-0.20230926121951-11833b45cfbe
 	github.com&#47;benesch&#47;cgosymbolizer v0.0.0-20190515212042-bec6fe6e597b
<span class="term-fg31">-	github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.1.3</span>
<span class="term-fg32">+	github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.2.0</span>
 	github.com&#47;c2h5oh&#47;datasize v0.0.0-20220606134207-859f65c6625b
 	github.com&#47;consensys&#47;gnark-crypto v0.12.1
 	github.com&#47;crate-crypto&#47;go-ipa v0.0.0-20221111143132-9aa5d42120bc
<span class="term-fg36">@@ -95,7 +94,7 @@</span> 	golang.org&#47;x&#47;net v0.17.0
 	golang.org&#47;x&#47;sync v0.4.0
 	golang.org&#47;x&#47;sys v0.13.0
 	golang.org&#47;x&#47;time v0.3.0
<span class="term-fg31">-	google.golang.org&#47;grpc v1.59.0</span>
<span class="term-fg32">+	google.golang.org&#47;grpc v1.58.3</span>
 	google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0
 	google.golang.org&#47;protobuf v1.31.0
 	gopkg.in&#47;check.v1 v1.0.0-20201130134442-10cb98267c6c
<span class="term-fg36">@@ -124,31 +123,12 @@</span> 	github.com&#47;anacrolix&#47;multiless v0.3.1-0.20221221005021-2d12701f83f7 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;stm v0.4.1-0.20221221005312-96d17df0e496 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;upnp v0.1.3-0.20220123035249-922794e51c96 &#47;&#47; indirect
 	github.com&#47;anacrolix&#47;utp v0.1.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;aws&#47;smithy-go v1.15.0 &#47;&#47; indirect</span>
 	github.com&#47;bahlo&#47;generic-list-go v0.2.0 &#47;&#47; indirect
 	github.com&#47;benbjohnson&#47;clock v1.3.5 &#47;&#47; indirect
 	github.com&#47;benbjohnson&#47;immutable v0.4.1-0.20221220213129-8932b999621d &#47;&#47; indirect
 	github.com&#47;beorn7&#47;perks v1.0.1 &#47;&#47; indirect
 	github.com&#47;bits-and-blooms&#47;bitset v1.7.0 &#47;&#47; indirect
 	github.com&#47;bradfitz&#47;iter v0.0.0-20191230175014-e8f45d346db8 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;btcsuite&#47;btcd&#47;chaincfg&#47;chainhash v1.0.1 &#47;&#47; indirect</span>
 	github.com&#47;cespare&#47;xxhash&#47;v2 v2.2.0 &#47;&#47; indirect
 	github.com&#47;consensys&#47;bavard v0.1.13 &#47;&#47; indirect
 	github.com&#47;containerd&#47;cgroups v1.1.0 &#47;&#47; indirect
<span class="term-fg36">@@ -189,7 +169,7 @@</span> 	github.com&#47;klauspost&#47;cpuid&#47;v2 v2.2.5 &#47;&#47; indirect
 	github.com&#47;koron&#47;go-ssdp v0.0.4 &#47;&#47; indirect
 	github.com&#47;kr&#47;pretty v0.3.1 &#47;&#47; indirect
 	github.com&#47;kr&#47;text v0.2.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;kylelemons&#47;godebug v1.1.0 &#47;&#47; indirect</span>
 	github.com&#47;libp2p&#47;go-buffer-pool v0.1.0 &#47;&#47; indirect
 	github.com&#47;libp2p&#47;go-cidranger v1.1.0 &#47;&#47; indirect
 	github.com&#47;libp2p&#47;go-flow-metrics v0.1.0 &#47;&#47; indirect
<span class="term-fg36">@@ -274,7 +254,7 @@</span> 	go.uber.org&#47;multierr v1.11.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;mod v0.13.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;text v0.13.0 &#47;&#47; indirect
 	golang.org&#47;x&#47;tools v0.14.0 &#47;&#47; indirect
<span class="term-fg31">-	google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d &#47;&#47; indirect</span>
<span class="term-fg32">+	google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98 &#47;&#47; indirect</span>
 	gopkg.in&#47;tomb.v1 v1.0.0-20141024135613-dd632973f1e7 &#47;&#47; indirect
 	lukechampine.com&#47;blake3 v1.2.1 &#47;&#47; indirect
 	lukechampine.com&#47;uint128 v1.3.0 &#47;&#47; indirect
<span class="term-fg36">@@ -289,6 +269,8 @@</span> 	modernc.org&#47;token v1.1.0 &#47;&#47; indirect
 	rsc.io&#47;tmplfunc v0.0.3 &#47;&#47; indirect
 	zombiezen.com&#47;go&#47;sqlite v0.13.1 &#47;&#47; indirect
 )
<span class="term-fg32">+</span>
<span class="term-fg32">+replace github.com&#47;ledgerwatch&#47;erigon-lib =&gt; .&#47;erigon-lib</span>
&nbsp;
 replace github.com&#47;tendermint&#47;tendermint =&gt; github.com&#47;bnb-chain&#47;tendermint v0.31.12
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1426bc91c0e3182c80f15fd2" role="button"
                   aria-expanded="false" aria-controls="id-1426bc91c0e3182c80f15fd2">
                    <code>migrations/migrations.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/migrations/migrations.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/migrations/migrations.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1426bc91c0e3182c80f15fd2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;migrations&#47;migrations.go bobanetwork&#47;v3-erigon&#47;migrations&#47;migrations.go</span>
<span class="term-fg1">index d69e523bcf96072cb0f022daac252a33bdaf594f..a84d4d31503f45e037fe49356dac8f815675d78c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;migrations&#47;migrations.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;migrations&#47;migrations.go</span>
<span class="term-fg36">@@ -36,8 +36,9 @@</span> 		dbSchemaVersion5,
 		TxsBeginEnd,
 		TxsV3,
 	},
<span class="term-fg31">-	kv.TxPoolDB: {},</span>
<span class="term-fg31">-	kv.SentryDB: {},</span>
<span class="term-fg32">+	kv.TxPoolDB:    {},</span>
<span class="term-fg32">+	kv.SentryDB:    {},</span>
<span class="term-fg32">+	kv.AcctProofDB: {},</span>
 }
&nbsp;
 type Callback func(tx kv.RwTx, progress []byte, isDone bool) error</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9baeddc1ab7b60bfb8d1c094" role="button"
                   aria-expanded="false" aria-controls="id-9baeddc1ab7b60bfb8d1c094">
                    <code>p2p/server.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/p2p/server.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/p2p/server.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9baeddc1ab7b60bfb8d1c094"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;p2p&#47;server.go bobanetwork&#47;v3-erigon&#47;p2p&#47;server.go</span>
<span class="term-fg1">index c4d15a2060da4ca503d71322e6b80388e6e2ea20..48015bcaa0187a6bf94dc211c127ca7f7a2db3ca 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;p2p&#47;server.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;p2p&#47;server.go</span>
<span class="term-fg36">@@ -542,19 +542,15 @@</span> 	if err != nil {
 		return err
 	}
 	srv.nodedb = db
<span class="term-fg31">-</span>
 	srv.localnode = enode.NewLocalNode(db, srv.PrivateKey, srv.logger)
 	srv.localnode.SetFallbackIP(net.IP{127, 0, 0, 1})
<span class="term-fg31">-</span>
<span class="term-fg32">+	srv.updateLocalNodeStaticAddrCache()</span>
 	&#47;&#47; TODO: check conflicts
 	for _, p := range srv.Protocols {
 		for _, e := range p.Attributes {
 			srv.localnode.Set(e)
 		}
 	}
<span class="term-fg31">-</span>
<span class="term-fg31">-	srv.updateLocalNodeStaticAddrCache()</span>
<span class="term-fg31">-</span>
 	switch srv.NAT.(type) {
 	case nil:
 		&#47;&#47; No NAT interface, do nothing.
<span class="term-fg36">@@ -620,7 +616,6 @@</span> 			}()
 		}
 	}
 	srv.localnode.SetFallbackUDP(realaddr.Port)
<span class="term-fg31">-	srv.updateLocalNodeStaticAddrCache()</span>
&nbsp;
 	&#47;&#47; Discovery V4
 	var unhandled chan discover.ReadPacket
<span class="term-fg36">@@ -723,8 +718,6 @@</span>
 	&#47;&#47; Update the local node record and map the TCP listening port if NAT is configured.
 	if tcp, ok := listener.Addr().(*net.TCPAddr); ok {
 		srv.localnode.Set(enr.TCP(tcp.Port))
<span class="term-fg31">-		srv.updateLocalNodeStaticAddrCache()</span>
<span class="term-fg31">-</span>
 		if !tcp.IP.IsLoopback() &amp;&amp; (srv.NAT != nil) &amp;&amp; srv.NAT.SupportsMapping() {
 			srv.loopWG.Add(1)
 			go func() {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ac447714635d2086f2aa4803" role="button"
                   aria-expanded="false" aria-controls="id-ac447714635d2086f2aa4803">
                    <code>params/bootnodes.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/params/bootnodes.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/bootnodes.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ac447714635d2086f2aa4803"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;bootnodes.go bobanetwork&#47;v3-erigon&#47;params&#47;bootnodes.go</span>
<span class="term-fg1">index 31b31f2ccf83a0c1e12b98e681c038d24eb95542..43d40b30968ecf0849d01e5c9fd76f6f3fd137a8 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;params&#47;bootnodes.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;bootnodes.go</span>
<span class="term-fg36">@@ -17,8 +17,9 @@</span>
 package params
&nbsp;
 import (
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 )
&nbsp;
 &#47;&#47; MainnetBootnodes are the enode URLs of the P2P bootstrap nodes running on</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-30c7ce01631c6bfcbfa5d9e9" role="button"
                   aria-expanded="false" aria-controls="id-30c7ce01631c6bfcbfa5d9e9">
                    <code>params/chainspecs/optimism-mainnet.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/chainspecs/optimism-mainnet.json" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+26</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-30c7ce01631c6bfcbfa5d9e9"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;chainspecs&#47;optimism-mainnet.json bobanetwork&#47;v3-erigon&#47;params&#47;chainspecs&#47;optimism-mainnet.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..655c96f6a1476be289c54a6941e0c1d37023164e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;chainspecs&#47;optimism-mainnet.json</span>
<span class="term-fg36">@@ -0,0 +1,26 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;ChainName&quot;: &quot;optimism-mainnet&quot;,</span>
<span class="term-fg32">+  &quot;chainId&quot;: 10,</span>
<span class="term-fg32">+  &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+  &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;muirGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+  &quot;berlinBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;londonBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;arrowGlacierBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;grayGlacierBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;mergeNetsplitBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;bedrockBlock&quot;: 105235063,</span>
<span class="term-fg32">+  &quot;terminalTotalDifficulty&quot;: 0,</span>
<span class="term-fg32">+  &quot;terminalTotalDifficultyPassed&quot;: true,</span>
<span class="term-fg32">+  &quot;optimism&quot;: {</span>
<span class="term-fg32">+      &quot;eip1559Elasticity&quot;: 6,</span>
<span class="term-fg32">+      &quot;eip1559Denominator&quot;: 50</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;regolithTime&quot;: 0</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e0c3465e386c65c0d60cbdac" role="button"
                   aria-expanded="false" aria-controls="id-e0c3465e386c65c0d60cbdac">
                    <code>params/config_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/params/config_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/params/config_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+20</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e0c3465e386c65c0d60cbdac"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;params&#47;config_test.go bobanetwork&#47;v3-erigon&#47;params&#47;config_test.go</span>
<span class="term-fg1">index b448a1526f496e62f8e8e5d99f067b6be0b67485..2332dabd5574fd5646d23063d1f102f9091172b2 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;params&#47;config_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;params&#47;config_test.go</span>
<span class="term-fg36">@@ -17,6 +17,7 @@</span>
 package params
&nbsp;
 import (
<span class="term-fg32">+	&quot;math&quot;</span>
 	&quot;math&#47;big&quot;
 	&quot;reflect&quot;
 	&quot;testing&quot;
<span class="term-fg36">@@ -98,3 +99,22 @@</span> 			t.Errorf(&quot;error mismatch:\nstored: %v\nnew: %v\nhead: %v\nerr: %v\nwant: %v&quot;, test.stored, test.new, test.head, err, test.wantErr)
 		}
 	}
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestConfigRulesRegolith(t *testing.T) {</span>
<span class="term-fg32">+	c := &amp;chain.Config{</span>
<span class="term-fg32">+		RegolithTime: big.NewInt(500),</span>
<span class="term-fg32">+		Optimism:     &amp;chain.OptimismConfig{},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var stamp uint64</span>
<span class="term-fg32">+	if r := c.Rules(0, stamp); r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to not be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	stamp = 500</span>
<span class="term-fg32">+	if r := c.Rules(0, stamp); !r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	stamp = math.MaxInt64</span>
<span class="term-fg32">+	if r := c.Rules(0, stamp); !r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-97c8cec306c6cfa2d16d53d3" role="button"
                   aria-expanded="false" aria-controls="id-97c8cec306c6cfa2d16d53d3">
                    <code>rlp/decode.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/rlp/decode.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/rlp/decode.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-97c8cec306c6cfa2d16d53d3"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;rlp&#47;decode.go bobanetwork&#47;v3-erigon&#47;rlp&#47;decode.go</span>
<span class="term-fg1">index 4824946e558c80c983f8932ac533c5d6284bfdec..812cb15167901c2c3dd7562d3e0276bbf8aa3e48 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;rlp&#47;decode.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;rlp&#47;decode.go</span>
<span class="term-fg36">@@ -31,6 +31,7 @@</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;</span>
 )
&nbsp;
 &#47;&#47;lint:ignore ST1012 EOL is not an error.
<span class="term-fg36">@@ -201,6 +202,8 @@</span> 	case typ.AssignableTo(reflect.PtrTo(uint256Int)):
 		return decodeUint256, nil
 	case typ.AssignableTo(uint256Int):
 		return decodeUint256NoPtr, nil
<span class="term-fg32">+	case typ == reflect.TypeOf(hexutil.Big{}):</span>
<span class="term-fg32">+		return decodeHexBigNoPtr, nil</span>
 	case kind == reflect.Ptr:
 		return makePtrDecoder(typ, tags)
 	case reflect.PtrTo(typ).Implements(decoderInterface):
<span class="term-fg36">@@ -261,6 +264,16 @@</span> }
&nbsp;
 func decodeBigIntNoPtr(s *Stream, val reflect.Value) error {
 	return decodeBigInt(s, val.Addr())
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func decodeHexBigNoPtr(s *Stream, val reflect.Value) error {</span>
<span class="term-fg32">+	var bi big.Int</span>
<span class="term-fg32">+	err := decodeBigInt(s, reflect.ValueOf(&amp;bi))</span>
<span class="term-fg32">+	if err == nil {</span>
<span class="term-fg32">+		hb := val.Addr().Interface().(*hexutil.Big)</span>
<span class="term-fg32">+		*hb = (hexutil.Big)(bi)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return err</span>
 }
&nbsp;
 func decodeBigInt(s *Stream, val reflect.Value) error {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-aeb1ee1b0659535922506879" role="button"
                   aria-expanded="false" aria-controls="id-aeb1ee1b0659535922506879">
                    <code>rlp/encode.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/rlp/encode.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/rlp/encode.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-aeb1ee1b0659535922506879"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;rlp&#47;encode.go bobanetwork&#47;v3-erigon&#47;rlp&#47;encode.go</span>
<span class="term-fg1">index f43b71670d8bc5a1340ad494f9a5d71e69c33335..500de30118460d49bc7abe2ad2264f43d8d00d34 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;rlp&#47;encode.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;rlp&#47;encode.go</span>
<span class="term-fg36">@@ -26,6 +26,7 @@</span> 	&quot;reflect&quot;
 	&quot;sync&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;</span>
&nbsp;
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 )
<span class="term-fg36">@@ -366,6 +367,8 @@</span> 	case typ.AssignableTo(reflect.PtrTo(uint256Int)):
 		return writeUint256Ptr, nil
 	case typ.AssignableTo(uint256Int):
 		return writeUint256NoPtr, nil
<span class="term-fg32">+	case typ == reflect.TypeOf(hexutil.Big{}):</span>
<span class="term-fg32">+		return writeHexBigNoPtr, nil</span>
 	case kind == reflect.Ptr:
 		return makePtrWriter(typ, ts)
 	case reflect.PtrTo(typ).Implements(encoderInterface):
<span class="term-fg36">@@ -422,6 +425,12 @@</span>
 func writeBigIntNoPtr(val reflect.Value, w *encbuf) error {
 	i := val.Interface().(big.Int)
 	return writeBigInt(&amp;i, w)
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func writeHexBigNoPtr(val reflect.Value, w *encbuf) error {</span>
<span class="term-fg32">+	bi := val.Interface().(hexutil.Big)</span>
<span class="term-fg32">+	i := bi.ToInt()</span>
<span class="term-fg32">+	return writeBigInt(i, w)</span>
 }
&nbsp;
 &#47;&#47; wordBytes is the number of bytes in a big.Word</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-be765fb468c64166311847bd" role="button"
                   aria-expanded="false" aria-controls="id-be765fb468c64166311847bd">
                    <code>rpc/rpccfg/rpccfg.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/rpc/rpccfg/rpccfg.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/rpc/rpccfg/rpccfg.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-be765fb468c64166311847bd"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;rpc&#47;rpccfg&#47;rpccfg.go bobanetwork&#47;v3-erigon&#47;rpc&#47;rpccfg&#47;rpccfg.go</span>
<span class="term-fg1">index f1cde689c78d917d117656fa44f7ca02cccbe506..b7b936eaf05f5264de4e962fac21fe26e01a30c3 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;rpc&#47;rpccfg&#47;rpccfg.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;rpc&#47;rpccfg&#47;rpccfg.go</span>
<span class="term-fg36">@@ -37,3 +37,5 @@</span> 	IdleTimeout:  120 * time.Second,
 }
&nbsp;
 const DefaultEvmCallTimeout = 5 * time.Minute
<span class="term-fg32">+</span>
<span class="term-fg32">+const DefaultHistoricalRPCTimeout = 5 * time.Second</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7f1887de1ef55825d99c1a4b" role="button"
                   aria-expanded="false" aria-controls="id-7f1887de1ef55825d99c1a4b">
                    <code>tests/bor/helper/miner.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/tests/bor/helper/miner.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/tests/bor/helper/miner.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7f1887de1ef55825d99c1a4b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;tests&#47;bor&#47;helper&#47;miner.go bobanetwork&#47;v3-erigon&#47;tests&#47;bor&#47;helper&#47;miner.go</span>
<span class="term-fg1">index 875ed01d6559609d8992ce8a607b44ae936569fe..0c3911cfca9850957cac578450b8b5401b9e49dd 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;tests&#47;bor&#47;helper&#47;miner.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;tests&#47;bor&#47;helper&#47;miner.go</span>
<span class="term-fg36">@@ -113,7 +113,7 @@</span> 	if err != nil {
 		return nil, nil, err
 	}
&nbsp;
<span class="term-fg31">-	downloaderConfig, err := downloadercfg.New(datadir.New(ddir), nodeCfg.Version, torrentLogLevel, downloadRate, uploadRate, utils.TorrentPortFlag.Value, utils.TorrentConnsPerFileFlag.Value, utils.TorrentDownloadSlotsFlag.Value, []string{}, []string{}, &quot;&quot;)</span>
<span class="term-fg32">+	downloaderConfig, err := downloadercfg.New(datadir.New(ddir), nodeCfg.Version, torrentLogLevel, downloadRate, uploadRate, utils.TorrentPortFlag.Value, utils.TorrentConnsPerFileFlag.Value, utils.TorrentDownloadSlotsFlag.Value, []string{}, &quot;&quot;)</span>
 	if err != nil {
 		return nil, nil, err
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7a26381fb20b53cda4db72e5" role="button"
                   aria-expanded="false" aria-controls="id-7a26381fb20b53cda4db72e5">
                    <code>tests/bor/mining_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/tests/bor/mining_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/tests/bor/mining_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a26381fb20b53cda4db72e5"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;tests&#47;bor&#47;mining_test.go bobanetwork&#47;v3-erigon&#47;tests&#47;bor&#47;mining_test.go</span>
<span class="term-fg1">index 4ed69cd0dd44afec75e69b44c26dca2a8601a75f..4568046f6b370104e580952aff45159d7faea749 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;tests&#47;bor&#47;mining_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;tests&#47;bor&#47;mining_test.go</span>
<span class="term-fg36">@@ -12,7 +12,6 @@</span> 	&quot;testing&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;fdlimit&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
<span class="term-fg36">@@ -20,6 +19,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;node&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;tests&#47;bor&#47;helper&quot;
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5dead3d834dd1566cd59290c" role="button"
                   aria-expanded="false" aria-controls="id-5dead3d834dd1566cd59290c">
                    <code>tests/state_test_util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/tests/state_test_util.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/tests/state_test_util.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5dead3d834dd1566cd59290c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;tests&#47;state_test_util.go bobanetwork&#47;v3-erigon&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">index 102b6465fffd8a76357239ff7da2221799880234..adbca2da70a1f5447b40f484ef0da3572a1af885 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;tests&#47;state_test_util.go</span>
<span class="term-fg36">@@ -233,7 +233,8 @@</span>
 	&#47;&#47; Prepare the EVM.
 	txContext := core.NewEVMTxContext(msg)
 	header := block.Header()
<span class="term-fg31">-	context := core.NewEVMBlockContext(header, core.GetHashFn(header, nil), nil, &amp;t.json.Env.Coinbase)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(config, statedb)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(header, core.GetHashFn(header, nil), nil, &amp;t.json.Env.Coinbase, l1CostFunc)</span>
 	context.GetHash = vmTestBlockHash
 	if baseFee != nil {
 		context.BaseFee = new(uint256.Int)
<span class="term-fg36">@@ -478,6 +479,7 @@</span> 		accessList,
 		false, &#47;* checkNonce *&#47;
 		false, &#47;* isFree *&#47;
 		uint256.MustFromBig(blobFeeCap),
<span class="term-fg32">+		0, &#47;&#47; rollupDataGas</span>
 	)
&nbsp;
 	return msg, nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-231dc3f01793649a96df3938" role="button"
                   aria-expanded="false" aria-controls="id-231dc3f01793649a96df3938">
                    <code>turbo/adapter/ethapi/api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/adapter/ethapi/api_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+131</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-231dc3f01793649a96df3938"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..15ddde07011d024671d147336da69e85d11b4e0e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;api_test.go</span>
<span class="term-fg36">@@ -0,0 +1,131 @@</span>
<span class="term-fg32">+package ethapi</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+		SourceHash: &amp;libcommon.Hash{1},</span>
<span class="term-fg32">+		From:       &amp;libcommon.Address{1},</span>
<span class="term-fg32">+		IsSystemTx: true,</span>
<span class="term-fg32">+		Mint:       uint256.NewInt(34),</span>
<span class="term-fg32">+		Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nonce := uint64(12)</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, libcommon.Hash{}, uint64(12), uint64(1), big.NewInt(0), &amp;nonce)</span>
<span class="term-fg32">+	&#47;&#47; Should provide zero values for unused fields that are required in other transactions</span>
<span class="term-fg32">+	require.Equal(t, got.GasPrice, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().GasPrice = %v, want 0x0&quot;, got.GasPrice)</span>
<span class="term-fg32">+	require.Equal(t, got.V, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().V = %v, want 0x0&quot;, got.V)</span>
<span class="term-fg32">+	require.Equal(t, got.R, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().R = %v, want 0x0&quot;, got.R)</span>
<span class="term-fg32">+	require.Equal(t, got.S, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().S = %v, want 0x0&quot;, got.S)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Should include deposit tx specific fields</span>
<span class="term-fg32">+	require.Equal(t, got.SourceHash, tx.SourceHash, &quot;newRPCTransaction().SourceHash = %v, want %v&quot;, got.SourceHash, tx.SourceHash)</span>
<span class="term-fg32">+	require.Equal(t, got.IsSystemTx, tx.IsSystemTx, &quot;newRPCTransaction().IsSystemTx = %v, want %v&quot;, got.IsSystemTx, tx.IsSystemTx)</span>
<span class="term-fg32">+	require.Equal(t, got.Mint, (*hexutil.Big)(tx.Mint.ToBig()), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Mint, tx.Mint.ToBig())</span>
<span class="term-fg32">+	require.Equal(t, got.Nonce, (hexutil.Uint64)(nonce), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Nonce, nonce)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionOmitIsSystemTxFalse(t *testing.T) {</span>
<span class="term-fg32">+	tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+		IsSystemTx: false,</span>
<span class="term-fg32">+		From:       &amp;libcommon.Address{1},</span>
<span class="term-fg32">+		Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, libcommon.Hash{}, uint64(12), uint64(1), big.NewInt(0), nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.False(t, got.IsSystemTx, &quot;should omit IsSystemTx when false&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestUnmarshalRpcDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name     string</span>
<span class="term-fg32">+		modifier func(tx *RPCTransaction)</span>
<span class="term-fg32">+		valid    bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:     &quot;Unmodified&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {},</span>
<span class="term-fg32">+			valid:    true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Zero Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Nil Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = nil</span>
<span class="term-fg32">+				tx.R = nil</span>
<span class="term-fg32">+				tx.S = nil</span>
<span class="term-fg32">+				tx.GasPrice = nil</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero GasPrice&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero V&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero R&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero S&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+				SourceHash: &amp;libcommon.Hash{1},</span>
<span class="term-fg32">+				From:       &amp;libcommon.Address{1},</span>
<span class="term-fg32">+				IsSystemTx: true,</span>
<span class="term-fg32">+				Mint:       uint256.NewInt(34),</span>
<span class="term-fg32">+				Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			rpcTx := newRPCTransaction(tx, libcommon.Hash{}, uint64(12), uint64(1), big.NewInt(0), nil)</span>
<span class="term-fg32">+			test.modifier(rpcTx)</span>
<span class="term-fg32">+			json, err := json.Marshal(rpcTx)</span>
<span class="term-fg32">+			require.NoError(t, err, &quot;marshalling failed: %w&quot;, err)</span>
<span class="term-fg32">+			parsed := &amp;types.DepositTransaction{}</span>
<span class="term-fg32">+			err = parsed.UnmarshalJSON(json)</span>
<span class="term-fg32">+			if test.valid {</span>
<span class="term-fg32">+				require.NoError(t, err, &quot;unmarshal failed: %w&quot;, err)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.Error(t, err, &quot;unmarshal should have failed but did not&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f32c45e5bf77fb813b78f704" role="button"
                   aria-expanded="false" aria-controls="id-f32c45e5bf77fb813b78f704">
                    <code>turbo/adapter/ethapi/get_proof.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/adapter/ethapi/get_proof.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/adapter/ethapi/get_proof.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f32c45e5bf77fb813b78f704"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;get_proof.go bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;get_proof.go</span>
<span class="term-fg1">index 49832b7f910545d6fb3dd3113a112b434bcbf5b3..c3b47a8c8949956498e84af46da68f35333e0748 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&#47;get_proof.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;adapter&#47;ethapi&#47;get_proof.go</span>
<span class="term-fg36">@@ -6,11 +6,11 @@</span>
 	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;length&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&#47;accounts&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;trie&quot;
 )
&nbsp;
<span class="term-fg32">+&#47;*</span>
 &#47;&#47; Result structs for GetProof
 type AccountResult struct {
 	Address      libcommon.Address `json:&quot;address&quot;`
<span class="term-fg36">@@ -21,12 +21,13 @@</span> 	Nonce        hexutil.Uint64    `json:&quot;nonce&quot;`
 	StorageHash  libcommon.Hash    `json:&quot;storageHash&quot;`
 	StorageProof []StorageResult   `json:&quot;storageProof&quot;`
 }
<span class="term-fg32">+</span>
 type StorageResult struct {
 	Key   string       `json:&quot;key&quot;`
 	Value *hexutil.Big `json:&quot;value&quot;`
 	Proof []string     `json:&quot;proof&quot;`
 }
<span class="term-fg31">-</span>
<span class="term-fg32">+*&#47;</span>
 &#47;*TODO: to support proofs
 func (s *PublicBlockChainAPI) GetProof(ctx context.Context, address libcommon.Address, storageKeys []string, blockNr rpc.BlockNumber) (*AccountResult, error) {
 	block := uint64(blockNr.Int64()) + 1</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7dd1e084bde493473f5821eb" role="button"
                   aria-expanded="false" aria-controls="id-7dd1e084bde493473f5821eb">
                    <code>turbo/cli/flags.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/cli/flags.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/cli/flags.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7dd1e084bde493473f5821eb"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;cli&#47;flags.go bobanetwork&#47;v3-erigon&#47;turbo&#47;cli&#47;flags.go</span>
<span class="term-fg1">index e8edff7a466528eb7cd45223b358da10e52a968a..8a4ae2051539880bed2fca6e71e1909d27bfe697 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;cli&#47;flags.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;cli&#47;flags.go</span>
<span class="term-fg36">@@ -403,6 +403,10 @@</span>
 		TxPoolApiAddr: ctx.String(utils.TxpoolApiAddrFlag.Name),
&nbsp;
 		StateCache: kvcache.DefaultCoherentConfig,
<span class="term-fg32">+</span>
<span class="term-fg32">+		RollupSequencerHTTP:        ctx.String(utils.RollupSequencerHTTPFlag.Name),</span>
<span class="term-fg32">+		RollupHistoricalRPC:        ctx.String(utils.RollupHistoricalRPCFlag.Name),</span>
<span class="term-fg32">+		RollupHistoricalRPCTimeout: ctx.Duration(utils.RollupHistoricalRPCTimeoutFlag.Name),</span>
 	}
 	if ctx.IsSet(utils.HttpCompressionFlag.Name) {
 		c.HttpCompression = ctx.Bool(utils.HttpCompressionFlag.Name)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-303710ff0bd1d57dea64c5d1" role="button"
                   aria-expanded="false" aria-controls="id-303710ff0bd1d57dea64c5d1">
                    <code>turbo/engineapi/engine_server.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/engineapi/engine_server.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/engineapi/engine_server.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+40</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-303710ff0bd1d57dea64c5d1"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&#47;engine_server.go bobanetwork&#47;v3-erigon&#47;turbo&#47;engineapi&#47;engine_server.go</span>
<span class="term-fg1">index a461006e1b86da6d0c563cfb3e4936806b0fcfdc..31c909e12959d80b68c501f9c718d925db0d01f8 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&#47;engine_server.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;engineapi&#47;engine_server.go</span>
<span class="term-fg36">@@ -77,8 +77,10 @@</span> }
&nbsp;
 func (e *EngineServer) Start(httpConfig httpcfg.HttpCfg, db kv.RoDB, blockReader services.FullBlockReader,
 	filters *rpchelper.Filters, stateCache kvcache.Cache, agg *libstate.AggregatorV3, engineReader consensus.EngineReader,
<span class="term-fg31">-	eth rpchelper.ApiBackend, txPool txpool.TxpoolClient, mining txpool.MiningClient) {</span>
<span class="term-fg31">-	base := jsonrpc.NewBaseApi(filters, stateCache, blockReader, agg, httpConfig.WithDatadir, httpConfig.EvmCallTimeout, engineReader, httpConfig.Dirs)</span>
<span class="term-fg32">+	eth rpchelper.ApiBackend, txPool txpool.TxpoolClient, mining txpool.MiningClient,</span>
<span class="term-fg32">+	seqRPCService, historicalRPCService *rpc.Client,</span>
<span class="term-fg32">+) {</span>
<span class="term-fg32">+	base := jsonrpc.NewBaseApi(filters, stateCache, blockReader, agg, httpConfig.WithDatadir, httpConfig.EvmCallTimeout, engineReader, httpConfig.Dirs, seqRPCService, historicalRPCService)</span>
&nbsp;
 	ethImpl := jsonrpc.NewEthAPI(base, db, eth, txPool, mining, httpConfig.Gascap, httpConfig.ReturnDataLimit, httpConfig.AllowUnprotectedTxs, e.logger)
&nbsp;
<span class="term-fg36">@@ -429,9 +431,15 @@</span>
 &#47;&#47; engineForkChoiceUpdated either states new block head or request the assembling of a new block
 func (s *EngineServer) forkchoiceUpdated(ctx context.Context, forkchoiceState *engine_types.ForkChoiceState, payloadAttributes *engine_types.PayloadAttributes, version clparams.StateVersion,
 ) (*engine_types.ForkChoiceUpdatedResponse, error) {
<span class="term-fg31">-	status, err := s.getQuickPayloadStatusIfPossible(forkchoiceState.HeadHash, 0, libcommon.Hash{}, forkchoiceState, false)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg32">+	var status *engine_types.PayloadStatus</span>
<span class="term-fg32">+	var err error</span>
<span class="term-fg32">+	&#47;&#47; In the Optimism case, we allow arbitrary rewinding of the safe block</span>
<span class="term-fg32">+	&#47;&#47; hash, so we skip the path which might short-circuit that</span>
<span class="term-fg32">+	if s.config.Optimism == nil {</span>
<span class="term-fg32">+		status, err = s.getQuickPayloadStatusIfPossible(forkchoiceState.HeadHash, 0, libcommon.Hash{}, forkchoiceState, false)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
 	}
 	s.lock.Lock()
 	defer s.lock.Unlock()
<span class="term-fg36">@@ -484,28 +492,45 @@</span>
 	headHeader := s.chainRW.GetHeaderByHash(forkchoiceState.HeadHash)
&nbsp;
 	if headHeader.Hash() != forkchoiceState.HeadHash {
<span class="term-fg31">-		&#47;&#47; Per Item 2 of https:&#47;&#47;github.com&#47;ethereum&#47;execution-apis&#47;blob&#47;v1.0.0-alpha.9&#47;src&#47;engine&#47;specification.md#specification-1:</span>
<span class="term-fg31">-		&#47;&#47; Client software MAY skip an update of the forkchoice state and</span>
<span class="term-fg31">-		&#47;&#47; MUST NOT begin a payload build process if forkchoiceState.headBlockHash doesn&#39;t reference a leaf of the block tree.</span>
<span class="term-fg31">-		&#47;&#47; That is, the block referenced by forkchoiceState.headBlockHash is neither the head of the canonical chain nor a block at the tip of any other chain.</span>
<span class="term-fg31">-		&#47;&#47; In the case of such an event, client software MUST return</span>
<span class="term-fg31">-		&#47;&#47; {payloadStatus: {status: VALID, latestValidHash: forkchoiceState.headBlockHash, validationError: null}, payloadId: null}.</span>
<span class="term-fg32">+		&#47;&#47; Optimism deviates slightly and allows arbitrary depth re-orgs.</span>
<span class="term-fg32">+		if s.config.Optimism == nil {</span>
<span class="term-fg32">+			&#47;&#47; Per Item 2 of https:&#47;&#47;github.com&#47;ethereum&#47;execution-apis&#47;blob&#47;v1.0.0-alpha.9&#47;src&#47;engine&#47;specification.md#specification-1:</span>
<span class="term-fg32">+			&#47;&#47; Client software MAY skip an update of the forkchoice state and</span>
<span class="term-fg32">+			&#47;&#47; MUST NOT begin a payload build process if forkchoiceState.headBlockHash doesn&#39;t reference a leaf of the block tree.</span>
<span class="term-fg32">+			&#47;&#47; That is, the block referenced by forkchoiceState.headBlockHash is neither the head of the canonical chain nor a block at the tip of any other chain.</span>
<span class="term-fg32">+			&#47;&#47; In the case of such an event, client software MUST return</span>
<span class="term-fg32">+			&#47;&#47; {payloadStatus: {status: VALID, latestValidHash: forkchoiceState.headBlockHash, validationError: null}, payloadId: null}.</span>
&nbsp;
<span class="term-fg31">-		s.logger.Warn(&quot;Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain&quot;,</span>
<span class="term-fg31">-			&quot;forkChoice.HeadBlockHash&quot;, forkchoiceState.HeadHash, &quot;headHeader.Hash&quot;, headHeader.Hash())</span>
<span class="term-fg31">-		return &amp;engine_types.ForkChoiceUpdatedResponse{PayloadStatus: status}, nil</span>
<span class="term-fg32">+			s.logger.Warn(&quot;Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain&quot;,</span>
<span class="term-fg32">+				&quot;forkChoice.HeadBlockHash&quot;, forkchoiceState.HeadHash, &quot;headHeader.Hash&quot;, headHeader.Hash())</span>
<span class="term-fg32">+			return &amp;engine_types.ForkChoiceUpdatedResponse{PayloadStatus: status}, nil</span>
<span class="term-fg32">+		}</span>
 	}
<span class="term-fg32">+	log.Debug(&quot;Continuing EngineForkChoiceUpdated&quot;, &quot;headNumber&quot;, headHeader.Number, &quot;headHash&quot;, headHeader.Hash(), &quot;numDeposits&quot;, len(payloadAttributes.Transactions))</span>
&nbsp;
 	timestamp := uint64(payloadAttributes.Timestamp)
 	if headHeader.Time &gt;= timestamp {
 		return nil, &amp;engine_helpers.InvalidPayloadAttributesErr
 	}
&nbsp;
<span class="term-fg32">+	if s.config.Optimism != nil &amp;&amp; payloadAttributes.GasLimit == nil {</span>
<span class="term-fg32">+		return nil, &amp;engine_helpers.InvalidPayloadAttributesErr</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	req := &amp;execution.AssembleBlockRequest{
 		ParentHash:            gointerfaces.ConvertHashToH256(forkchoiceState.HeadHash),
 		Timestamp:             timestamp,
 		PrevRandao:            gointerfaces.ConvertHashToH256(payloadAttributes.PrevRandao),
 		SuggestedFeeRecipient: gointerfaces.ConvertAddressToH160(payloadAttributes.SuggestedFeeRecipient),
<span class="term-fg32">+		GasLimit:              (*uint64)(payloadAttributes.GasLimit),</span>
<span class="term-fg32">+		Transactions: func() [][]byte {</span>
<span class="term-fg32">+			res := make([][]byte, len(payloadAttributes.Transactions))</span>
<span class="term-fg32">+			for i, tx := range payloadAttributes.Transactions {</span>
<span class="term-fg32">+				res[i] = []byte(tx)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return res</span>
<span class="term-fg32">+		}(),</span>
<span class="term-fg32">+		NoTxPool: payloadAttributes.NoTxPool,</span>
 	}
&nbsp;
 	if version &gt;= clparams.CapellaVersion {
<span class="term-fg36">@@ -523,6 +548,7 @@</span> 	}
 	if resp.Busy {
 		return nil, errors.New(&quot;[ForkChoiceUpdated]: execution service is busy, cannot assemble blocks&quot;)
 	}
<span class="term-fg32">+</span>
 	return &amp;engine_types.ForkChoiceUpdatedResponse{
 		PayloadStatus: &amp;engine_types.PayloadStatus{
 			Status:          engine_types.ValidStatus,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ecc58545c7e04b6fdd337e3e" role="button"
                   aria-expanded="false" aria-controls="id-ecc58545c7e04b6fdd337e3e">
                    <code>turbo/engineapi/engine_types/jsonrpc.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/engineapi/engine_types/jsonrpc.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/engineapi/engine_types/jsonrpc.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ecc58545c7e04b6fdd337e3e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&#47;engine_types&#47;jsonrpc.go bobanetwork&#47;v3-erigon&#47;turbo&#47;engineapi&#47;engine_types&#47;jsonrpc.go</span>
<span class="term-fg1">index 0d5d9f13f1f584bb78e8f84e0a6b9d552e620c85..8146de0f679cd21b36465a44294974183db948c3 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;engineapi&#47;engine_types&#47;jsonrpc.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;engineapi&#47;engine_types&#47;jsonrpc.go</span>
<span class="term-fg36">@@ -49,6 +49,9 @@</span> 	PrevRandao            common.Hash         `json:&quot;prevRandao&quot;            gencodec:&quot;required&quot;`
 	SuggestedFeeRecipient common.Address      `json:&quot;suggestedFeeRecipient&quot; gencodec:&quot;required&quot;`
 	Withdrawals           []*types.Withdrawal `json:&quot;withdrawals&quot;`
 	ParentBeaconBlockRoot *common.Hash        `json:&quot;parentBeaconBlockRoot&quot;`
<span class="term-fg32">+	GasLimit              *hexutil.Uint64     `json:&quot;gasLimit,omitempty&quot;`</span>
<span class="term-fg32">+	Transactions          []hexutility.Bytes  `json:&quot;transactions,omitempty&quot;`</span>
<span class="term-fg32">+	NoTxPool              bool                `json:&quot;noTxPool,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; TransitionConfiguration represents the correct configurations of the CL and the EL</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-53ea605e4cf5f2b6c02acfe3" role="button"
                   aria-expanded="false" aria-controls="id-53ea605e4cf5f2b6c02acfe3">
                    <code>turbo/execution/eth1/block_building.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/execution/eth1/block_building.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/execution/eth1/block_building.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-53ea605e4cf5f2b6c02acfe3"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;execution&#47;eth1&#47;block_building.go bobanetwork&#47;v3-erigon&#47;turbo&#47;execution&#47;eth1&#47;block_building.go</span>
<span class="term-fg1">index 609cb794acf51b6fe9d87c7b49162c6091431bc0..6881562ed89decf7fbd0cb50b15a12856e28cdd1 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;execution&#47;eth1&#47;block_building.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;execution&#47;eth1&#47;block_building.go</span>
<span class="term-fg36">@@ -55,6 +55,9 @@</span> 		Timestamp:             req.Timestamp,
 		PrevRandao:            gointerfaces.ConvertH256ToHash(req.PrevRandao),
 		SuggestedFeeRecipient: gointerfaces.ConvertH160toAddress(req.SuggestedFeeRecipient),
 		Withdrawals:           eth1_utils.ConvertWithdrawalsFromRpc(req.Withdrawals),
<span class="term-fg32">+		Deposits:              req.Transactions,</span>
<span class="term-fg32">+		NoTxPool:              req.NoTxPool,</span>
<span class="term-fg32">+		GasLimit:              req.GasLimit,</span>
 	}
&nbsp;
 	if err := e.checkWithdrawalsPresence(param.Timestamp, param.Withdrawals); err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-537de98e874ac8d835516c68" role="button"
                   aria-expanded="false" aria-controls="id-537de98e874ac8d835516c68">
                    <code>turbo/execution/eth1/forkchoice.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/execution/eth1/forkchoice.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/execution/eth1/forkchoice.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+33</span></div>
                        <div class="text-start"><span class="text-danger">-13</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-537de98e874ac8d835516c68"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;execution&#47;eth1&#47;forkchoice.go bobanetwork&#47;v3-erigon&#47;turbo&#47;execution&#47;eth1&#47;forkchoice.go</span>
<span class="term-fg1">index b48f3c686ee0b2404092fc61a1c4f16dd05fe5f0..3ec76165e69133869d6d185470ad959145b9ef9d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;execution&#47;eth1&#47;forkchoice.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;execution&#47;eth1&#47;forkchoice.go</span>
<span class="term-fg36">@@ -138,7 +138,18 @@</span> 		sendForkchoiceErrorWithoutWaiting(outcomeCh, err)
 		return
 	}
&nbsp;
<span class="term-fg32">+	unwindingToCanonical := false</span>
<span class="term-fg32">+	if e.config.IsOptimism() {</span>
<span class="term-fg32">+		headHash := rawdb.ReadHeadBlockHash(tx)</span>
<span class="term-fg32">+		unwindingToCanonical = blockHash != headHash</span>
<span class="term-fg32">+		if unwindingToCanonical {</span>
<span class="term-fg32">+			e.logger.Info(&quot;Optimism ForkChoice is choosing to unwind to a previously canonical block&quot;, &quot;blockHash&quot;, blockHash, &quot;blockNumber&quot;, fcuHeader.Number.Uint64())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Optimism allows unwinding to previously canonical hashes</span>
 	if canonicalHash == blockHash {
<span class="term-fg32">+</span>
 		&#47;&#47; if block hash is part of the canonical chain treat it as no-op.
 		writeForkChoiceHashes(tx, blockHash, safeHash, finalizedHash)
 		valid, err := e.verifyForkchoiceHashes(ctx, tx, blockHash, finalizedHash, safeHash)
<span class="term-fg36">@@ -153,11 +164,14 @@</span> 				Status:          execution.ExecutionStatus_InvalidForkchoice,
 			})
 			return
 		}
<span class="term-fg31">-		sendForkchoiceReceiptWithoutWaiting(outcomeCh, &amp;execution.ForkChoiceReceipt{</span>
<span class="term-fg31">-			LatestValidHash: gointerfaces.ConvertHashToH256(blockHash),</span>
<span class="term-fg31">-			Status:          execution.ExecutionStatus_Success,</span>
<span class="term-fg31">-		})</span>
<span class="term-fg31">-		return</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		if !unwindingToCanonical {</span>
<span class="term-fg32">+			sendForkchoiceReceiptWithoutWaiting(outcomeCh, &amp;execution.ForkChoiceReceipt{</span>
<span class="term-fg32">+				LatestValidHash: gointerfaces.ConvertHashToH256(blockHash),</span>
<span class="term-fg32">+				Status:          execution.ExecutionStatus_Success,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+			return</span>
<span class="term-fg32">+		}</span>
 	}
&nbsp;
 	&#47;&#47; If we don&#39;t have it, too bad
<span class="term-fg36">@@ -177,11 +191,13 @@</span> 		return
 	}
 	&#47;&#47; Find such point, and collect all hashes
 	newCanonicals := make([]*canonicalEntry, 0, 64)
<span class="term-fg31">-	newCanonicals = append(newCanonicals, &amp;canonicalEntry{</span>
<span class="term-fg31">-		hash:   fcuHeader.Hash(),</span>
<span class="term-fg31">-		number: fcuHeader.Number.Uint64(),</span>
<span class="term-fg31">-	})</span>
<span class="term-fg31">-	for !isCanonicalHash {</span>
<span class="term-fg32">+	if !unwindingToCanonical {</span>
<span class="term-fg32">+		newCanonicals = append(newCanonicals, &amp;canonicalEntry{</span>
<span class="term-fg32">+			hash:   fcuHeader.Hash(),</span>
<span class="term-fg32">+			number: fcuHeader.Number.Uint64(),</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for !isCanonicalHash &amp;&amp; !unwindingToCanonical {</span>
 		newCanonicals = append(newCanonicals, &amp;canonicalEntry{
 			hash:   currentParentHash,
 			number: currentParentNumber,
<span class="term-fg36">@@ -206,10 +222,14 @@</span> 			sendForkchoiceErrorWithoutWaiting(outcomeCh, err)
 			return
 		}
 	}
<span class="term-fg32">+	unwindToNumber := currentParentNumber</span>
<span class="term-fg32">+	if unwindingToCanonical {</span>
<span class="term-fg32">+		unwindToNumber = fcuHeader.Number.Uint64()</span>
<span class="term-fg32">+	}</span>
&nbsp;
<span class="term-fg31">-	e.executionPipeline.UnwindTo(currentParentNumber, stagedsync.ForkChoice)</span>
<span class="term-fg32">+	e.executionPipeline.UnwindTo(unwindToNumber, stagedsync.ForkChoice)</span>
 	if e.historyV3 {
<span class="term-fg31">-		if err := rawdbv3.TxNums.Truncate(tx, currentParentNumber); err != nil {</span>
<span class="term-fg32">+		if err := rawdbv3.TxNums.Truncate(tx, unwindToNumber); err != nil {</span>
 			sendForkchoiceErrorWithoutWaiting(outcomeCh, err)
 			return
 		}
<span class="term-fg36">@@ -241,7 +261,7 @@</span> 		return
 	}
&nbsp;
 	if e.historyV3 {
<span class="term-fg31">-		if err := rawdbv3.TxNums.Truncate(tx, currentParentNumber); err != nil {</span>
<span class="term-fg32">+		if err := rawdbv3.TxNums.Truncate(tx, unwindToNumber); err != nil {</span>
 			sendForkchoiceErrorWithoutWaiting(outcomeCh, err)
 			return
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-33d0a24561eaab55d021f36d" role="button"
                   aria-expanded="false" aria-controls="id-33d0a24561eaab55d021f36d">
                    <code>turbo/jsonrpc/daemon.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/daemon.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/daemon.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-33d0a24561eaab55d021f36d"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;daemon.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;daemon.go</span>
<span class="term-fg1">index 35a0f744ce6940be654a2b4e60a0d3be74717604..6062db6c33b58c02164f14d5c0c096186b184333 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;daemon.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;daemon.go</span>
<span class="term-fg36">@@ -19,9 +19,9 @@</span> &#47;&#47; APIList describes the list of available RPC apis
 func APIList(db kv.RoDB, eth rpchelper.ApiBackend, txPool txpool.TxpoolClient, mining txpool.MiningClient,
 	filters *rpchelper.Filters, stateCache kvcache.Cache,
 	blockReader services.FullBlockReader, agg *libstate.AggregatorV3, cfg httpcfg.HttpCfg, engine consensus.EngineReader,
<span class="term-fg31">-	logger log.Logger,</span>
<span class="term-fg32">+	seqRPCService, historicalRPCService *rpc.Client, logger log.Logger,</span>
 ) (list []rpc.API) {
<span class="term-fg31">-	base := NewBaseApi(filters, stateCache, blockReader, agg, cfg.WithDatadir, cfg.EvmCallTimeout, engine, cfg.Dirs)</span>
<span class="term-fg32">+	base := NewBaseApi(filters, stateCache, blockReader, agg, cfg.WithDatadir, cfg.EvmCallTimeout, engine, cfg.Dirs, seqRPCService, historicalRPCService)</span>
 	ethImpl := NewEthAPI(base, db, eth, txPool, mining, cfg.Gascap, cfg.ReturnDataLimit, cfg.AllowUnprotectedTxs, logger)
 	erigonImpl := NewErigonAPI(base, db, eth)
 	txpoolImpl := NewTxPoolAPI(base, db, txPool)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b953fa9f72688e27a57cae27" role="button"
                   aria-expanded="false" aria-controls="id-b953fa9f72688e27a57cae27">
                    <code>turbo/jsonrpc/debug_api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/debug_api_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/debug_api_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b953fa9f72688e27a57cae27"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;debug_api_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;debug_api_test.go</span>
<span class="term-fg1">index 33ea0e579f367bdfdf292d548c943d208c660c86..fdd0219bab248118988569e20cd0414c937160bb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;debug_api_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;debug_api_test.go</span>
<span class="term-fg36">@@ -52,7 +52,7 @@</span> func TestTraceBlockByNumber(t *testing.T) {
 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 	ethApi := NewEthAPI(baseApi, m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())
 	api := NewPrivateDebugAPI(baseApi, m.DB, 0)
 	for _, tt := range debugTraceTransactionTests {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e93919199de2b736d75ebb6" role="button"
                   aria-expanded="false" aria-controls="id-5e93919199de2b736d75ebb6">
                    <code>turbo/jsonrpc/erigon_block.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/erigon_block.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/erigon_block.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e93919199de2b736d75ebb6"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;erigon_block.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;erigon_block.go</span>
<span class="term-fg1">index d61069bad6346c2456dc5a1267d4ad9c07f9de0c..d1115bc8d0dc054e7f3e532a726dc69e36fb7737 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;erigon_block.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;erigon_block.go</span>
<span class="term-fg36">@@ -190,7 +190,8 @@</span> 	if td != nil {
 		additionalFields[&quot;totalDifficulty&quot;] = (*hexutil.Big)(td)
 	}
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockEx(block, true, fullTx, nil, common.Hash{}, additionalFields)</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(db, blockNum)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockEx(block, true, fullTx, nil, common.Hash{}, additionalFields, nil, depositNonces)</span>
&nbsp;
 	if err == nil &amp;&amp; rpc.BlockNumber(block.NumberU64()) == rpc.PendingBlockNumber {
 		&#47;&#47; Pending blocks need to nil out a few fields</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e43641bc0c7c4c1835fdc511" role="button"
                   aria-expanded="false" aria-controls="id-e43641bc0c7c4c1835fdc511">
                    <code>turbo/jsonrpc/eth_accounts.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_accounts.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_accounts.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+75</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e43641bc0c7c4c1835fdc511"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts.go</span>
<span class="term-fg1">index 8653a2c62806848eac0d37b713167f74136c5d8a..9187cd60ee6ef8a03043539f6352a6c632546a38 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts.go</span>
<span class="term-fg36">@@ -26,6 +26,26 @@</span> 	if err1 != nil {
 		return nil, fmt.Errorf(&quot;getBalance cannot open tx: %w&quot;, err1)
 	}
 	defer tx.Rollback()
<span class="term-fg32">+</span>
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutil.Big</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_getBalance&quot;, address, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	reader, err := rpchelper.CreateStateReader(ctx, tx, blockNrOrHash, 0, api.filters, api.stateCache, api.historyV3(tx), &quot;&quot;)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -62,6 +82,26 @@</span> 	if err1 != nil {
 		return nil, fmt.Errorf(&quot;getTransactionCount cannot open tx: %w&quot;, err1)
 	}
 	defer tx.Rollback()
<span class="term-fg32">+</span>
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutil.Uint64</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_getTransactionCount&quot;, address, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	reader, err := rpchelper.CreateStateReader(ctx, tx, blockNrOrHash, 0, api.filters, api.stateCache, api.historyV3(tx), &quot;&quot;)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -81,10 +121,26 @@</span> 	if err1 != nil {
 		return nil, fmt.Errorf(&quot;getCode cannot open tx: %w&quot;, err1)
 	}
 	defer tx.Rollback()
<span class="term-fg32">+</span>
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
 	chainConfig, err := api.chainConfig(tx)
 	if err != nil {
 		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)
 	}
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutility.Bytes</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_getCode&quot;, address, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	reader, err := rpchelper.CreateStateReader(ctx, tx, blockNrOrHash, 0, api.filters, api.stateCache, api.historyV3(tx), chainConfig.ChainName)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -110,6 +166,25 @@</span> 	if err1 != nil {
 		return hexutility.Encode(common.LeftPadBytes(empty, 32)), err1
 	}
 	defer tx.Rollback()
<span class="term-fg32">+</span>
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return hexutility.Encode(common.LeftPadBytes(empty, 32)), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return hexutility.Encode(common.LeftPadBytes(empty, 32)), fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutility.Bytes</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_getStorageAt&quot;, address, index, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return hexutility.Encode(common.LeftPadBytes(empty, 32)), fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return hexutility.Encode(common.LeftPadBytes(result, 32)), nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return hexutility.Encode(common.LeftPadBytes(empty, 32)), rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	reader, err := rpchelper.CreateStateReader(ctx, tx, blockNrOrHash, 0, api.filters, api.stateCache, api.historyV3(tx), &quot;&quot;)
 	if err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-093c17e7997c3a4cf5b85838" role="button"
                   aria-expanded="false" aria-controls="id-093c17e7997c3a4cf5b85838">
                    <code>turbo/jsonrpc/eth_accounts_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_accounts_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+293</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-093c17e7997c3a4cf5b85838"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3955da171b1507d318bb4d9d11cfbb41198880a0</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_accounts_test.go</span>
<span class="term-fg36">@@ -0,0 +1,293 @@</span>
<span class="term-fg32">+package jsonrpc</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;net&#47;http&quot;</span>
<span class="term-fg32">+	&quot;net&#47;http&#47;httptest&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type MockServer struct {</span>
<span class="term-fg32">+	Server  *httptest.Server</span>
<span class="term-fg32">+	Payload string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockServer) Start() {</span>
<span class="term-fg32">+	m.Server = httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {</span>
<span class="term-fg32">+		w.WriteHeader(http.StatusOK)</span>
<span class="term-fg32">+		w.Write([]byte(m.Payload))</span>
<span class="term-fg32">+	}))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockServer) Stop() {</span>
<span class="term-fg32">+	m.Server.Close()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockServer) UpdatePayload(payload string) {</span>
<span class="term-fg32">+	m.Payload = payload</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockServer) GetRPC() (*rpc.Client, error) {</span>
<span class="term-fg32">+	if m.Server == nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;server is not started&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), time.Second*5)</span>
<span class="term-fg32">+	client, err := rpc.DialContext(ctx, m.Server.URL, log.New())</span>
<span class="term-fg32">+	cancel()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return client, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGetBalanceHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	addr := libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:\&quot;0x1\&quot;}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  &quot;0x1&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			bal, err := api.GetBalance(m.Ctx, addr, rpc.BlockNumberOrHashWithNumber(0))</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, bal), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGetTransactionCountHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	addr := libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:\&quot;0x1\&quot;}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  &quot;0x1&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			val, err := api.GetTransactionCount(m.Ctx, addr, rpc.BlockNumberOrHashWithNumber(0))</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, val), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGetCodeHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	addr := libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:\&quot;0x4200000000000000000000000000000000000010\&quot;}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  &quot;0x4200000000000000000000000000000000000010&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			val, err := api.GetCode(m.Ctx, addr, rpc.BlockNumberOrHashWithNumber(0))</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, val), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGetStorageAtHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	addr := libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:\&quot;0x4200000000000000000000000000000000000010\&quot;}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  &quot;0x0000000000000000000000004200000000000000000000000000000000000010&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			val, err := api.GetStorageAt(m.Ctx, addr, &quot;1&quot;, rpc.BlockNumberOrHashWithNumber(0))</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, val), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d7a924647f3fe9e629300d28" role="button"
                   aria-expanded="false" aria-controls="id-d7a924647f3fe9e629300d28">
                    <code>turbo/jsonrpc/eth_api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_api.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_api.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+47</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d7a924647f3fe9e629300d28"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_api.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_api.go</span>
<span class="term-fg1">index 51c2b1cf086185a6be12e40ed7cf77038435a35d..1aa68db95968dda2155269f09ed9f6f20af3dfb7 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_api.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_api.go</span>
<span class="term-fg36">@@ -15,6 +15,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;datadir&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;hexutility&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;gointerfaces&#47;txpool&quot;
<span class="term-fg36">@@ -123,9 +124,13 @@</span> 	_engine      consensus.EngineReader
&nbsp;
 	evmCallTimeout time.Duration
 	dirs           datadir.Dirs
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Optimism specific field</span>
<span class="term-fg32">+	seqRPCService        *rpc.Client</span>
<span class="term-fg32">+	historicalRPCService *rpc.Client</span>
 }
&nbsp;
<span class="term-fg31">-func NewBaseApi(f *rpchelper.Filters, stateCache kvcache.Cache, blockReader services.FullBlockReader, agg *libstate.AggregatorV3, singleNodeMode bool, evmCallTimeout time.Duration, engine consensus.EngineReader, dirs datadir.Dirs) *BaseAPI {</span>
<span class="term-fg32">+func NewBaseApi(f *rpchelper.Filters, stateCache kvcache.Cache, blockReader services.FullBlockReader, agg *libstate.AggregatorV3, singleNodeMode bool, evmCallTimeout time.Duration, engine consensus.EngineReader, dirs datadir.Dirs, seqRPCService, historicalRPCService *rpc.Client) *BaseAPI {</span>
 	blocksLRUSize := 128 &#47;&#47; ~32Mb
 	if !singleNodeMode {
 		blocksLRUSize = 512
<span class="term-fg36">@@ -135,7 +140,7 @@</span> 	if err != nil {
 		panic(err)
 	}
&nbsp;
<span class="term-fg31">-	return &amp;BaseAPI{filters: f, stateCache: stateCache, blocksLRU: blocksLRU, _blockReader: blockReader, _txnReader: blockReader, _agg: agg, evmCallTimeout: evmCallTimeout, _engine: engine, dirs: dirs}</span>
<span class="term-fg32">+	return &amp;BaseAPI{filters: f, stateCache: stateCache, blocksLRU: blocksLRU, _blockReader: blockReader, _txnReader: blockReader, _agg: agg, evmCallTimeout: evmCallTimeout, _engine: engine, dirs: dirs, seqRPCService: seqRPCService, historicalRPCService: historicalRPCService}</span>
 }
&nbsp;
 func (api *BaseAPI) chainConfig(tx kv.Tx) (*chain.Config, error) {
<span class="term-fg36">@@ -315,6 +320,20 @@</span>
 	return p, nil
 }
&nbsp;
<span class="term-fg32">+func (api *BaseAPI) blockNumberFromBlockNumberOrHash(tx kv.Tx, bnh *rpc.BlockNumberOrHash) (uint64, error) {</span>
<span class="term-fg32">+	if number, ok := bnh.Number(); ok {</span>
<span class="term-fg32">+		return uint64(number.Int64()), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if hash, ok := bnh.Hash(); ok {</span>
<span class="term-fg32">+		number := rawdb.ReadHeaderNumber(tx, hash)</span>
<span class="term-fg32">+		if number == nil {</span>
<span class="term-fg32">+			return 0, fmt.Errorf(&quot;block %x not found&quot;, hash)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return *number, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return 0, fmt.Errorf(&quot;invalid block number of hash&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; APIImpl is implementation of the EthAPI interface based on remote Db access
 type APIImpl struct {
 	*BaseAPI
<span class="term-fg36">@@ -372,11 +391,14 @@</span> 	BlobVersionedHashes []common.Hash      `json:&quot;blobVersionedHashes,omitempty&quot;`
 	V                   *hexutil.Big       `json:&quot;v&quot;`
 	R                   *hexutil.Big       `json:&quot;r&quot;`
 	S                   *hexutil.Big       `json:&quot;s&quot;`
<span class="term-fg32">+	SourceHash          *common.Hash       `json:&quot;sourceHash,omitempty&quot;`</span>
<span class="term-fg32">+	Mint                *hexutil.Big       `json:&quot;mint,omitempty&quot;`</span>
<span class="term-fg32">+	IsSystemTx          bool               `json:&quot;isSystemTx,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; newRPCTransaction returns a transaction that will serialize to the RPC
 &#47;&#47; representation, with the given location metadata set (if available).
<span class="term-fg31">-func newRPCTransaction(tx types.Transaction, blockHash common.Hash, blockNumber uint64, index uint64, baseFee *big.Int) *RPCTransaction {</span>
<span class="term-fg32">+func newRPCTransaction(tx types.Transaction, blockHash common.Hash, blockNumber uint64, index uint64, baseFee *big.Int, depositNonce *uint64) *RPCTransaction {</span>
 	&#47;&#47; Determine the signer. For replay-protected transactions, use the most permissive
 	&#47;&#47; signer, because we assume that signers are backwards-compatible with old
 	&#47;&#47; transactions. For non-protected transactions, the homestead signer signer is used
<span class="term-fg36">@@ -394,9 +416,13 @@</span> 	}
 	switch t := tx.(type) {
 	case *types.LegacyTx:
 		chainId = types.DeriveChainId(&amp;t.V)
<span class="term-fg31">-		&#47;&#47; if a legacy transaction has an EIP-155 chain id, include it explicitly, otherwise chain id is not included</span>
<span class="term-fg31">-		if !chainId.IsZero() {</span>
<span class="term-fg31">-			result.ChainID = (*hexutil.Big)(chainId.ToBig())</span>
<span class="term-fg32">+		&#47;&#47; avoid overflow by not calling DeriveChainId. chain id not included when v = 0</span>
<span class="term-fg32">+		if !t.V.IsZero() {</span>
<span class="term-fg32">+			chainId = types.DeriveChainId(&amp;t.V)</span>
<span class="term-fg32">+			&#47;&#47; if a legacy transaction has an EIP-155 chain id, include it explicitly, otherwise chain id is not included</span>
<span class="term-fg32">+			if !chainId.IsZero() {</span>
<span class="term-fg32">+				result.ChainID = (*hexutil.Big)(chainId.ToBig())</span>
<span class="term-fg32">+			}</span>
 		}
 		result.GasPrice = (*hexutil.Big)(t.GasPrice.ToBig())
 		result.V = (*hexutil.Big)(t.V.ToBig())
<span class="term-fg36">@@ -432,6 +458,20 @@</span> 		result.Accesses = &amp;t.AccessList
 		result.GasPrice = computeGasPrice(tx, blockHash, baseFee)
 		result.MaxFeePerBlobGas = (*hexutil.Big)(t.MaxFeePerBlobGas.ToBig())
 		result.BlobVersionedHashes = t.BlobVersionedHashes
<span class="term-fg32">+	case *types.DepositTransaction:</span>
<span class="term-fg32">+		result.SourceHash = t.SourceHash</span>
<span class="term-fg32">+		if t.IsSystemTx {</span>
<span class="term-fg32">+			result.IsSystemTx = t.IsSystemTx</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if depositNonce != nil {</span>
<span class="term-fg32">+			result.Nonce = hexutil.Uint64(*depositNonce)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		result.Mint = (*hexutil.Big)(t.Mint.ToBig())</span>
<span class="term-fg32">+		result.GasPrice = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		&#47;&#47; must contain v, r, s values for backwards compatibility.</span>
<span class="term-fg32">+		result.V = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		result.R = (*hexutil.Big)(libcommon.Big0)</span>
<span class="term-fg32">+		result.S = (*hexutil.Big)(libcommon.Big0)</span>
 	}
 	signer := types.LatestSignerForChainID(chainId.ToBig())
 	result.From, _ = tx.Sender(*signer)
<span class="term-fg36">@@ -487,7 +527,7 @@</span> 	var baseFee *big.Int
 	if current != nil {
 		baseFee = misc.CalcBaseFee(config, current)
 	}
<span class="term-fg31">-	return newRPCTransaction(tx, common.Hash{}, 0, 0, baseFee)</span>
<span class="term-fg32">+	return newRPCTransaction(tx, common.Hash{}, 0, 0, baseFee, nil)</span>
 }
&nbsp;
 &#47;&#47; newRPCRawTransactionFromBlockIndex returns the bytes of a transaction given a block and a transaction index.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d0e8e991010c3a349405ba09" role="button"
                   aria-expanded="false" aria-controls="id-d0e8e991010c3a349405ba09">
                    <code>turbo/jsonrpc/eth_api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_api_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_api_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+124</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d0e8e991010c3a349405ba09"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_api_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_api_test.go</span>
<span class="term-fg1">index 90b7b7c9913043299833286033143eba35f06e75..3ccf93792b11abe37f2fbd5855797d87ada94f29 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_api_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_api_test.go</span>
<span class="term-fg36">@@ -2,16 +2,20 @@</span> package jsonrpc
&nbsp;
 import (
 	&quot;context&quot;
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
 	&quot;fmt&quot;
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;stretchr&#47;testify&#47;assert&quot;
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;kvcache&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;hexutil&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&#47;rpccfg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&quot;
<span class="term-fg36">@@ -24,7 +28,7 @@</span>
 func newBaseApiForTest(m *mock.MockSentry) *BaseAPI {
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	return NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	return NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 }
&nbsp;
 func TestGetBalanceChangesInBlock(t *testing.T) {
<span class="term-fg36">@@ -54,7 +58,7 @@</span> 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
 	db := m.DB
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	api := NewEthAPI(NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), db, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), db, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
 	&#47;&#47; Call GetTransactionReceipt for transaction which is not in the database
 	if _, err := api.GetTransactionReceipt(context.Background(), common.Hash{}); err != nil {
 		t.Errorf(&quot;calling GetTransactionReceipt with empty hash: %v&quot;, err)
<span class="term-fg36">@@ -234,3 +238,121 @@</span> 	} else {
 		t.Error(&quot;error expected&quot;)
 	}
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+		SourceHash: &amp;common.Hash{1},</span>
<span class="term-fg32">+		From:       &amp;common.Address{1},</span>
<span class="term-fg32">+		IsSystemTx: true,</span>
<span class="term-fg32">+		Mint:       uint256.NewInt(34),</span>
<span class="term-fg32">+		Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nonce := uint64(12)</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), &amp;nonce)</span>
<span class="term-fg32">+	&#47;&#47; Should provide zero values for unused fields that are required in other transactions</span>
<span class="term-fg32">+	require.Equal(t, got.GasPrice, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().GasPrice = %v, want 0x0&quot;, got.GasPrice)</span>
<span class="term-fg32">+	require.Equal(t, got.V, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().V = %v, want 0x0&quot;, got.V)</span>
<span class="term-fg32">+	require.Equal(t, got.R, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().R = %v, want 0x0&quot;, got.R)</span>
<span class="term-fg32">+	require.Equal(t, got.S, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().S = %v, want 0x0&quot;, got.S)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Should include deposit tx specific fields</span>
<span class="term-fg32">+	require.Equal(t, got.SourceHash, tx.SourceHash, &quot;newRPCTransaction().SourceHash = %v, want %v&quot;, got.SourceHash, tx.SourceHash)</span>
<span class="term-fg32">+	require.Equal(t, got.IsSystemTx, tx.IsSystemTx, &quot;newRPCTransaction().IsSystemTx = %v, want %v&quot;, got.IsSystemTx, tx.IsSystemTx)</span>
<span class="term-fg32">+	require.Equal(t, got.Mint, (*hexutil.Big)(tx.Mint.ToBig()), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Mint, tx.Mint.ToBig())</span>
<span class="term-fg32">+	require.Equal(t, got.Nonce, (hexutil.Uint64)(nonce), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Nonce, nonce)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionOmitIsSystemTxFalse(t *testing.T) {</span>
<span class="term-fg32">+	tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+		IsSystemTx: false,</span>
<span class="term-fg32">+		From:       &amp;common.Address{1},</span>
<span class="term-fg32">+		Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.False(t, got.IsSystemTx, &quot;should omit IsSystemTx when false&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestUnmarshalRpcDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name     string</span>
<span class="term-fg32">+		modifier func(tx *RPCTransaction)</span>
<span class="term-fg32">+		valid    bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:     &quot;Unmodified&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {},</span>
<span class="term-fg32">+			valid:    true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Zero Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Nil Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = nil</span>
<span class="term-fg32">+				tx.R = nil</span>
<span class="term-fg32">+				tx.S = nil</span>
<span class="term-fg32">+				tx.GasPrice = nil</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero GasPrice&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero V&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero R&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero S&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			tx := &amp;types.DepositTransaction{</span>
<span class="term-fg32">+				SourceHash: &amp;common.Hash{1},</span>
<span class="term-fg32">+				From:       &amp;common.Address{1},</span>
<span class="term-fg32">+				IsSystemTx: true,</span>
<span class="term-fg32">+				Mint:       uint256.NewInt(34),</span>
<span class="term-fg32">+				Value:      uint256.NewInt(1337),</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			rpcTx := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), nil)</span>
<span class="term-fg32">+			test.modifier(rpcTx)</span>
<span class="term-fg32">+			json, err := json.Marshal(rpcTx)</span>
<span class="term-fg32">+			require.NoError(t, err, &quot;marshalling failed: %w&quot;, err)</span>
<span class="term-fg32">+			parsed := &amp;types.DepositTransaction{}</span>
<span class="term-fg32">+			err = parsed.UnmarshalJSON(json)</span>
<span class="term-fg32">+			if test.valid {</span>
<span class="term-fg32">+				require.NoError(t, err, &quot;unmarshal failed: %w&quot;, err)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.Error(t, err, &quot;unmarshal should have failed but did not&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-09a7cad1e9cd584d75a08b2c" role="button"
                   aria-expanded="false" aria-controls="id-09a7cad1e9cd584d75a08b2c">
                    <code>turbo/jsonrpc/eth_block.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_block.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_block.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+30</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-09a7cad1e9cd584d75a08b2c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_block.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_block.go</span>
<span class="term-fg1">index 23f5fdb191063bc6d75deeacf47bfddd3c8fc4e4..4c2b232618fbaa0370e6379896939ede239c6a72 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_block.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_block.go</span>
<span class="term-fg36">@@ -119,7 +119,8 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg31">-	blockCtx := transactions.NewEVMBlockContext(engine, header, stateBlockNumberOrHash.RequireCanonical, tx, api._blockReader)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+	blockCtx := transactions.NewEVMBlockContext(engine, header, stateBlockNumberOrHash.RequireCanonical, tx, api._blockReader, l1CostFunc)</span>
 	txCtx := core.NewEVMTxContext(firstMsg)
 	&#47;&#47; Get a new instance of the EVM
 	evm := vm.NewEVM(blockCtx, txCtx, ibs, chainConfig, vm.Config{Debug: false})
<span class="term-fg36">@@ -201,6 +202,15 @@</span> 	if err != nil {
 		return nil, err
 	}
 	defer tx.Rollback()
<span class="term-fg32">+</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimism() &amp;&amp; number == rpc.PendingBlockNumber {</span>
<span class="term-fg32">+		number = rpc.LatestBlockNumber</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	b, err := api.blockByNumber(ctx, number, tx)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -217,10 +227,6 @@</span> 	if td != nil {
 		additionalFields[&quot;totalDifficulty&quot;] = (*hexutil.Big)(td)
 	}
&nbsp;
<span class="term-fg31">-	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
 	var borTx types.Transaction
 	var borTxHash common.Hash
 	if chainConfig.Bor != nil {
<span class="term-fg36">@@ -230,8 +236,16 @@</span> 			borTxHash = types.ComputeBorTxHash(b.NumberU64(), b.Hash())
 		}
 	}
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockEx(b, true, fullTx, borTx, borTxHash, additionalFields)</span>
<span class="term-fg31">-	if err == nil &amp;&amp; number == rpc.PendingBlockNumber {</span>
<span class="term-fg32">+	&#47;&#47; Optimism Deposit transactions need to access DepositNonce from their receipt.</span>
<span class="term-fg32">+	&#47;&#47; A possible optimization would be to filter by Tx type and only populate the entries for the Deposits</span>
<span class="term-fg32">+	receipts, err := api.getReceipts(ctx, tx, chainConfig, b, b.Body().SendersFromTxs())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;getReceipts error: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, b.NumberU64())</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockEx(b, true, fullTx, borTx, borTxHash, additionalFields, receipts, depositNonces)</span>
<span class="term-fg32">+	if err == nil &amp;&amp; number == rpc.PendingBlockNumber &amp;&amp; chainConfig.Optimism == nil { &#47;&#47; don&#39;t remove info if optimism</span>
 		&#47;&#47; Pending blocks need to nil out a few fields
 		for _, field := range []string{&quot;hash&quot;, &quot;nonce&quot;, &quot;miner&quot;} {
 			response[field] = nil
<span class="term-fg36">@@ -289,7 +303,15 @@</span> 			borTxHash = types.ComputeBorTxHash(number, block.Hash())
 		}
 	}
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockEx(block, true, fullTx, borTx, borTxHash, additionalFields)</span>
<span class="term-fg32">+	&#47;&#47; Optimism Deposit transactions need to access DepositNonce from their receipt.</span>
<span class="term-fg32">+	&#47;&#47; A possible optimization would be to filter by Tx type and only populate the entries for the Deposits</span>
<span class="term-fg32">+	receipts, err := api.getReceipts(ctx, tx, chainConfig, block, block.Body().SendersFromTxs())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;getReceipts error: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, number)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockEx(block, true, fullTx, borTx, borTxHash, additionalFields, receipts, depositNonces)</span>
&nbsp;
 	if chainConfig.Bor != nil {
 		response[&quot;miner&quot;], _ = ecrecover(block.Header(), chainConfig.Bor)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-035e73795f886d8694898b30" role="button"
                   aria-expanded="false" aria-controls="id-035e73795f886d8694898b30">
                    <code>turbo/jsonrpc/eth_block_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_block_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_block_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-035e73795f886d8694898b30"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_block_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_block_test.go</span>
<span class="term-fg1">index 60d048de256b51a2091dee3f723295eb0da21ebf..22a85054c0f0f0fe2b6d5519595b52b5967b9c6d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_block_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_block_test.go</span>
<span class="term-fg36">@@ -86,7 +86,7 @@</span> 	ff.HandlePendingBlock(&amp;txpool.OnPendingBlockReply{
 		RplBlock: rlpBlock,
 	})
&nbsp;
<span class="term-fg31">-	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
 	b, err := api.GetBlockByNumber(context.Background(), rpc.PendingBlockNumber, false)
 	if err != nil {
 		t.Errorf(&quot;error getting block number with pending tag: %s&quot;, err)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5523ce204b75ac46650b1b61" role="button"
                   aria-expanded="false" aria-controls="id-5523ce204b75ac46650b1b61">
                    <code>turbo/jsonrpc/eth_call.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_call.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_call.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+73</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5523ce204b75ac46650b1b61"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_call.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_call.go</span>
<span class="term-fg1">index b4eb732680bc3981a17dea1db12c571e4e2657ef..7b0708884ab9e488ad4a0d7782c5a30117920531 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_call.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_call.go</span>
<span class="term-fg36">@@ -45,10 +45,25 @@</span> 		return nil, err
 	}
 	defer tx.Rollback()
&nbsp;
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
 	chainConfig, err := api.chainConfig(tx)
 	if err != nil {
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutility.Bytes</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_call&quot;, args, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
 	}
<span class="term-fg32">+</span>
 	engine := api.engine()
&nbsp;
 	if args.Gas == nil || uint64(*args.Gas) == 0 {
<span class="term-fg36">@@ -142,6 +157,25 @@</span> 	if blockNrOrHash != nil {
 		bNrOrHash = *blockNrOrHash
 	}
&nbsp;
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(dbtx, &amp;bNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return 0, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(dbtx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return 0, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result hexutil.Uint64</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_estimateGas&quot;, args, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return 0, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return 0, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Determine the highest gas limit can be used during the estimation.
 	if args.Gas != nil &amp;&amp; uint64(*args.Gas) &gt;= params.TxGas {
 		hi = uint64(*args.Gas)
<span class="term-fg36">@@ -220,10 +254,6 @@</span> 		hi = api.GasCap
 	}
 	gasCap = hi
&nbsp;
<span class="term-fg31">-	chainConfig, err := api.chainConfig(dbtx)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return 0, err</span>
<span class="term-fg31">-	}</span>
 	engine := api.engine()
&nbsp;
 	latestCanBlockNumber, latestCanHash, isLatest, err := rpchelper.GetCanonicalBlockNumber(latestNumOrHash, dbtx, api.filters) &#47;&#47; DoCall cannot be executed on non-canonical blocks
<span class="term-fg36">@@ -315,7 +345,7 @@</span> &#47;&#47; should be re-computed. Re-computing the entire trie will currently take ~15
 &#47;&#47; minutes on mainnet.  The current limit has been chosen arbitrarily as
 &#47;&#47; &#39;useful&#39; without likely being overly computationally intense.  This parameter
 &#47;&#47; could possibly be made configurable in the future if needed.
<span class="term-fg31">-var maxGetProofRewindBlockCount uint64 = 1_000</span>
<span class="term-fg32">+var maxGetProofRewindBlockCount uint64 = 2_000_000</span>
&nbsp;
 &#47;&#47; GetProof is partially implemented; no Storage proofs, and proofs must be for
 &#47;&#47; blocks within maxGetProofRewindBlockCount blocks of the head.
<span class="term-fg36">@@ -328,6 +358,25 @@</span> 	}
 	defer tx.Rollback()
 	if api.historyV3(tx) {
 		return nil, fmt.Errorf(&quot;not supported by Erigon3&quot;)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, &amp;blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainConfig, err := api.chainConfig(tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result accounts.AccProofResult</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_getProof&quot;, address, storageKeys, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
 	}
&nbsp;
 	blockNr, _, _, err := rpchelper.GetBlockNumber(blockNrOrHash, tx, api.filters)
<span class="term-fg36">@@ -439,10 +488,25 @@</span> 		return nil, err
 	}
 	defer tx.Rollback()
&nbsp;
<span class="term-fg32">+	bn, err := api.blockNumberFromBlockNumberOrHash(tx, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
 	chainConfig, err := api.chainConfig(tx)
 	if err != nil {
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;read chain config: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(bn) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			var result accessListResult</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, &amp;result, &quot;eth_createAccessList&quot;, args, hexutil.EncodeUint64(bn)); err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;result, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, rpc.ErrNoHistoricalFallback</span>
 	}
<span class="term-fg32">+</span>
 	engine := api.engine()
&nbsp;
 	blockNumber, hash, latest, err := rpchelper.GetCanonicalBlockNumber(bNrOrHash, tx, api.filters) &#47;&#47; DoCall cannot be executed on non-canonical blocks
<span class="term-fg36">@@ -543,7 +607,8 @@</span>
 		&#47;&#47; Apply the transaction with the access list tracer
 		tracer := logger.NewAccessListTracer(accessList, excl, state)
 		config := vm.Config{Tracer: tracer, Debug: true, NoBaseFee: true}
<span class="term-fg31">-		blockCtx := transactions.NewEVMBlockContext(engine, header, bNrOrHash.RequireCanonical, tx, api._blockReader)</span>
<span class="term-fg32">+		l1CostFunc := types.NewL1CostFunc(chainConfig, state)</span>
<span class="term-fg32">+		blockCtx := transactions.NewEVMBlockContext(engine, header, bNrOrHash.RequireCanonical, tx, api._blockReader, l1CostFunc)</span>
 		txCtx := core.NewEVMTxContext(msg)
&nbsp;
 		evm := vm.NewEVM(blockCtx, txCtx, state, chainConfig, config)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bff44b5cf5c270589957f595" role="button"
                   aria-expanded="false" aria-controls="id-bff44b5cf5c270589957f595">
                    <code>turbo/jsonrpc/eth_callMany.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_callMany.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_callMany.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bff44b5cf5c270589957f595"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany.go</span>
<span class="term-fg1">index ccf3c7ad442ece764e00e409d385476a9e292e42..f45ddd278e649d6c939cdb85cd5c26250c73f2ae 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany.go</span>
<span class="term-fg36">@@ -169,6 +169,7 @@</span> 		Time:        parent.Time,
 		Difficulty:  new(big.Int).Set(parent.Difficulty),
 		GasLimit:    parent.GasLimit,
 		BaseFee:     &amp;baseFee,
<span class="term-fg32">+		L1CostFunc:  types.NewL1CostFunc(chainConfig, st),</span>
 	}
&nbsp;
 	&#47;&#47; Get a new instance of the EVM</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5cbc446eccbd95f6d2912a3b" role="button"
                   aria-expanded="false" aria-controls="id-5cbc446eccbd95f6d2912a3b">
                    <code>turbo/jsonrpc/eth_callMany_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_callMany_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_callMany_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5cbc446eccbd95f6d2912a3b"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany_test.go</span>
<span class="term-fg1">index 9a129c5cc31f80035da1edb14966144ee8f3f2a0..d4bf9cb7308faa61773b2ff3e24fb2142f03d628 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_callMany_test.go</span>
<span class="term-fg36">@@ -84,7 +84,7 @@</span>
 	db := contractBackend.DB()
 	engine := contractBackend.Engine()
 	api := NewEthAPI(NewBaseApi(nil, stateCache, contractBackend.BlockReader(), contractBackend.Agg(), false, rpccfg.DefaultEvmCallTimeout, engine,
<span class="term-fg31">-		datadir.New(t.TempDir())), db, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+		datadir.New(t.TempDir()), nil, nil), db, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
&nbsp;
 	callArgAddr1 := ethapi.CallArgs{From: &amp;address, To: &amp;tokenAddr, Nonce: &amp;nonce,
 		MaxPriorityFeePerGas: (*hexutil.Big)(big.NewInt(1e9)),</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e299761793bb30011dd5c793" role="button"
                   aria-expanded="false" aria-controls="id-e299761793bb30011dd5c793">
                    <code>turbo/jsonrpc/eth_call_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_call_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_call_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+132</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e299761793bb30011dd5c793"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_call_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_call_test.go</span>
<span class="term-fg1">index 7c3a62b30886ad50f94b58e9cdf8e3454fbd5683..3e0c5203072b37e928033b3dacd4598a52798b91 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_call_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_call_test.go</span>
<span class="term-fg36">@@ -24,11 +24,13 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;rawdb&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;state&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&#47;accounts&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&#47;rpccfg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&quot;
<span class="term-fg32">+	ethapi2 &quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;adapter&#47;ethapi&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;rpchelper&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;stages&#47;mock&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;trie&quot;
<span class="term-fg36">@@ -42,7 +44,7 @@</span> 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
 	ctx, conn := rpcdaemontest.CreateTestGrpcConn(t, mock.Mock(t))
 	mining := txpool.NewMiningClient(conn)
 	ff := rpchelper.New(ctx, nil, nil, mining, func() {}, m.Log)
<span class="term-fg31">-	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
 	var from = libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)
 	var to = libcommon.HexToAddress(&quot;0x0d3ab14bbad3d99f4203bd7a11acb94882050e7e&quot;)
 	if _, err := api.EstimateGas(context.Background(), &amp;ethapi.CallArgs{
<span class="term-fg36">@@ -53,11 +55,71 @@</span> 		t.Errorf(&quot;calling EstimateGas: %v&quot;, err)
 	}
 }
&nbsp;
<span class="term-fg32">+func TestEstimateGasHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:\&quot;0x1\&quot;}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  &quot;0x1&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			bn := rpc.BlockNumberOrHashWithNumber(0)</span>
<span class="term-fg32">+			val, err := api.EstimateGas(m.Ctx, &amp;ethapi2.CallArgs{}, &amp;bn)</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, val), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func TestEthCallNonCanonical(t *testing.T) {
 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	api := NewEthAPI(NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
 	var from = libcommon.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)
 	var to = libcommon.HexToAddress(&quot;0x0d3ab14bbad3d99f4203bd7a11acb94882050e7e&quot;)
 	if _, err := api.Call(context.Background(), ethapi.CallArgs{
<span class="term-fg36">@@ -215,6 +277,69 @@</span> 		})
 	}
 }
&nbsp;
<span class="term-fg32">+func TestGetProofHistoricalRPC(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	if m.HistoryV3 {</span>
<span class="term-fg32">+		t.Skip(&quot;not supported by Erigon3&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	api := NewEthAPI(newBaseApiForTest(m), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	table := []struct {</span>
<span class="term-fg32">+		caseName  string</span>
<span class="term-fg32">+		payload   string</span>
<span class="term-fg32">+		appendAPI bool</span>
<span class="term-fg32">+		isError   bool</span>
<span class="term-fg32">+		expected  string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;missing api&quot;,</span>
<span class="term-fg32">+			payload:   &quot;&quot;,</span>
<span class="term-fg32">+			appendAPI: false,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;success&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;result\&quot;:{}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   false,</span>
<span class="term-fg32">+			expected:  fmt.Sprintf(&quot;%v&quot;, &amp;accounts.AccProofResult{}),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			caseName:  &quot;failuer&quot;,</span>
<span class="term-fg32">+			payload:   &quot;{\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;,\&quot;id\&quot;:1,\&quot;error\&quot;:{\&quot;code\&quot;:-32000,\&quot;message\&quot;:\&quot;error\&quot;}}&quot;,</span>
<span class="term-fg32">+			appendAPI: true,</span>
<span class="term-fg32">+			isError:   true,</span>
<span class="term-fg32">+			expected:  &quot;historical backend failed: error&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tt := range table {</span>
<span class="term-fg32">+		t.Run(tt.caseName, func(t *testing.T) {</span>
<span class="term-fg32">+			if tt.appendAPI {</span>
<span class="term-fg32">+				s := MockServer{}</span>
<span class="term-fg32">+				s.Start()</span>
<span class="term-fg32">+				defer s.Stop()</span>
<span class="term-fg32">+				historicalRPCService, err := s.GetRPC()</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Errorf(&quot;failed to start mock server: %v&quot;, err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				api.historicalRPCService = historicalRPCService</span>
<span class="term-fg32">+				s.UpdatePayload(tt.payload)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			bn := rpc.BlockNumberOrHashWithNumber(0)</span>
<span class="term-fg32">+			val, err := api.GetProof(m.Ctx, libcommon.HexToAddress(&quot;0xdeaddeaddeaddeaddeaddeaddeaddeaddeaddead0&quot;), []libcommon.Hash{libcommon.HexToHash(&quot;0xdeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddeaddead&quot;)}, bn)</span>
<span class="term-fg32">+			if tt.isError {</span>
<span class="term-fg32">+				require.Error(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, err), tt.caseName)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.NoError(t, err, tt.caseName)</span>
<span class="term-fg32">+				require.Equal(t, tt.expected, fmt.Sprintf(&quot;%v&quot;, val), tt.caseName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func TestGetBlockByTimestampLatestTime(t *testing.T) {
 	ctx := context.Background()
 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
<span class="term-fg36">@@ -227,7 +352,7 @@</span> 	api := NewErigonAPI(newBaseApiForTest(m), m.DB, nil)
&nbsp;
 	latestBlock, err := m.BlockReader.CurrentBlock(tx)
 	require.NoError(t, err)
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockDeprecated(latestBlock, true, false)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockDeprecated(latestBlock, true, false, nil)</span>
&nbsp;
 	if err != nil {
 		t.Error(&quot;couldn&#39;t get the rpc marshal block&quot;)
<span class="term-fg36">@@ -265,7 +390,7 @@</span> 	if err != nil {
 		t.Error(&quot;couldn&#39;t retrieve oldest block&quot;)
 	}
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockDeprecated(oldestBlock, true, false)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockDeprecated(oldestBlock, true, false, nil)</span>
&nbsp;
 	if err != nil {
 		t.Error(&quot;couldn&#39;t get the rpc marshal block&quot;)
<span class="term-fg36">@@ -301,7 +426,7 @@</span>
 	latestBlock, err := m.BlockReader.CurrentBlock(tx)
 	require.NoError(t, err)
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockDeprecated(latestBlock, true, false)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockDeprecated(latestBlock, true, false, nil)</span>
&nbsp;
 	if err != nil {
 		t.Error(&quot;couldn&#39;t get the rpc marshal block&quot;)
<span class="term-fg36">@@ -349,7 +474,7 @@</span> 	if err != nil {
 		t.Error(&quot;couldn&#39;t retrieve middle block&quot;)
 	}
&nbsp;
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockDeprecated(middleBlock, true, false)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockDeprecated(middleBlock, true, false, nil)</span>
&nbsp;
 	if err != nil {
 		t.Error(&quot;couldn&#39;t get the rpc marshal block&quot;)
<span class="term-fg36">@@ -390,7 +515,7 @@</span>
 	if pickedBlock == nil {
 		t.Error(&quot;couldn&#39;t retrieve picked block&quot;)
 	}
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlockDeprecated(pickedBlock, true, false)</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlockDeprecated(pickedBlock, true, false, nil)</span>
&nbsp;
 	if err != nil {
 		t.Error(&quot;couldn&#39;t get the rpc marshal block&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e6211edc644e13788e809d13" role="button"
                   aria-expanded="false" aria-controls="id-e6211edc644e13788e809d13">
                    <code>turbo/jsonrpc/eth_filters_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_filters_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_filters_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e6211edc644e13788e809d13"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_filters_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_filters_test.go</span>
<span class="term-fg1">index 8c78713b6fb8f8d4d71075cf248cf67c29fbe168..8665272d02e9390ef861975c61c8392bc918f9fd 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_filters_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_filters_test.go</span>
<span class="term-fg36">@@ -30,7 +30,7 @@</span> 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
 	ctx, conn := rpcdaemontest.CreateTestGrpcConn(t, mock.Mock(t))
 	mining := txpool.NewMiningClient(conn)
 	ff := rpchelper.New(ctx, nil, nil, mining, func() {}, m.Log)
<span class="term-fg31">-	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
&nbsp;
 	ptf, err := api.NewPendingTransactionFilter(ctx)
 	assert.Nil(err)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-54151dbe95aa3f5e5ea0f45a" role="button"
                   aria-expanded="false" aria-controls="id-54151dbe95aa3f5e5ea0f45a">
                    <code>turbo/jsonrpc/eth_mining_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_mining_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_mining_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-54151dbe95aa3f5e5ea0f45a"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_mining_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_mining_test.go</span>
<span class="term-fg1">index 6a29d8539e77c6874da48ae1a3d1a87540a13e30..596e02cd601107f7ede91a5f2160981a52614cc9 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_mining_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_mining_test.go</span>
<span class="term-fg36">@@ -27,7 +27,7 @@</span> 	ff := rpchelper.New(ctx, nil, nil, mining, func() {}, m.Log)
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
 	engine := ethash.NewFaker()
 	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, nil, false, rpccfg.DefaultEvmCallTimeout, engine,
<span class="term-fg31">-		m.Dirs), nil, nil, nil, mining, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+		m.Dirs, nil, nil), nil, nil, nil, mining, 5000000, 100_000, false, log.New())</span>
 	expect := uint64(12345)
 	b, err := rlp.EncodeToBytes(types.NewBlockWithHeader(&amp;types.Header{Number: big.NewInt(int64(expect))}))
 	require.NoError(t, err)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f310aeffa5411661945d328f" role="button"
                   aria-expanded="false" aria-controls="id-f310aeffa5411661945d328f">
                    <code>turbo/jsonrpc/eth_receipts.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_receipts.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_receipts.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f310aeffa5411661945d328f"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts.go</span>
<span class="term-fg1">index 0a2053ef71cd34d30745d448037497880e2780b4..2309bace55dd85755f758ad4c0df07c72ae9197b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts.go</span>
<span class="term-fg36">@@ -40,7 +40,7 @@</span>
 const PendingBlockNumber int64 = -2
&nbsp;
 func (api *BaseAPI) getReceipts(ctx context.Context, tx kv.Tx, chainConfig *chain.Config, block *types.Block, senders []common.Address) (types.Receipts, error) {
<span class="term-fg31">-	if cached := rawdb.ReadReceipts(tx, block, senders); cached != nil {</span>
<span class="term-fg32">+	if cached := rawdb.ReadReceipts(chainConfig, tx, block, senders); cached != nil {</span>
 		return cached, nil
 	}
 	engine := api.engine()
<span class="term-fg36">@@ -69,6 +69,7 @@</span> 	header := block.Header()
 	for i, txn := range block.Transactions() {
 		ibs.SetTxContext(txn.Hash(), block.Hash(), i)
 		receipt, _, err := core.ApplyTransaction(chainConfig, core.GetHashFn(header, getHeader), engine, nil, gp, ibs, noopWriter, header, txn, usedGas, usedBlobGas, vm.Config{})
<span class="term-fg32">+		log.Debug(&quot;Computed receipt for tx&quot;, &quot;txhash&quot;, txn.Hash(), &quot;l1Fee&quot;, receipt.L1Fee)</span>
 		if err != nil {
 			return nil, err
 		}
<span class="term-fg36">@@ -532,7 +533,8 @@</span> }
&nbsp;
 func (e *intraBlockExec) changeBlock(header *types.Header) {
 	e.blockNum = header.Number.Uint64()
<span class="term-fg31">-	blockCtx := transactions.NewEVMBlockContext(e.engine, header, true &#47;* requireCanonical *&#47;, e.tx, e.br)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(e.chainConfig, e.ibs) &#47;&#47; FIXME? is ibs current?</span>
<span class="term-fg32">+	blockCtx := transactions.NewEVMBlockContext(e.engine, header, true &#47;* requireCanonical *&#47;, e.tx, e.br, l1CostFunc)</span>
 	e.blockCtx = &amp;blockCtx
 	e.blockHash = header.Hash()
 	e.header = header
<span class="term-fg36">@@ -743,6 +745,8 @@</span> 	case *types.LegacyTx:
 		if t.Protected() {
 			chainId = types.DeriveChainId(&amp;t.V).ToBig()
 		}
<span class="term-fg32">+	case *types.DepositTransaction:</span>
<span class="term-fg32">+		chainId = chainConfig.ChainID</span>
 	default:
 		chainId = txn.GetChainID().ToBig()
 	}
<span class="term-fg36">@@ -767,7 +771,15 @@</span> 		&quot;contractAddress&quot;:   nil,
 		&quot;logs&quot;:              receipt.Logs,
 		&quot;logsBloom&quot;:         types.CreateBloom(types.Receipts{receipt}),
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	if chainConfig.Optimism != nil &amp;&amp; !txn.IsDepositTx() {</span>
<span class="term-fg32">+		fields[&quot;l1GasPrice&quot;] = (*hexutil.Big)(receipt.L1GasPrice)</span>
<span class="term-fg32">+		fields[&quot;l1GasUsed&quot;] = (*hexutil.Big)(receipt.L1GasUsed)</span>
<span class="term-fg32">+		fields[&quot;l1Fee&quot;] = (*hexutil.Big)(receipt.L1Fee)</span>
<span class="term-fg32">+		fields[&quot;l1FeeScalar&quot;] = receipt.FeeScalar.String()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if chainConfig.Optimism != nil &amp;&amp; txn.IsDepositTx() &amp;&amp; receipt.DepositNonce != nil {</span>
<span class="term-fg32">+		fields[&quot;depositNonce&quot;] = hexutil.Uint64(*receipt.DepositNonce)</span>
<span class="term-fg32">+	}</span>
 	if !chainConfig.IsLondon(header.Number.Uint64()) {
 		fields[&quot;effectiveGasPrice&quot;] = hexutil.Uint64(txn.GetPrice().Uint64())
 	} else {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d652e8ecfbacefe3e5af8b67" role="button"
                   aria-expanded="false" aria-controls="id-d652e8ecfbacefe3e5af8b67">
                    <code>turbo/jsonrpc/eth_receipts_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_receipts_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+153</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d652e8ecfbacefe3e5af8b67"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..4f2540c97fffb4492feea1a9108c5212848e4ddc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_receipts_test.go</span>
<span class="term-fg36">@@ -0,0 +1,153 @@</span>
<span class="term-fg32">+package jsonrpc</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	libcommon &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;gointerfaces&#47;txpool&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;kvcache&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&#47;memdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;cmd&#47;rpcdaemon&#47;rpcdaemontest&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;u256&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rpc&#47;rpccfg&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;rpchelper&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;stages&#47;mock&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGetReceipts(t *testing.T) {</span>
<span class="term-fg32">+	m, _, _ := rpcdaemontest.CreateOptimismTestSentry(t)</span>
<span class="term-fg32">+	agg := m.HistoryV3Components()</span>
<span class="term-fg32">+	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)</span>
<span class="term-fg32">+	ctx, conn := rpcdaemontest.CreateTestGrpcConn(t, mock.Mock(t))</span>
<span class="term-fg32">+	mining := txpool.NewMiningClient(conn)</span>
<span class="term-fg32">+	ff := rpchelper.New(ctx, nil, nil, mining, func() {}, m.Log)</span>
<span class="term-fg32">+	api := NewEthAPI(NewBaseApi(ff, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, nil, nil, nil, 5000000, 100_000, false, log.New())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	db := memdb.New(&quot;&quot;)</span>
<span class="term-fg32">+	defer db.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx, err := db.BeginRw(context.Background())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	defer tx.Rollback()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	header := &amp;types.Header{Number: big.NewInt(1), Difficulty: big.NewInt(100)}</span>
<span class="term-fg32">+	block := types.NewBlockWithHeader(header)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteBlock(tx, block))</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteReceipts(tx, block.NumberU64(), nil))</span>
<span class="term-fg32">+	tx.Commit()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rTx, err := db.BeginRo(context.Background())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	defer rTx.Rollback()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	receipt, err := api.getReceipts(m.Ctx, rTx, m.ChainConfig, block, []libcommon.Address{})</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, 0, len(receipt))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx, err = db.BeginRw(context.Background())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	defer tx.Rollback()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		bedrockBlock = common.Big0.Add(m.ChainConfig.BedrockBlock, big.NewInt(1))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		l1BaseFee = uint256.NewInt(1000).Bytes32()</span>
<span class="term-fg32">+		overhead  = uint256.NewInt(100).Bytes32()</span>
<span class="term-fg32">+		scalar    = uint256.NewInt(100).Bytes32()</span>
<span class="term-fg32">+		fscalar   = new(big.Float).SetInt(new(uint256.Int).SetBytes(scalar[:]).ToBig())</span>
<span class="term-fg32">+		fdivisor  = new(big.Float).SetUint64(1_000_000)</span>
<span class="term-fg32">+		feeScalar = new(big.Float).Quo(fscalar, fdivisor)</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	systemTx := buildSystemTx(l1BaseFee, overhead, scalar)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx1 := types.NewTransaction(1, libcommon.HexToAddress(&quot;0x1&quot;), u256.Num1, 1, u256.Num1, systemTx)</span>
<span class="term-fg32">+	tx2 := types.NewTransaction(2, libcommon.HexToAddress(&quot;0x2&quot;), u256.Num2, 2, u256.Num2, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	header = &amp;types.Header{Number: bedrockBlock, Difficulty: big.NewInt(100)}</span>
<span class="term-fg32">+	body := &amp;types.Body{Transactions: types.Transactions{tx1, tx2}}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	receipt1 := &amp;types.Receipt{</span>
<span class="term-fg32">+		Status:            types.ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*types.Log{</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x11})},</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x01, 0x11})},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		TxHash:          tx1.Hash(),</span>
<span class="term-fg32">+		ContractAddress: libcommon.BytesToAddress([]byte{0x01, 0x11, 0x11}),</span>
<span class="term-fg32">+		GasUsed:         111111,</span>
<span class="term-fg32">+		L1Fee:           big.NewInt(7),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	receipt2 := &amp;types.Receipt{</span>
<span class="term-fg32">+		PostState:         libcommon.Hash{2}.Bytes(),</span>
<span class="term-fg32">+		CumulativeGasUsed: 2,</span>
<span class="term-fg32">+		Logs: []*types.Log{</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x22})},</span>
<span class="term-fg32">+			{Address: libcommon.BytesToAddress([]byte{0x02, 0x22})},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		TxHash:          tx2.Hash(),</span>
<span class="term-fg32">+		ContractAddress: libcommon.BytesToAddress([]byte{0x02, 0x22, 0x22}),</span>
<span class="term-fg32">+		GasUsed:         222222,</span>
<span class="term-fg32">+		L1Fee:           big.NewInt(1),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	receipts := []*types.Receipt{receipt1, receipt2}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rawdb.WriteCanonicalHash(tx, header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+	rawdb.WriteHeader(tx, header)</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteBody(tx, header.Hash(), header.Number.Uint64(), body))</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteSenders(tx, header.Hash(), header.Number.Uint64(), body.SendersFromTxs()))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	br := m.BlockReader</span>
<span class="term-fg32">+	b, senders, err := br.BlockWithSenders(ctx, tx, header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteBlock(tx, b))</span>
<span class="term-fg32">+	require.NoError(t, rawdb.WriteReceipts(tx, b.NumberU64(), receipts))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx.Commit()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rTx, err = db.BeginRo(context.Background())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	defer rTx.Rollback()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	receipts, err = api.getReceipts(m.Ctx, rTx, m.ChainConfig, b, senders)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, 2, len(receipts))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.Equal(t, new(uint256.Int).SetBytes(l1BaseFee[:]).ToBig(), receipts[0].L1GasPrice)</span>
<span class="term-fg32">+	rollupDataGas1 := types.RollupDataGas(tx1, &amp;chain.Rules{IsBedrock: true})</span>
<span class="term-fg32">+	require.Equal(t, new(big.Int).Add(new(big.Int).SetUint64(rollupDataGas1), new(uint256.Int).SetBytes(overhead[:]).ToBig()), receipts[0].L1GasUsed)</span>
<span class="term-fg32">+	require.Equal(t, types.L1Cost(rollupDataGas1, new(uint256.Int).SetBytes(l1BaseFee[:]), new(uint256.Int).SetBytes(overhead[:]), new(uint256.Int).SetBytes(scalar[:])).ToBig(), receipts[0].L1Fee)</span>
<span class="term-fg32">+	require.Equal(t, feeScalar, receipts[0].FeeScalar)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.Equal(t, new(uint256.Int).SetBytes(l1BaseFee[:]).ToBig(), receipts[1].L1GasPrice)</span>
<span class="term-fg32">+	rollupDataGas2 := types.RollupDataGas(tx2, &amp;chain.Rules{IsBedrock: true})</span>
<span class="term-fg32">+	require.Equal(t, new(big.Int).Add(new(big.Int).SetUint64(rollupDataGas2), new(uint256.Int).SetBytes(overhead[:]).ToBig()), receipts[1].L1GasUsed)</span>
<span class="term-fg32">+	require.Equal(t, types.L1Cost(rollupDataGas2, new(uint256.Int).SetBytes(l1BaseFee[:]), new(uint256.Int).SetBytes(overhead[:]), new(uint256.Int).SetBytes(scalar[:])).ToBig(), receipts[1].L1Fee)</span>
<span class="term-fg32">+	require.Equal(t, feeScalar, receipts[1].FeeScalar)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func buildSystemTx(l1BaseFee, overhead, scalar [32]byte) []byte {</span>
<span class="term-fg32">+	systemInfo := []byte{0, 0, 0, 0}</span>
<span class="term-fg32">+	zeroBytes := uint256.NewInt(0).Bytes32()</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, zeroBytes[:]...) &#47;&#47; 4 - 4 + 32</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, zeroBytes[:]...) &#47;&#47; 4 + 1 * 32 - 4 + 2 * 32</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, l1BaseFee[:]...) &#47;&#47; 4 + 2 * 32 - 4 + 3 * 32 - l1Basefee</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, zeroBytes[:]...) &#47;&#47; 4 + 3 * 32 - 4 + 4 * 32</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, zeroBytes[:]...) &#47;&#47; 4 + 4 * 32 - 4 + 5 * 32</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, zeroBytes[:]...) &#47;&#47; 4 + 5 * 32 - 4 + 6 * 32</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, overhead[:]...)  &#47;&#47; 4 + 6 * 32 - 4 + 7 * 32 - overhead</span>
<span class="term-fg32">+	systemInfo = append(systemInfo, scalar[:]...)    &#47;&#47; 4 + 7 * 32 - 4 + 8 * 32 - scalar</span>
<span class="term-fg32">+	return systemInfo</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f321bda73054992b5f653508" role="button"
                   aria-expanded="false" aria-controls="id-f321bda73054992b5f653508">
                    <code>turbo/jsonrpc/eth_system.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_system.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_system.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f321bda73054992b5f653508"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_system.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_system.go</span>
<span class="term-fg1">index e0f59067f4e49067ad67450a62241bd969a3b251..39443a17c53813fa1051bae103176b423f90105d 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_system.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_system.go</span>
<span class="term-fg36">@@ -221,7 +221,7 @@</span> func (b *GasPriceOracleBackend) ChainConfig() *chain.Config {
 	return b.cc
 }
 func (b *GasPriceOracleBackend) GetReceipts(ctx context.Context, block *types.Block) (types.Receipts, error) {
<span class="term-fg31">-	return rawdb.ReadReceipts(b.tx, block, nil), nil</span>
<span class="term-fg32">+	return rawdb.ReadReceipts(b.cc, b.tx, block, nil), nil</span>
 }
 func (b *GasPriceOracleBackend) PendingBlockAndReceipts() (*types.Block, types.Receipts) {
 	return nil, nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e1d6bd8e1726da8d45b70a4" role="button"
                   aria-expanded="false" aria-controls="id-5e1d6bd8e1726da8d45b70a4">
                    <code>turbo/jsonrpc/eth_txs.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_txs.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_txs.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+30</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e1d6bd8e1726da8d45b70a4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_txs.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_txs.go</span>
<span class="term-fg1">index c6fbe83770d09bdb97bcce161939577bb4de8554..cbcecd2a6431cd631cdb5338961a3a94fa23c4bb 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_txs.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_txs.go</span>
<span class="term-fg36">@@ -3,6 +3,7 @@</span>
 import (
 	&quot;bytes&quot;
 	&quot;context&quot;
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&#47;big&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
<span class="term-fg36">@@ -76,7 +77,16 @@</span> 			borTx := types2.NewBorTransaction()
 			return newRPCBorTransaction(borTx, txnHash, blockHash, blockNum, uint64(len(block.Transactions())), baseFee, chainConfig.ChainID), nil
 		}
&nbsp;
<span class="term-fg31">-		return newRPCTransaction(txn, blockHash, blockNum, txnIndex, baseFee), nil</span>
<span class="term-fg32">+		if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+			depositNonces := rawdb.ReadDepositNonces(tx, block.NumberU64())</span>
<span class="term-fg32">+			if txnIndex &gt;= uint64(len(depositNonces)) {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;depositNonce for tx %x not found&quot;, txnHash)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				return newRPCTransaction(txn, blockHash, blockNum, txnIndex, baseFee, depositNonces[txnIndex]), nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		return newRPCTransaction(txn, blockHash, blockNum, txnIndex, baseFee, nil), nil</span>
 	}
&nbsp;
 	curHeader := rawdb.ReadCurrentHeader(tx)
<span class="term-fg36">@@ -191,7 +201,16 @@</span> 		derivedBorTxHash := types2.ComputeBorTxHash(block.NumberU64(), block.Hash())
 		return newRPCBorTransaction(borTx, derivedBorTxHash, block.Hash(), block.NumberU64(), uint64(txIndex), block.BaseFee(), chainConfig.ChainID), nil
 	}
&nbsp;
<span class="term-fg31">-	return newRPCTransaction(txs[txIndex], block.Hash(), block.NumberU64(), uint64(txIndex), block.BaseFee()), nil</span>
<span class="term-fg32">+	if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+		depositNonces := rawdb.ReadDepositNonces(tx, block.NumberU64())</span>
<span class="term-fg32">+		if uint64(txIndex) &gt;= uint64(len(depositNonces)) {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;depositNonce for tx %x not found&quot;, txs[txIndex].Hash())</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return newRPCTransaction(txs[txIndex], block.Hash(), block.NumberU64(), uint64(txIndex), block.BaseFee(), depositNonces[txIndex]), nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return newRPCTransaction(txs[txIndex], block.Hash(), block.NumberU64(), uint64(txIndex), block.BaseFee(), nil), nil</span>
 }
&nbsp;
 &#47;&#47; GetRawTransactionByBlockHashAndIndex returns the bytes of the transaction for the given block hash and index.
<span class="term-fg36">@@ -254,8 +273,15 @@</span> 		}
 		derivedBorTxHash := types2.ComputeBorTxHash(blockNum, hash)
 		return newRPCBorTransaction(borTx, derivedBorTxHash, hash, blockNum, uint64(txIndex), block.BaseFee(), chainConfig.ChainID), nil
 	}
<span class="term-fg31">-</span>
<span class="term-fg31">-	return newRPCTransaction(txs[txIndex], hash, blockNum, uint64(txIndex), block.BaseFee()), nil</span>
<span class="term-fg32">+	if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+		depositNonces := rawdb.ReadDepositNonces(tx, blockNum)</span>
<span class="term-fg32">+		if uint64(txIndex) &gt;= uint64(len(depositNonces)) {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;depositNonce for tx %x not found&quot;, txs[txIndex].Hash())</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return newRPCTransaction(txs[txIndex], block.Hash(), blockNum, uint64(txIndex), block.BaseFee(), depositNonces[txIndex]), nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return newRPCTransaction(txs[txIndex], hash, blockNum, uint64(txIndex), block.BaseFee(), nil), nil</span>
 }
&nbsp;
 &#47;&#47; GetRawTransactionByBlockNumberAndIndex returns the bytes of the transaction for the given block number and index.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d630a25b8c0dea1735678abe" role="button"
                   aria-expanded="false" aria-controls="id-d630a25b8c0dea1735678abe">
                    <code>turbo/jsonrpc/eth_uncles.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/eth_uncles.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/eth_uncles.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d630a25b8c0dea1735678abe"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_uncles.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_uncles.go</span>
<span class="term-fg1">index b5a75666a7505a570f30a8e3a7e7c2b9324af441..802d600bb5f400c72d9380c60b7dd68bade4d9aa 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;eth_uncles.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;eth_uncles.go</span>
<span class="term-fg36">@@ -46,7 +46,8 @@</span> 		log.Trace(&quot;Requested uncle not found&quot;, &quot;number&quot;, block.Number(), &quot;hash&quot;, hash, &quot;index&quot;, index)
 		return nil, nil
 	}
 	uncle := types.NewBlockWithHeader(uncles[index])
<span class="term-fg31">-	return ethapi.RPCMarshalBlock(uncle, false, false, additionalFields)</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, blockNum)</span>
<span class="term-fg32">+	return ethapi.RPCMarshalBlock(uncle, false, false, additionalFields, depositNonces)</span>
 }
&nbsp;
 &#47;&#47; GetUncleByBlockHashAndIndex implements eth_getUncleByBlockHashAndIndex. Returns information about an uncle given a block&#39;s hash and the index of the uncle.
<span class="term-fg36">@@ -78,8 +79,8 @@</span> 		log.Trace(&quot;Requested uncle not found&quot;, &quot;number&quot;, block.Number(), &quot;hash&quot;, hash, &quot;index&quot;, index)
 		return nil, nil
 	}
 	uncle := types.NewBlockWithHeader(uncles[index])
<span class="term-fg31">-</span>
<span class="term-fg31">-	return ethapi.RPCMarshalBlock(uncle, false, false, additionalFields)</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, number)</span>
<span class="term-fg32">+	return ethapi.RPCMarshalBlock(uncle, false, false, additionalFields, depositNonces)</span>
 }
&nbsp;
 &#47;&#47; GetUncleCountByBlockNumber implements eth_getUncleCountByBlockNumber. Returns the number of uncles in the block, if any.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eb67a841e09d1bf02c8c6e7e" role="button"
                   aria-expanded="false" aria-controls="id-eb67a841e09d1bf02c8c6e7e">
                    <code>turbo/jsonrpc/gen_traces_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/gen_traces_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/gen_traces_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eb67a841e09d1bf02c8c6e7e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;gen_traces_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;gen_traces_test.go</span>
<span class="term-fg1">index 88989cfb282790f5cad32da252a758b2952559f1..2639d1344775afe195ab083d0d0a0f0e8710cc56 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;gen_traces_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;gen_traces_test.go</span>
<span class="term-fg36">@@ -30,7 +30,7 @@</span> func TestGeneratedDebugApi(t *testing.T) {
 	m := rpcdaemontest.CreateTestSentryForTraces(t)
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 	api := NewPrivateDebugAPI(baseApi, m.DB, 0)
 	var buf bytes.Buffer
 	stream := jsoniter.NewStream(jsoniter.ConfigDefault, &amp;buf, 4096)
<span class="term-fg36">@@ -117,7 +117,7 @@</span> func TestGeneratedTraceApi(t *testing.T) {
 	m := rpcdaemontest.CreateTestSentryForTraces(t)
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	baseApi := NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 	api := NewTraceAPI(baseApi, m.DB, &amp;httpcfg.HttpCfg{})
 	traces, err := api.Block(context.Background(), rpc.BlockNumber(1), new(bool))
 	if err != nil {
<span class="term-fg36">@@ -328,7 +328,7 @@</span>         &quot;transactionHash&quot;: &quot;0xb2b9fa4c999c1c8370ce1fbd1c4315a9ce7f8421fe2ebed8a9051ff2e4e7e3da&quot;,
         &quot;transactionPosition&quot;: 2,
         &quot;type&quot;: &quot;create&quot;
     }
<span class="term-fg31">-]	</span>
<span class="term-fg32">+]</span>
 `
 	var expected interface{}
 	if err = json.Unmarshal([]byte(expectedJSON), &amp;expected); err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ca874d78ae992487bde8e3f5" role="button"
                   aria-expanded="false" aria-controls="id-ca874d78ae992487bde8e3f5">
                    <code>turbo/jsonrpc/graphql_api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/graphql_api.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/graphql_api.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ca874d78ae992487bde8e3f5"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;graphql_api.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;graphql_api.go</span>
<span class="term-fg1">index 97b9b0c082e862f4b24ee08c9693be3fb7490132..d90110bd65dc43d05a218685a26565cae4be1e88 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;graphql_api.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;graphql_api.go</span>
<span class="term-fg36">@@ -116,7 +116,8 @@</span> 	if err != nil {
 		return nil, err
 	}
 	additionalFields := make(map[string]interface{})
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlock(b, inclTx, inclTx, additionalFields)</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, uint64(number.Int64()))</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlock(b, inclTx, inclTx, additionalFields, depositNonces)</span>
 	if !inclTx {
 		delete(response, &quot;transactions&quot;) &#47;&#47; workaround for https:&#47;&#47;github.com&#47;ledgerwatch&#47;erigon&#47;issues&#47;4989#issuecomment-1218415666
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-de3499e4501197e980389921" role="button"
                   aria-expanded="false" aria-controls="id-de3499e4501197e980389921">
                    <code>turbo/jsonrpc/otterscan_api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/otterscan_api.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/otterscan_api.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-de3499e4501197e980389921"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_api.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_api.go</span>
<span class="term-fg1">index b6b9f2757f22b7b195bbc90ed2768523ab2d40d4..9100ae230614c01e4df909a46014f3753638d29a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_api.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_api.go</span>
<span class="term-fg36">@@ -324,7 +324,17 @@</span> 		rawLogs, res, err := exec.execTx(txNum, txIndex, txn)
 		if err != nil {
 			return nil, err
 		}
<span class="term-fg31">-		rpcTx := newRPCTransaction(txn, blockHash, blockNum, uint64(txIndex), header.BaseFee)</span>
<span class="term-fg32">+		var rpcTx *RPCTransaction</span>
<span class="term-fg32">+		if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+			depositNonces := rawdb.ReadDepositNonces(tx, blockNum)</span>
<span class="term-fg32">+			if txIndex &gt;= len(depositNonces) {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;depositNonce for tx %x not found&quot;, txn.Hash())</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				rpcTx = newRPCTransaction(txn, blockHash, blockNum, uint64(txIndex), header.BaseFee, depositNonces[txIndex])</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			rpcTx = newRPCTransaction(txn, blockHash, blockNum, uint64(txIndex), header.BaseFee, nil)</span>
<span class="term-fg32">+		}</span>
 		txs = append(txs, rpcTx)
 		receipt := &amp;types.Receipt{
 			Type: txn.Type(), CumulativeGasUsed: res.UsedGas,
<span class="term-fg36">@@ -471,7 +481,8 @@</span> 	if err != nil {
 		return nil, err
 	}
 	additionalFields := make(map[string]interface{})
<span class="term-fg31">-	response, err := ethapi.RPCMarshalBlock(b, inclTx, inclTx, additionalFields)</span>
<span class="term-fg32">+	depositNonces := rawdb.ReadDepositNonces(tx, uint64(number.Int64()))</span>
<span class="term-fg32">+	response, err := ethapi.RPCMarshalBlock(b, inclTx, inclTx, additionalFields, depositNonces)</span>
 	if !inclTx {
 		delete(response, &quot;transactions&quot;) &#47;&#47; workaround for https:&#47;&#47;github.com&#47;ledgerwatch&#47;erigon&#47;issues&#47;4989#issuecomment-1218415666
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e3aa15c992da194f0453d367" role="button"
                   aria-expanded="false" aria-controls="id-e3aa15c992da194f0453d367">
                    <code>turbo/jsonrpc/otterscan_generic_tracer.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/otterscan_generic_tracer.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/otterscan_generic_tracer.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e3aa15c992da194f0453d367"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_generic_tracer.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_generic_tracer.go</span>
<span class="term-fg1">index 7309f25845723d15287bfc10535828b5a1340541..8428b4a3019dfc280317b5adce94c64bd45b2427 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_generic_tracer.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_generic_tracer.go</span>
<span class="term-fg36">@@ -88,7 +88,8 @@</span> 		ibs.SetTxContext(tx.Hash(), block.Hash(), idx)
&nbsp;
 		msg, _ := tx.AsMessage(*signer, header.BaseFee, rules)
&nbsp;
<span class="term-fg31">-		BlockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil)</span>
<span class="term-fg32">+		l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+		BlockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil, l1CostFunc)</span>
 		TxContext := core.NewEVMTxContext(msg)
&nbsp;
 		vmenv := vm.NewEVM(BlockContext, TxContext, ibs, chainConfig, vm.Config{Debug: true, Tracer: tracer})</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9e9ee3092aaa4f6d0750e9f2" role="button"
                   aria-expanded="false" aria-controls="id-9e9ee3092aaa4f6d0750e9f2">
                    <code>turbo/jsonrpc/otterscan_search_trace.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/otterscan_search_trace.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/otterscan_search_trace.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9e9ee3092aaa4f6d0750e9f2"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_search_trace.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_search_trace.go</span>
<span class="term-fg1">index ae9bc2f528cd904615ac1d8ef920df0cca52c748..42aee4d7e621d1f9c0a1297391dd4cdd34cc8916 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_search_trace.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_search_trace.go</span>
<span class="term-fg36">@@ -75,17 +75,23 @@</span> 		return h
 	}
 	engine := api.engine()
&nbsp;
<span class="term-fg31">-	blockReceipts := rawdb.ReadReceipts(dbtx, block, senders)</span>
<span class="term-fg32">+	blockReceipts := rawdb.ReadReceipts(chainConfig, dbtx, block, senders)</span>
 	header := block.Header()
 	rules := chainConfig.Rules(block.NumberU64(), header.Time)
 	found := false
<span class="term-fg32">+</span>
<span class="term-fg32">+	var depositNonces []*uint64</span>
<span class="term-fg32">+	if chainConfig.IsOptimism() {</span>
<span class="term-fg32">+		depositNonces = rawdb.ReadDepositNonces(dbtx, blockNum)</span>
<span class="term-fg32">+	}</span>
 	for idx, tx := range block.Transactions() {
 		ibs.SetTxContext(tx.Hash(), block.Hash(), idx)
&nbsp;
 		msg, _ := tx.AsMessage(*signer, header.BaseFee, rules)
&nbsp;
 		tracer := NewTouchTracer(searchAddr)
<span class="term-fg31">-		BlockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil)</span>
<span class="term-fg32">+		l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+		BlockContext := core.NewEVMBlockContext(header, core.GetHashFn(header, getHeader), engine, nil, l1CostFunc)</span>
 		TxContext := core.NewEVMTxContext(msg)
&nbsp;
 		vmenv := vm.NewEVM(BlockContext, TxContext, ibs, chainConfig, vm.Config{Debug: true, Tracer: tracer})
<span class="term-fg36">@@ -95,7 +101,11 @@</span> 		}
 		_ = ibs.FinalizeTx(rules, cachedWriter)
&nbsp;
 		if tracer.Found {
<span class="term-fg31">-			rpcTx := newRPCTransaction(tx, block.Hash(), blockNum, uint64(idx), block.BaseFee())</span>
<span class="term-fg32">+			var depositNonce *uint64</span>
<span class="term-fg32">+			if chainConfig.IsOptimism() &amp;&amp; idx &lt; len(depositNonces) {</span>
<span class="term-fg32">+				depositNonce = depositNonces[idx]</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			rpcTx := newRPCTransaction(tx, block.Hash(), blockNum, uint64(idx), block.BaseFee(), depositNonce)</span>
 			mReceipt := marshalReceipt(blockReceipts[idx], tx, chainConfig, block.HeaderNoCopy(), tx.Hash(), true)
 			mReceipt[&quot;timestamp&quot;] = block.Time()
 			rpcTxs = append(rpcTxs, rpcTx)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7603e3744539428dbbb2ed30" role="button"
                   aria-expanded="false" aria-controls="id-7603e3744539428dbbb2ed30">
                    <code>turbo/jsonrpc/otterscan_transaction_by_sender_and_nonce_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/otterscan_transaction_by_sender_and_nonce_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/otterscan_transaction_by_sender_and_nonce_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7603e3744539428dbbb2ed30"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_transaction_by_sender_and_nonce_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_transaction_by_sender_and_nonce_test.go</span>
<span class="term-fg1">index 9e72d5d0275d98245f542ad9f4497b8d5b954437..e2f510841ed07e353cb07775e50534360b429b6c 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;otterscan_transaction_by_sender_and_nonce_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;otterscan_transaction_by_sender_and_nonce_test.go</span>
<span class="term-fg36">@@ -12,7 +12,7 @@</span>
 func TestGetTransactionBySenderAndNonce(t *testing.T) {
 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
 	agg := m.HistoryV3Components()
<span class="term-fg31">-	api := NewOtterscanAPI(NewBaseApi(nil, nil, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, 25)</span>
<span class="term-fg32">+	api := NewOtterscanAPI(NewBaseApi(nil, nil, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, 25)</span>
&nbsp;
 	addr := common.HexToAddress(&quot;0x537e697c7ab75a26f9ecf0ce810e3154dfcaaf44&quot;)
 	expectCreator := common.HexToAddress(&quot;0x71562b71999873db5b286df957af199ec94617f7&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9b35d282229ef6b1e504fe42" role="button"
                   aria-expanded="false" aria-controls="id-9b35d282229ef6b1e504fe42">
                    <code>turbo/jsonrpc/parity_api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/parity_api_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/parity_api_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9b35d282229ef6b1e504fe42"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;parity_api_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;parity_api_test.go</span>
<span class="term-fg1">index 857a617fa394520ab9f0dbcc2b407706d299e805..bfd7f2a94c425920c88322da3e8bc62645cfa457 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;parity_api_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;parity_api_test.go</span>
<span class="term-fg36">@@ -22,7 +22,7 @@</span> func TestParityAPIImpl_ListStorageKeys_NoOffset(t *testing.T) {
 	assert := assert.New(t)
 	m, _, _ := rpcdaemontest.CreateTestSentry(t)
 	agg := m.HistoryV3Components()
<span class="term-fg31">-	baseApi := NewBaseApi(nil, nil, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	baseApi := NewBaseApi(nil, nil, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 	api := NewParityAPIImpl(baseApi, m.DB)
 	answers := []string{
 		&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9758be34e547a9f90e096797" role="button"
                   aria-expanded="false" aria-controls="id-9758be34e547a9f90e096797">
                    <code>turbo/jsonrpc/send_transaction.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/send_transaction.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/send_transaction.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9758be34e547a9f90e096797"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;send_transaction.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;send_transaction.go</span>
<span class="term-fg1">index 90dcaec332dc8eb0511514304c49ac7d171ee05a..80b2cc56df228dc71f04f4ffdf8bc95f6bd025e6 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;send_transaction.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;send_transaction.go</span>
<span class="term-fg36">@@ -22,6 +22,13 @@</span> 	if err != nil {
 		return common.Hash{}, err
 	}
&nbsp;
<span class="term-fg32">+	if api.seqRPCService != nil {</span>
<span class="term-fg32">+		if err := api.seqRPCService.CallContext(ctx, nil, &quot;eth_sendRawTransaction&quot;, hexutility.Encode(encodedTx)); err != nil {</span>
<span class="term-fg32">+			return common.Hash{}, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return txn.Hash(), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; If the transaction fee cap is already specified, ensure the
 	&#47;&#47; fee of the given transaction is _reasonable_.
 	if err := checkTxFee(txn.GetPrice().ToBig(), txn.GetGas(), ethconfig.Defaults.RPCTxFeeCap); err != nil {
<span class="term-fg36">@@ -62,6 +69,7 @@</span>
 	if res.Imported[0] != txPoolProto.ImportResult_SUCCESS {
 		return hash, fmt.Errorf(&quot;%s: %s&quot;, txPoolProto.ImportResult_name[int32(res.Imported[0])], res.Errors[0])
 	}
<span class="term-fg32">+	api.logger.Debug(&quot;SendRawTransaction submitted&quot;, &quot;hash&quot;, hash, &quot;txn&quot;, txn)</span>
&nbsp;
 	return txn.Hash(), nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bf18c4911ff6749ce8c87116" role="button"
                   aria-expanded="false" aria-controls="id-bf18c4911ff6749ce8c87116">
                    <code>turbo/jsonrpc/send_transaction_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/send_transaction_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/send_transaction_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bf18c4911ff6749ce8c87116"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;send_transaction_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;send_transaction_test.go</span>
<span class="term-fg1">index b5cf7e4e814979b22db4ff5ba44ea5752fa6a058..ad7aaa1bf0a88e182aaa05bcc08f055921d088e4 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;send_transaction_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;send_transaction_test.go</span>
<span class="term-fg36">@@ -36,7 +36,7 @@</span>
 func newBaseApiForTest(m *mock.MockSentry) *jsonrpc.BaseAPI {
 	agg := m.HistoryV3Components()
 	stateCache := kvcache.New(kvcache.DefaultCoherentConfig)
<span class="term-fg31">-	return jsonrpc.NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs)</span>
<span class="term-fg32">+	return jsonrpc.NewBaseApi(nil, stateCache, m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil)</span>
 }
&nbsp;
 &#47;&#47; Do 1 step to start txPool</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cf95de74379ffa268bb61e6c" role="button"
                   aria-expanded="false" aria-controls="id-cf95de74379ffa268bb61e6c">
                    <code>turbo/jsonrpc/trace_adhoc.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/trace_adhoc.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/trace_adhoc.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cf95de74379ffa268bb61e6c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;trace_adhoc.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;trace_adhoc.go</span>
<span class="term-fg1">index d87097dc6a6418fb0e9905d104b342fda073c681..929e5fd63439201f3ae1dfe6a8410df92adecedc 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;trace_adhoc.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;trace_adhoc.go</span>
<span class="term-fg36">@@ -221,7 +221,7 @@</span> 	var accessList types2.AccessList
 	if args.AccessList != nil {
 		accessList = *args.AccessList
 	}
<span class="term-fg31">-	msg := types.NewMessage(addr, args.To, 0, value, gas, gasPrice, gasFeeCap, gasTipCap, data, accessList, false &#47;* checkNonce *&#47;, false &#47;* isFree *&#47;, maxFeePerBlobGas)</span>
<span class="term-fg32">+	msg := types.NewMessage(addr, args.To, 0, value, gas, gasPrice, gasFeeCap, gasTipCap, data, accessList, false &#47;* checkNonce *&#47;, false &#47;* isFree *&#47;, maxFeePerBlobGas, 0 &#47;* rollupDataGas FIXME *&#47;)</span>
 	return msg, nil
 }
&nbsp;
<span class="term-fg36">@@ -963,7 +963,8 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg31">-	blockCtx := transactions.NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, api._blockReader)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+	blockCtx := transactions.NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, tx, api._blockReader, l1CostFunc)</span>
 	txCtx := core.NewEVMTxContext(msg)
&nbsp;
 	blockCtx.GasLimit = math.MaxUint64
<span class="term-fg36">@@ -1183,8 +1184,9 @@</span> 			vmConfig.Debug = true
 			vmConfig.Tracer = &amp;ot
 		}
&nbsp;
<span class="term-fg32">+		l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
 		&#47;&#47; Get a new instance of the EVM.
<span class="term-fg31">-		blockCtx := transactions.NewEVMBlockContext(engine, header, parentNrOrHash.RequireCanonical, dbtx, api._blockReader)</span>
<span class="term-fg32">+		blockCtx := transactions.NewEVMBlockContext(engine, header, parentNrOrHash.RequireCanonical, dbtx, api._blockReader, l1CostFunc)</span>
 		txCtx := core.NewEVMTxContext(msg)
&nbsp;
 		if useParent {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6fe24961bcb3f6bcc1650b6e" role="button"
                   aria-expanded="false" aria-controls="id-6fe24961bcb3f6bcc1650b6e">
                    <code>turbo/jsonrpc/trace_filtering.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/trace_filtering.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/trace_filtering.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6fe24961bcb3f6bcc1650b6e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;trace_filtering.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;trace_filtering.go</span>
<span class="term-fg1">index b8bfcce2885f815ee8b94a5f182ec9bf8861d6f3..0061d4842922a5e198cae8e6845e2fe374583155 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;trace_filtering.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;trace_filtering.go</span>
<span class="term-fg36">@@ -764,7 +764,8 @@</span> 		vmConfig.Debug = true
 		vmConfig.Tracer = &amp;ot
 		ibs := state.New(cachedReader)
&nbsp;
<span class="term-fg31">-		blockCtx := transactions.NewEVMBlockContext(engine, lastHeader, true &#47;* requireCanonical *&#47;, dbtx, api._blockReader)</span>
<span class="term-fg32">+		l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+		blockCtx := transactions.NewEVMBlockContext(engine, lastHeader, true &#47;* requireCanonical *&#47;, dbtx, api._blockReader, l1CostFunc)</span>
 		txCtx := core.NewEVMTxContext(msg)
 		evm := vm.NewEVM(blockCtx, txCtx, ibs, chainConfig, vmConfig)
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-71efe713e5a21d3d85a3cee5" role="button"
                   aria-expanded="false" aria-controls="id-71efe713e5a21d3d85a3cee5">
                    <code>turbo/jsonrpc/tracing.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/tracing.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/tracing.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+20</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-71efe713e5a21d3d85a3cee5"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;tracing.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;tracing.go</span>
<span class="term-fg1">index ead8a094f95ba8826698df5fdf32bca21599fb3d..567e44c56aa29fd28ad254237a6ec7ba7bd2a2a1 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;tracing.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;tracing.go</span>
<span class="term-fg36">@@ -2,6 +2,7 @@</span> package jsonrpc
&nbsp;
 import (
 	&quot;context&quot;
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
 	&quot;time&quot;
<span class="term-fg36">@@ -191,6 +192,22 @@</span> 		stream.WriteNil()
 		return nil
 	}
&nbsp;
<span class="term-fg32">+	if chainConfig.IsOptimismPreBedrock(blockNum) {</span>
<span class="term-fg32">+		if api.historicalRPCService != nil {</span>
<span class="term-fg32">+			treeResult := &amp;GethTrace{}</span>
<span class="term-fg32">+			if err := api.historicalRPCService.CallContext(ctx, treeResult, &quot;debug_traceTransaction&quot;, hash, config); err != nil {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;historical backend failed: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			result, err := json.Marshal(treeResult)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			stream.WriteRaw(string(result))</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; check pruning to ensure we have history at this block level
 	err = api.BaseAPI.checkPruneHistory(tx, blockNum)
 	if err != nil {
<span class="term-fg36">@@ -309,7 +326,8 @@</span> 	if err != nil {
 		return fmt.Errorf(&quot;convert args to msg: %v&quot;, err)
 	}
&nbsp;
<span class="term-fg31">-	blockCtx := transactions.NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, dbtx, api._blockReader)</span>
<span class="term-fg32">+	l1CostFunc := types.NewL1CostFunc(chainConfig, ibs)</span>
<span class="term-fg32">+	blockCtx := transactions.NewEVMBlockContext(engine, header, blockNrOrHash.RequireCanonical, dbtx, api._blockReader, l1CostFunc)</span>
 	txCtx := core.NewEVMTxContext(msg)
 	&#47;&#47; Trace the transaction and return
 	return transactions.TraceTx(ctx, msg, blockCtx, txCtx, ibs, config, chainConfig, stream, api.evmCallTimeout)
<span class="term-fg36">@@ -431,6 +449,7 @@</span> 		Time:        parent.Time,
 		Difficulty:  new(big.Int).Set(parent.Difficulty),
 		GasLimit:    parent.GasLimit,
 		BaseFee:     &amp;baseFee,
<span class="term-fg32">+		L1CostFunc:  types.NewL1CostFunc(chainConfig, st),</span>
 	}
&nbsp;
 	&#47;&#47; Get a new instance of the EVM</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d3914c0f1c881d0fcdb0dafd" role="button"
                   aria-expanded="false" aria-controls="id-d3914c0f1c881d0fcdb0dafd">
                    <code>turbo/jsonrpc/txpool_api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/jsonrpc/txpool_api_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/jsonrpc/txpool_api_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d3914c0f1c881d0fcdb0dafd"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;txpool_api_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;txpool_api_test.go</span>
<span class="term-fg1">index a21d30a3231d95bd045ae86709fbc280db11e68f..6ce148412dde52fc8724031fa873670432183ab3 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;jsonrpc&#47;txpool_api_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;jsonrpc&#47;txpool_api_test.go</span>
<span class="term-fg36">@@ -35,7 +35,7 @@</span> 	ctx, conn := rpcdaemontest.CreateTestGrpcConn(t, m)
 	txPool := txpool.NewTxpoolClient(conn)
 	ff := rpchelper.New(ctx, nil, txPool, txpool.NewMiningClient(conn), func() {}, m.Log)
 	agg := m.HistoryV3Components()
<span class="term-fg31">-	api := NewTxPoolAPI(NewBaseApi(ff, kvcache.New(kvcache.DefaultCoherentConfig), m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs), m.DB, txPool)</span>
<span class="term-fg32">+	api := NewTxPoolAPI(NewBaseApi(ff, kvcache.New(kvcache.DefaultCoherentConfig), m.BlockReader, agg, false, rpccfg.DefaultEvmCallTimeout, m.Engine, m.Dirs, nil, nil), m.DB, txPool)</span>
&nbsp;
 	expectValue := uint64(1234)
 	txn, err := types.SignTx(types.NewTransaction(0, libcommon.Address{1}, uint256.NewInt(expectValue), params.TxGas, uint256.NewInt(10*params.GWei), nil), *types.LatestSignerForChainID(m.ChainConfig.ChainID), m.Key)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4fab96b5b513e9b7c41f88a4" role="button"
                   aria-expanded="false" aria-controls="id-4fab96b5b513e9b7c41f88a4">
                    <code>turbo/node/node.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/node/node.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/node/node.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4fab96b5b513e9b7c41f88a4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;node&#47;node.go bobanetwork&#47;v3-erigon&#47;turbo&#47;node&#47;node.go</span>
<span class="term-fg1">index 5caf4d045c291c76b80ad176ae76382885d3521c..5b73312d126891830fb5f8349533e4c7c979c529 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;node&#47;node.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;node&#47;node.go</span>
<span class="term-fg36">@@ -4,7 +4,6 @@</span>
 import (
 	&quot;context&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;kv&quot;
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;
<span class="term-fg36">@@ -15,6 +14,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;node&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;node&#47;nodecfg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	erigoncli &quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;cli&quot;
 )
&nbsp;
<span class="term-fg36">@@ -86,6 +86,8 @@</span> 	case &quot;&quot;, networkname.MainnetChainName:
 		if !ctx.IsSet(utils.NetworkIdFlag.Name) {
 			logger.Info(&quot;Starting Erigon on Ethereum mainnet...&quot;)
 		}
<span class="term-fg32">+	case networkname.OptimismGoerliChainName:</span>
<span class="term-fg32">+		logger.Info(&quot;Starting Erigon on Optimism Görli testnet...&quot;)</span>
 	default:
 		logger.Info(&quot;Starting Erigon on&quot;, &quot;devnet&quot;, chain)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-acbc36e6337d28c224fbf01c" role="button"
                   aria-expanded="false" aria-controls="id-acbc36e6337d28c224fbf01c">
                    <code>turbo/silkworm/silkworm.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/silkworm/silkworm.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/silkworm/silkworm.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+26</span></div>
                        <div class="text-start"><span class="text-danger">-74</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-acbc36e6337d28c224fbf01c"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;silkworm&#47;silkworm.go bobanetwork&#47;v3-erigon&#47;turbo&#47;silkworm&#47;silkworm.go</span>
<span class="term-fg1">index 1463637aff0e0d61e0dafdffcb558d10050b8bbe..51fec7888d35cc7a5d1726098be95e47c952e270 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;silkworm&#47;silkworm.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;silkworm&#47;silkworm.go</span>
<span class="term-fg36">@@ -29,25 +29,24 @@</span> #if __cplusplus
 extern &quot;C&quot; {
 #endif
&nbsp;
<span class="term-fg31">-typedef struct MDBX_env MDBX_env;</span>
 typedef struct MDBX_txn MDBX_txn;
&nbsp;
<span class="term-fg31">-#define SILKWORM_OK 0</span>
<span class="term-fg31">-#define SILKWORM_INTERNAL_ERROR 1</span>
<span class="term-fg31">-#define SILKWORM_UNKNOWN_ERROR 2</span>
<span class="term-fg31">-#define SILKWORM_INVALID_HANDLE 3</span>
<span class="term-fg31">-#define SILKWORM_INVALID_PATH 4</span>
<span class="term-fg31">-#define SILKWORM_INVALID_SNAPSHOT 5</span>
<span class="term-fg31">-#define SILKWORM_INVALID_MDBX_TXN 6</span>
<span class="term-fg32">+#define SILKWORM_OK                  0</span>
<span class="term-fg32">+#define SILKWORM_INTERNAL_ERROR      1</span>
<span class="term-fg32">+#define SILKWORM_UNKNOWN_ERROR       2</span>
<span class="term-fg32">+#define SILKWORM_INVALID_HANDLE      3</span>
<span class="term-fg32">+#define SILKWORM_INVALID_PATH        4</span>
<span class="term-fg32">+#define SILKWORM_INVALID_SNAPSHOT    5</span>
<span class="term-fg32">+#define SILKWORM_INVALID_MDBX_TXN    6</span>
 #define SILKWORM_INVALID_BLOCK_RANGE 7
<span class="term-fg31">-#define SILKWORM_BLOCK_NOT_FOUND 8</span>
<span class="term-fg31">-#define SILKWORM_UNKNOWN_CHAIN_ID 9</span>
<span class="term-fg31">-#define SILKWORM_MDBX_ERROR 10</span>
<span class="term-fg31">-#define SILKWORM_INVALID_BLOCK 11</span>
<span class="term-fg31">-#define SILKWORM_DECODING_ERROR 12</span>
<span class="term-fg31">-#define SILKWORM_TOO_MANY_INSTANCES 13</span>
<span class="term-fg31">-#define SILKWORM_INSTANCE_NOT_FOUND 14</span>
<span class="term-fg31">-#define SILKWORM_TERMINATION_SIGNAL 15</span>
<span class="term-fg32">+#define SILKWORM_BLOCK_NOT_FOUND     8</span>
<span class="term-fg32">+#define SILKWORM_UNKNOWN_CHAIN_ID    9</span>
<span class="term-fg32">+#define SILKWORM_MDBX_ERROR          10</span>
<span class="term-fg32">+#define SILKWORM_INVALID_BLOCK       11</span>
<span class="term-fg32">+#define SILKWORM_DECODING_ERROR      12</span>
<span class="term-fg32">+#define SILKWORM_TOO_MANY_INSTANCES  13</span>
<span class="term-fg32">+#define SILKWORM_INSTANCE_NOT_FOUND  14</span>
<span class="term-fg32">+#define SILKWORM_TERMINATION_SIGNAL  15</span>
&nbsp;
 typedef struct SilkwormHandle SilkwormHandle;
&nbsp;
<span class="term-fg36">@@ -83,10 +82,6 @@</span> };
&nbsp;
 SILKWORM_EXPORT int silkworm_add_snapshot(SilkwormHandle* handle, struct SilkwormChainSnapshot* snapshot) SILKWORM_NOEXCEPT;
&nbsp;
<span class="term-fg31">-SILKWORM_EXPORT int silkworm_start_rpcdaemon(SilkwormHandle* handle, MDBX_env* env) SILKWORM_NOEXCEPT;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-SILKWORM_EXPORT int silkworm_stop_rpcdaemon(SilkwormHandle* handle) SILKWORM_NOEXCEPT;</span>
<span class="term-fg31">-</span>
 SILKWORM_EXPORT int silkworm_execute_blocks(
     SilkwormHandle* handle, MDBX_txn* txn, uint64_t chain_id, uint64_t start_block, uint64_t max_block,
     uint64_t batch_size, bool write_change_sets, bool write_receipts, bool write_call_traces,
<span class="term-fg36">@@ -116,18 +111,6 @@</span> int call_silkworm_add_snapshot_func(void* func_ptr, SilkwormHandle* handle, struct SilkwormChainSnapshot* snapshot) {
     return ((silkworm_add_snapshot_func)func_ptr)(handle, snapshot);
 }
&nbsp;
<span class="term-fg31">-typedef int (*silkworm_start_rpcdaemon_func)(SilkwormHandle* handle, MDBX_env* env);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-int call_silkworm_start_rpcdaemon_func(void* func_ptr, SilkwormHandle* handle, MDBX_env* env) {</span>
<span class="term-fg31">-    return ((silkworm_start_rpcdaemon_func)func_ptr)(handle, env);</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-typedef int (*silkworm_stop_rpcdaemon_func)(SilkwormHandle* handle);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-int call_silkworm_stop_rpcdaemon_func(void* func_ptr, SilkwormHandle* handle) {</span>
<span class="term-fg31">-    return ((silkworm_stop_rpcdaemon_func)func_ptr)(handle);</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
 typedef int (*silkworm_execute_blocks_func)(SilkwormHandle* handle, MDBX_txn* txn, uint64_t chain_id, uint64_t start_block,
     uint64_t max_block, uint64_t batch_size, bool write_change_sets, bool write_receipts, bool write_call_traces,
 	uint64_t* last_executed_block, int* mdbx_error_code);
<span class="term-fg36">@@ -180,14 +163,12 @@</span> &#47;&#47; ErrInterrupted is the error returned by Silkworm APIs when stopped by any termination signal.
 var ErrInterrupted = errors.New(&quot;interrupted&quot;)
&nbsp;
 type Silkworm struct {
<span class="term-fg31">-	dllHandle      unsafe.Pointer</span>
<span class="term-fg31">-	instance       *C.SilkwormHandle</span>
<span class="term-fg31">-	initFunc       unsafe.Pointer</span>
<span class="term-fg31">-	finiFunc       unsafe.Pointer</span>
<span class="term-fg31">-	addSnapshot    unsafe.Pointer</span>
<span class="term-fg31">-	startRpcDaemon unsafe.Pointer</span>
<span class="term-fg31">-	stopRpcDaemon  unsafe.Pointer</span>
<span class="term-fg31">-	executeBlocks  unsafe.Pointer</span>
<span class="term-fg32">+	dllHandle     unsafe.Pointer</span>
<span class="term-fg32">+	instance      *C.SilkwormHandle</span>
<span class="term-fg32">+	initFunc      unsafe.Pointer</span>
<span class="term-fg32">+	finiFunc      unsafe.Pointer</span>
<span class="term-fg32">+	addSnapshot   unsafe.Pointer</span>
<span class="term-fg32">+	executeBlocks unsafe.Pointer</span>
 }
&nbsp;
 func New(dllPath string) (*Silkworm, error) {
<span class="term-fg36">@@ -208,27 +189,17 @@</span> 	addSnapshot, err := LoadFunction(dllHandle, &quot;silkworm_add_snapshot&quot;)
 	if err != nil {
 		return nil, fmt.Errorf(&quot;failed to load silkworm function silkworm_add_snapshot: %w&quot;, err)
 	}
<span class="term-fg31">-	startRpcDaemon, err := LoadFunction(dllHandle, &quot;silkworm_start_rpcdaemon&quot;)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;failed to load silkworm function silkworm_start_rpcdaemon: %w&quot;, err)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	stopRpcDaemon, err := LoadFunction(dllHandle, &quot;silkworm_stop_rpcdaemon&quot;)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;failed to load silkworm function silkworm_stop_rpcdaemon: %w&quot;, err)</span>
<span class="term-fg31">-	}</span>
 	executeBlocks, err := LoadFunction(dllHandle, &quot;silkworm_execute_blocks&quot;)
 	if err != nil {
 		return nil, fmt.Errorf(&quot;failed to load silkworm function silkworm_execute_blocks: %w&quot;, err)
 	}
&nbsp;
 	silkworm := &amp;Silkworm{
<span class="term-fg31">-		dllHandle:      dllHandle,</span>
<span class="term-fg31">-		initFunc:       initFunc,</span>
<span class="term-fg31">-		finiFunc:       finiFunc,</span>
<span class="term-fg31">-		addSnapshot:    addSnapshot,</span>
<span class="term-fg31">-		startRpcDaemon: startRpcDaemon,</span>
<span class="term-fg31">-		stopRpcDaemon:  stopRpcDaemon,</span>
<span class="term-fg31">-		executeBlocks:  executeBlocks,</span>
<span class="term-fg32">+		dllHandle:     dllHandle,</span>
<span class="term-fg32">+		initFunc:      initFunc,</span>
<span class="term-fg32">+		finiFunc:      finiFunc,</span>
<span class="term-fg32">+		addSnapshot:   addSnapshot,</span>
<span class="term-fg32">+		executeBlocks: executeBlocks,</span>
 	}
 	status := C.call_silkworm_init_func(silkworm.initFunc, &amp;silkworm.instance) &#47;&#47;nolint:gocritic
 	if status == SILKWORM_OK {
<span class="term-fg36">@@ -312,25 +283,6 @@</span> 	if status == SILKWORM_OK {
 		return nil
 	}
 	return fmt.Errorf(&quot;silkworm_add_snapshot error %d&quot;, status)
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (s *Silkworm) StartRpcDaemon(db kv.RoDB) error {</span>
<span class="term-fg31">-	cEnv := (*C.MDBX_env)(db.CHandle())</span>
<span class="term-fg31">-	status := C.call_silkworm_start_rpcdaemon_func(s.startRpcDaemon, s.instance, cEnv)</span>
<span class="term-fg31">-	&#47;&#47; Handle successful execution</span>
<span class="term-fg31">-	if status == SILKWORM_OK {</span>
<span class="term-fg31">-		return nil</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return fmt.Errorf(&quot;silkworm_start_rpcdaemon error %d&quot;, status)</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (s *Silkworm) StopRpcDaemon() error {</span>
<span class="term-fg31">-	status := C.call_silkworm_stop_rpcdaemon_func(s.stopRpcDaemon, s.instance)</span>
<span class="term-fg31">-	&#47;&#47; Handle successful execution</span>
<span class="term-fg31">-	if status == SILKWORM_OK {</span>
<span class="term-fg31">-		return nil</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return fmt.Errorf(&quot;silkworm_stop_rpcdaemon error %d&quot;, status)</span>
 }
&nbsp;
 func (s *Silkworm) ExecuteBlocks(txn kv.Tx, chainID *big.Int, startBlock uint64, maxBlock uint64, batchSize uint64, writeChangeSets, writeReceipts, writeCallTraces bool) (lastExecutedBlock uint64, err error) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-36cfe868679404cf67f3ca28" role="button"
                   aria-expanded="false" aria-controls="id-36cfe868679404cf67f3ca28">
                    <code>turbo/snapshotsync/freezeblocks/block_snapshots.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/snapshotsync/freezeblocks/block_snapshots.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/freezeblocks/block_snapshots.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-36cfe868679404cf67f3ca28"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots.go</span>
<span class="term-fg1">index 46e3dd32cec525ced3bb96a09f1398a6ebb2261a..96e222d54ee790b01a6442836b88f79bac0259e1 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots.go</span>
<span class="term-fg36">@@ -19,7 +19,6 @@</span> 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	common2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;background&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;cmp&quot;
<span class="term-fg36">@@ -46,6 +45,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;services&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;silkworm&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;
 	&quot;golang.org&#47;x&#47;sync&#47;errgroup&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-77e208d18ac1d72105f62b53" role="button"
                   aria-expanded="false" aria-controls="id-77e208d18ac1d72105f62b53">
                    <code>turbo/snapshotsync/freezeblocks/block_snapshots_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/snapshotsync/freezeblocks/block_snapshots_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/freezeblocks/block_snapshots_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-77e208d18ac1d72105f62b53"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots_test.go</span>
<span class="term-fg1">index 39c0ce607942db85a501d5237510cfcbd607f928..68a3508d412293dcbf141cc3bd8a137b261cd1ec 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;block_snapshots_test.go</span>
<span class="term-fg36">@@ -6,8 +6,6 @@</span> 	&quot;path&#47;filepath&quot;
 	&quot;testing&quot;
 	&quot;testing&#47;fstest&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;compress&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&#47;snaptype&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;recsplit&quot;
<span class="term-fg36">@@ -17,6 +15,8 @@</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;common&#47;math&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 )
&nbsp;
 func createTestSegmentFile(t *testing.T, from, to uint64, name snaptype.Type, dir string, logger log.Logger) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6f7574081ae038d662854283" role="button"
                   aria-expanded="false" aria-controls="id-6f7574081ae038d662854283">
                    <code>turbo/snapshotsync/freezeblocks/bor_snapshots.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/snapshotsync/freezeblocks/bor_snapshots.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/freezeblocks/bor_snapshots.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6f7574081ae038d662854283"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;bor_snapshots.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;bor_snapshots.go</span>
<span class="term-fg1">index b830eec5db370df7627bae64d94c488644f91427..9ef3490643b29bf0c290d08d7f45b58fa811f8b2 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;bor_snapshots.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;bor_snapshots.go</span>
<span class="term-fg36">@@ -16,7 +16,6 @@</span> 	&quot;sync&#47;atomic&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	common2 &quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;background&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;cmp&quot;
<span class="term-fg36">@@ -32,6 +31,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;rawdb&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;eth&#47;ethconfig&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;services&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f5846631d4db6aaee9eb6077" role="button"
                   aria-expanded="false" aria-controls="id-f5846631d4db6aaee9eb6077">
                    <code>turbo/snapshotsync/freezeblocks/dump_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/snapshotsync/freezeblocks/dump_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/freezeblocks/dump_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f5846631d4db6aaee9eb6077"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;dump_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;dump_test.go</span>
<span class="term-fg1">index 1aae85d64618128945dee387d341b35b59e17160..a7c3b95a8d1d346a389f1a0c63d86c7643eb54ed 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;dump_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&#47;dump_test.go</span>
<span class="term-fg36">@@ -5,8 +5,6 @@</span> 	&quot;math&#47;big&quot;
 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;
&nbsp;
<span class="term-fg36">@@ -20,8 +18,10 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;types&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;crypto&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;ethdb&#47;prune&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;rlp&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;freezeblocks&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;stages&#47;mock&quot;
 )
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-42ea963c74f9c197108f0119" role="button"
                   aria-expanded="false" aria-controls="id-42ea963c74f9c197108f0119">
                    <code>turbo/snapshotsync/snapcfg/util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/snapcfg/util.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-24</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-42ea963c74f9c197108f0119"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;snapcfg&#47;util.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&#47;util.go</span>
<span class="term-fg1">rename from erigon-lib&#47;chain&#47;snapcfg&#47;util.go</span>
<span class="term-fg1">rename to turbo&#47;snapshotsync&#47;snapcfg&#47;util.go</span>
<span class="term-fg1">index 8af11e63955c08fc5e8c51ca70227b9d8c76dc06..3ae9044cb967f12ea2aa61086c45e52c4dd8aa29 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;erigon-lib&#47;chain&#47;snapcfg&#47;util.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&#47;util.go</span>
<span class="term-fg36">@@ -6,9 +6,8 @@</span> 	&quot;path&#47;filepath&quot;
 	&quot;strconv&quot;
 	&quot;strings&quot;
&nbsp;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;networkname&quot;</span>
 	snapshothashes &quot;github.com&#47;ledgerwatch&#47;erigon-snapshot&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-snapshot&#47;webseed&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;params&#47;networkname&quot;</span>
 	&quot;github.com&#47;pelletier&#47;go-toml&#47;v2&quot;
 	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;
 )
<span class="term-fg36">@@ -135,25 +134,3 @@</span> 	}
&nbsp;
 	return newCfg(result)
 }
<span class="term-fg31">-</span>
<span class="term-fg31">-var KnownWebseeds = map[string][]string{</span>
<span class="term-fg31">-	networkname.MainnetChainName:    webseedsParse(webseed.Mainnet),</span>
<span class="term-fg31">-	networkname.SepoliaChainName:    webseedsParse(webseed.Sepolia),</span>
<span class="term-fg31">-	networkname.GoerliChainName:     webseedsParse(webseed.Goerli),</span>
<span class="term-fg31">-	networkname.MumbaiChainName:     webseedsParse(webseed.Mumbai),</span>
<span class="term-fg31">-	networkname.BorMainnetChainName: webseedsParse(webseed.BorMainnet),</span>
<span class="term-fg31">-	networkname.GnosisChainName:     webseedsParse(webseed.Gnosis),</span>
<span class="term-fg31">-	networkname.ChiadoChainName:     webseedsParse(webseed.Chiado),</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func webseedsParse(in []byte) (res []string) {</span>
<span class="term-fg31">-	a := map[string]string{}</span>
<span class="term-fg31">-	if err := toml.Unmarshal(in, &amp;a); err != nil {</span>
<span class="term-fg31">-		panic(err)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	for _, l := range a {</span>
<span class="term-fg31">-		res = append(res, l)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	slices.Sort(res)</span>
<span class="term-fg31">-	return res</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4ec85fe479466c06c84d09a5" role="button"
                   aria-expanded="false" aria-controls="id-4ec85fe479466c06c84d09a5">
                    <code>turbo/snapshotsync/snapshotsync.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/snapshotsync/snapshotsync.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/snapshotsync/snapshotsync.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4ec85fe479466c06c84d09a5"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapshotsync.go bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;snapshotsync.go</span>
<span class="term-fg1">index 0661bf84338e044182f2b5f05649b5a04aeb0f29..2d2ef7b30bbac83250a8845d06135b3418f0216b 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapshotsync.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;snapshotsync&#47;snapshotsync.go</span>
<span class="term-fg36">@@ -9,7 +9,6 @@</span> 	&quot;strings&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&quot;
<span class="term-fg31">-	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;chain&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;common&#47;dbg&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;downloader&#47;downloadergrpc&quot;
<span class="term-fg36">@@ -21,6 +20,7 @@</span> 	&quot;github.com&#47;ledgerwatch&#47;erigon-lib&#47;state&quot;
&nbsp;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;core&#47;rawdb&quot;
 	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;services&quot;
<span class="term-fg32">+	&quot;github.com&#47;ledgerwatch&#47;erigon&#47;turbo&#47;snapshotsync&#47;snapcfg&quot;</span>
 	&quot;github.com&#47;ledgerwatch&#47;log&#47;v3&quot;
 )
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6e2d5b092b9e27cd8ec98ac0" role="button"
                   aria-expanded="false" aria-controls="id-6e2d5b092b9e27cd8ec98ac0">
                    <code>turbo/stages/blockchain_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/turbo/stages/blockchain_test.go" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/turbo/stages/blockchain_test.go" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6e2d5b092b9e27cd8ec98ac0"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;turbo&#47;stages&#47;blockchain_test.go bobanetwork&#47;v3-erigon&#47;turbo&#47;stages&#47;blockchain_test.go</span>
<span class="term-fg1">index 4f639b56483b883d385047d293607880f41e373e..d8455f131eb480f6b7d975a98b09ef969dbaac7a 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;turbo&#47;stages&#47;blockchain_test.go</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;turbo&#47;stages&#47;blockchain_test.go</span>
<span class="term-fg36">@@ -487,7 +487,7 @@</span> 	for i, txn := range txs {
 		if bn, _ := rawdb.ReadTxLookupEntry(tx, txn.Hash()); bn != nil {
 			t.Errorf(&quot;drop %d: tx %v found while shouldn&#39;t have been&quot;, i, txn)
 		}
<span class="term-fg31">-		if rcpt, _, _, _, _ := readReceipt(tx, txn.Hash(), m.BlockReader); rcpt != nil {</span>
<span class="term-fg32">+		if rcpt, _, _, _, _ := readReceipt(m.ChainConfig, tx, txn.Hash(), m.BlockReader); rcpt != nil {</span>
 			t.Errorf(&quot;drop %d: receipt %v found while shouldn&#39;t have been&quot;, i, rcpt)
 		}
 	}
<span class="term-fg36">@@ -502,7 +502,7 @@</span>
 		if m.HistoryV3 {
 			&#47;&#47; m.HistoryV3 doesn&#39;t store
 		} else {
<span class="term-fg31">-			if rcpt, _, _, _, _ := readReceipt(tx, txn.Hash(), m.BlockReader); rcpt == nil {</span>
<span class="term-fg32">+			if rcpt, _, _, _, _ := readReceipt(m.ChainConfig, tx, txn.Hash(), m.BlockReader); rcpt == nil {</span>
 				t.Errorf(&quot;add %d: expected receipt to be found&quot;, i)
 			}
 		}
<span class="term-fg36">@@ -516,14 +516,14 @@</span> 		}
 		if m.HistoryV3 {
 			&#47;&#47; m.HistoryV3 doesn&#39;t store
 		} else {
<span class="term-fg31">-			if rcpt, _, _, _, _ := readReceipt(tx, txn.Hash(), m.BlockReader); rcpt == nil {</span>
<span class="term-fg32">+			if rcpt, _, _, _, _ := readReceipt(m.ChainConfig, tx, txn.Hash(), m.BlockReader); rcpt == nil {</span>
 				t.Errorf(&quot;share %d: expected receipt to be found&quot;, i)
 			}
 		}
 	}
 }
&nbsp;
<span class="term-fg31">-func readReceipt(db kv.Tx, txHash libcommon.Hash, br services.FullBlockReader) (*types.Receipt, libcommon.Hash, uint64, uint64, error) {</span>
<span class="term-fg32">+func readReceipt(chainConfig *chain.Config, db kv.Tx, txHash libcommon.Hash, br services.FullBlockReader) (*types.Receipt, libcommon.Hash, uint64, uint64, error) {</span>
 	&#47;&#47; Retrieve the context of the receipt based on the transaction hash
 	blockNumber, err := rawdb.ReadTxLookupEntry(db, txHash)
 	if err != nil {
<span class="term-fg36">@@ -544,7 +544,7 @@</span> 	if err != nil {
 		return nil, libcommon.Hash{}, 0, 0, err
 	}
 	&#47;&#47; Read all the receipts from the block and return the one with the matching hash
<span class="term-fg31">-	receipts := rawdb.ReadReceipts(db, b, senders)</span>
<span class="term-fg32">+	receipts := rawdb.ReadReceipts(chainConfig, db, b, senders)</span>
 	for receiptIndex, receipt := range receipts {
 		if receipt.TxHash == txHash {
 			return receipt, blockHash, *blockNumber, uint64(receiptIndex), nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8fd1f0c917e2bd30b4582192" role="button"
                   aria-expanded="false" aria-controls="id-8fd1f0c917e2bd30b4582192">
                    <code>wmake.ps1</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/wmake.ps1" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/wmake.ps1" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8fd1f0c917e2bd30b4582192"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;wmake.ps1 bobanetwork&#47;v3-erigon&#47;wmake.ps1</span>
<span class="term-fg1">index ddb01d1e63170f7bc62a6403afb0e3c6996de041..5f8b42d6c65e120157b7d254290ad8f6a659b8d5 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;wmake.ps1</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;wmake.ps1</span>
<span class="term-fg36">@@ -405,7 +405,7 @@</span> ## Test Git is installed
 if(!(Test-Git-Installed)) { exit 1 }
&nbsp;
 ## Test GO language is installed AND min version
<span class="term-fg31">-if(!(Test-GO-Installed &quot;1.20&quot;)) { exit 1 }</span>
<span class="term-fg32">+if(!(Test-GO-Installed &quot;1.19&quot;)) { exit 1 }</span>
&nbsp;
 # Build erigon binaries
 Set-Variable -Name &quot;Erigon&quot; -Value ([hashtable]::Synchronized(@{})) -Scope Script</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

                
                    <div class="text-muted">
                        <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-2c44a0ca7e43005ea35ef55b"role="button" aria-expanded="false" aria-controls="id-2c44a0ca7e43005ea35ef55b">
        
            <div class="col-12 col-sm-9 text-start"><h4>Ignored changes</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+36</span></div>
                <div class="text-start"><span class="text-danger">-64</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-2c44a0ca7e43005ea35ef55b">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-037716d8d1b6a85a9aba27e4" role="button"
                   aria-expanded="false" aria-controls="id-037716d8d1b6a85a9aba27e4">
                    <code>.github/ISSUE_TEMPLATE/bug.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/.github/ISSUE_TEMPLATE/bug.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.github/ISSUE_TEMPLATE/bug.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-037716d8d1b6a85a9aba27e4"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.github&#47;ISSUE_TEMPLATE&#47;bug.md bobanetwork&#47;v3-erigon&#47;.github&#47;ISSUE_TEMPLATE&#47;bug.md</span>
<span class="term-fg1">index bf3b5bf2c0a038fb5c578c468737edf4a21fae9d..444463e9ded080fa671b779720d2281b89526ecf 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;.github&#47;ISSUE_TEMPLATE&#47;bug.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.github&#47;ISSUE_TEMPLATE&#47;bug.md</span>
<span class="term-fg36">@@ -16,9 +16,9 @@</span> Commit hash:
&nbsp;
 Erigon Command (with flags&#47;config):
&nbsp;
<span class="term-fg31">-Consensus Layer:</span>
<span class="term-fg32">+Concensus Layer:</span>
&nbsp;
<span class="term-fg31">-Consensus Layer Command (with flags&#47;config):</span>
<span class="term-fg32">+Concensus Layer Command (with flags&#47;config):</span>
&nbsp;
 Chain&#47;Network:
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f7f41fbe0c5232d0cf69058e" role="button"
                   aria-expanded="false" aria-controls="id-f7f41fbe0c5232d0cf69058e">
                    <code>.github/workflows/ci.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/.github/workflows/ci.yml" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.github/workflows/ci.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f7f41fbe0c5232d0cf69058e"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;ci.yml bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">index 6470959c1bbf2a6e4be29748537a45ebb6827311..9c34861192ebb3e02d6aa8be7bcea70914f58275 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg36">@@ -5,10 +5,12 @@</span>     branches:
       - devel
       - alpha
       - &#39;release&#47;**&#39;
<span class="term-fg32">+      - boba-develop</span>
   pull_request:
     branches:
       - devel
       - alpha
<span class="term-fg32">+      - boba-develop</span>
       - &#39;release&#47;**&#39;
     types:
       - opened</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-49a3be314594cdfece050475" role="button"
                   aria-expanded="false" aria-controls="id-49a3be314594cdfece050475">
                    <code>.github/workflows/release.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/.github/workflows/release.yml" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.github/workflows/release.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-49a3be314594cdfece050475"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;release.yml bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;release.yml</span>
<span class="term-fg1">index e3e0d0e24995729f704c9eff5799d8c40b9cd6da..d338b4727a9c9b5f9f00e5743911d681ef4b79cc 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;release.yml</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;release.yml</span>
<span class="term-fg36">@@ -10,9 +10,9 @@</span>   push:
     branches-ignore:
       - &#39;**&#39;
     tags:
<span class="term-fg31">-      - &#39;v*.*.*&#39;</span>
<span class="term-fg32">+      #- &#39;v*.*.*&#39;</span>
       # to be used by fork patch-releases ^^
<span class="term-fg31">-      - &#39;v*.*.*-*&#39;</span>
<span class="term-fg32">+      #- &#39;v*.*.*-*&#39;</span>
   workflow_dispatch:
&nbsp;
 jobs:</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d4402fdf894a1abfeb605e46" role="button"
                   aria-expanded="false" aria-controls="id-d4402fdf894a1abfeb605e46">
                    <code>.github/workflows/test-integration.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/.github/workflows/test-integration.yml" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/.github/workflows/test-integration.yml" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d4402fdf894a1abfeb605e46"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;test-integration.yml bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;test-integration.yml</span>
<span class="term-fg1">index ec526d3f3fafe2ff8cd8008109ff55dad0590148..bb9e4c5b7a7d187c18307eee28261712acb5ee99 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;.github&#47;workflows&#47;test-integration.yml</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;.github&#47;workflows&#47;test-integration.yml</span>
<span class="term-fg36">@@ -5,6 +5,11 @@</span>     branches:
       - devel
       - alpha
       - &#39;release&#47;**&#39;
<span class="term-fg32">+      - boba-develop</span>
<span class="term-fg32">+  pull_request:</span>
<span class="term-fg32">+    branches:</span>
<span class="term-fg32">+      - boba-develop</span>
<span class="term-fg32">+      - &#39;release&#47;**&#39;</span>
   schedule:
     - cron: &#39;20 16 * * *&#39; # daily at 16:20 UTC
   workflow_dispatch:</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5da5b9d8f9fec1c3c5f36a97" role="button"
                   aria-expanded="false" aria-controls="id-5da5b9d8f9fec1c3c5f36a97">
                    <code>Makefile</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/Makefile" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/Makefile" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5da5b9d8f9fec1c3c5f36a97"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;Makefile bobanetwork&#47;v3-erigon&#47;Makefile</span>
<span class="term-fg1">index 68746589fd7c49e8fa11d1fdc0712d01f0b2ec50..a213dc0f06e965adefc4d26bf7e64df47ef04a78 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;Makefile</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;Makefile</span>
<span class="term-fg36">@@ -11,6 +11,7 @@</span> # if using volume-mounting data dir, then must exist on host OS
 DOCKER_UID ?= $(shell id -u)
 DOCKER_GID ?= $(shell id -g)
 DOCKER_TAG ?= thorax&#47;erigon:latest
<span class="term-fg32">+DOCKER_REPO ?= bobanetwork&#47;op-erigon:latest</span>
&nbsp;
 # Variables below for building on host OS, and are ignored for docker
 #
<span class="term-fg36">@@ -42,8 +43,8 @@</span> default: all
&nbsp;
 ## go-version:                        print and verify go version
 go-version:
<span class="term-fg31">-	@if [ $(shell $(GO) version | cut -c 16-17) -lt 20 ]; then \</span>
<span class="term-fg31">-		echo &quot;minimum required Golang version is 1.20&quot;; \</span>
<span class="term-fg32">+	@if [ $(shell $(GO) version | cut -c 16-17) -lt 19 ]; then \</span>
<span class="term-fg32">+		echo &quot;minimum required Golang version is 1.19&quot;; \</span>
 		exit 1 ;\
 	fi
&nbsp;
<span class="term-fg36">@@ -71,7 +72,7 @@</span> 		--build-arg GID=${DOCKER_GID} \
 		${DOCKER_FLAGS} \
 		.
&nbsp;
<span class="term-fg31">-xdg_data_home :=  ~&#47;.local&#47;share</span>
<span class="term-fg32">+xdg_data_home := ~&#47;.local&#47;share</span>
 ifdef XDG_DATA_HOME
 	xdg_data_home = $(XDG_DATA_HOME)
 endif
<span class="term-fg36">@@ -178,6 +179,9 @@</span> clean:
 	go clean -cache
 	rm -fr build&#47;*
&nbsp;
<span class="term-fg32">+format:</span>
<span class="term-fg32">+	@find .&#47; -type f -name &quot;*.go&quot; -exec gofmt -w {} \;</span>
<span class="term-fg32">+</span>
 # The devtools target installs tools required for &#39;go generate&#39;.
 # You need to put $GOBIN (or $GOPATH&#47;bin) in your PATH to use &#39;go generate&#39;.
&nbsp;
<span class="term-fg36">@@ -211,7 +215,7 @@</span> 	cd $(path) &amp;&amp; go test -gcflags &quot;-m -m&quot; -run none -bench=BenchmarkJumpdest* -benchmem -memprofile mem.out
&nbsp;
 ## git-submodules:                    update git submodules
 git-submodules:
<span class="term-fg31">-	@[ -d &quot;.git&quot; ] || (echo &quot;Not a git repository&quot; &amp;&amp; exit 1)</span>
<span class="term-fg32">+	@[ -d &quot;.git&quot; ] || [ -f &quot;.gitmodules&quot; ] || (echo &quot;Not a git repository&quot; &amp;&amp; exit 1)</span>
 	@echo &quot;Updating git submodules&quot;
 	@# Dockerhub using .&#47;hooks&#47;post-checkout to set submodules, so this line will fail on Dockerhub
 	@# these lines will also fail if ran as root in a non-root user&#39;s checked out repository
<span class="term-fg36">@@ -251,8 +255,8 @@</span> 		-w &#47;go&#47;src&#47;$(PACKAGE_NAME) \
 		ghcr.io&#47;goreleaser&#47;goreleaser-cross:${GOLANG_CROSS_VERSION} \
 		--clean --skip-validate
&nbsp;
<span class="term-fg31">-	@docker image push --all-tags thorax&#47;erigon</span>
<span class="term-fg31">-	@docker image push --all-tags ghcr.io&#47;ledgerwatch&#47;erigon</span>
<span class="term-fg32">+	@docker image push --all-tags ${DOCKER_REPO}</span>
<span class="term-fg32">+	#@docker image push --all-tags ghcr.io&#47;ledgerwatch&#47;erigon</span>
&nbsp;
 # since DOCKER_UID, DOCKER_GID are default initialized to the current user uid&#47;gid,
 # we need separate envvars to facilitate creation of the erigon user on the host OS.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f5031f1f24eba2b9c2891b80" role="button"
                   aria-expanded="false" aria-controls="id-f5031f1f24eba2b9c2891b80">
                    <code>README.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/README.md" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/README.md" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f5031f1f24eba2b9c2891b80"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;README.md bobanetwork&#47;v3-erigon&#47;README.md</span>
<span class="term-fg1">index df468a6df98f9b8d298c44382c5fc67806d51610..ab6b6221a219095ba5e99521c8f53e30f8847463 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;README.md</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;README.md</span>
<span class="term-fg36">@@ -64,7 +64,7 @@</span> Bear in mind that SSD performance deteriorates when close to capacity.
&nbsp;
 RAM: &gt;=16GB, 64-bit architecture.
&nbsp;
<span class="term-fg31">-[Golang version &gt;= 1.20](https:&#47;&#47;golang.org&#47;doc&#47;install); GCC 10+ or Clang; On Linux: kernel &gt; v4</span>
<span class="term-fg32">+[Golang version &gt;= 1.19](https:&#47;&#47;golang.org&#47;doc&#47;install); GCC 10+ or Clang; On Linux: kernel &gt; v4</span>
&nbsp;
 &lt;code&gt;🔬 more details on disk storage [here](https:&#47;&#47;erigon.substack.com&#47;p&#47;disk-footprint-changes-in-new-erigon?s=r)
 and [here](https:&#47;&#47;ledgerwatch.github.io&#47;turbo_geth_release.html#Disk-space).&lt;&#47;code&gt;
<span class="term-fg36">@@ -141,7 +141,7 @@</span>   LvlDebug = 4
   LvlTrace = 5
 ```
&nbsp;
<span class="term-fg31">-To set an output dir for logs to be collected on disk, please set `--log.dir.path` If you want to change the filename produced from `erigon` you should also set the `--log.dir.prefix` flag to an alternate name. The flag `--log.dir.verbosity` is</span>
<span class="term-fg32">+To set an output dir for logs to be collected on disk, please set `--log.dir.path` If you want to change the filename prodiced from `erigon` you should also set the `--log.dir.prefix` flag to an alternate name. The flag `--log.dir.verbosity` is</span>
 also available to control the verbosity of this logging, with the same int value as above, or the string value e.g. &#39;
 debug&#39; or &#39;info&#39;. Default verbosity is &#39;debug&#39; (4), for disk logging.
&nbsp;
<span class="term-fg36">@@ -210,7 +210,7 @@</span>   executable. All binaries are placed in `.\build\bin\` subfolder. There are some requirements for a successful native
   build on windows :
     * [Git](https:&#47;&#47;git-scm.com&#47;downloads) for Windows must be installed. If you&#39;re cloning this repository is very
       likely you already have it
<span class="term-fg31">-    * [GO Programming Language](https:&#47;&#47;golang.org&#47;dl&#47;) must be installed. Minimum required version is 1.20</span>
<span class="term-fg32">+    * [GO Programming Language](https:&#47;&#47;golang.org&#47;dl&#47;) must be installed. Minimum required version is 1.19</span>
     * GNU CC Compiler at least version 10 (is highly suggested that you install `chocolatey` package manager - see
       following point)
     * If you need to build MDBX tools (i.e. `.\wmake.ps1 db-tools`)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ae731a05ccf1489bd59dff46" role="button"
                   aria-expanded="false" aria-controls="id-ae731a05ccf1489bd59dff46">
                    <code>go.sum</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ledgerwatch/erigon/blob/6edaee1853ba4a12fcb68e050ffa22be94615dc0/go.sum" target="_blank">ledgerwatch/erigon <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/bobanetwork/v3-erigon/blob/354888f875ee9817c4ceeffa80af1554f98c6495/go.sum" target="_blank">bobanetwork/v3-erigon <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-51</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ae731a05ccf1489bd59dff46"><span class="term-fg1">diff --git ledgerwatch&#47;erigon&#47;go.sum bobanetwork&#47;v3-erigon&#47;go.sum</span>
<span class="term-fg1">index c9d73f74248212328dac1db559be68b11d09f663..07a2db5aac393fcbd1527c589225800ce314613f 100644</span>
<span class="term-fg1">--- ledgerwatch&#47;erigon&#47;go.sum</span>
<span class="term-fg1">+++ bobanetwork&#47;v3-erigon&#47;go.sum</span>
<span class="term-fg36">@@ -141,42 +141,6 @@</span> github.com&#47;anmitsu&#47;go-shlex v0.0.0-20161002113705-648efa622239&#47;go.mod h1:2FmKhYUyUczH0OGQWaF5ceTx0UBShxjsH6f8oGKYe2c=
 github.com&#47;apache&#47;thrift v0.12.0&#47;go.mod h1:cp2SuWMxlEZw2r+iP2GNCdIi4C1qmUzdZFSVb+bacwQ=
 github.com&#47;arbovm&#47;levenshtein v0.0.0-20160628152529-48b4e1c0c4d0 h1:jfIu9sQUG6Ig+0+Ap1h4unLjW6YQJpKZVmUzxsD4E&#47;Q=
 github.com&#47;arbovm&#47;levenshtein v0.0.0-20160628152529-48b4e1c0c4d0&#47;go.mod h1:t2tdKJDJF9BV14lnkjHmOQgcvEKgtqs5a1N3LNdJhGE=
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2 h1:+LXZ0sgo8quN9UOKXXzAWRT3FWd4NxeXWOZom9pE7GA=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2&#47;go.mod h1:ErQhvNuEMhJjweavOYhxVkn2RUx7kQXVATHrjKtxIpM=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14 h1:Sc82v7tDQ&#47;vdU1WtuSyzZ1I7y&#47;68j&#47;&#47;HJ6uozND1IDs=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;aws&#47;protocol&#47;eventstream v1.4.14&#47;go.mod h1:9NCTOURS8OpxvoAVHq79LK81&#47;zC78hfRWFn+aL0SPcY=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0 h1:AdzDvwH6dWuVARCl3RTLGRc4Ogy+N7yLFxVxXe1ClQ0=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.19.0&#47;go.mod h1:ZwDUgFnQgsazQTnWfeLWk5GjeqTQTL8lMkoE1UXzxdE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43 h1:LU8vo40zBlo3R7bAvBVy&#47;ku4nxGEyZe9N8MqAeFTzF8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43&#47;go.mod h1:zWJBz1Yf1ZtX5NGax9ZdNjhhI4rgjfgsyk6vTY1yfVg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13 h1:PIktER+hwIG286DqXyvVENjgLTAwGgoeriLDD5C+YlQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13&#47;go.mod h1:f&#47;Ib&#47;qYjhV2&#47;qdsf79H3QP&#47;eRE4AkVyEf6sk7XfZ1tg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43 h1:nFBQlGtkbPzp&#47;NjZLuFxRqmT91rLJkgvsEQs68h962Y=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;configsources v1.1.43&#47;go.mod h1:auo+PiyLl0n1l8A0e8RIeR8tOzYPfZZH&#47;JNlrJ8igTQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37 h1:JRVhO25+r3ar2mKGP7E0LDl8K9&#47;G36gjlqca5iQbaqc=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;endpoints&#47;v2 v2.4.37&#47;go.mod h1:Qe+2KtKml+FEsQF&#47;DHmDV+xjtche&#47;hwoF75EG4UlHW8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45 h1:hze8YsjSh8Wl1rYa1CJpRmXP21BvOBuc76YhW0HsuQ4=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;ini v1.3.45&#47;go.mod h1:lD5M20o09&#47;LCuQ2mE62Mb&#47;iSdSlCNuj6H5ci7tW7OsE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6 h1:wmGLw2i8ZTlHLw7a9ULGfQbuccw8uIiNr6sol5bFzc8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;internal&#47;v4a v1.1.6&#47;go.mod h1:Q0Hq2X&#47;NuL7z8b1Dww8rmOFl+jzusKEcyvkKspwdpyc=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15 h1:7R8uRYyXzdD71KWVCL78lJZltah6VVznXBazvKjfH58=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;accept-encoding v1.9.15&#47;go.mod h1:26SQUPcTNgV1Tapwdt4a1rOsYRsnBsJHLMPoxK2b0d8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38 h1:skaFGzv+3kA+v2BPKhuekeb1Hbb105+44r8ASC+q5SE=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;checksum v1.1.38&#47;go.mod h1:epIZoRSSbRIwLPJU5F+OldHhwZPBdpDeQkRdCeY3+00=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37 h1:WWZA&#47;I2K4ptBS1kg0kV1JbBtG&#47;umed0vwHRrmcr9z7k=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37&#47;go.mod h1:vBmDnwWXWxNPFRMmG2m&#47;3MKOe+xEcMDo1tanpaWCcck=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6 h1:9ulSU5ClouoPIYhDQdg9tpl83d5Yb91PXTKK+17q+ow=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;s3shared v1.15.6&#47;go.mod h1:lnc2taBsR9nTlz9meD+lhFZZ9EWY712QHrRflWpTcOA=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2 h1:Ll5&#47;YVCOzRB+gxPqs2uD0R7&#47;MyATC0w85626glSKmp4=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;s3 v1.40.2&#47;go.mod h1:Zjfqt7KhQK+PO1bbOsFNzKgaq7TcxzmEoDWN8lM0qzQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2 h1:JuPGc7IkOP4AaqcZSIcyqLpFSqBWK32rM9+a1g6u73k=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2&#47;go.mod h1:gsL4keucRCgW+xA85ALBpRFfdSLH4kHOVSnLMSuBECo=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 h1:HFiiRkf1SdaAmV3&#47;BHOFZ9DjFynPHj8G&#47;UIO1lQS+fk=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3&#47;go.mod h1:a7bHA82fyUXOm+ZSWKU6PIoBxrjSprdLoM8xPYvzYVg=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 h1:0BkLfgeDjfZnZ+MhB3ONb01u9pwFYTCZVhlsSSBvlbU=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2&#47;go.mod h1:Eows6e1uQEsc4ZaHANmsPRzAKcVDrcmjjWiih2+HUUQ=</span>
<span class="term-fg31">-github.com&#47;aws&#47;smithy-go v1.15.0 h1:PS&#47;durmlzvAFpQHDs4wi4sNNP9ExsqZh6IlfdHXgKK8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;smithy-go v1.15.0&#47;go.mod h1:Tg+OJXh4MB2R&#47;uN61Ko2f6hTZwB&#47;ZYGOtib8J3gBHzA=</span>
 github.com&#47;bahlo&#47;generic-list-go v0.2.0 h1:5sz&#47;EEAK+ls5wF+NeqDpk5+iNdMDXrh3z3nPnH1Wvgk=
 github.com&#47;bahlo&#47;generic-list-go v0.2.0&#47;go.mod h1:2KvAjgMlE5NNynlg&#47;5iLrrCCZ2+5xWbdbCW3pNTGyYg=
 github.com&#47;benbjohnson&#47;clock v1.1.0&#47;go.mod h1:J11&#47;hYXuz8f4ySSvYwY0FKfm+ezbsZBKZxNJlLklBHA=
<span class="term-fg36">@@ -200,10 +164,9 @@</span> github.com&#47;bradfitz&#47;iter v0.0.0-20140124041915-454541ec3da2&#47;go.mod h1:PyRFw1Lt2wKX4ZVSQ2mk+PeDa1rxyObEDlApuIsUKuo=
 github.com&#47;bradfitz&#47;iter v0.0.0-20190303215204-33e6a9893b0c&#47;go.mod h1:PyRFw1Lt2wKX4ZVSQ2mk+PeDa1rxyObEDlApuIsUKuo=
 github.com&#47;bradfitz&#47;iter v0.0.0-20191230175014-e8f45d346db8 h1:GKTyiRCL6zVf5wWaqKnf+7Qs6GbEPfd4iMOitWzXJx8=
 github.com&#47;bradfitz&#47;iter v0.0.0-20191230175014-e8f45d346db8&#47;go.mod h1:spo1JLcs67NmW1aVLEgtA8Yy1elc+X8y5SRW1sFW4Og=
<span class="term-fg31">-github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.1.3 h1:xM&#47;n3yIhHAhHy04z4i43C8p4ehixJZMsnrVJkgl+MTE=</span>
<span class="term-fg31">-github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.1.3&#47;go.mod h1:ctjw4H1kknNJmRN4iP1R7bTQ+v3GJkZBd6mui8ZsAZE=</span>
<span class="term-fg32">+github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.2.0 h1:fzn1qaOt32TuLjFlkzYSsBC35Q3KUjT1SwPxiMSCF5k=</span>
<span class="term-fg32">+github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.2.0&#47;go.mod h1:U7MHm051Al6XmscBQ0BoNydpOTsFAn707034b5nY8zU=</span>
 github.com&#47;btcsuite&#47;btcd&#47;chaincfg&#47;chainhash v1.0.1 h1:q0rUy8C&#47;TYNBQS1+CGKw68tLOFYSNEs0TFnxxnS9+4U=
<span class="term-fg31">-github.com&#47;btcsuite&#47;btcd&#47;chaincfg&#47;chainhash v1.0.1&#47;go.mod h1:7SFka0XMvUgj3hfZtydOrQY2mwhPclbT2snogU7SQQc=</span>
 github.com&#47;buger&#47;jsonparser v0.0.0-20181115193947-bf1c66bbce23&#47;go.mod h1:bbYlZJ7hK1yFx9hf58LP0zeX7UjIGs20ufpu3evjr+s=
 github.com&#47;c2h5oh&#47;datasize v0.0.0-20220606134207-859f65c6625b h1:6+ZFm0flnudZzdSE0JxlhR2hKnGPcNB35BjQf4RYQDY=
 github.com&#47;c2h5oh&#47;datasize v0.0.0-20220606134207-859f65c6625b&#47;go.mod h1:S&#47;7n9copUssQ56c7aAgHqftWO4LTf4xY6CGWt8Bc+3M=
<span class="term-fg36">@@ -284,8 +247,8 @@</span> github.com&#47;envoyproxy&#47;go-control-plane v0.9.4&#47;go.mod h1:6rpuAdCZL397s3pYoYcLgu1mIlRU8Am5FuJP05cCM98=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.7&#47;go.mod h1:cwu0lG7PUMfa9snN8LXBig5ynNVH9qI8YYLbd1fK2po=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.9-0.20201210154907-fd9021fe5dad&#47;go.mod h1:cXg6YxExXjJnVBQHBLXeUAgxn2UodCpnH306RInaBQk=
 github.com&#47;envoyproxy&#47;protoc-gen-validate v0.1.0&#47;go.mod h1:iSmxcyjqTsJpI2R4NaDN7+kN2VEUnK&#47;pcBlmesArF7c=
<span class="term-fg31">-github.com&#47;erigontech&#47;mdbx-go v0.27.19 h1:3jugN7wNmVZ4zDk4heLMPAGuOXuCG&#47;0&#47;DfzjlGB48kk=</span>
<span class="term-fg31">-github.com&#47;erigontech&#47;mdbx-go v0.27.19&#47;go.mod h1:FAMxbOgqOnRDx51j8HjuJZIgznbDwjX7LItd+&#47;UWyA4=</span>
<span class="term-fg32">+github.com&#47;erigontech&#47;mdbx-go v0.27.17 h1:+LOuGmdrD74psBVHDaS3cFXzI9tTSfLcUvOUtMwX2Ok=</span>
<span class="term-fg32">+github.com&#47;erigontech&#47;mdbx-go v0.27.17&#47;go.mod h1:FAMxbOgqOnRDx51j8HjuJZIgznbDwjX7LItd+&#47;UWyA4=</span>
 github.com&#47;fjl&#47;gencodec v0.0.0-20220412091415-8bb9e558978c h1:CndMRAH4JIwxbW8KYq6Q+cGWcGHz0FjGR3QqcInWcW0=
 github.com&#47;fjl&#47;gencodec v0.0.0-20220412091415-8bb9e558978c&#47;go.mod h1:AzA8Lj6YtixmJWL+wkKoBGsLWy9gFrAzi4g+5bCKwpY=
 github.com&#47;flynn&#47;go-shlex v0.0.0-20150515145356-3f9db97f8568&#47;go.mod h1:xEzjJPgXI435gkrCt3MPfRiAkVrwSbHsst4LCFVfpJc=
<span class="term-fg36">@@ -411,7 +374,6 @@</span> github.com&#47;google&#47;go-cmp v0.5.2&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
 github.com&#47;google&#47;go-cmp v0.5.4&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
 github.com&#47;google&#47;go-cmp v0.5.5&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
 github.com&#47;google&#47;go-cmp v0.5.6&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
<span class="term-fg31">-github.com&#47;google&#47;go-cmp v0.5.8&#47;go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=</span>
 github.com&#47;google&#47;go-cmp v0.5.9 h1:O2Tfq5qg4qc4AmwVlvv0oLiVAGB7enBSJ2x2DqQFi38=
 github.com&#47;google&#47;go-cmp v0.5.9&#47;go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=
 github.com&#47;google&#47;go-github v17.0.0+incompatible&#47;go.mod h1:zLgOLi98H3fifZn+44m+umXrS52loVEgC2AApnigrVQ=
<span class="term-fg36">@@ -498,8 +460,6 @@</span> github.com&#47;jbenet&#47;go-temp-err-catcher v0.1.0&#47;go.mod h1:0kJRvmDZXNMIiJirNPEYfhpPwbGVtZVWC34vc5WLsDk=
 github.com&#47;jedib0t&#47;go-pretty&#47;v6 v6.4.7 h1:lwiTJr1DEkAgzljsUsORmWsVn5MQjt1BPJdPCtJ6KXE=
 github.com&#47;jedib0t&#47;go-pretty&#47;v6 v6.4.7&#47;go.mod h1:Ndk3ase2CkQbXLLNf5QDHoYb6J9WtVfmHZu9n8rk2xs=
 github.com&#47;jellevandenhooff&#47;dkim v0.0.0-20150330215556-f50fe3d243e1&#47;go.mod h1:E0B&#47;fFc00Y+Rasa88328GlI&#47;XbtyysCtTHZS8h7IrBU=
<span class="term-fg31">-github.com&#47;jmespath&#47;go-jmespath v0.4.0&#47;go.mod h1:T8mJZnbsbmF+m6zOOFylbeCJqk5+pHWvzYPziyZiYoo=</span>
<span class="term-fg31">-github.com&#47;jmespath&#47;go-jmespath&#47;internal&#47;testify v1.5.1&#47;go.mod h1:L3OGu8Wl2&#47;fWfCI6z80xFu9LTZmf1ZRjMHUOPmWr69U=</span>
 github.com&#47;json-iterator&#47;go v1.1.6&#47;go.mod h1:+SdeFBvtyEkXs7REEP0seUULqWtbJapLOCVDaaPEHmU=
 github.com&#47;json-iterator&#47;go v1.1.9&#47;go.mod h1:KdQUCv79m&#47;52Kvf8AW2vK1V8akMuk1QjK&#47;uOdHXbAo4=
 github.com&#47;json-iterator&#47;go v1.1.12 h1:PV8peI4a0ysnczrg+LtxykD8LfKY9ML6u2jnxaEnrnM=
<span class="term-fg36">@@ -536,11 +496,12 @@</span> github.com&#47;kr&#47;pty v1.1.3&#47;go.mod h1:pFQYn66WHrOpPYNljwOMqo10TkYh1fy3cYio2l3bCsQ=
 github.com&#47;kr&#47;text v0.1.0&#47;go.mod h1:4Jbv+DJW3UT&#47;LiOwJeYQe1efqtUx&#47;iVham&#47;4vfdArNI=
 github.com&#47;kr&#47;text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=
 github.com&#47;kr&#47;text v0.2.0&#47;go.mod h1:eLer722TekiGuMkidMxC&#47;pM04lWEeraHUUmBw8l2grE=
<span class="term-fg31">-github.com&#47;kylelemons&#47;godebug v0.0.0-20170224010052-a616ab194758 h1:0D5M2HQSGD3PYPwICLl+&#47;9oulQauOuETfgFvhBDffs0=</span>
<span class="term-fg32">+github.com&#47;kylelemons&#47;godebug v1.1.0 h1:RPNrshWIDI6G2gRW9EHilWtl7Z6Sb1BR0xunSBf0SNc=</span>
<span class="term-fg32">+github.com&#47;kylelemons&#47;godebug v1.1.0&#47;go.mod h1:9&#47;0rRGxNHcop5bhtWyNeEfOS8JIWk580+fNqagV&#47;RAw=</span>
 github.com&#47;leanovate&#47;gopter v0.2.9 h1:fQjYxZaynp97ozCzfOyOuAGOU4aU&#47;z37zf&#47;tOujFk7c=
 github.com&#47;leanovate&#47;gopter v0.2.9&#47;go.mod h1:U2L&#47;78B+KVFIx2VmW6onHJQzXtFb+p5y3y2Sh+Jxxv8=
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084 h1:5FFMJ67en&#47;bG3w335e3KW4fcqX65k6Xel6DsoAH7Mho=</span>
<span class="term-fg31">-github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231018041646-a68ea6e20084&#47;go.mod h1:3AuPxZc85jkehh&#47;HA9h8gabv5MSi3kb&#47;ddtzBsTVJFo=</span>
<span class="term-fg32">+github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231014011414-bfa3a30f55b2 h1:p6WVs6M6N6QhIK6pIS3c7CSVUgvCx2XIKz9Fdak1ADA=</span>
<span class="term-fg32">+github.com&#47;ledgerwatch&#47;erigon-snapshot v1.3.1-0.20231014011414-bfa3a30f55b2&#47;go.mod h1:3AuPxZc85jkehh&#47;HA9h8gabv5MSi3kb&#47;ddtzBsTVJFo=</span>
 github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0 h1:iDwrXe0PVwBC68Dd94YSsHbMgQ3ufsgjzXtFNFVZFRk=
 github.com&#47;ledgerwatch&#47;log&#47;v3 v3.9.0&#47;go.mod h1:EiAY6upmI&#47;6LkNhOVxb4eVsmsP11HZCnZ3PlJMjYiqE=
 github.com&#47;ledgerwatch&#47;secp256k1 v1.0.0 h1:Usvz87YoTG0uePIV8woOof5cQnLXGYa162rFf3YnwaQ=
<span class="term-fg36">@@ -1329,8 +1290,8 @@</span> google.golang.org&#47;genproto v0.0.0-20201210142538-e3217bee35cc&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
 google.golang.org&#47;genproto v0.0.0-20201214200347-8c77b98c765d&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
 google.golang.org&#47;genproto v0.0.0-20210108203827-ffc7fda8c3d7&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
 google.golang.org&#47;genproto v0.0.0-20210226172003-ab064af71705&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
<span class="term-fg31">-google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d h1:uvYuEyMHKNt+lT4K3bN6fGswmK8qSvcreM3BwjDh+y4=</span>
<span class="term-fg31">-google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230822172742-b8732ec3820d&#47;go.mod h1:+Bk1OCOj40wS2hwAMA+aCW9ypzm63QTBBHp6lQ3p+9M=</span>
<span class="term-fg32">+google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98 h1:bVf09lpb+OJbByTj913DRJioFFAjf&#47;ZGxEz7MajTp2U=</span>
<span class="term-fg32">+google.golang.org&#47;genproto&#47;googleapis&#47;rpc v0.0.0-20230711160842-782d3b101e98&#47;go.mod h1:TUfxEVdsvPg18p6AslUXFoLdpED4oBnGwyqk3dV1XzM=</span>
 google.golang.org&#47;grpc v1.14.0&#47;go.mod h1:yo6s7OP7yaDglbqo1J04qKzAhqBH6lvTonzMVmEdcZw=
 google.golang.org&#47;grpc v1.16.0&#47;go.mod h1:0JHn&#47;cJsOMiMfNA9+DeHDlAU7KAAB5GDlYFpa9MZMio=
 google.golang.org&#47;grpc v1.17.0&#47;go.mod h1:6QZJwpn2B+Zp71q&#47;5VxRsJ6NXXVCE5NRUHRo+f3cWCs=
<span class="term-fg36">@@ -1350,8 +1311,8 @@</span> google.golang.org&#47;grpc v1.31.1&#47;go.mod h1:N36X2cJ7JwdamYAgDz+s+rVMFjt3numwzf&#47;HckM8pak=
 google.golang.org&#47;grpc v1.33.2&#47;go.mod h1:JMHMWHQWaTccqQQlmk3MJZS+GWXOdAesneDmEnv2fbc=
 google.golang.org&#47;grpc v1.34.0&#47;go.mod h1:WotjhfgOW&#47;POjDeRt8vscBtXq+2VjORFy659qA51WJ8=
 google.golang.org&#47;grpc v1.35.0&#47;go.mod h1:qjiiYl8FncCW8feJPdyg3v6XW24KsRHe+dy9BAGRRjU=
<span class="term-fg31">-google.golang.org&#47;grpc v1.59.0 h1:Z5Iec2pjwb+LEOqzpB2MR12&#47;eKFhDPhuqW91O+4bwUk=</span>
<span class="term-fg31">-google.golang.org&#47;grpc v1.59.0&#47;go.mod h1:aUPDwccQo6OTjy7Hct4AfBPD1GptF4fyUjIkQ9YtF98=</span>
<span class="term-fg32">+google.golang.org&#47;grpc v1.58.3 h1:BjnpXut1btbtgN&#47;6sp+brB2Kbm2LjNXnidYujAVbSoQ=</span>
<span class="term-fg32">+google.golang.org&#47;grpc v1.58.3&#47;go.mod h1:tgX3ZQDlNJGU96V6yHh1T&#47;JeoBQ2TXdr43YbYSsCJk0=</span>
 google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0 h1:rNBFJjBCOgVr9pWD7rs&#47;knKL4FRTKgpZmsRfV214zcA=
 google.golang.org&#47;grpc&#47;cmd&#47;protoc-gen-go-grpc v1.3.0&#47;go.mod h1:Dk1tviKTvMCz5tvh7t+fh94dhmQVHuCt2OzJB3CTW9Y=
 google.golang.org&#47;protobuf v0.0.0-20200109180630-ec00e32a8dfd&#47;go.mod h1:DFci5gLYBciE7Vtevhsrf46CRTquxDuWsQurQQe4oz8=</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

                    </div>
                
            </div>
        </main>
    </div>

    <footer class="col-xl-10 col-xxl-8 mx-auto px-3 pt-5 my-5 text-muted border-top">
        <p>Fork-diff overview of <a href="https://github.com/bobanetwork/v3-erigon">op-erigon</a>, a fork of <a href="https://github.com/ledgerwatch/erigon">erigon</a>. and execution-engine of the <a href="https://github.com/ethereum-optimism/optimism">OP Stack</a>.</p>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const storedTheme = localStorage.getItem('theme')

        // Get the preferred theme from the user's OS
        const getPreferredTheme = () => {
            if (storedTheme) {
                return storedTheme
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        // Set the bootstrap theme
        const setTheme = function (theme) {
            document.documentElement.setAttribute('data-bs-theme', theme)
            if (theme === 'dark') {
                document.getElementById('dark-mode-toggle').setAttribute('checked', true)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-high-fill', 'bi-brightness-low')
            } else {
                document.getElementById('dark-mode-toggle').setAttribute('checked', false)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-low', 'bi-brightness-high-fill')
            }
        }

        // Returns true if the current theme is dark
        const isDark = () => {
            return document.documentElement.getAttribute('data-bs-theme') === 'dark'
        }

        // Toggles dark mode
        const toggleDarkMode = () => {
            const newTheme = isDark() ? 'light' : 'dark'
            setTheme(newTheme)
            localStorage.setItem('theme', newTheme)
        }

        // Set the preferred theme on page load
        window.onload = () => {
            // Set preferred theme
            setTheme(getPreferredTheme());
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        }

        // Toggle dark mode when the toggle button is clicked
        addEventListener("click", (event) => {
            if (event.target.id === 'dark-mode-toggle') {
                toggleDarkMode();
                // De-focus the toggle
                document.activeElement.blur()
            }
        });
    </script>
</body>
</html>
